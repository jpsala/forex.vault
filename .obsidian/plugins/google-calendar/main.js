/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var UO=Object.create;var fu=Object.defineProperty,FO=Object.defineProperties,qO=Object.getOwnPropertyDescriptor,GO=Object.getOwnPropertyDescriptors,VO=Object.getOwnPropertyNames,r_=Object.getOwnPropertySymbols,jO=Object.getPrototypeOf,n_=Object.prototype.hasOwnProperty,HO=Object.prototype.propertyIsEnumerable;var i_=(t,e,r)=>e in t?fu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$n=(t,e)=>{for(var r in e||(e={}))n_.call(e,r)&&i_(t,r,e[r]);if(r_)for(var r of r_(e))HO.call(e,r)&&i_(t,r,e[r]);return t},Gi=(t,e)=>FO(t,GO(e)),a_=t=>fu(t,"__esModule",{value:!0});var F9=typeof require!="undefined"?require:t=>{throw new Error('Dynamic require of "'+t+'" is not supported')};var de=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),KO=(t,e)=>{a_(t);for(var r in e)fu(t,r,{get:e[r],enumerable:!0})},YO=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of VO(e))!n_.call(t,n)&&n!=="default"&&fu(t,n,{get:()=>e[n],enumerable:!(r=qO(e,n))||r.enumerable});return t},_t=t=>YO(a_(fu(t!=null?UO(jO(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var M=(t,e,r)=>new Promise((n,i)=>{var a=u=>{try{l(r.next(u))}catch(f){i(f)}},s=u=>{try{l(r.throw(u))}catch(f){i(f)}},l=u=>u.done?n(u.value):Promise.resolve(u.value).then(a,s);l((r=r.apply(t,e)).next())});var p0=de((Y9,g_)=>{"use strict";var Af=Object.prototype.hasOwnProperty,l_=Object.prototype.toString,u_=Object.defineProperty,c_=Object.getOwnPropertyDescriptor,f_=function(e){return typeof Array.isArray=="function"?Array.isArray(e):l_.call(e)==="[object Array]"},d_=function(e){if(!e||l_.call(e)!=="[object Object]")return!1;var r=Af.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&Af.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var i;for(i in e);return typeof i=="undefined"||Af.call(e,i)},h_=function(e,r){u_&&r.name==="__proto__"?u_(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},p_=function(e,r){if(r==="__proto__")if(Af.call(e,r)){if(c_)return c_(e,r).value}else return;return e[r]};g_.exports=function t(){var e,r,n,i,a,s,l=arguments[0],u=1,f=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},u=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});u<f;++u)if(e=arguments[u],e!=null)for(r in e)n=p_(l,r),i=p_(e,r),l!==i&&(d&&i&&(d_(i)||(a=f_(i)))?(a?(a=!1,s=n&&f_(n)?n:[]):s=n&&d_(n)?n:{},h_(l,{name:r,newValue:t(d,s,i)})):typeof i!="undefined"&&h_(l,{name:r,newValue:i}));return l}});var g0=de((Go,m_)=>{"use strict";var WO=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof Ea!="undefined")return Ea;throw new Error("unable to locate global object")},Ea=WO();m_.exports=Go=Ea.fetch;Ea.fetch&&(Go.default=Ea.fetch.bind(Ea));Go.Headers=Ea.Headers;Go.Request=Ea.Request;Go.Response=Ea.Response});var m0=de((W9,y_)=>{"use strict";var Vi=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Vi.writable=t=>Vi(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Vi.readable=t=>Vi(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Vi.duplex=t=>Vi.writable(t)&&Vi.readable(t);Vi.transform=t=>Vi.duplex(t)&&typeof t._transform=="function";y_.exports=Vi});var y0=de(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});kf.GaxiosError=void 0;var v_=class extends Error{constructor(e,r,n){super(e);this.response=n,this.config=r,this.code=n.status.toString()}};kf.GaxiosError=v_});var w_=de(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.getRetryConfig=void 0;function zO(t){return M(this,null,function*(){var e;let r=__(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!(yield(r.shouldRetry||QO)(t)))return{shouldRetry:!1,config:t.config};let s=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(u=>{setTimeout(u,s)});return r.onRetryAttempt&&r.onRetryAttempt(t),yield l,{shouldRetry:!0,config:t.config}})}If.getRetryConfig=zO;function QO(t){let e=__(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let a=t.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function __(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}});var C_=de((X9,E_)=>{var Vo=1e3,jo=Vo*60,Ho=jo*60,Ms=Ho*24,XO=Ms*7,JO=Ms*365.25;E_.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return ZO(t);if(r==="number"&&isFinite(t))return e.long?eL(t):$O(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ZO(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*JO;case"weeks":case"week":case"w":return r*XO;case"days":case"day":case"d":return r*Ms;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ho;case"minutes":case"minute":case"mins":case"min":case"m":return r*jo;case"seconds":case"second":case"secs":case"sec":case"s":return r*Vo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function $O(t){var e=Math.abs(t);return e>=Ms?Math.round(t/Ms)+"d":e>=Ho?Math.round(t/Ho)+"h":e>=jo?Math.round(t/jo)+"m":e>=Vo?Math.round(t/Vo)+"s":t+"ms"}function eL(t){var e=Math.abs(t);return e>=Ms?Rf(t,e,Ms,"day"):e>=Ho?Rf(t,e,Ho,"hour"):e>=jo?Rf(t,e,jo,"minute"):e>=Vo?Rf(t,e,Vo,"second"):t+" ms"}function Rf(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var x_=de((J9,b_)=>{function tL(t){r.debug=r,r.default=r,r.coerce=u,r.disable=a,r.enable=i,r.enabled=s,r.humanize=C_(),r.destroy=f,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let h=0;for(let g=0;g<d.length;g++)h=(h<<5)-h+d.charCodeAt(g),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(d){let h,g=null,m,y;function _(...w){if(!_.enabled)return;let E=_,T=Number(new Date),x=T-(h||T);E.diff=x,E.prev=h,E.curr=T,h=T,w[0]=r.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let O=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(B,z)=>{if(B==="%%")return"%";O++;let F=r.formatters[z];if(typeof F=="function"){let q=w[O];B=F.call(E,q),w.splice(O,1),O--}return B}),r.formatArgs.call(E,w),(E.log||r.log).apply(E,w)}return _.namespace=d,_.useColors=r.useColors(),_.color=r.selectColor(d),_.extend=n,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(m!==r.namespaces&&(m=r.namespaces,y=r.enabled(d)),y),set:w=>{g=w}}),typeof r.init=="function"&&r.init(_),_}function n(d,h){let g=r(this.namespace+(typeof h=="undefined"?":":h)+d);return g.log=this.log,g}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let h,g=(typeof d=="string"?d:"").split(/[\s,]+/),m=g.length;for(h=0;h<m;h++)!g[h]||(d=g[h].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function a(){let d=[...r.names.map(l),...r.skips.map(l).map(h=>"-"+h)].join(",");return r.enable(""),d}function s(d){if(d[d.length-1]==="*")return!0;let h,g;for(h=0,g=r.skips.length;h<g;h++)if(r.skips[h].test(d))return!1;for(h=0,g=r.names.length;h<g;h++)if(r.names[h].test(d))return!0;return!1}function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function u(d){return d instanceof Error?d.stack||d.message:d}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}b_.exports=tL});var Df=de((Fn,Nf)=>{Fn.formatArgs=nL;Fn.save=iL;Fn.load=aL;Fn.useColors=rL;Fn.storage=sL();Fn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Fn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function rL(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function nL(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Nf.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Fn.log=console.debug||console.log||(()=>{});function iL(t){try{t?Fn.storage.setItem("debug",t):Fn.storage.removeItem("debug")}catch(e){}}function aL(){let t;try{t=Fn.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function sL(){try{return localStorage}catch(t){}}Nf.exports=x_()(Fn);var{formatters:oL}=Nf.exports;oL.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var S_=de(v0=>{"use strict";Object.defineProperty(v0,"__esModule",{value:!0});function lL(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(a,s)=>{a?i(a):n(s)})})}}v0.default=lL});var k_=de((w0,A_)=>{"use strict";var T_=w0&&w0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},uL=require("events"),cL=T_(Df()),fL=T_(S_()),hu=cL.default("agent-base");function dL(t){return Boolean(t)&&typeof t.addRequest=="function"}function _0(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function Bf(t,e){return new Bf.Agent(t,e)}(function(t){class e extends uL.EventEmitter{constructor(n,i){super();let a=i;typeof n=="function"?this.callback=n:n&&(a=n),this.timeout=null,a&&typeof a.timeout=="number"&&(this.timeout=a.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:_0()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:_0()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,a){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let a=Object.assign({},i);typeof a.secureEndpoint!="boolean"&&(a.secureEndpoint=_0()),a.host==null&&(a.host="localhost"),a.port==null&&(a.port=a.secureEndpoint?443:80),a.protocol==null&&(a.protocol=a.secureEndpoint?"https:":"http:"),a.host&&a.path&&delete a.path,delete a.agent,delete a.hostname,delete a._defaultAgent,delete a.defaultPort,delete a.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,l=null,u=a.timeout||this.timeout,f=m=>{n._hadError||(n.emit("error",m),n._hadError=!0)},d=()=>{l=null,s=!0;let m=new Error(`A "socket" was not created for HTTP request before ${u}ms`);m.code="ETIMEOUT",f(m)},h=m=>{s||(l!==null&&(clearTimeout(l),l=null),f(m))},g=m=>{if(s)return;if(l!=null&&(clearTimeout(l),l=null),dL(m)){hu("Callback returned another Agent instance %o",m.constructor.name),m.addRequest(n,a);return}if(m){m.once("free",()=>{this.freeSocket(m,a)}),n.onSocket(m);return}let y=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);f(y)};if(typeof this.callback!="function"){f(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(hu("Converting legacy callback function to promise"),this.promisifiedCallback=fL.default(this.callback)):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(l=setTimeout(d,u)),"port"in a&&typeof a.port!="number"&&(a.port=Number(a.port));try{hu("Resolving socket for %o request: %o",a.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,a)).then(g,h)}catch(m){Promise.reject(m).catch(h)}}freeSocket(n,i){hu("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){hu("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(Bf||(Bf={}));A_.exports=Bf});var I_=de(gu=>{"use strict";var hL=gu&&gu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gu,"__esModule",{value:!0});var pL=hL(Df()),pu=pL.default("https-proxy-agent:parse-proxy-response");function gL(t){return new Promise((e,r)=>{let n=0,i=[];function a(){let h=t.read();h?d(h):t.once("readable",a)}function s(){t.removeListener("end",u),t.removeListener("error",f),t.removeListener("close",l),t.removeListener("readable",a)}function l(h){pu("onclose had error %o",h)}function u(){pu("onend")}function f(h){s(),pu("onerror %o",h),r(h)}function d(h){i.push(h),n+=h.length;let g=Buffer.concat(i,n);if(g.indexOf(`\r
\r
`)===-1){pu("have not received end of HTTP headers yet..."),a();return}let y=g.toString("ascii",0,g.indexOf(`\r
`)),_=+y.split(" ")[1];pu("got proxy server response: %o",y),e({statusCode:_,buffered:g})}t.on("error",f),t.on("close",l),t.on("end",u),a()})}gu.default=gL});var B_=de(Us=>{"use strict";var mL=Us&&Us.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function l(d){try{f(n.next(d))}catch(h){s(h)}}function u(d){try{f(n.throw(d))}catch(h){s(h)}}function f(d){d.done?a(d.value):i(d.value).then(l,u)}f((n=n.apply(t,e||[])).next())})},Ko=Us&&Us.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Us,"__esModule",{value:!0});var R_=Ko(require("net")),N_=Ko(require("tls")),yL=Ko(require("url")),vL=Ko(require("assert")),_L=Ko(Df()),wL=k_(),EL=Ko(I_()),mu=_L.default("https-proxy-agent:agent"),D_=class extends wL.Agent{constructor(e){let r;if(typeof e=="string"?r=yL.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");mu("creating new HttpsProxyAgent instance: %o",r);super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||xL(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return mL(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,a;i?(mu("Creating `tls.Socket`: %o",n),a=N_.default.connect(n)):(mu("Creating `net.Socket`: %o",n),a=R_.default.connect(n));let s=Object.assign({},n.headers),u=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:f,port:d,secureEndpoint:h}=r;bL(d,h)||(f+=`:${d}`),s.Host=f,s.Connection="close";for(let w of Object.keys(s))u+=`${w}: ${s[w]}\r
`;let g=EL.default(a);a.write(`${u}\r
`);let{statusCode:m,buffered:y}=yield g;if(m===200){if(e.once("socket",CL),r.secureEndpoint){mu("Upgrading socket connection to TLS");let w=r.servername||r.host;return N_.default.connect(Object.assign(Object.assign({},SL(r,"host","hostname","path","port")),{socket:a,servername:w}))}return a}a.destroy();let _=new R_.default.Socket({writable:!1});return _.readable=!0,e.once("socket",w=>{mu("replaying proxy buffer for failed request"),vL.default(w.listenerCount("data")>0),w.push(y),w.push(null)}),_})}};Us.default=D_;function CL(t){t.resume()}function bL(t,e){return Boolean(!e&&t===80||e&&t===443)}function xL(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function SL(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var x0=de((b0,O_)=>{"use strict";var TL=b0&&b0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},E0=TL(B_());function C0(t){return new E0.default(t)}(function(t){t.HttpsProxyAgent=E0.default,t.prototype=E0.default.prototype})(C0||(C0={}));O_.exports=C0});var q_=de(Yo=>{"use strict";var Of=Yo&&Yo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.Gaxios=void 0;var AL=Of(p0()),kL=require("https"),IL=Of(g0()),RL=Of(require("querystring")),NL=Of(m0()),L_=require("url"),DL=y0(),BL=w_(),OL=PL()?window.fetch:IL.default;function LL(){return typeof window!="undefined"&&!!window}function PL(){return LL()&&!!window.fetch}function ML(){return typeof Buffer!="undefined"}function P_(t,e){return!!M_(t,e)}function M_(t,e){e=e.toLowerCase();for(let r of Object.keys((t==null?void 0:t.headers)||{}))if(e===r.toLowerCase())return t.headers[r]}var S0;function U_(){var t,e,r,n;let i=((t=process==null?void 0:process.env)===null||t===void 0?void 0:t.HTTPS_PROXY)||((e=process==null?void 0:process.env)===null||e===void 0?void 0:e.https_proxy)||((r=process==null?void 0:process.env)===null||r===void 0?void 0:r.HTTP_PROXY)||((n=process==null?void 0:process.env)===null||n===void 0?void 0:n.http_proxy);return i&&(S0=x0()),i}U_();function UL(t){var e;let r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new L_.URL(t);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function FL(t){if(!UL(t))return U_()}var F_=class{constructor(e){this.agentCache=new Map,this.defaults=e||{}}request(){return M(this,arguments,function*(e={}){return e=this.validateOpts(e),this._request(e)})}_defaultAdapter(e){return M(this,null,function*(){let n=yield(e.fetchImplementation||OL)(e.url,e),i=yield this.getResponseData(e,n);return this.translateResponse(e,n,i)})}_request(){return M(this,arguments,function*(e={}){try{let r;if(e.adapter?r=yield e.adapter(e,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(e),!e.validateStatus(r.status))throw new DL.GaxiosError(`Request failed with status code ${r.status}`,e,r);return r}catch(r){let n=r;n.config=e;let{shouldRetry:i,config:a}=yield(0,BL.getRetryConfig)(n);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(e,r){return M(this,null,function*(){switch(e.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(e){let r=(0,AL.default)(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;NL.default.readable(r.data)?r.body=r.data:ML()&&Buffer.isBuffer(r.data)?(r.body=r.data,P_(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(M_(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(P_(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=FL(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new L_.URL(i);r.agent=new S0({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new S0(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new kL.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return RL.default.stringify(e)}translateResponse(e,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:e,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};Yo.Gaxios=F_});var Wo=de(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.request=wi.instance=wi.Gaxios=wi.GaxiosError=void 0;var G_=q_();Object.defineProperty(wi,"Gaxios",{enumerable:!0,get:function(){return G_.Gaxios}});var qL=y0();Object.defineProperty(wi,"GaxiosError",{enumerable:!0,get:function(){return qL.GaxiosError}});wi.instance=new G_.Gaxios;function GL(t){return M(this,null,function*(){return wi.instance.request(t)})}wi.request=GL});var T0=de((V_,Lf)=>{(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,a="[BigNumber Error] ",s=a+"Number primitive has more than 15 significant digits: ",l=1e14,u=14,f=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,g=1e9;function m(I){var B,z,F,q=le.prototype={constructor:le,toString:null,valueOf:null},te=new le(1),ie=20,ye=4,be=-7,Ve=21,Ne=-1e7,me=1e7,re=!1,Fe=1,Ze=0,ut={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},Je="0123456789abcdefghijklmnopqrstuvwxyz",ct=!0;function le(R,D){var L,K,j,X,Z,Y,J,ne,$=this;if(!($ instanceof le))return new le(R,D);if(D==null){if(R&&R._isBigNumber===!0){$.s=R.s,!R.c||R.e>me?$.c=$.e=null:R.e<Ne?$.c=[$.e=0]:($.e=R.e,$.c=R.c.slice());return}if((Y=typeof R=="number")&&R*0==0){if($.s=1/R<0?(R=-R,-1):1,R===~~R){for(X=0,Z=R;Z>=10;Z/=10,X++);X>me?$.c=$.e=null:($.e=X,$.c=[R]);return}ne=String(R)}else{if(!r.test(ne=String(R)))return F($,ne,Y);$.s=ne.charCodeAt(0)==45?(ne=ne.slice(1),-1):1}(X=ne.indexOf("."))>-1&&(ne=ne.replace(".","")),(Z=ne.search(/e/i))>0?(X<0&&(X=Z),X+=+ne.slice(Z+1),ne=ne.substring(0,Z)):X<0&&(X=ne.length)}else{if(E(D,2,Je.length,"Base"),D==10&&ct)return $=new le(R),tt($,ie+$.e+1,ye);if(ne=String(R),Y=typeof R=="number"){if(R*0!=0)return F($,ne,Y,D);if($.s=1/R<0?(ne=ne.slice(1),-1):1,le.DEBUG&&ne.replace(/^0\.0*|\./,"").length>15)throw Error(s+R)}else $.s=ne.charCodeAt(0)===45?(ne=ne.slice(1),-1):1;for(L=Je.slice(0,D),X=Z=0,J=ne.length;Z<J;Z++)if(L.indexOf(K=ne.charAt(Z))<0){if(K=="."){if(Z>X){X=J;continue}}else if(!j&&(ne==ne.toUpperCase()&&(ne=ne.toLowerCase())||ne==ne.toLowerCase()&&(ne=ne.toUpperCase()))){j=!0,Z=-1,X=0;continue}return F($,String(R),Y,D)}Y=!1,ne=z(ne,D,10,$.s),(X=ne.indexOf("."))>-1?ne=ne.replace(".",""):X=ne.length}for(Z=0;ne.charCodeAt(Z)===48;Z++);for(J=ne.length;ne.charCodeAt(--J)===48;);if(ne=ne.slice(Z,++J)){if(J-=Z,Y&&le.DEBUG&&J>15&&(R>f||R!==i(R)))throw Error(s+$.s*R);if((X=X-Z-1)>me)$.c=$.e=null;else if(X<Ne)$.c=[$.e=0];else{if($.e=X,$.c=[],Z=(X+1)%u,X<0&&(Z+=u),Z<J){for(Z&&$.c.push(+ne.slice(0,Z)),J-=u;Z<J;)$.c.push(+ne.slice(Z,Z+=u));Z=u-(ne=ne.slice(Z)).length}else Z-=J;for(;Z--;ne+="0");$.c.push(+ne)}}else $.c=[$.e=0]}le.clone=m,le.ROUND_UP=0,le.ROUND_DOWN=1,le.ROUND_CEIL=2,le.ROUND_FLOOR=3,le.ROUND_HALF_UP=4,le.ROUND_HALF_DOWN=5,le.ROUND_HALF_EVEN=6,le.ROUND_HALF_CEIL=7,le.ROUND_HALF_FLOOR=8,le.EUCLID=9,le.config=le.set=function(R){var D,L;if(R!=null)if(typeof R=="object"){if(R.hasOwnProperty(D="DECIMAL_PLACES")&&(L=R[D],E(L,0,g,D),ie=L),R.hasOwnProperty(D="ROUNDING_MODE")&&(L=R[D],E(L,0,8,D),ye=L),R.hasOwnProperty(D="EXPONENTIAL_AT")&&(L=R[D],L&&L.pop?(E(L[0],-g,0,D),E(L[1],0,g,D),be=L[0],Ve=L[1]):(E(L,-g,g,D),be=-(Ve=L<0?-L:L))),R.hasOwnProperty(D="RANGE"))if(L=R[D],L&&L.pop)E(L[0],-g,-1,D),E(L[1],1,g,D),Ne=L[0],me=L[1];else if(E(L,-g,g,D),L)Ne=-(me=L<0?-L:L);else throw Error(a+D+" cannot be zero: "+L);if(R.hasOwnProperty(D="CRYPTO"))if(L=R[D],L===!!L)if(L)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))re=L;else throw re=!L,Error(a+"crypto unavailable");else re=L;else throw Error(a+D+" not true or false: "+L);if(R.hasOwnProperty(D="MODULO_MODE")&&(L=R[D],E(L,0,9,D),Fe=L),R.hasOwnProperty(D="POW_PRECISION")&&(L=R[D],E(L,0,g,D),Ze=L),R.hasOwnProperty(D="FORMAT"))if(L=R[D],typeof L=="object")ut=L;else throw Error(a+D+" not an object: "+L);if(R.hasOwnProperty(D="ALPHABET"))if(L=R[D],typeof L=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(L))ct=L.slice(0,10)=="0123456789",Je=L;else throw Error(a+D+" invalid: "+L)}else throw Error(a+"Object expected: "+R);return{DECIMAL_PLACES:ie,ROUNDING_MODE:ye,EXPONENTIAL_AT:[be,Ve],RANGE:[Ne,me],CRYPTO:re,MODULO_MODE:Fe,POW_PRECISION:Ze,FORMAT:ut,ALPHABET:Je}},le.isBigNumber=function(R){if(!R||R._isBigNumber!==!0)return!1;if(!le.DEBUG)return!0;var D,L,K=R.c,j=R.e,X=R.s;e:if({}.toString.call(K)=="[object Array]"){if((X===1||X===-1)&&j>=-g&&j<=g&&j===i(j)){if(K[0]===0){if(j===0&&K.length===1)return!0;break e}if(D=(j+1)%u,D<1&&(D+=u),String(K[0]).length==D){for(D=0;D<K.length;D++)if(L=K[D],L<0||L>=l||L!==i(L))break e;if(L!==0)return!0}}}else if(K===null&&j===null&&(X===null||X===1||X===-1))return!0;throw Error(a+"Invalid BigNumber: "+R)},le.maximum=le.max=function(){return Dt(arguments,q.lt)},le.minimum=le.min=function(){return Dt(arguments,q.gt)},le.random=function(){var R=9007199254740992,D=Math.random()*R&2097151?function(){return i(Math.random()*R)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(L){var K,j,X,Z,Y,J=0,ne=[],$=new le(te);if(L==null?L=ie:E(L,0,g),Z=n(L/u),re)if(crypto.getRandomValues){for(K=crypto.getRandomValues(new Uint32Array(Z*=2));J<Z;)Y=K[J]*131072+(K[J+1]>>>11),Y>=9e15?(j=crypto.getRandomValues(new Uint32Array(2)),K[J]=j[0],K[J+1]=j[1]):(ne.push(Y%1e14),J+=2);J=Z/2}else if(crypto.randomBytes){for(K=crypto.randomBytes(Z*=7);J<Z;)Y=(K[J]&31)*281474976710656+K[J+1]*1099511627776+K[J+2]*4294967296+K[J+3]*16777216+(K[J+4]<<16)+(K[J+5]<<8)+K[J+6],Y>=9e15?crypto.randomBytes(7).copy(K,J):(ne.push(Y%1e14),J+=7);J=Z/7}else throw re=!1,Error(a+"crypto unavailable");if(!re)for(;J<Z;)Y=D(),Y<9e15&&(ne[J++]=Y%1e14);for(Z=ne[--J],L%=u,Z&&L&&(Y=d[u-L],ne[J]=i(Z/Y)*Y);ne[J]===0;ne.pop(),J--);if(J<0)ne=[X=0];else{for(X=-1;ne[0]===0;ne.splice(0,1),X-=u);for(J=1,Y=ne[0];Y>=10;Y/=10,J++);J<u&&(X-=u-J)}return $.e=X,$.c=ne,$}}(),le.sum=function(){for(var R=1,D=arguments,L=new le(D[0]);R<D.length;)L=L.plus(D[R++]);return L},z=function(){var R="0123456789";function D(L,K,j,X){for(var Z,Y=[0],J,ne=0,$=L.length;ne<$;){for(J=Y.length;J--;Y[J]*=K);for(Y[0]+=X.indexOf(L.charAt(ne++)),Z=0;Z<Y.length;Z++)Y[Z]>j-1&&(Y[Z+1]==null&&(Y[Z+1]=0),Y[Z+1]+=Y[Z]/j|0,Y[Z]%=j)}return Y.reverse()}return function(L,K,j,X,Z){var Y,J,ne,$,he,Oe,Ue,dt,Qt=L.indexOf("."),Xt=ie,rt=ye;for(Qt>=0&&($=Ze,Ze=0,L=L.replace(".",""),dt=new le(K),Oe=dt.pow(L.length-Qt),Ze=$,dt.c=D(O(_(Oe.c),Oe.e,"0"),10,j,R),dt.e=dt.c.length),Ue=D(L,K,j,Z?(Y=Je,R):(Y=R,Je)),ne=$=Ue.length;Ue[--$]==0;Ue.pop());if(!Ue[0])return Y.charAt(0);if(Qt<0?--ne:(Oe.c=Ue,Oe.e=ne,Oe.s=X,Oe=B(Oe,dt,Xt,rt,j),Ue=Oe.c,he=Oe.r,ne=Oe.e),J=ne+Xt+1,Qt=Ue[J],$=j/2,he=he||J<0||Ue[J+1]!=null,he=rt<4?(Qt!=null||he)&&(rt==0||rt==(Oe.s<0?3:2)):Qt>$||Qt==$&&(rt==4||he||rt==6&&Ue[J-1]&1||rt==(Oe.s<0?8:7)),J<1||!Ue[0])L=he?O(Y.charAt(1),-Xt,Y.charAt(0)):Y.charAt(0);else{if(Ue.length=J,he)for(--j;++Ue[--J]>j;)Ue[J]=0,J||(++ne,Ue=[1].concat(Ue));for($=Ue.length;!Ue[--$];);for(Qt=0,L="";Qt<=$;L+=Y.charAt(Ue[Qt++]));L=O(L,ne,Y.charAt(0))}return L}}(),B=function(){function R(K,j,X){var Z,Y,J,ne,$=0,he=K.length,Oe=j%h,Ue=j/h|0;for(K=K.slice();he--;)J=K[he]%h,ne=K[he]/h|0,Z=Ue*J+ne*Oe,Y=Oe*J+Z%h*h+$,$=(Y/X|0)+(Z/h|0)+Ue*ne,K[he]=Y%X;return $&&(K=[$].concat(K)),K}function D(K,j,X,Z){var Y,J;if(X!=Z)J=X>Z?1:-1;else for(Y=J=0;Y<X;Y++)if(K[Y]!=j[Y]){J=K[Y]>j[Y]?1:-1;break}return J}function L(K,j,X,Z){for(var Y=0;X--;)K[X]-=Y,Y=K[X]<j[X]?1:0,K[X]=Y*Z+K[X]-j[X];for(;!K[0]&&K.length>1;K.splice(0,1));}return function(K,j,X,Z,Y){var J,ne,$,he,Oe,Ue,dt,Qt,Xt,rt,Bt,pr,qa,Ss,Ts,Cn,ca,nn=K.s==j.s?1:-1,Nr=K.c,ur=j.c;if(!Nr||!Nr[0]||!ur||!ur[0])return new le(!K.s||!j.s||(Nr?ur&&Nr[0]==ur[0]:!ur)?NaN:Nr&&Nr[0]==0||!ur?nn*0:nn/0);for(Qt=new le(nn),Xt=Qt.c=[],ne=K.e-j.e,nn=X+ne+1,Y||(Y=l,ne=y(K.e/u)-y(j.e/u),nn=nn/u|0),$=0;ur[$]==(Nr[$]||0);$++);if(ur[$]>(Nr[$]||0)&&ne--,nn<0)Xt.push(1),he=!0;else{for(Ss=Nr.length,Cn=ur.length,$=0,nn+=2,Oe=i(Y/(ur[0]+1)),Oe>1&&(ur=R(ur,Oe,Y),Nr=R(Nr,Oe,Y),Cn=ur.length,Ss=Nr.length),qa=Cn,rt=Nr.slice(0,Cn),Bt=rt.length;Bt<Cn;rt[Bt++]=0);ca=ur.slice(),ca=[0].concat(ca),Ts=ur[0],ur[1]>=Y/2&&Ts++;do{if(Oe=0,J=D(ur,rt,Cn,Bt),J<0){if(pr=rt[0],Cn!=Bt&&(pr=pr*Y+(rt[1]||0)),Oe=i(pr/Ts),Oe>1)for(Oe>=Y&&(Oe=Y-1),Ue=R(ur,Oe,Y),dt=Ue.length,Bt=rt.length;D(Ue,rt,dt,Bt)==1;)Oe--,L(Ue,Cn<dt?ca:ur,dt,Y),dt=Ue.length,J=1;else Oe==0&&(J=Oe=1),Ue=ur.slice(),dt=Ue.length;if(dt<Bt&&(Ue=[0].concat(Ue)),L(rt,Ue,Bt,Y),Bt=rt.length,J==-1)for(;D(ur,rt,Cn,Bt)<1;)Oe++,L(rt,Cn<Bt?ca:ur,Bt,Y),Bt=rt.length}else J===0&&(Oe++,rt=[0]);Xt[$++]=Oe,rt[0]?rt[Bt++]=Nr[qa]||0:(rt=[Nr[qa]],Bt=1)}while((qa++<Ss||rt[0]!=null)&&nn--);he=rt[0]!=null,Xt[0]||Xt.splice(0,1)}if(Y==l){for($=1,nn=Xt[0];nn>=10;nn/=10,$++);tt(Qt,X+(Qt.e=$+ne*u-1)+1,Z,he)}else Qt.e=ne,Qt.r=+he;return Qt}}();function Nt(R,D,L,K){var j,X,Z,Y,J;if(L==null?L=ye:E(L,0,8),!R.c)return R.toString();if(j=R.c[0],Z=R.e,D==null)J=_(R.c),J=K==1||K==2&&(Z<=be||Z>=Ve)?x(J,Z):O(J,Z,"0");else if(R=tt(new le(R),D,L),X=R.e,J=_(R.c),Y=J.length,K==1||K==2&&(D<=X||X<=be)){for(;Y<D;J+="0",Y++);J=x(J,X)}else if(D-=Z,J=O(J,X,"0"),X+1>Y){if(--D>0)for(J+=".";D--;J+="0");}else if(D+=X-Y,D>0)for(X+1==Y&&(J+=".");D--;J+="0");return R.s<0&&j?"-"+J:J}function Dt(R,D){for(var L,K=1,j=new le(R[0]);K<R.length;K++)if(L=new le(R[K]),L.s)D.call(j,L)&&(j=L);else{j=L;break}return j}function et(R,D,L){for(var K=1,j=D.length;!D[--j];D.pop());for(j=D[0];j>=10;j/=10,K++);return(L=K+L*u-1)>me?R.c=R.e=null:L<Ne?R.c=[R.e=0]:(R.e=L,R.c=D),R}F=function(){var R=/^(-?)0([xbo])(?=\w[\w.]*$)/i,D=/^([^.]+)\.$/,L=/^\.([^.]+)$/,K=/^-?(Infinity|NaN)$/,j=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(X,Z,Y,J){var ne,$=Y?Z:Z.replace(j,"");if(K.test($))X.s=isNaN($)?null:$<0?-1:1;else{if(!Y&&($=$.replace(R,function(he,Oe,Ue){return ne=(Ue=Ue.toLowerCase())=="x"?16:Ue=="b"?2:8,!J||J==ne?Oe:he}),J&&(ne=J,$=$.replace(D,"$1").replace(L,"0.$1")),Z!=$))return new le($,ne);if(le.DEBUG)throw Error(a+"Not a"+(J?" base "+J:"")+" number: "+Z);X.s=null}X.c=X.e=null}}();function tt(R,D,L,K){var j,X,Z,Y,J,ne,$,he=R.c,Oe=d;if(he){e:{for(j=1,Y=he[0];Y>=10;Y/=10,j++);if(X=D-j,X<0)X+=u,Z=D,J=he[ne=0],$=J/Oe[j-Z-1]%10|0;else if(ne=n((X+1)/u),ne>=he.length)if(K){for(;he.length<=ne;he.push(0));J=$=0,j=1,X%=u,Z=X-u+1}else break e;else{for(J=Y=he[ne],j=1;Y>=10;Y/=10,j++);X%=u,Z=X-u+j,$=Z<0?0:J/Oe[j-Z-1]%10|0}if(K=K||D<0||he[ne+1]!=null||(Z<0?J:J%Oe[j-Z-1]),K=L<4?($||K)&&(L==0||L==(R.s<0?3:2)):$>5||$==5&&(L==4||K||L==6&&(X>0?Z>0?J/Oe[j-Z]:0:he[ne-1])%10&1||L==(R.s<0?8:7)),D<1||!he[0])return he.length=0,K?(D-=R.e+1,he[0]=Oe[(u-D%u)%u],R.e=-D||0):he[0]=R.e=0,R;if(X==0?(he.length=ne,Y=1,ne--):(he.length=ne+1,Y=Oe[u-X],he[ne]=Z>0?i(J/Oe[j-Z]%Oe[Z])*Y:0),K)for(;;)if(ne==0){for(X=1,Z=he[0];Z>=10;Z/=10,X++);for(Z=he[0]+=Y,Y=1;Z>=10;Z/=10,Y++);X!=Y&&(R.e++,he[0]==l&&(he[0]=1));break}else{if(he[ne]+=Y,he[ne]!=l)break;he[ne--]=0,Y=1}for(X=he.length;he[--X]===0;he.pop());}R.e>me?R.c=R.e=null:R.e<Ne&&(R.c=[R.e=0])}return R}function ft(R){var D,L=R.e;return L===null?R.toString():(D=_(R.c),D=L<=be||L>=Ve?x(D,L):O(D,L,"0"),R.s<0?"-"+D:D)}return q.absoluteValue=q.abs=function(){var R=new le(this);return R.s<0&&(R.s=1),R},q.comparedTo=function(R,D){return w(this,new le(R,D))},q.decimalPlaces=q.dp=function(R,D){var L,K,j,X=this;if(R!=null)return E(R,0,g),D==null?D=ye:E(D,0,8),tt(new le(X),R+X.e+1,D);if(!(L=X.c))return null;if(K=((j=L.length-1)-y(this.e/u))*u,j=L[j])for(;j%10==0;j/=10,K--);return K<0&&(K=0),K},q.dividedBy=q.div=function(R,D){return B(this,new le(R,D),ie,ye)},q.dividedToIntegerBy=q.idiv=function(R,D){return B(this,new le(R,D),0,1)},q.exponentiatedBy=q.pow=function(R,D){var L,K,j,X,Z,Y,J,ne,$,he=this;if(R=new le(R),R.c&&!R.isInteger())throw Error(a+"Exponent not an integer: "+ft(R));if(D!=null&&(D=new le(D)),Y=R.e>14,!he.c||!he.c[0]||he.c[0]==1&&!he.e&&he.c.length==1||!R.c||!R.c[0])return $=new le(Math.pow(+ft(he),Y?2-T(R):+ft(R))),D?$.mod(D):$;if(J=R.s<0,D){if(D.c?!D.c[0]:!D.s)return new le(NaN);K=!J&&he.isInteger()&&D.isInteger(),K&&(he=he.mod(D))}else{if(R.e>9&&(he.e>0||he.e<-1||(he.e==0?he.c[0]>1||Y&&he.c[1]>=24e7:he.c[0]<8e13||Y&&he.c[0]<=9999975e7)))return X=he.s<0&&T(R)?-0:0,he.e>-1&&(X=1/X),new le(J?1/X:X);Ze&&(X=n(Ze/u+2))}for(Y?(L=new le(.5),J&&(R.s=1),ne=T(R)):(j=Math.abs(+ft(R)),ne=j%2),$=new le(te);;){if(ne){if($=$.times(he),!$.c)break;X?$.c.length>X&&($.c.length=X):K&&($=$.mod(D))}if(j){if(j=i(j/2),j===0)break;ne=j%2}else if(R=R.times(L),tt(R,R.e+1,1),R.e>14)ne=T(R);else{if(j=+ft(R),j===0)break;ne=j%2}he=he.times(he),X?he.c&&he.c.length>X&&(he.c.length=X):K&&(he=he.mod(D))}return K?$:(J&&($=te.div($)),D?$.mod(D):X?tt($,Ze,ye,Z):$)},q.integerValue=function(R){var D=new le(this);return R==null?R=ye:E(R,0,8),tt(D,D.e+1,R)},q.isEqualTo=q.eq=function(R,D){return w(this,new le(R,D))===0},q.isFinite=function(){return!!this.c},q.isGreaterThan=q.gt=function(R,D){return w(this,new le(R,D))>0},q.isGreaterThanOrEqualTo=q.gte=function(R,D){return(D=w(this,new le(R,D)))===1||D===0},q.isInteger=function(){return!!this.c&&y(this.e/u)>this.c.length-2},q.isLessThan=q.lt=function(R,D){return w(this,new le(R,D))<0},q.isLessThanOrEqualTo=q.lte=function(R,D){return(D=w(this,new le(R,D)))===-1||D===0},q.isNaN=function(){return!this.s},q.isNegative=function(){return this.s<0},q.isPositive=function(){return this.s>0},q.isZero=function(){return!!this.c&&this.c[0]==0},q.minus=function(R,D){var L,K,j,X,Z=this,Y=Z.s;if(R=new le(R,D),D=R.s,!Y||!D)return new le(NaN);if(Y!=D)return R.s=-D,Z.plus(R);var J=Z.e/u,ne=R.e/u,$=Z.c,he=R.c;if(!J||!ne){if(!$||!he)return $?(R.s=-D,R):new le(he?Z:NaN);if(!$[0]||!he[0])return he[0]?(R.s=-D,R):new le($[0]?Z:ye==3?-0:0)}if(J=y(J),ne=y(ne),$=$.slice(),Y=J-ne){for((X=Y<0)?(Y=-Y,j=$):(ne=J,j=he),j.reverse(),D=Y;D--;j.push(0));j.reverse()}else for(K=(X=(Y=$.length)<(D=he.length))?Y:D,Y=D=0;D<K;D++)if($[D]!=he[D]){X=$[D]<he[D];break}if(X&&(j=$,$=he,he=j,R.s=-R.s),D=(K=he.length)-(L=$.length),D>0)for(;D--;$[L++]=0);for(D=l-1;K>Y;){if($[--K]<he[K]){for(L=K;L&&!$[--L];$[L]=D);--$[L],$[K]+=l}$[K]-=he[K]}for(;$[0]==0;$.splice(0,1),--ne);return $[0]?et(R,$,ne):(R.s=ye==3?-1:1,R.c=[R.e=0],R)},q.modulo=q.mod=function(R,D){var L,K,j=this;return R=new le(R,D),!j.c||!R.s||R.c&&!R.c[0]?new le(NaN):!R.c||j.c&&!j.c[0]?new le(j):(Fe==9?(K=R.s,R.s=1,L=B(j,R,0,3),R.s=K,L.s*=K):L=B(j,R,0,Fe),R=j.minus(L.times(R)),!R.c[0]&&Fe==1&&(R.s=j.s),R)},q.multipliedBy=q.times=function(R,D){var L,K,j,X,Z,Y,J,ne,$,he,Oe,Ue,dt,Qt,Xt,rt=this,Bt=rt.c,pr=(R=new le(R,D)).c;if(!Bt||!pr||!Bt[0]||!pr[0])return!rt.s||!R.s||Bt&&!Bt[0]&&!pr||pr&&!pr[0]&&!Bt?R.c=R.e=R.s=null:(R.s*=rt.s,!Bt||!pr?R.c=R.e=null:(R.c=[0],R.e=0)),R;for(K=y(rt.e/u)+y(R.e/u),R.s*=rt.s,J=Bt.length,he=pr.length,J<he&&(dt=Bt,Bt=pr,pr=dt,j=J,J=he,he=j),j=J+he,dt=[];j--;dt.push(0));for(Qt=l,Xt=h,j=he;--j>=0;){for(L=0,Oe=pr[j]%Xt,Ue=pr[j]/Xt|0,Z=J,X=j+Z;X>j;)ne=Bt[--Z]%Xt,$=Bt[Z]/Xt|0,Y=Ue*ne+$*Oe,ne=Oe*ne+Y%Xt*Xt+dt[X]+L,L=(ne/Qt|0)+(Y/Xt|0)+Ue*$,dt[X--]=ne%Qt;dt[X]=L}return L?++K:dt.splice(0,1),et(R,dt,K)},q.negated=function(){var R=new le(this);return R.s=-R.s||null,R},q.plus=function(R,D){var L,K=this,j=K.s;if(R=new le(R,D),D=R.s,!j||!D)return new le(NaN);if(j!=D)return R.s=-D,K.minus(R);var X=K.e/u,Z=R.e/u,Y=K.c,J=R.c;if(!X||!Z){if(!Y||!J)return new le(j/0);if(!Y[0]||!J[0])return J[0]?R:new le(Y[0]?K:j*0)}if(X=y(X),Z=y(Z),Y=Y.slice(),j=X-Z){for(j>0?(Z=X,L=J):(j=-j,L=Y),L.reverse();j--;L.push(0));L.reverse()}for(j=Y.length,D=J.length,j-D<0&&(L=J,J=Y,Y=L,D=j),j=0;D;)j=(Y[--D]=Y[D]+J[D]+j)/l|0,Y[D]=l===Y[D]?0:Y[D]%l;return j&&(Y=[j].concat(Y),++Z),et(R,Y,Z)},q.precision=q.sd=function(R,D){var L,K,j,X=this;if(R!=null&&R!==!!R)return E(R,1,g),D==null?D=ye:E(D,0,8),tt(new le(X),R,D);if(!(L=X.c))return null;if(j=L.length-1,K=j*u+1,j=L[j]){for(;j%10==0;j/=10,K--);for(j=L[0];j>=10;j/=10,K++);}return R&&X.e+1>K&&(K=X.e+1),K},q.shiftedBy=function(R){return E(R,-f,f),this.times("1e"+R)},q.squareRoot=q.sqrt=function(){var R,D,L,K,j,X=this,Z=X.c,Y=X.s,J=X.e,ne=ie+4,$=new le("0.5");if(Y!==1||!Z||!Z[0])return new le(!Y||Y<0&&(!Z||Z[0])?NaN:Z?X:1/0);if(Y=Math.sqrt(+ft(X)),Y==0||Y==1/0?(D=_(Z),(D.length+J)%2==0&&(D+="0"),Y=Math.sqrt(+D),J=y((J+1)/2)-(J<0||J%2),Y==1/0?D="5e"+J:(D=Y.toExponential(),D=D.slice(0,D.indexOf("e")+1)+J),L=new le(D)):L=new le(Y+""),L.c[0]){for(J=L.e,Y=J+ne,Y<3&&(Y=0);;)if(j=L,L=$.times(j.plus(B(X,j,ne,1))),_(j.c).slice(0,Y)===(D=_(L.c)).slice(0,Y))if(L.e<J&&--Y,D=D.slice(Y-3,Y+1),D=="9999"||!K&&D=="4999"){if(!K&&(tt(j,j.e+ie+2,0),j.times(j).eq(X))){L=j;break}ne+=4,Y+=4,K=1}else{(!+D||!+D.slice(1)&&D.charAt(0)=="5")&&(tt(L,L.e+ie+2,1),R=!L.times(L).eq(X));break}}return tt(L,L.e+ie+1,ye,R)},q.toExponential=function(R,D){return R!=null&&(E(R,0,g),R++),Nt(this,R,D,1)},q.toFixed=function(R,D){return R!=null&&(E(R,0,g),R=R+this.e+1),Nt(this,R,D)},q.toFormat=function(R,D,L){var K,j=this;if(L==null)R!=null&&D&&typeof D=="object"?(L=D,D=null):R&&typeof R=="object"?(L=R,R=D=null):L=ut;else if(typeof L!="object")throw Error(a+"Argument not an object: "+L);if(K=j.toFixed(R,D),j.c){var X,Z=K.split("."),Y=+L.groupSize,J=+L.secondaryGroupSize,ne=L.groupSeparator||"",$=Z[0],he=Z[1],Oe=j.s<0,Ue=Oe?$.slice(1):$,dt=Ue.length;if(J&&(X=Y,Y=J,J=X,dt-=X),Y>0&&dt>0){for(X=dt%Y||Y,$=Ue.substr(0,X);X<dt;X+=Y)$+=ne+Ue.substr(X,Y);J>0&&($+=ne+Ue.slice(X)),Oe&&($="-"+$)}K=he?$+(L.decimalSeparator||"")+((J=+L.fractionGroupSize)?he.replace(new RegExp("\\d{"+J+"}\\B","g"),"$&"+(L.fractionGroupSeparator||"")):he):$}return(L.prefix||"")+K+(L.suffix||"")},q.toFraction=function(R){var D,L,K,j,X,Z,Y,J,ne,$,he,Oe,Ue=this,dt=Ue.c;if(R!=null&&(Y=new le(R),!Y.isInteger()&&(Y.c||Y.s!==1)||Y.lt(te)))throw Error(a+"Argument "+(Y.isInteger()?"out of range: ":"not an integer: ")+ft(Y));if(!dt)return new le(Ue);for(D=new le(te),ne=L=new le(te),K=J=new le(te),Oe=_(dt),X=D.e=Oe.length-Ue.e-1,D.c[0]=d[(Z=X%u)<0?u+Z:Z],R=!R||Y.comparedTo(D)>0?X>0?D:ne:Y,Z=me,me=1/0,Y=new le(Oe),J.c[0]=0;$=B(Y,D,0,1),j=L.plus($.times(K)),j.comparedTo(R)!=1;)L=K,K=j,ne=J.plus($.times(j=ne)),J=j,D=Y.minus($.times(j=D)),Y=j;return j=B(R.minus(L),K,0,1),J=J.plus(j.times(ne)),L=L.plus(j.times(K)),J.s=ne.s=Ue.s,X=X*2,he=B(ne,K,X,ye).minus(Ue).abs().comparedTo(B(J,L,X,ye).minus(Ue).abs())<1?[ne,K]:[J,L],me=Z,he},q.toNumber=function(){return+ft(this)},q.toPrecision=function(R,D){return R!=null&&E(R,1,g),Nt(this,R,D,2)},q.toString=function(R){var D,L=this,K=L.s,j=L.e;return j===null?K?(D="Infinity",K<0&&(D="-"+D)):D="NaN":(R==null?D=j<=be||j>=Ve?x(_(L.c),j):O(_(L.c),j,"0"):R===10&&ct?(L=tt(new le(L),ie+j+1,ye),D=O(_(L.c),L.e,"0")):(E(R,2,Je.length,"Base"),D=z(O(_(L.c),j,"0"),10,R,K,!0)),K<0&&L.c[0]&&(D="-"+D)),D},q.valueOf=q.toJSON=function(){return ft(this)},q._isBigNumber=!0,I!=null&&le.set(I),le}function y(I){var B=I|0;return I>0||I===B?B:B-1}function _(I){for(var B,z,F=1,q=I.length,te=I[0]+"";F<q;){for(B=I[F++]+"",z=u-B.length;z--;B="0"+B);te+=B}for(q=te.length;te.charCodeAt(--q)===48;);return te.slice(0,q+1||1)}function w(I,B){var z,F,q=I.c,te=B.c,ie=I.s,ye=B.s,be=I.e,Ve=B.e;if(!ie||!ye)return null;if(z=q&&!q[0],F=te&&!te[0],z||F)return z?F?0:-ye:ie;if(ie!=ye)return ie;if(z=ie<0,F=be==Ve,!q||!te)return F?0:!q^z?1:-1;if(!F)return be>Ve^z?1:-1;for(ye=(be=q.length)<(Ve=te.length)?be:Ve,ie=0;ie<ye;ie++)if(q[ie]!=te[ie])return q[ie]>te[ie]^z?1:-1;return be==Ve?0:be>Ve^z?1:-1}function E(I,B,z,F){if(I<B||I>z||I!==i(I))throw Error(a+(F||"Argument")+(typeof I=="number"?I<B||I>z?" out of range: ":" not an integer: ":" not a primitive number: ")+String(I))}function T(I){var B=I.c.length-1;return y(I.e/u)==B&&I.c[B]%2!=0}function x(I,B){return(I.length>1?I.charAt(0)+"."+I.slice(1):I)+(B<0?"e":"e+")+B}function O(I,B,z){var F,q;if(B<0){for(q=z+".";++B;q+=z);I=q+I}else if(F=I.length,++B>F){for(q=z,B-=F;--B;q+=z);I+=q}else B<F&&(I=I.slice(0,B)+"."+I.slice(B));return I}e=m(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof Lf!="undefined"&&Lf.exports?Lf.exports=e:(t||(t=typeof self!="undefined"&&self?self:window),t.BigNumber=e)})(V_)});var Y_=de((nV,K_)=>{var j_=T0(),H_=K_.exports;(function(){"use strict";function t(f){return f<10?"0"+f:f}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,i,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function l(f){return r.lastIndex=0,r.test(f)?'"'+f.replace(r,function(d){var h=a[d];return typeof h=="string"?h:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function u(f,d){var h,g,m,y,_=n,w,E=d[f],T=E!=null&&(E instanceof j_||j_.isBigNumber(E));switch(E&&typeof E=="object"&&typeof E.toJSON=="function"&&(E=E.toJSON(f)),typeof s=="function"&&(E=s.call(d,f,E)),typeof E){case"string":return T?E:l(E);case"number":return isFinite(E)?String(E):"null";case"boolean":case"null":case"bigint":return String(E);case"object":if(!E)return"null";if(n+=i,w=[],Object.prototype.toString.apply(E)==="[object Array]"){for(y=E.length,h=0;h<y;h+=1)w[h]=u(h,E)||"null";return m=w.length===0?"[]":n?`[
`+n+w.join(`,
`+n)+`
`+_+"]":"["+w.join(",")+"]",n=_,m}if(s&&typeof s=="object")for(y=s.length,h=0;h<y;h+=1)typeof s[h]=="string"&&(g=s[h],m=u(g,E),m&&w.push(l(g)+(n?": ":":")+m));else Object.keys(E).forEach(function(x){var O=u(x,E);O&&w.push(l(x)+(n?": ":":")+O)});return m=w.length===0?"{}":n?`{
`+n+w.join(`,
`+n)+`
`+_+"}":"{"+w.join(",")+"}",n=_,m}}typeof H_.stringify!="function"&&(H_.stringify=function(f,d,h){var g;if(n="",i="",typeof h=="number")for(g=0;g<h;g+=1)i+=" ";else typeof h=="string"&&(i=h);if(s=d,d&&typeof d!="function"&&(typeof d!="object"||typeof d.length!="number"))throw new Error("JSON.stringify");return u("",{"":f})})})()});var z_=de((iV,W_)=>{var Pf=null,VL=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,jL=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,HL=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction!="undefined")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction!="undefined")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,n,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},a,s=function(_){throw{name:"SyntaxError",message:_,at:r,text:a}},l=function(_){return _&&_!==n&&s("Expected '"+_+"' instead of '"+n+"'"),n=a.charAt(r),r+=1,n},u=function(){var _,w="";for(n==="-"&&(w="-",l("-"));n>="0"&&n<="9";)w+=n,l();if(n===".")for(w+=".";l()&&n>="0"&&n<="9";)w+=n;if(n==="e"||n==="E")for(w+=n,l(),(n==="-"||n==="+")&&(w+=n,l());n>="0"&&n<="9";)w+=n,l();if(_=+w,!isFinite(_))s("Bad number");else return Pf==null&&(Pf=T0()),w.length>15?e.storeAsString?w:e.useNativeBigInt?BigInt(w):new Pf(w):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(_):new Pf(_):_},f=function(){var _,w,E="",T;if(n==='"')for(var x=r;l();){if(n==='"')return r-1>x&&(E+=a.substring(x,r-1)),l(),E;if(n==="\\"){if(r-1>x&&(E+=a.substring(x,r-1)),l(),n==="u"){for(T=0,w=0;w<4&&(_=parseInt(l(),16),!!isFinite(_));w+=1)T=T*16+_;E+=String.fromCharCode(T)}else if(typeof i[n]=="string")E+=i[n];else break;x=r}}s("Bad string")},d=function(){for(;n&&n<=" ";)l()},h=function(){switch(n){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}s("Unexpected '"+n+"'")},g,m=function(){var _=[];if(n==="["){if(l("["),d(),n==="]")return l("]"),_;for(;n;){if(_.push(g()),d(),n==="]")return l("]"),_;l(","),d()}}s("Bad array")},y=function(){var _,w=Object.create(null);if(n==="{"){if(l("{"),d(),n==="}")return l("}"),w;for(;n;){if(_=f(),d(),l(":"),e.strict===!0&&Object.hasOwnProperty.call(w,_)&&s('Duplicate key "'+_+'"'),VL.test(_)===!0?e.protoAction==="error"?s("Object contains forbidden prototype property"):e.protoAction==="ignore"?g():w[_]=g():jL.test(_)===!0?e.constructorAction==="error"?s("Object contains forbidden constructor property"):e.constructorAction==="ignore"?g():w[_]=g():w[_]=g(),d(),n==="}")return l("}"),w;l(","),d()}}s("Bad object")};return g=function(){switch(d(),n){case"{":return y();case"[":return m();case'"':return f();case"-":return u();default:return n>="0"&&n<="9"?u():h()}},function(_,w){var E;return a=_+"",r=0,n=" ",E=g(),d(),n&&s("Syntax error"),typeof w=="function"?function T(x,O){var I,B,z=x[O];return z&&typeof z=="object"&&Object.keys(z).forEach(function(F){B=T(z,F),B!==void 0?z[F]=B:delete z[F]}),w.call(x,O,z)}({"":E},""):E}};W_.exports=HL});var J_=de((aV,Mf)=>{var Q_=Y_().stringify,X_=z_();Mf.exports=function(t){return{parse:X_(t),stringify:Q_}};Mf.exports.parse=X_();Mf.exports.stringify=Q_});var Ff=de(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.requestTimeout=Ut.resetIsAvailableCache=Ut.isAvailable=Ut.project=Ut.instance=Ut.HEADERS=Ut.HEADER_VALUE=Ut.HEADER_NAME=Ut.SECONDARY_HOST_ADDRESS=Ut.HOST_ADDRESS=Ut.BASE_PATH=void 0;var A0=Wo(),KL=J_();Ut.BASE_PATH="/computeMetadata/v1";Ut.HOST_ADDRESS="http://169.254.169.254";Ut.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";Ut.HEADER_NAME="Metadata-Flavor";Ut.HEADER_VALUE="Google";Ut.HEADERS=Object.freeze({[Ut.HEADER_NAME]:Ut.HEADER_VALUE});function k0(t){return t||(t=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||Ut.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(Ut.BASE_PATH,t).href}function YL(t){Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}function I0(t,e,r=3,n=!1){return M(this,null,function*(){e=e||{},typeof e=="string"&&(e={property:e});let i="";typeof e=="object"&&e.property&&(i="/"+e.property),YL(e);try{let s=yield(n?WL:A0.request)({url:`${k0()}/${t}${i}`,headers:Object.assign({},Ut.HEADERS,e.headers),retryConfig:{noResponseRetries:r},params:e.params,responseType:"text",timeout:Z_()});if(s.headers[Ut.HEADER_NAME.toLowerCase()]!==Ut.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${Ut.HEADER_NAME} header.`);if(!s.data)throw new Error("Invalid response from the metadata service");if(typeof s.data=="string")try{return KL.parse(s.data)}catch(l){}return s.data}catch(a){let s=a;throw s.response&&s.response.status!==200&&(s.message=`Unsuccessful response status code. ${s.message}`),a}})}function WL(t){return M(this,null,function*(){let e=Gi($n({},t),{url:t.url.replace(k0(),k0(Ut.SECONDARY_HOST_ADDRESS))}),r=!1,n=(0,A0.request)(t).then(a=>(r=!0,a)).catch(a=>{if(r)return i;throw r=!0,a}),i=(0,A0.request)(e).then(a=>(r=!0,a)).catch(a=>{if(r)return n;throw r=!0,a});return Promise.race([n,i])})}function zL(t){return I0("instance",t)}Ut.instance=zL;function QL(t){return I0("project",t)}Ut.project=QL;function XL(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var Uf;function JL(){return M(this,null,function*(){try{return Uf===void 0&&(Uf=I0("instance",void 0,XL(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),yield Uf,!0}catch(t){let e=t;if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code))){let r="UNKNOWN";e.code&&(r=e.code),process.emitWarning(`received unexpected error = ${e.message} code = ${r}`,"MetadataLookupWarning")}return!1}})}Ut.isAvailable=JL;function ZL(){Uf=void 0}Ut.resetIsAvailableCache=ZL;function Z_(){return process.env.K_SERVICE||process.env.FUNCTION_NAME?0:3e3}Ut.requestTimeout=Z_});var tw=de(qf=>{"use strict";qf.byteLength=eP;qf.toByteArray=rP;qf.fromByteArray=aP;var ji=[],ei=[],$L=typeof Uint8Array!="undefined"?Uint8Array:Array,R0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Fs=0,$_=R0.length;Fs<$_;++Fs)ji[Fs]=R0[Fs],ei[R0.charCodeAt(Fs)]=Fs;var Fs,$_;ei["-".charCodeAt(0)]=62;ei["_".charCodeAt(0)]=63;function ew(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function eP(t){var e=ew(t),r=e[0],n=e[1];return(r+n)*3/4-n}function tP(t,e,r){return(e+r)*3/4-r}function rP(t){var e,r=ew(t),n=r[0],i=r[1],a=new $L(tP(t,n,i)),s=0,l=i>0?n-4:n,u;for(u=0;u<l;u+=4)e=ei[t.charCodeAt(u)]<<18|ei[t.charCodeAt(u+1)]<<12|ei[t.charCodeAt(u+2)]<<6|ei[t.charCodeAt(u+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=ei[t.charCodeAt(u)]<<2|ei[t.charCodeAt(u+1)]>>4,a[s++]=e&255),i===1&&(e=ei[t.charCodeAt(u)]<<10|ei[t.charCodeAt(u+1)]<<4|ei[t.charCodeAt(u+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function nP(t){return ji[t>>18&63]+ji[t>>12&63]+ji[t>>6&63]+ji[t&63]}function iP(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(nP(n));return i.join("")}function aP(t){for(var e,r=t.length,n=r%3,i=[],a=16383,s=0,l=r-n;s<l;s+=a)i.push(iP(t,s,s+a>l?l:s+a));return n===1?(e=t[r-1],i.push(ji[e>>2]+ji[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(ji[e>>10]+ji[e>>4&63]+ji[e<<2&63]+"=")),i.join("")}});var nw=de(rw=>{(function(t){function e(){}function r(u,f){if(u=u===void 0?"utf-8":u,f=f===void 0?{fatal:!1}:f,s.indexOf(u.toLowerCase())===-1)throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+u+"') is invalid.");if(f.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function n(u){return Buffer.from(u.buffer,u.byteOffset,u.byteLength).toString("utf-8")}function i(u){var f=URL.createObjectURL(new Blob([u],{type:"text/plain;charset=UTF-8"}));try{var d=new XMLHttpRequest;return d.open("GET",f,!1),d.send(),d.responseText}catch(h){return a(u)}finally{URL.revokeObjectURL(f)}}function a(u){for(var f=0,d=Math.min(65536,u.length+1),h=new Uint16Array(d),g=[],m=0;;){var y=f<u.length;if(!y||m>=d-1){if(g.push(String.fromCharCode.apply(null,h.subarray(0,m))),!y)return g.join("");u=u.subarray(f),m=f=0}if(y=u[f++],(y&128)==0)h[m++]=y;else if((y&224)==192){var _=u[f++]&63;h[m++]=(y&31)<<6|_}else if((y&240)==224){_=u[f++]&63;var w=u[f++]&63;h[m++]=(y&31)<<12|_<<6|w}else if((y&248)==240){_=u[f++]&63,w=u[f++]&63;var E=u[f++]&63;y=(y&7)<<18|_<<12|w<<6|E,65535<y&&(y-=65536,h[m++]=y>>>10&1023|55296,y=56320|y&1023),h[m++]=y}}}if(t.TextEncoder&&t.TextDecoder)return!1;var s=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(u,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to encode: the 'stream' option is unsupported.");f=0;for(var d=u.length,h=0,g=Math.max(32,d+(d>>>1)+7),m=new Uint8Array(g>>>3<<3);f<d;){var y=u.charCodeAt(f++);if(55296<=y&&56319>=y){if(f<d){var _=u.charCodeAt(f);(_&64512)==56320&&(++f,y=((y&1023)<<10)+(_&1023)+65536)}if(55296<=y&&56319>=y)continue}if(h+4>m.length&&(g+=8,g*=1+f/u.length*2,g=g>>>3<<3,_=new Uint8Array(g),_.set(m),m=_),(y&4294967168)==0)m[h++]=y;else{if((y&4294965248)==0)m[h++]=y>>>6&31|192;else if((y&4294901760)==0)m[h++]=y>>>12&15|224,m[h++]=y>>>6&63|128;else if((y&4292870144)==0)m[h++]=y>>>18&7|240,m[h++]=y>>>12&63|128,m[h++]=y>>>6&63|128;else continue;m[h++]=y&63|128}}return m.slice?m.slice(0,h):m.subarray(0,h)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1});var l=a;typeof Buffer=="function"&&Buffer.from?l=n:typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&(l=i),r.prototype.decode=function(u,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return u=u instanceof Uint8Array?u:u.buffer instanceof ArrayBuffer?new Uint8Array(u.buffer):new Uint8Array(u),l(u)},t.TextEncoder=e,t.TextDecoder=r})(typeof window!="undefined"?window:typeof global!="undefined"?global:rw)});var iw=de(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.BrowserCrypto=void 0;var zo=tw();typeof process=="undefined"&&typeof TextEncoder=="undefined"&&nw();var sP=Qo(),yu=class{constructor(){if(typeof window=="undefined"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}sha256DigestBase64(e){return M(this,null,function*(){let r=new TextEncoder().encode(e),n=yield window.crypto.subtle.digest("SHA-256",r);return zo.fromByteArray(new Uint8Array(n))})}randomBytesBase64(e){let r=new Uint8Array(e);return window.crypto.getRandomValues(r),zo.fromByteArray(r)}static padBase64(e){for(;e.length%4!=0;)e+="=";return e}verify(e,r,n){return M(this,null,function*(){let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},a=new TextEncoder().encode(r),s=zo.toByteArray(yu.padBase64(n)),l=yield window.crypto.subtle.importKey("jwk",e,i,!0,["verify"]);return yield window.crypto.subtle.verify(i,l,s,a)})}sign(e,r){return M(this,null,function*(){let n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(r),a=yield window.crypto.subtle.importKey("jwk",e,n,!0,["sign"]),s=yield window.crypto.subtle.sign(n,a,i);return zo.fromByteArray(new Uint8Array(s))})}decodeBase64StringUtf8(e){let r=zo.toByteArray(yu.padBase64(e));return new TextDecoder().decode(r)}encodeBase64StringUtf8(e){let r=new TextEncoder().encode(e);return zo.fromByteArray(r)}sha256DigestHex(e){return M(this,null,function*(){let r=new TextEncoder().encode(e),n=yield window.crypto.subtle.digest("SHA-256",r);return(0,sP.fromArrayBufferToHex)(n)})}signWithHmacSha256(e,r){return M(this,null,function*(){let n=typeof e=="string"?e:String.fromCharCode(...new Uint16Array(e)),i=new TextEncoder,a=yield window.crypto.subtle.importKey("raw",i.encode(n),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",a,i.encode(r))})}};Gf.BrowserCrypto=yu});var sw=de(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.NodeCrypto=void 0;var Xo=require("crypto"),aw=class{sha256DigestBase64(e){return M(this,null,function*(){return Xo.createHash("sha256").update(e).digest("base64")})}randomBytesBase64(e){return Xo.randomBytes(e).toString("base64")}verify(e,r,n){return M(this,null,function*(){let i=Xo.createVerify("sha256");return i.update(r),i.end(),i.verify(e,n,"base64")})}sign(e,r){return M(this,null,function*(){let n=Xo.createSign("RSA-SHA256");return n.update(r),n.end(),n.sign(e,"base64")})}decodeBase64StringUtf8(e){return Buffer.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return Buffer.from(e,"utf-8").toString("base64")}sha256DigestHex(e){return M(this,null,function*(){return Xo.createHash("sha256").update(e).digest("hex")})}signWithHmacSha256(e,r){return M(this,null,function*(){let n=typeof e=="string"?e:lP(e);return oP(Xo.createHmac("sha256",n).update(r).digest())})}};Vf.NodeCrypto=aw;function oP(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function lP(t){return Buffer.from(t)}});var Qo=de($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.fromArrayBufferToHex=$a.hasBrowserCrypto=$a.createCrypto=void 0;var uP=iw(),cP=sw();function fP(){return ow()?new uP.BrowserCrypto:new cP.NodeCrypto}$a.createCrypto=fP;function ow(){return typeof window!="undefined"&&typeof window.crypto!="undefined"&&typeof window.crypto.subtle!="undefined"}$a.hasBrowserCrypto=ow;function dP(t){return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}$a.fromArrayBufferToHex=dP});var lw=de(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.validate=void 0;function hP(t){let e=[{invalid:"uri",expected:"url"},{invalid:"json",expected:"data"},{invalid:"qs",expected:"params"}];for(let r of e)if(t[r.invalid]){let n=`'${r.invalid}' is not a valid configuration option. Please use '${r.expected}' instead. This library is using Axios for requests. Please see https://github.com/axios/axios to learn more about the valid request options.`;throw new Error(n)}}jf.validate=hP});var uw=de((hV,pP)=>{pP.exports={_args:[["google-auth-library@8.0.2","/home/runner/work/obsidian-google-calendar/obsidian-google-calendar"]],_from:"google-auth-library@8.0.2",_id:"google-auth-library@8.0.2",_inBundle:!1,_integrity:"sha512-HoG+nWFAThLovKpvcbYzxgn+nBJPTfAwtq0GxPN821nOO+21+8oP7MoEHfd1sbDulUFFGfcjJr2CnJ4YssHcyg==",_location:"/google-auth-library",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"google-auth-library@8.0.2",name:"google-auth-library",escapedName:"google-auth-library",rawSpec:"8.0.2",saveSpec:null,fetchSpec:"8.0.2"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/google-auth-library/-/google-auth-library-8.0.2.tgz",_spec:"8.0.2",_where:"/home/runner/work/obsidian-google-calendar/obsidian-google-calendar",author:{name:"Google Inc."},bugs:{url:"https://github.com/googleapis/google-auth-library-nodejs/issues"},dependencies:{arrify:"^2.0.0","base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","fast-text-encoding":"^1.0.0",gaxios:"^5.0.0","gcp-metadata":"^5.0.0",gtoken:"^5.3.2",jws:"^4.0.0","lru-cache":"^6.0.0"},description:"Google APIs Authentication Client Library for Node.js",devDependencies:{"@compodoc/compodoc":"^1.1.7","@types/base64-js":"^1.2.5","@types/chai":"^4.1.7","@types/jws":"^3.1.0","@types/lru-cache":"^5.0.0","@types/mocha":"^8.0.0","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^16.0.0","@types/sinon":"^10.0.0","@types/tmp":"^0.2.0","assert-rejects":"^1.0.0",c8:"^7.0.0",chai:"^4.2.0",codecov:"^3.0.2",execa:"^5.0.0",gts:"^3.1.0","is-docker":"^2.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^5.0.0",keypair:"^1.0.4",linkinator:"^3.0.3",mocha:"^9.2.2",mv:"^2.1.1",ncp:"^2.0.0",nock:"^13.0.0","null-loader":"^4.0.0",puppeteer:"^13.0.0",sinon:"^13.0.0",tmp:"^0.2.0","ts-loader":"^8.0.0",typescript:"^4.6.3",webpack:"^5.21.2","webpack-cli":"^4.0.0"},engines:{node:">=12"},files:["build/src","!build/src/**/*.map"],homepage:"https://github.com/googleapis/google-auth-library-nodejs#readme",keywords:["google","api","google apis","client","client library"],license:"Apache-2.0",main:"./build/src/index.js",name:"google-auth-library",repository:{type:"git",url:"git+https://github.com/googleapis/google-auth-library-nodejs.git"},scripts:{"browser-test":"karma start",clean:"gts clean",compile:"tsc -p .",docs:"compodoc src/","docs-test":"linkinator docs",fix:"gts fix",lint:"gts check",precompile:"gts clean","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install",prepare:"npm run compile","presystem-test":"npm run compile",pretest:"npm run compile","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000",test:"c8 mocha build/test",webpack:"webpack"},types:"./build/src/index.d.ts",version:"8.0.2"}});var vu=de(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.DefaultTransporter=void 0;var cw=Wo(),gP=lw(),fw=uw(),dw="google-api-nodejs-client",Jo=class{configure(e={}){if(e.headers=e.headers||{},typeof window=="undefined"){let r=e.headers["User-Agent"];r?r.includes(`${dw}/`)||(e.headers["User-Agent"]=`${r} ${Jo.USER_AGENT}`):e.headers["User-Agent"]=Jo.USER_AGENT;let n=`auth/${fw.version}`;if(e.headers["x-goog-api-client"]&&!e.headers["x-goog-api-client"].includes(n))e.headers["x-goog-api-client"]=`${e.headers["x-goog-api-client"]} ${n}`;else if(!e.headers["x-goog-api-client"]){let i=process.version.replace(/^v/,"");e.headers["x-goog-api-client"]=`gl-node/${i} ${n}`}}return e}request(e,r){e=this.configure(e);try{(0,gP.validate)(e)}catch(n){if(r)return r(n);throw n}if(r)(0,cw.request)(e).then(n=>{r(null,n)},n=>{r(this.processError(n))});else return(0,cw.request)(e).catch(n=>{throw this.processError(n)})}processError(e){let r=e.response,n=e,i=r?r.data:null;return r&&i&&i.error&&r.status!==200?typeof i.error=="string"?(n.message=i.error,n.code=r.status.toString()):Array.isArray(i.error.errors)?(n.message=i.error.errors.map(a=>a.message).join(`
`),n.code=i.error.code,n.errors=i.error.errors):(n.message=i.error.message,n.code=i.error.code||r.status):r&&r.status>=400&&(n.message=i,n.code=r.status.toString()),n}};Hf.DefaultTransporter=Jo;Jo.USER_AGENT=`${dw}/${fw.version}`});var pw=de((gV,hw)=>{"use strict";var mP=t=>t==null?[]:Array.isArray(t)?t:typeof t=="string"?[t]:typeof t[Symbol.iterator]=="function"?[...t]:[t];hw.exports=mP});var Zo=de((N0,mw)=>{var Kf=require("buffer"),Hi=Kf.Buffer;function gw(t,e){for(var r in t)e[r]=t[r]}Hi.from&&Hi.alloc&&Hi.allocUnsafe&&Hi.allocUnsafeSlow?mw.exports=Kf:(gw(Kf,N0),N0.Buffer=qs);function qs(t,e,r){return Hi(t,e,r)}qs.prototype=Object.create(Hi.prototype);gw(Hi,qs);qs.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Hi(t,e,r)};qs.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Hi(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};qs.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Hi(t)};qs.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Kf.SlowBuffer(t)}});var vw=de((mV,yw)=>{"use strict";function D0(t){var e=(t/8|0)+(t%8==0?0:1);return e}var yP={ES256:D0(256),ES384:D0(384),ES512:D0(521)};function vP(t){var e=yP[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}yw.exports=vP});var B0=de((yV,xw)=>{"use strict";var Yf=Zo().Buffer,_w=vw(),Wf=128,ww=0,_P=32,wP=16,EP=2,Ew=wP|_P|ww<<6,zf=EP|ww<<6;function CP(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Cw(t){if(Yf.isBuffer(t))return t;if(typeof t=="string")return Yf.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function bP(t,e){t=Cw(t);var r=_w(e),n=r+1,i=t.length,a=0;if(t[a++]!==Ew)throw new Error('Could not find expected "seq"');var s=t[a++];if(s===(Wf|1)&&(s=t[a++]),i-a<s)throw new Error('"seq" specified length of "'+s+'", only "'+(i-a)+'" remaining');if(t[a++]!==zf)throw new Error('Could not find expected "int" for "r"');var l=t[a++];if(i-a-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(i-a-2)+'" available');if(n<l)throw new Error('"r" specified length of "'+l+'", max of "'+n+'" is acceptable');var u=a;if(a+=l,t[a++]!==zf)throw new Error('Could not find expected "int" for "s"');var f=t[a++];if(i-a!==f)throw new Error('"s" specified length of "'+f+'", expected "'+(i-a)+'"');if(n<f)throw new Error('"s" specified length of "'+f+'", max of "'+n+'" is acceptable');var d=a;if(a+=f,a!==i)throw new Error('Expected to consume entire buffer, but "'+(i-a)+'" bytes remain');var h=r-l,g=r-f,m=Yf.allocUnsafe(h+l+g+f);for(a=0;a<h;++a)m[a]=0;t.copy(m,a,u+Math.max(-h,0),u+l),a=r;for(var y=a;a<y+g;++a)m[a]=0;return t.copy(m,a,d+Math.max(-g,0),d+f),m=m.toString("base64"),m=CP(m),m}function bw(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=Wf;return i&&--n,n}function xP(t,e){t=Cw(t);var r=_w(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=bw(t,0,r),a=bw(t,r,t.length),s=r-i,l=r-a,u=1+1+s+1+1+l,f=u<Wf,d=Yf.allocUnsafe((f?2:3)+u),h=0;return d[h++]=Ew,f?d[h++]=u:(d[h++]=Wf|1,d[h++]=u&255),d[h++]=zf,d[h++]=s,i<0?(d[h++]=0,h+=t.copy(d,h,0,r)):h+=t.copy(d,h,i,r),d[h++]=zf,d[h++]=l,a<0?(d[h++]=0,t.copy(d,h,r)):t.copy(d,h,r+a),d}xw.exports={derToJose:bP,joseToDer:xP}});var _u=de(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.AuthClient=void 0;var SP=require("events"),TP=vu(),Sw=class extends SP.EventEmitter{constructor(){super(...arguments);this.transporter=new TP.DefaultTransporter,this.credentials={},this.eagerRefreshThresholdMillis=5*60*1e3,this.forceRefreshOnFailure=!1}setCredentials(e){this.credentials=e}addSharedMetadataHeaders(e){return!e["x-goog-user-project"]&&this.quotaProjectId&&(e["x-goog-user-project"]=this.quotaProjectId),e}};Qf.AuthClient=Sw});var O0=de(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.LoginTicket=void 0;var Tw=class{constructor(e,r){this.envelope=e,this.payload=r}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let e=this.getPayload();return e&&e.sub?e.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}};Xf.LoginTicket=Tw});var Gs=de(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.OAuth2Client=Ki.CertificateFormat=Ki.CodeChallengeMethod=void 0;var Jf=require("querystring"),AP=require("stream"),kP=B0(),L0=Qo(),IP=_u(),RP=O0(),NP;(function(t){t.Plain="plain",t.S256="S256"})(NP=Ki.CodeChallengeMethod||(Ki.CodeChallengeMethod={}));var es;(function(t){t.PEM="PEM",t.JWK="JWK"})(es=Ki.CertificateFormat||(Ki.CertificateFormat={}));var rr=class extends IP.AuthClient{constructor(e,r,n){super();this.certificateCache={},this.certificateExpiry=null,this.certificateCacheFormat=es.PEM,this.refreshTokenPromises=new Map;let i=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,redirectUri:n};this._clientId=i.clientId,this._clientSecret=i.clientSecret,this.redirectUri=i.redirectUri,this.eagerRefreshThresholdMillis=i.eagerRefreshThresholdMillis||5*60*1e3,this.forceRefreshOnFailure=!!i.forceRefreshOnFailure}generateAuthUrl(e={}){if(e.code_challenge_method&&!e.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return e.response_type=e.response_type||"code",e.client_id=e.client_id||this._clientId,e.redirect_uri=e.redirect_uri||this.redirectUri,e.scope instanceof Array&&(e.scope=e.scope.join(" ")),rr.GOOGLE_OAUTH2_AUTH_BASE_URL_+"?"+Jf.stringify(e)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}generateCodeVerifierAsync(){return M(this,null,function*(){let e=(0,L0.createCrypto)(),n=e.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),a=(yield e.sha256DigestBase64(n)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:n,codeChallenge:a}})}getToken(e,r){let n=typeof e=="string"?{code:e}:e;if(r)this.getTokenAsync(n).then(i=>r(null,i.tokens,i.res),i=>r(i,null,i.response));else return this.getTokenAsync(n)}getTokenAsync(e){return M(this,null,function*(){let r=rr.GOOGLE_OAUTH2_TOKEN_URL_,n={code:e.code,client_id:e.client_id||this._clientId,client_secret:this._clientSecret,redirect_uri:e.redirect_uri||this.redirectUri,grant_type:"authorization_code",code_verifier:e.codeVerifier},i=yield this.transporter.request({method:"POST",url:r,data:Jf.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshToken(e){return M(this,null,function*(){if(!e)return this.refreshTokenNoCache(e);if(this.refreshTokenPromises.has(e))return this.refreshTokenPromises.get(e);let r=this.refreshTokenNoCache(e).then(n=>(this.refreshTokenPromises.delete(e),n),n=>{throw this.refreshTokenPromises.delete(e),n});return this.refreshTokenPromises.set(e,r),r})}refreshTokenNoCache(e){return M(this,null,function*(){if(!e)throw new Error("No refresh token is set.");let r=rr.GOOGLE_OAUTH2_TOKEN_URL_,n={refresh_token:e,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},i=yield this.transporter.request({method:"POST",url:r,data:Jf.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshAccessToken(e){if(e)this.refreshAccessTokenAsync().then(r=>e(null,r.credentials,r.res),e);else return this.refreshAccessTokenAsync()}refreshAccessTokenAsync(){return M(this,null,function*(){let e=yield this.refreshToken(this.credentials.refresh_token),r=e.tokens;return r.refresh_token=this.credentials.refresh_token,this.credentials=r,{credentials:this.credentials,res:e.res}})}getAccessToken(e){if(e)this.getAccessTokenAsync().then(r=>e(null,r.token,r.res),e);else return this.getAccessTokenAsync()}getAccessTokenAsync(){return M(this,null,function*(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let n=yield this.processAndValidateRefreshHandler();if(n==null?void 0:n.access_token)return this.setCredentials(n),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");let r=yield this.refreshAccessTokenAsync();if(!r.credentials||r.credentials&&!r.credentials.access_token)throw new Error("Could not refresh access token.");return{token:r.credentials.access_token,res:r.res}}else return{token:this.credentials.access_token}})}getRequestHeaders(e){return M(this,null,function*(){return(yield this.getRequestMetadataAsync(e)).headers})}getRequestMetadataAsync(e){return M(this,null,function*(){let r=this.credentials;if(!r.access_token&&!r.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(r.access_token&&!this.isTokenExpiring()){r.token_type=r.token_type||"Bearer";let l={Authorization:r.token_type+" "+r.access_token};return{headers:this.addSharedMetadataHeaders(l)}}if(this.refreshHandler){let l=yield this.processAndValidateRefreshHandler();if(l==null?void 0:l.access_token){this.setCredentials(l);let u={Authorization:"Bearer "+this.credentials.access_token};return{headers:this.addSharedMetadataHeaders(u)}}}if(this.apiKey)return{headers:{"X-Goog-Api-Key":this.apiKey}};let n=null,i=null;try{n=yield this.refreshToken(r.refresh_token),i=n.tokens}catch(l){let u=l;throw u.response&&(u.response.status===403||u.response.status===404)&&(u.message=`Could not refresh access token: ${u.message}`),u}let a=this.credentials;a.token_type=a.token_type||"Bearer",i.refresh_token=a.refresh_token,this.credentials=i;let s={Authorization:a.token_type+" "+i.access_token};return{headers:this.addSharedMetadataHeaders(s),res:n.res}})}static getRevokeTokenUrl(e){let r=Jf.stringify({token:e});return`${rr.GOOGLE_OAUTH2_REVOKE_URL_}?${r}`}revokeToken(e,r){let n={url:rr.getRevokeTokenUrl(e),method:"POST"};if(r)this.transporter.request(n).then(i=>r(null,i),r);else return this.transporter.request(n)}revokeCredentials(e){if(e)this.revokeCredentialsAsync().then(r=>e(null,r),e);else return this.revokeCredentialsAsync()}revokeCredentialsAsync(){return M(this,null,function*(){let e=this.credentials.access_token;if(this.credentials={},e)return this.revokeToken(e);throw new Error("No access token to revoke.")})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}requestAsync(e,r=!1){return M(this,null,function*(){let n;try{let i=yield this.getRequestMetadataAsync(e.url);e.headers=e.headers||{},i.headers&&i.headers["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i.headers["x-goog-user-project"]),i.headers&&i.headers.Authorization&&(e.headers.Authorization=i.headers.Authorization),this.apiKey&&(e.headers["X-Goog-Api-Key"]=this.apiKey),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),u=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,f=a.config.data instanceof AP.Readable,d=s===401||s===403;if(!r&&d&&!f&&l)return yield this.refreshAccessTokenAsync(),this.requestAsync(e,!0);if(!r&&d&&!f&&u){let h=yield this.processAndValidateRefreshHandler();return(h==null?void 0:h.access_token)&&this.setCredentials(h),this.requestAsync(e,!0)}}throw i}return n})}verifyIdToken(e,r){if(r&&typeof r!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(r)this.verifyIdTokenAsync(e).then(n=>r(null,n),r);else return this.verifyIdTokenAsync(e)}verifyIdTokenAsync(e){return M(this,null,function*(){if(!e.idToken)throw new Error("The verifyIdToken method requires an ID Token");let r=yield this.getFederatedSignonCertsAsync();return yield this.verifySignedJwtWithCertsAsync(e.idToken,r.certs,e.audience,rr.ISSUERS_,e.maxExpiry)})}getTokenInfo(e){return M(this,null,function*(){let{data:r}=yield this.transporter.request({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${e}`},url:rr.GOOGLE_TOKEN_INFO_URL}),n=Object.assign({expiry_date:new Date().getTime()+r.expires_in*1e3,scopes:r.scope.split(" ")},r);return delete n.expires_in,delete n.scope,n})}getFederatedSignonCerts(e){if(e)this.getFederatedSignonCertsAsync().then(r=>e(null,r.certs,r.res),e);else return this.getFederatedSignonCertsAsync()}getFederatedSignonCertsAsync(){return M(this,null,function*(){let e=new Date().getTime(),r=(0,L0.hasBrowserCrypto)()?es.JWK:es.PEM;if(this.certificateExpiry&&e<this.certificateExpiry.getTime()&&this.certificateCacheFormat===r)return{certs:this.certificateCache,format:r};let n,i;switch(r){case es.PEM:i=rr.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_;break;case es.JWK:i=rr.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_;break;default:throw new Error(`Unsupported certificate format ${r}`)}try{n=yield this.transporter.request({url:i})}catch(f){throw f instanceof Error&&(f.message=`Failed to retrieve verification certificates: ${f.message}`),f}let a=n?n.headers["cache-control"]:void 0,s=-1;if(a){let d=new RegExp("max-age=([0-9]*)").exec(a);d&&d.length===2&&(s=Number(d[1])*1e3)}let l={};switch(r){case es.PEM:l=n.data;break;case es.JWK:for(let f of n.data.keys)l[f.kid]=f;break;default:throw new Error(`Unsupported certificate format ${r}`)}let u=new Date;return this.certificateExpiry=s===-1?null:new Date(u.getTime()+s),this.certificateCache=l,this.certificateCacheFormat=r,{certs:l,format:r,res:n}})}getIapPublicKeys(e){if(e)this.getIapPublicKeysAsync().then(r=>e(null,r.pubkeys,r.res),e);else return this.getIapPublicKeysAsync()}getIapPublicKeysAsync(){return M(this,null,function*(){let e,r=rr.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_;try{e=yield this.transporter.request({url:r})}catch(n){throw n instanceof Error&&(n.message=`Failed to retrieve verification certificates: ${n.message}`),n}return{pubkeys:e.data,res:e}})}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}verifySignedJwtWithCertsAsync(e,r,n,i,a){return M(this,null,function*(){let s=(0,L0.createCrypto)();a||(a=rr.MAX_TOKEN_LIFETIME_SECS_);let l=e.split(".");if(l.length!==3)throw new Error("Wrong number of segments in token: "+e);let u=l[0]+"."+l[1],f=l[2],d,h;try{d=JSON.parse(s.decodeBase64StringUtf8(l[0]))}catch(x){throw x instanceof Error&&(x.message=`Can't parse token envelope: ${l[0]}': ${x.message}`),x}if(!d)throw new Error("Can't parse token envelope: "+l[0]);try{h=JSON.parse(s.decodeBase64StringUtf8(l[1]))}catch(x){throw x instanceof Error&&(x.message=`Can't parse token payload '${l[0]}`),x}if(!h)throw new Error("Can't parse token payload: "+l[1]);if(!Object.prototype.hasOwnProperty.call(r,d.kid))throw new Error("No pem found for envelope: "+JSON.stringify(d));let g=r[d.kid];if(d.alg==="ES256"&&(f=kP.joseToDer(f,"ES256").toString("base64")),!(yield s.verify(g,u,f)))throw new Error("Invalid token signature: "+e);if(!h.iat)throw new Error("No issue time in token: "+JSON.stringify(h));if(!h.exp)throw new Error("No expiration time in token: "+JSON.stringify(h));let y=Number(h.iat);if(isNaN(y))throw new Error("iat field using invalid format");let _=Number(h.exp);if(isNaN(_))throw new Error("exp field using invalid format");let w=new Date().getTime()/1e3;if(_>=w+a)throw new Error("Expiration time too far in future: "+JSON.stringify(h));let E=y-rr.CLOCK_SKEW_SECS_,T=_+rr.CLOCK_SKEW_SECS_;if(w<E)throw new Error("Token used too early, "+w+" < "+E+": "+JSON.stringify(h));if(w>T)throw new Error("Token used too late, "+w+" > "+T+": "+JSON.stringify(h));if(i&&i.indexOf(h.iss)<0)throw new Error("Invalid issuer, expected one of ["+i+"], but got "+h.iss);if(typeof n!="undefined"&&n!==null){let x=h.aud,O=!1;if(n.constructor===Array?O=n.indexOf(x)>-1:O=x===n,!O)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new RP.LoginTicket(d,h)})}processAndValidateRefreshHandler(){return M(this,null,function*(){if(this.refreshHandler){let e=yield this.refreshHandler();if(!e.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return e}})}isTokenExpiring(){let e=this.credentials.expiry_date;return e?e<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}};Ki.OAuth2Client=rr;rr.GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";rr.GOOGLE_OAUTH2_AUTH_BASE_URL_="https://accounts.google.com/o/oauth2/v2/auth";rr.GOOGLE_OAUTH2_TOKEN_URL_="https://oauth2.googleapis.com/token";rr.GOOGLE_OAUTH2_REVOKE_URL_="https://oauth2.googleapis.com/revoke";rr.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_="https://www.googleapis.com/oauth2/v1/certs";rr.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_="https://www.googleapis.com/oauth2/v3/certs";rr.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_="https://www.gstatic.com/iap/verify/public_key";rr.CLOCK_SKEW_SECS_=300;rr.MAX_TOKEN_LIFETIME_SECS_=86400;rr.ISSUERS_=["accounts.google.com","https://accounts.google.com"]});var P0=de(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.Compute=void 0;var DP=pw(),BP=Wo(),Aw=Ff(),OP=Gs(),kw=class extends OP.OAuth2Client{constructor(e={}){super(e);this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=e.serviceAccountEmail||"default",this.scopes=DP(e.scopes)}refreshTokenNoCache(e){return M(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/token`,n;try{let a={property:r};this.scopes.length>0&&(a.params={scopes:this.scopes.join(",")}),n=yield Aw.instance(a)}catch(a){throw a instanceof BP.GaxiosError&&(a.message=`Could not refresh access token: ${a.message}`,this.wrapError(a)),a}let i=n;return n&&n.expires_in&&(i.expiry_date=new Date().getTime()+n.expires_in*1e3,delete i.expires_in),this.emit("tokens",i),{tokens:i,res:null}})}fetchIdToken(e){return M(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${e}`,n;try{let i={property:r};n=yield Aw.instance(i)}catch(i){throw i instanceof Error&&(i.message=`Could not fetch ID token: ${i.message}`),i}return n})}wrapError(e){let r=e.response;r&&r.status&&(e.code=r.status.toString(),r.status===403?e.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+e.message:r.status===404&&(e.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+e.message))}};Zf.Compute=kw});var M0=de($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.IdTokenClient=void 0;var LP=Gs(),Iw=class extends LP.OAuth2Client{constructor(e){super();this.targetAudience=e.targetAudience,this.idTokenProvider=e.idTokenProvider}getRequestMetadataAsync(e){return M(this,null,function*(){if(!this.credentials.id_token||(this.credentials.expiry_date||0)<Date.now()){let n=yield this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:n,expiry_date:this.getIdTokenExpiryDate(n)}}return{headers:{Authorization:"Bearer "+this.credentials.id_token}}})}getIdTokenExpiryDate(e){let r=e.split(".")[1];if(r)return JSON.parse(Buffer.from(r,"base64").toString("ascii")).exp*1e3}};$f.IdTokenClient=Iw});var U0=de(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.getEnv=Ca.clear=Ca.GCPEnv=void 0;var Rw=Ff(),ts;(function(t){t.APP_ENGINE="APP_ENGINE",t.KUBERNETES_ENGINE="KUBERNETES_ENGINE",t.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",t.COMPUTE_ENGINE="COMPUTE_ENGINE",t.CLOUD_RUN="CLOUD_RUN",t.NONE="NONE"})(ts=Ca.GCPEnv||(Ca.GCPEnv={}));var wu;function PP(){wu=void 0}Ca.clear=PP;function MP(){return M(this,null,function*(){return wu||(wu=UP(),wu)})}Ca.getEnv=MP;function UP(){return M(this,null,function*(){let t=ts.NONE;return FP()?t=ts.APP_ENGINE:qP()?t=ts.CLOUD_FUNCTIONS:(yield jP())?(yield VP())?t=ts.KUBERNETES_ENGINE:GP()?t=ts.CLOUD_RUN:t=ts.COMPUTE_ENGINE:t=ts.NONE,t})}function FP(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function qP(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function GP(){return!!process.env.K_CONFIGURATION}function VP(){return M(this,null,function*(){try{return yield Rw.instance("attributes/cluster-name"),!0}catch(t){return!1}})}function jP(){return M(this,null,function*(){return Rw.isAvailable()})}});var F0=de(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.GaxiosError=void 0;var Nw=class extends Error{constructor(e,r,n){super(e);this.response=n,this.config=r,this.code=n.status.toString()}};ed.GaxiosError=Nw});var Bw=de(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.getRetryConfig=void 0;function HP(t){return M(this,null,function*(){var e;let r=Dw(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!(yield(r.shouldRetry||KP)(t)))return{shouldRetry:!1,config:t.config};let s=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(u=>{setTimeout(u,s)});return r.onRetryAttempt&&r.onRetryAttempt(t),yield l,{shouldRetry:!0,config:t.config}})}td.getRetryConfig=HP;function KP(t){let e=Dw(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let a=t.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function Dw(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}});var Fw=de($o=>{"use strict";var rd=$o&&$o.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($o,"__esModule",{value:!0});$o.Gaxios=void 0;var YP=rd(p0()),WP=require("https"),zP=rd(g0()),QP=rd(require("querystring")),XP=rd(m0()),Ow=require("url"),JP=F0(),ZP=Bw(),$P=t4()?window.fetch:zP.default;function e4(){return typeof window!="undefined"&&!!window}function t4(){return e4()&&!!window.fetch}function r4(){return typeof Buffer!="undefined"}function Lw(t,e){return!!Pw(t,e)}function Pw(t,e){e=e.toLowerCase();for(let r of Object.keys((t==null?void 0:t.headers)||{}))if(e===r.toLowerCase())return t.headers[r]}var q0;function Mw(){let t=process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy;return t&&(q0=x0()),t}Mw();function n4(t){var e;let r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new Ow.URL(t);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function i4(t){if(!n4(t))return Mw()}var Uw=class{constructor(e){this.agentCache=new Map,this.defaults=e||{}}request(){return M(this,arguments,function*(e={}){return e=this.validateOpts(e),this._request(e)})}_defaultAdapter(e){return M(this,null,function*(){let n=yield(e.fetchImplementation||$P)(e.url,e),i=yield this.getResponseData(e,n);return this.translateResponse(e,n,i)})}_request(){return M(this,arguments,function*(e={}){try{let r;if(e.adapter?r=yield e.adapter(e,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(e),!e.validateStatus(r.status))throw new JP.GaxiosError(`Request failed with status code ${r.status}`,e,r);return r}catch(r){let n=r;n.config=e;let{shouldRetry:i,config:a}=yield ZP.getRetryConfig(r);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(e,r){return M(this,null,function*(){switch(e.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(e){let r=YP.default(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;XP.default.readable(r.data)?r.body=r.data:r4()&&Buffer.isBuffer(r.data)?(r.body=r.data,Lw(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(Pw(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(Lw(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=i4(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new Ow.URL(i);r.agent=new q0({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new q0(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new WP.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return QP.default.stringify(e)}translateResponse(e,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:e,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};$o.Gaxios=Uw});var Gw=de(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.request=Yi.instance=Yi.Gaxios=void 0;var qw=Fw();Object.defineProperty(Yi,"Gaxios",{enumerable:!0,get:function(){return qw.Gaxios}});var a4=F0();Object.defineProperty(Yi,"GaxiosError",{enumerable:!0,get:function(){return a4.GaxiosError}});Yi.instance=new qw.Gaxios;function s4(t){return M(this,null,function*(){return Yi.instance.request(t)})}Yi.request=s4});var G0=de((kV,Vw)=>{var nd=Zo().Buffer,o4=require("stream"),l4=require("util");function id(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=nd.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=nd.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}l4.inherits(id,o4);id.prototype.write=function(e){this.buffer=nd.concat([this.buffer,nd.from(e)]),this.emit("data",e)};id.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};Vw.exports=id});var Hw=de((IV,jw)=>{"use strict";var Eu=require("buffer").Buffer,V0=require("buffer").SlowBuffer;jw.exports=ad;function ad(t,e){if(!Eu.isBuffer(t)||!Eu.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}ad.install=function(){Eu.prototype.equal=V0.prototype.equal=function(e){return ad(this,e)}};var u4=Eu.prototype.equal,c4=V0.prototype.equal;ad.restore=function(){Eu.prototype.equal=u4,V0.prototype.equal=c4}});var K0=de((RV,$w)=>{var f4=Hw(),el=Zo().Buffer,Wi=require("crypto"),Kw=B0(),Yw=require("util"),d4=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,Cu="secret must be a string or buffer",tl="key must be a string or a buffer",h4="key must be a string, a buffer or an object",j0=typeof Wi.createPublicKey=="function";j0&&(tl+=" or a KeyObject",Cu+="or a KeyObject");function Ww(t){if(!el.isBuffer(t)&&typeof t!="string"&&(!j0||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw Ei(tl)}function zw(t){if(!el.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw Ei(h4)}function p4(t){if(!el.isBuffer(t)){if(typeof t=="string")return t;if(!j0||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw Ei(Cu)}}function H0(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qw(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function Ei(t){var e=[].slice.call(arguments,1),r=Yw.format.bind(Yw,t).apply(null,e);return new TypeError(r)}function g4(t){return el.isBuffer(t)||typeof t=="string"}function bu(t){return g4(t)||(t=JSON.stringify(t)),t}function Xw(t){return function(r,n){p4(n),r=bu(r);var i=Wi.createHmac("sha"+t,n),a=(i.update(r),i.digest("base64"));return H0(a)}}function m4(t){return function(r,n,i){var a=Xw(t)(r,i);return f4(el.from(n),el.from(a))}}function Jw(t){return function(r,n){zw(n),r=bu(r);var i=Wi.createSign("RSA-SHA"+t),a=(i.update(r),i.sign(n,"base64"));return H0(a)}}function Zw(t){return function(r,n,i){Ww(i),r=bu(r),n=Qw(n);var a=Wi.createVerify("RSA-SHA"+t);return a.update(r),a.verify(i,n,"base64")}}function y4(t){return function(r,n){zw(n),r=bu(r);var i=Wi.createSign("RSA-SHA"+t),a=(i.update(r),i.sign({key:n,padding:Wi.constants.RSA_PKCS1_PSS_PADDING,saltLength:Wi.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return H0(a)}}function v4(t){return function(r,n,i){Ww(i),r=bu(r),n=Qw(n);var a=Wi.createVerify("RSA-SHA"+t);return a.update(r),a.verify({key:i,padding:Wi.constants.RSA_PKCS1_PSS_PADDING,saltLength:Wi.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function _4(t){var e=Jw(t);return function(){var n=e.apply(null,arguments);return n=Kw.derToJose(n,"ES"+t),n}}function w4(t){var e=Zw(t);return function(n,i,a){i=Kw.joseToDer(i,"ES"+t).toString("base64");var s=e(n,i,a);return s}}function E4(){return function(){return""}}function C4(){return function(e,r){return r===""}}$w.exports=function(e){var r={hs:Xw,rs:Jw,ps:y4,es:_4,none:E4},n={hs:m4,rs:Zw,ps:v4,es:w4,none:C4},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!i)throw Ei(d4,e);var a=(i[1]||i[3]).toLowerCase(),s=i[2];return{sign:r[a](s),verify:n[a](s)}}});var Y0=de((NV,eE)=>{var b4=require("buffer").Buffer;eE.exports=function(e){return typeof e=="string"?e:typeof e=="number"||b4.isBuffer(e)?e.toString():JSON.stringify(e)}});var sE=de((DV,aE)=>{var x4=Zo().Buffer,tE=G0(),S4=K0(),T4=require("stream"),rE=Y0(),W0=require("util");function nE(t,e){return x4.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function A4(t,e,r){r=r||"utf8";var n=nE(rE(t),"binary"),i=nE(rE(e),r);return W0.format("%s.%s",n,i)}function iE(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,a=S4(e.alg),s=A4(e,r,i),l=a.sign(s,n);return W0.format("%s.%s",s,l)}function sd(t){var e=t.secret||t.privateKey||t.key,r=new tE(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new tE(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}W0.inherits(sd,T4);sd.prototype.sign=function(){try{var e=iE({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};sd.sign=iE;aE.exports=sd});var mE=de((BV,gE)=>{var oE=Zo().Buffer,lE=G0(),k4=K0(),I4=require("stream"),uE=Y0(),R4=require("util"),N4=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function D4(t){return Object.prototype.toString.call(t)==="[object Object]"}function B4(t){if(D4(t))return t;try{return JSON.parse(t)}catch(e){return}}function cE(t){var e=t.split(".",1)[0];return B4(oE.from(e,"base64").toString("binary"))}function O4(t){return t.split(".",2).join(".")}function fE(t){return t.split(".")[2]}function L4(t,e){e=e||"utf8";var r=t.split(".")[1];return oE.from(r,"base64").toString(e)}function dE(t){return N4.test(t)&&!!cE(t)}function hE(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=uE(t);var i=fE(t),a=O4(t),s=k4(e);return s.verify(a,i,r)}function pE(t,e){if(e=e||{},t=uE(t),!dE(t))return null;var r=cE(t);if(!r)return null;var n=L4(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:fE(t)}}function rl(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new lE(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new lE(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}R4.inherits(rl,I4);rl.prototype.verify=function(){try{var e=hE(this.signature.buffer,this.algorithm,this.key.buffer),r=pE(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};rl.decode=pE;rl.isValid=dE;rl.verify=hE;gE.exports=rl});var z0=de(rs=>{var yE=sE(),od=mE(),P4=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];rs.ALGORITHMS=P4;rs.sign=yE.sign;rs.verify=od.verify;rs.decode=od.decode;rs.isValid=od.isValid;rs.createSign=function(e){return new yE(e)};rs.createVerify=function(e){return new od(e)}});var mt=de((LV,vE)=>{vE.exports={options:{usePureJavaScript:!1}}});var EE=de((PV,wE)=>{var Q0={};wE.exports=Q0;var _E={};Q0.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=M4(t,e);else{var i=0,a=e.length,s=e.charAt(0),l=[0];for(i=0;i<t.length;++i){for(var u=0,f=t[i];u<l.length;++u)f+=l[u]<<8,l[u]=f%a,f=f/a|0;for(;f>0;)l.push(f%a),f=f/a|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=l.length-1;i>=0;--i)n+=e[l[i]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};Q0.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=_E[e];if(!r){r=_E[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,a=e.charAt(0),s=[0],n=0;n<t.length;n++){var l=r[t.charCodeAt(n)];if(l===void 0)return;for(var u=0,f=l;u<s.length;++u)f+=s[u]*i,s[u]=f&255,f>>=8;for(;f>0;)s.push(f&255),f>>=8}for(var d=0;t[d]===a&&d<t.length-1;++d)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function M4(t,e){var r=0,n=e.length,i=e.charAt(0),a=[0];for(r=0;r<t.length();++r){for(var s=0,l=t.at(r);s<a.length;++s)l+=a[s]<<8,a[s]=l%n,l=l/n|0;for(;l>0;)a.push(l%n),l=l/n|0}var u="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)u+=i;for(r=a.length-1;r>=0;--r)u+=e[a[r]];return u}});var Ft=de((MV,SE)=>{var CE=mt(),bE=EE(),H=SE.exports=CE.util=CE.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){H.nextTick=process.nextTick,typeof setImmediate=="function"?H.setImmediate=setImmediate:H.setImmediate=H.nextTick;return}if(typeof setImmediate=="function"){H.setImmediate=function(){return setImmediate.apply(void 0,arguments)},H.nextTick=function(l){return setImmediate(l)};return}if(H.setImmediate=function(l){setTimeout(l,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let l=function(u){if(u.source===window&&u.data===t){u.stopPropagation();var f=e.slice();e.length=0,f.forEach(function(d){d()})}};var s=l,t="forge.setImmediate",e=[];H.setImmediate=function(u){e.push(u),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var u=e.slice();e.length=0,u.forEach(function(f){f()})}).observe(i,{attributes:!0});var a=H.setImmediate;H.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),a(u)):(e.push(u),e.length===1&&i.setAttribute("a",n=!n))}}H.nextTick=H.setImmediate})();H.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;H.globalScope=function(){return H.isNodejs?global:typeof self=="undefined"?window:self}();H.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};H.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};H.isArrayBufferView=function(t){return t&&H.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function xu(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}H.ByteBuffer=X0;function X0(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(H.isArrayBuffer(t)||H.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(n){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof X0||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}H.ByteStringBuffer=X0;var U4=4096;H.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>U4&&(this.data.substr(0,1),this._constructedStringLength=0)};H.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};H.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};H.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};H.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};H.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};H.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(H.encodeUtf8(t))};H.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};H.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};H.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};H.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};H.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};H.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};H.ByteStringBuffer.prototype.putInt=function(t,e){xu(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};H.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};H.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};H.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};H.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};H.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};H.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};H.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};H.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};H.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};H.ByteStringBuffer.prototype.getInt=function(t){xu(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};H.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};H.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};H.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};H.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};H.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};H.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};H.ByteStringBuffer.prototype.copy=function(){var t=H.createBuffer(this.data);return t.read=this.read,t};H.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};H.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};H.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};H.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};H.ByteStringBuffer.prototype.toString=function(){return H.decodeUtf8(this.bytes())};function F4(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=H.isArrayBuffer(t),n=H.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}H.DataBuffer=F4;H.DataBuffer.prototype.length=function(){return this.write-this.read};H.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};H.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};H.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};H.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};H.DataBuffer.prototype.putBytes=function(t,e){if(H.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(H.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof H.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&H.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof H.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var a;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=H.binary.hex.decode(t,a,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=H.binary.base64.decode(t,a,this.write),this;if(e==="utf8"&&(t=H.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=H.binary.raw.decode(a),this;if(e==="utf16")return this.accommodate(t.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=H.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};H.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};H.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};H.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};H.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};H.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};H.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};H.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};H.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};H.DataBuffer.prototype.putInt=function(t,e){xu(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};H.DataBuffer.prototype.putSignedInt=function(t,e){return xu(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};H.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};H.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};H.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};H.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};H.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};H.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};H.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};H.DataBuffer.prototype.getInt=function(t){xu(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};H.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};H.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};H.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};H.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};H.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};H.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};H.DataBuffer.prototype.copy=function(){return new H.DataBuffer(this)};H.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};H.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};H.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};H.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};H.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return H.binary.raw.encode(e);if(t==="hex")return H.binary.hex.encode(e);if(t==="base64")return H.binary.base64.encode(e);if(t==="utf8")return H.text.utf8.decode(e);if(t==="utf16")return H.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};H.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=H.encodeUtf8(t)),new H.ByteBuffer(t)};H.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};H.xorBytes=function(t,e,r){for(var n="",i="",a="",s=0,l=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),l>=10&&(n+=a,a="",l=0),a+=String.fromCharCode(i),++l;return n+=a,n};H.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};H.bytesToHex=function(t){return H.createBuffer(t).toHex()};H.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var ns="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",is=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],xE="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";H.encode64=function(t,e){for(var r="",n="",i,a,s,l=0;l<t.length;)i=t.charCodeAt(l++),a=t.charCodeAt(l++),s=t.charCodeAt(l++),r+=ns.charAt(i>>2),r+=ns.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=ns.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":ns.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};H.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,a,s=0;s<t.length;)r=is[t.charCodeAt(s++)-43],n=is[t.charCodeAt(s++)-43],i=is[t.charCodeAt(s++)-43],a=is[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),a!==64&&(e+=String.fromCharCode((i&3)<<6|a)));return e};H.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};H.decodeUtf8=function(t){return decodeURIComponent(escape(t))};H.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:bE.encode,decode:bE.decode}};H.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};H.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n};H.binary.hex.encode=H.bytesToHex;H.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,a=r;for(t.length&1&&(i=1,n[a++]=parseInt(t[0],16));i<t.length;i+=2)n[a++]=parseInt(t.substr(i,2),16);return e?a-r:n};H.binary.base64.encode=function(t,e){for(var r="",n="",i,a,s,l=0;l<t.byteLength;)i=t[l++],a=t[l++],s=t[l++],r+=ns.charAt(i>>2),r+=ns.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=ns.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":ns.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};H.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,s,l,u=0,f=r;u<t.length;)i=is[t.charCodeAt(u++)-43],a=is[t.charCodeAt(u++)-43],s=is[t.charCodeAt(u++)-43],l=is[t.charCodeAt(u++)-43],n[f++]=i<<2|a>>4,s!==64&&(n[f++]=(a&15)<<4|s>>2,l!==64&&(n[f++]=(s&3)<<6|l));return e?f-r:n.subarray(0,f)};H.binary.base58.encode=function(t,e){return H.binary.baseN.encode(t,xE,e)};H.binary.base58.decode=function(t,e){return H.binary.baseN.decode(t,xE,e)};H.text={utf8:{},utf16:{}};H.text.utf8.encode=function(t,e,r){t=H.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n};H.text.utf8.decode=function(t){return H.decodeUtf8(String.fromCharCode.apply(null,t))};H.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,s=r,l=0;l<t.length;++l)i[s++]=t.charCodeAt(l),a+=2;return e?a-r:n};H.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};H.deflate=function(t,e,r){if(e=H.decode64(t.deflate(H.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};H.inflate=function(t,e,r){var n=t.inflate(H.encode64(e)).rval;return n===null?null:H.decode64(n)};var J0=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=H.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},Z0=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(H.decode64(r))),r},q4=function(t,e,r,n){var i=Z0(t,e);i===null&&(i={}),i[r]=n,J0(t,e,i)},G4=function(t,e,r){var n=Z0(t,e);return n!==null&&(n=r in n?n[r]:null),n},V4=function(t,e,r){var n=Z0(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),J0(t,e,n)}},j4=function(t,e){J0(t,e,null)},ld=function(t,e,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,a=!1,s=null;for(var l in r){i=r[l];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),a=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),a=!0)}catch(u){s=u}if(a)break}if(!a)throw s;return n};H.setItem=function(t,e,r,n,i){ld(q4,arguments,i)};H.getItem=function(t,e,r,n){return ld(G4,arguments,n)};H.removeItem=function(t,e,r,n){ld(V4,arguments,n)};H.clearItems=function(t,e,r){ld(j4,arguments,r)};H.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};H.format=function(t){for(var e=/%./g,r,n,i=0,a=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&a.push(n),s=e.lastIndex;var l=r[0][1];switch(l){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+l+"?>")}}return a.push(t.substring(s)),a.join("")};H.formatNumber=function(t,e,r,n){var i=t,a=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,l=n===void 0?".":n,u=i<0?"-":"",f=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",d=f.length>3?f.length%3:0;return u+(d?f.substr(0,d)+l:"")+f.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(a?s+Math.abs(i-f).toFixed(a).slice(2):"")};H.formatSize=function(t){return t>=1073741824?t=H.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=H.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=H.formatNumber(t/1024,0)+" KiB":t=H.formatNumber(t,0)+" bytes",t};H.bytesFromIP=function(t){return t.indexOf(".")!==-1?H.bytesFromIPv4(t):t.indexOf(":")!==-1?H.bytesFromIPv6(t):null};H.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=H.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};H.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=H.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var a=H.hexToBytes(t[i]);a.length<2&&n.putByte(0),n.putBytes(a)}return n.getBytes()};H.bytesToIP=function(t){return t.length===4?H.bytesToIPv4(t):t.length===16?H.bytesToIPv6(t):null};H.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};H.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var a=H.bytesToHex(t[i]+t[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],l=e.length;!s||l!==s.end+1?r.push({start:l,end:l}):(s.end=l,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(a)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),u.start===0&&e.unshift(""),u.end===7&&e.push(""))}return e.join(":")};H.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in H&&!t.update)return e(null,H.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return H.cores=navigator.hardwareConcurrency,e(null,H.cores);if(typeof Worker=="undefined")return H.cores=1,e(null,H.cores);if(typeof Blob=="undefined")return H.cores=2,e(null,H.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var l=Date.now(),u=l+4;Date.now()<u;);self.postMessage({st:l,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,l,u){if(l===0){var f=Math.floor(s.reduce(function(d,h){return d+h},0)/s.length);return H.cores=Math.max(1,f),URL.revokeObjectURL(r),e(null,H.cores)}i(u,function(d,h){s.push(a(u,h)),n(s,l-1,u)})}function i(s,l){for(var u=[],f=[],d=0;d<s;++d){var h=new Worker(r);h.addEventListener("message",function(g){if(f.push(g.data),f.length===s){for(var m=0;m<s;++m)u[m].terminate();l(null,f)}}),u.push(h)}for(var d=0;d<s;++d)u[d].postMessage(d)}function a(s,l){for(var u=[],f=0;f<s;++f)for(var d=l[f],h=u[f]=[],g=0;g<s;++g)if(f!==g){var m=l[g];(d.st>m.st&&d.st<m.et||m.st>d.st&&m.st<d.et)&&h.push(g)}return u.reduce(function(y,_){return Math.max(y,_.length)},0)}}});var ud=de((UV,TE)=>{var qr=mt();Ft();TE.exports=qr.cipher=qr.cipher||{};qr.cipher.algorithms=qr.cipher.algorithms||{};qr.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=qr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new qr.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};qr.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=qr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new qr.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};qr.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),qr.cipher.algorithms[t]=e};qr.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in qr.cipher.algorithms?qr.cipher.algorithms[t]:null};var $0=qr.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};$0.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=qr.util.createBuffer(),this.output=t.output||qr.util.createBuffer(),this.mode.start(e)};$0.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};$0.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var tg=de((FV,AE)=>{var Gr=mt();Ft();Gr.cipher=Gr.cipher||{};var xt=AE.exports=Gr.cipher.modes=Gr.cipher.modes||{};xt.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};xt.ecb.prototype.start=function(t){};xt.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};xt.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};xt.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};xt.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};xt.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};xt.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=cd(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};xt.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};xt.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};xt.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};xt.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};xt.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Gr.util.createBuffer(),this._partialBytes=0};xt.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=cd(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};xt.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};xt.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};xt.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Gr.util.createBuffer(),this._partialBytes=0};xt.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=cd(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};xt.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};xt.ofb.prototype.decrypt=xt.ofb.prototype.encrypt;xt.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Gr.util.createBuffer(),this._partialBytes=0};xt.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=cd(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};xt.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}fd(this._inBlock)};xt.ctr.prototype.decrypt=xt.ctr.prototype.encrypt;xt.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Gr.util.createBuffer(),this._partialBytes=0,this._R=3774873600};xt.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Gr.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Gr.util.createBuffer(t.additionalData):r=Gr.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Gr.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(eg(n*8)))}this._inBlock=this._j0.slice(0),fd(this._inBlock),this._partialBytes=0,r=Gr.util.createBuffer(r),this._aDataLength=eg(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};xt.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),fd(this._inBlock)};xt.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),fd(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};xt.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Gr.util.createBuffer();var n=this._aDataLength.concat(eg(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};xt.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var a=t[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};xt.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};xt.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,a=this._m[r][i];e[0]^=a[0],e[1]^=a[1],e[2]^=a[2],e[3]^=a[3]}return e};xt.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};xt.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var l=[0,0,0,0],u=s/n|0,f=(n-1-s%n)*e;l[u]=1<<e-1<<f,a[s]=this.generateSubHashTable(this.multiply(l,t),e)}return a};xt.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var l=i[a],u=i[s];i[a+s]=[l[0]^u[0],l[1]^u[1],l[2]^u[2],l[3]^u[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var f=i[a^n];i[a]=[t[0]^f[0],t[1]^f[1],t[2]^f[2],t[3]^f[3]]}return i};function cd(t,e){if(typeof t=="string"&&(t=Gr.util.createBuffer(t)),Gr.util.isArray(t)&&t.length>4){var r=t;t=Gr.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Gr.util.isArray(t)){for(var i=[],a=e/4,n=0;n<a;++n)i.push(t.getInt32());t=i}return t}function fd(t){t[t.length-1]=t[t.length-1]+1&4294967295}function eg(t){return[t/4294967296|0,t&4294967295]}});var as=de((qV,NE)=>{var nr=mt();ud();tg();Ft();NE.exports=nr.aes=nr.aes||{};nr.aes.startEncrypting=function(t,e,r,n){var i=dd({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};nr.aes.createEncryptionCipher=function(t,e){return dd({key:t,output:null,decrypt:!1,mode:e})};nr.aes.startDecrypting=function(t,e,r,n){var i=dd({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};nr.aes.createDecryptionCipher=function(t,e){return dd({key:t,output:null,decrypt:!0,mode:e})};nr.aes.Algorithm=function(t,e){rg||IE();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return ig(r._w,n,i,!1)},decrypt:function(n,i){return ig(r._w,n,i,!0)}}}),r._init=!1};nr.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=nr.util.createBuffer(e);else if(nr.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=nr.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!nr.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!nr.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=RE(e,t.decrypt&&!s),this._init=!0}};nr.aes._expandKey=function(t,e){return rg||IE(),RE(t,e)};nr.aes._updateBlock=ig;nl("AES-ECB",nr.cipher.modes.ecb);nl("AES-CBC",nr.cipher.modes.cbc);nl("AES-CFB",nr.cipher.modes.cfb);nl("AES-OFB",nr.cipher.modes.ofb);nl("AES-CTR",nr.cipher.modes.ctr);nl("AES-GCM",nr.cipher.modes.gcm);function nl(t,e){var r=function(){return new nr.aes.Algorithm(t,e)};nr.cipher.registerAlgorithm(t,r)}var rg=!1,il=4,pn,ng,kE,Vs,Ci;function IE(){rg=!0,kE=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;pn=new Array(256),ng=new Array(256),Vs=new Array(4),Ci=new Array(4);for(var e=0;e<4;++e)Vs[e]=new Array(256),Ci[e]=new Array(256);for(var r=0,n=0,i,a,s,l,u,f,d,e=0;e<256;++e){l=n^n<<1^n<<2^n<<3^n<<4,l=l>>8^l&255^99,pn[r]=l,ng[l]=r,u=t[l],i=t[r],a=t[i],s=t[a],f=u<<24^l<<16^l<<8^(l^u),d=(i^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^i^s);for(var h=0;h<4;++h)Vs[h][r]=f,Ci[h][l]=d,f=f<<24|f>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function RE(t,e){for(var r=t.slice(0),n,i=1,a=r.length,s=a+6+1,l=il*s,u=a;u<l;++u)n=r[u-1],u%a==0?(n=pn[n>>>16&255]<<24^pn[n>>>8&255]<<16^pn[n&255]<<8^pn[n>>>24]^kE[i]<<24,i++):a>6&&u%a==4&&(n=pn[n>>>24]<<24^pn[n>>>16&255]<<16^pn[n>>>8&255]<<8^pn[n&255]),r[u]=r[u-a]^n;if(e){var f,d=Ci[0],h=Ci[1],g=Ci[2],m=Ci[3],y=r.slice(0);l=r.length;for(var u=0,_=l-il;u<l;u+=il,_-=il)if(u===0||u===l-il)y[u]=r[_],y[u+1]=r[_+3],y[u+2]=r[_+2],y[u+3]=r[_+1];else for(var w=0;w<il;++w)f=r[_+w],y[u+(3&-w)]=d[pn[f>>>24]]^h[pn[f>>>16&255]]^g[pn[f>>>8&255]]^m[pn[f&255]];r=y}return r}function ig(t,e,r,n){var i=t.length/4-1,a,s,l,u,f;n?(a=Ci[0],s=Ci[1],l=Ci[2],u=Ci[3],f=ng):(a=Vs[0],s=Vs[1],l=Vs[2],u=Vs[3],f=pn);var d,h,g,m,y,_,w;d=e[0]^t[0],h=e[n?3:1]^t[1],g=e[2]^t[2],m=e[n?1:3]^t[3];for(var E=3,T=1;T<i;++T)y=a[d>>>24]^s[h>>>16&255]^l[g>>>8&255]^u[m&255]^t[++E],_=a[h>>>24]^s[g>>>16&255]^l[m>>>8&255]^u[d&255]^t[++E],w=a[g>>>24]^s[m>>>16&255]^l[d>>>8&255]^u[h&255]^t[++E],m=a[m>>>24]^s[d>>>16&255]^l[h>>>8&255]^u[g&255]^t[++E],d=y,h=_,g=w;r[0]=f[d>>>24]<<24^f[h>>>16&255]<<16^f[g>>>8&255]<<8^f[m&255]^t[++E],r[n?3:1]=f[h>>>24]<<24^f[g>>>16&255]<<16^f[m>>>8&255]<<8^f[d&255]^t[++E],r[2]=f[g>>>24]<<24^f[m>>>16&255]<<16^f[d>>>8&255]<<8^f[h&255]^t[++E],r[n?1:3]=f[m>>>24]<<24^f[d>>>16&255]<<16^f[h>>>8&255]<<8^f[g&255]^t[++E]}function dd(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=nr.cipher.createDecipher(r,t.key):n=nr.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof nr.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var ss=de((GV,DE)=>{var Su=mt();Su.pki=Su.pki||{};var ag=DE.exports=Su.pki.oids=Su.oids=Su.oids||{};function Ee(t,e){ag[t]=e,ag[e]=t}function Kt(t,e){ag[t]=e}Ee("1.2.840.113549.1.1.1","rsaEncryption");Ee("1.2.840.113549.1.1.4","md5WithRSAEncryption");Ee("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Ee("1.2.840.113549.1.1.7","RSAES-OAEP");Ee("1.2.840.113549.1.1.8","mgf1");Ee("1.2.840.113549.1.1.9","pSpecified");Ee("1.2.840.113549.1.1.10","RSASSA-PSS");Ee("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Ee("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Ee("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Ee("1.3.101.112","EdDSA25519");Ee("1.2.840.10040.4.3","dsa-with-sha1");Ee("1.3.14.3.2.7","desCBC");Ee("1.3.14.3.2.26","sha1");Ee("1.3.14.3.2.29","sha1WithRSASignature");Ee("2.16.840.1.101.3.4.2.1","sha256");Ee("2.16.840.1.101.3.4.2.2","sha384");Ee("2.16.840.1.101.3.4.2.3","sha512");Ee("2.16.840.1.101.3.4.2.4","sha224");Ee("2.16.840.1.101.3.4.2.5","sha512-224");Ee("2.16.840.1.101.3.4.2.6","sha512-256");Ee("1.2.840.113549.2.2","md2");Ee("1.2.840.113549.2.5","md5");Ee("1.2.840.113549.1.7.1","data");Ee("1.2.840.113549.1.7.2","signedData");Ee("1.2.840.113549.1.7.3","envelopedData");Ee("1.2.840.113549.1.7.4","signedAndEnvelopedData");Ee("1.2.840.113549.1.7.5","digestedData");Ee("1.2.840.113549.1.7.6","encryptedData");Ee("1.2.840.113549.1.9.1","emailAddress");Ee("1.2.840.113549.1.9.2","unstructuredName");Ee("1.2.840.113549.1.9.3","contentType");Ee("1.2.840.113549.1.9.4","messageDigest");Ee("1.2.840.113549.1.9.5","signingTime");Ee("1.2.840.113549.1.9.6","counterSignature");Ee("1.2.840.113549.1.9.7","challengePassword");Ee("1.2.840.113549.1.9.8","unstructuredAddress");Ee("1.2.840.113549.1.9.14","extensionRequest");Ee("1.2.840.113549.1.9.20","friendlyName");Ee("1.2.840.113549.1.9.21","localKeyId");Ee("1.2.840.113549.1.9.22.1","x509Certificate");Ee("1.2.840.113549.1.12.10.1.1","keyBag");Ee("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Ee("1.2.840.113549.1.12.10.1.3","certBag");Ee("1.2.840.113549.1.12.10.1.4","crlBag");Ee("1.2.840.113549.1.12.10.1.5","secretBag");Ee("1.2.840.113549.1.12.10.1.6","safeContentsBag");Ee("1.2.840.113549.1.5.13","pkcs5PBES2");Ee("1.2.840.113549.1.5.12","pkcs5PBKDF2");Ee("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Ee("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Ee("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Ee("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Ee("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Ee("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Ee("1.2.840.113549.2.7","hmacWithSHA1");Ee("1.2.840.113549.2.8","hmacWithSHA224");Ee("1.2.840.113549.2.9","hmacWithSHA256");Ee("1.2.840.113549.2.10","hmacWithSHA384");Ee("1.2.840.113549.2.11","hmacWithSHA512");Ee("1.2.840.113549.3.7","des-EDE3-CBC");Ee("2.16.840.1.101.3.4.1.2","aes128-CBC");Ee("2.16.840.1.101.3.4.1.22","aes192-CBC");Ee("2.16.840.1.101.3.4.1.42","aes256-CBC");Ee("2.5.4.3","commonName");Ee("2.5.4.4","surname");Ee("2.5.4.5","serialNumber");Ee("2.5.4.6","countryName");Ee("2.5.4.7","localityName");Ee("2.5.4.8","stateOrProvinceName");Ee("2.5.4.9","streetAddress");Ee("2.5.4.10","organizationName");Ee("2.5.4.11","organizationalUnitName");Ee("2.5.4.12","title");Ee("2.5.4.13","description");Ee("2.5.4.15","businessCategory");Ee("2.5.4.17","postalCode");Ee("2.5.4.42","givenName");Ee("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Ee("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Ee("2.16.840.1.113730.1.1","nsCertType");Ee("2.16.840.1.113730.1.13","nsComment");Kt("2.5.29.1","authorityKeyIdentifier");Kt("2.5.29.2","keyAttributes");Kt("2.5.29.3","certificatePolicies");Kt("2.5.29.4","keyUsageRestriction");Kt("2.5.29.5","policyMapping");Kt("2.5.29.6","subtreesConstraint");Kt("2.5.29.7","subjectAltName");Kt("2.5.29.8","issuerAltName");Kt("2.5.29.9","subjectDirectoryAttributes");Kt("2.5.29.10","basicConstraints");Kt("2.5.29.11","nameConstraints");Kt("2.5.29.12","policyConstraints");Kt("2.5.29.13","basicConstraints");Ee("2.5.29.14","subjectKeyIdentifier");Ee("2.5.29.15","keyUsage");Kt("2.5.29.16","privateKeyUsagePeriod");Ee("2.5.29.17","subjectAltName");Ee("2.5.29.18","issuerAltName");Ee("2.5.29.19","basicConstraints");Kt("2.5.29.20","cRLNumber");Kt("2.5.29.21","cRLReason");Kt("2.5.29.22","expirationDate");Kt("2.5.29.23","instructionCode");Kt("2.5.29.24","invalidityDate");Kt("2.5.29.25","cRLDistributionPoints");Kt("2.5.29.26","issuingDistributionPoint");Kt("2.5.29.27","deltaCRLIndicator");Kt("2.5.29.28","issuingDistributionPoint");Kt("2.5.29.29","certificateIssuer");Kt("2.5.29.30","nameConstraints");Ee("2.5.29.31","cRLDistributionPoints");Ee("2.5.29.32","certificatePolicies");Kt("2.5.29.33","policyMappings");Kt("2.5.29.34","policyConstraints");Ee("2.5.29.35","authorityKeyIdentifier");Kt("2.5.29.36","policyConstraints");Ee("2.5.29.37","extKeyUsage");Kt("2.5.29.46","freshestCRL");Kt("2.5.29.54","inhibitAnyPolicy");Ee("1.3.6.1.4.1.11129.2.4.2","timestampList");Ee("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Ee("1.3.6.1.5.5.7.3.1","serverAuth");Ee("1.3.6.1.5.5.7.3.2","clientAuth");Ee("1.3.6.1.5.5.7.3.3","codeSigning");Ee("1.3.6.1.5.5.7.3.4","emailProtection");Ee("1.3.6.1.5.5.7.3.8","timeStamping")});var bi=de((VV,OE)=>{var or=mt();Ft();ss();var ke=OE.exports=or.asn1=or.asn1||{};ke.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};ke.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};ke.create=function(t,e,r,n,i){if(or.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)n[s]!==void 0&&a.push(n[s]);n=a}var l={tagClass:t,type:e,constructed:r,composed:r||or.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=ke.copy(l)),l};ke.copy=function(t,e){var r;if(or.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(ke.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:ke.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};ke.equals=function(t,e,r){if(or.util.isArray(t)){if(!or.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!ke.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&ke.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};ke.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function Tu(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var H4=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var a=r&127;Tu(t,e,a),n=t.getInt(a<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};ke.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=or.util.createBuffer(t));var r=t.length(),n=hd(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function hd(t,e,r,n){var i;Tu(t,e,2);var a=t.getByte();e--;var s=a&192,l=a&31;i=t.length();var u=H4(t,e);if(e-=i-t.length(),u!==void 0&&u>e){if(n.strict){var f=new Error("Too few bytes to read ASN.1 value.");throw f.available=t.length(),f.remaining=e,f.requested=u,f}u=e}var d,h,g=(a&32)==32;if(g)if(d=[],u===void 0)for(;;){if(Tu(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),d.push(hd(t,e,r+1,n)),e-=i-t.length()}else for(;u>0;)i=t.length(),d.push(hd(t,u,r+1,n)),e-=i-t.length(),u-=i-t.length();if(d===void 0&&s===ke.Class.UNIVERSAL&&l===ke.Type.BITSTRING&&(h=t.bytes(u)),d===void 0&&n.decodeBitStrings&&s===ke.Class.UNIVERSAL&&l===ke.Type.BITSTRING&&u>1){var m=t.read,y=e,_=0;if(l===ke.Type.BITSTRING&&(Tu(t,e,1),_=t.getByte(),e--),_===0)try{i=t.length();var w={strict:!0,decodeBitStrings:!0},E=hd(t,e,r+1,w),T=i-t.length();e-=T,l==ke.Type.BITSTRING&&T++;var x=E.tagClass;T===u&&(x===ke.Class.UNIVERSAL||x===ke.Class.CONTEXT_SPECIFIC)&&(d=[E])}catch(I){}d===void 0&&(t.read=m,e=y)}if(d===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=e}if(l===ke.Type.BMPSTRING)for(d="";u>0;u-=2)Tu(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(u),e-=u}var O=h===void 0?null:{bitStringContents:h};return ke.create(s,l,g,d,O)}ke.toDer=function(t){var e=or.util.createBuffer(),r=t.tagClass|t.type,n=or.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=ke.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var a=0;a<t.value.length;++a)t.value[a]!==void 0&&n.putBuffer(ke.toDer(t.value[a]))}else if(t.type===ke.Type.BMPSTRING)for(var a=0;a<t.value.length;++a)n.putInt16(t.value.charCodeAt(a));else t.type===ke.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),l="";do l+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(l.length|128);for(var a=l.length-1;a>=0;--a)e.putByte(l.charCodeAt(a))}return e.putBuffer(n),e};ke.oidToDer=function(t){var e=t.split("."),r=or.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,a,s,l=2;l<e.length;++l){n=!0,i=[],a=parseInt(e[l],10);do s=a&127,a=a>>>7,n||(s|=128),i.push(s),n=!1;while(a>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};ke.derToOid=function(t){var e;typeof t=="string"&&(t=or.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};ke.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),a=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var u=t.charAt(10),f=10;u!=="+"&&u!=="-"&&(l=parseInt(t.substr(10,2),10),f+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(a,s,l,0),f&&(u=t.charAt(f),u==="+"||u==="-")){var d=parseInt(t.substr(f+1,2),10),h=parseInt(t.substr(f+4,2),10),g=d*60+h;g*=6e4,u==="+"?e.setTime(+e-g):e.setTime(+e+g)}return e};ke.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),u=0,f=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var h=t.length-5,g=t.charAt(h);if(g==="+"||g==="-"){var m=parseInt(t.substr(h+1,2),10),y=parseInt(t.substr(h+4,2),10);f=m*60+y,f*=6e4,g==="+"&&(f*=-1),d=!0}return t.charAt(14)==="."&&(u=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(r,n,i),e.setUTCHours(a,s,l,u),e.setTime(+e+f)):(e.setFullYear(r,n,i),e.setHours(a,s,l,u)),e};ke.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};ke.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};ke.integerToDer=function(t){var e=or.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};ke.derToInteger=function(t){typeof t=="string"&&(t=or.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};ke.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(i=!0,e.value&&or.util.isArray(e.value))for(var a=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[a]&&(i=ke.validate(t.value[a],e.value[s],r,n),i?++a:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var BE=/[^\\u0000-\\u00ff]/;ke.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",a=0;a<e*r;++a)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case ke.Class.UNIVERSAL:n+="Universal:";break;case ke.Class.APPLICATION:n+="Application:";break;case ke.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case ke.Class.PRIVATE:n+="Private:";break}if(t.tagClass===ke.Class.UNIVERSAL)switch(n+=t.type,t.type){case ke.Type.NONE:n+=" (None)";break;case ke.Type.BOOLEAN:n+=" (Boolean)";break;case ke.Type.INTEGER:n+=" (Integer)";break;case ke.Type.BITSTRING:n+=" (Bit string)";break;case ke.Type.OCTETSTRING:n+=" (Octet string)";break;case ke.Type.NULL:n+=" (Null)";break;case ke.Type.OID:n+=" (Object Identifier)";break;case ke.Type.ODESC:n+=" (Object Descriptor)";break;case ke.Type.EXTERNAL:n+=" (External or Instance of)";break;case ke.Type.REAL:n+=" (Real)";break;case ke.Type.ENUMERATED:n+=" (Enumerated)";break;case ke.Type.EMBEDDED:n+=" (Embedded PDV)";break;case ke.Type.UTF8:n+=" (UTF8)";break;case ke.Type.ROID:n+=" (Relative Object Identifier)";break;case ke.Type.SEQUENCE:n+=" (Sequence)";break;case ke.Type.SET:n+=" (Set)";break;case ke.Type.PRINTABLESTRING:n+=" (Printable String)";break;case ke.Type.IA5String:n+=" (IA5String (ASCII))";break;case ke.Type.UTCTIME:n+=" (UTC time)";break;case ke.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case ke.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,l="",a=0;a<t.value.length;++a)t.value[a]!==void 0&&(s+=1,l+=ke.prettyPrint(t.value[a],e+1,r),a+1<t.value.length&&(l+=","));n+=i+"Sub values: "+s+l}else{if(n+=i+"Value: ",t.type===ke.Type.OID){var u=ke.derToOid(t.value);n+=u,or.pki&&or.pki.oids&&u in or.pki.oids&&(n+=" ("+or.pki.oids[u]+") ")}if(t.type===ke.Type.INTEGER)try{n+=ke.derToInteger(t.value)}catch(d){n+="0x"+or.util.bytesToHex(t.value)}else if(t.type===ke.Type.BITSTRING){if(t.value.length>1?n+="0x"+or.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var f=t.value.charCodeAt(0);f==1?n+=" (1 unused bit shown)":f>1&&(n+=" ("+f+" unused bits shown)")}}else if(t.type===ke.Type.OCTETSTRING)BE.test(t.value)||(n+="("+t.value+") "),n+="0x"+or.util.bytesToHex(t.value);else if(t.type===ke.Type.UTF8)try{n+=or.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")n+="0x"+or.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===ke.Type.PRINTABLESTRING||t.type===ke.Type.IA5String?n+=t.value:BE.test(t.value)?n+="0x"+or.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var zi=de((jV,LE)=>{var pd=mt();LE.exports=pd.md=pd.md||{};pd.md.algorithms=pd.md.algorithms||{}});var al=de((HV,PE)=>{var ba=mt();zi();Ft();var K4=PE.exports=ba.hmac=ba.hmac||{};K4.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in ba.md.algorithms)e=ba.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else e=a;if(s===null)s=t;else{if(typeof s=="string")s=ba.util.createBuffer(s);else if(ba.util.isArray(s)){var l=s;s=ba.util.createBuffer();for(var u=0;u<l.length;++u)s.putByte(l[u])}var f=s.length();f>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=ba.util.createBuffer(),n=ba.util.createBuffer(),f=s.length();for(var u=0;u<f;++u){var l=s.at(u);r.putByte(54^l),n.putByte(92^l)}if(f<e.blockLength)for(var l=e.blockLength-f,u=0;u<l;++u)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(a){e.update(a)},i.getMac=function(){var a=e.digest().bytes();return e.start(),e.update(n),e.update(a),e.digest()},i.digest=i.getMac,i}});var md=de((KV,qE)=>{var Qi=mt();zi();Ft();var ME=qE.exports=Qi.md5=Qi.md5||{};Qi.md.md5=Qi.md.algorithms.md5=ME;ME.create=function(){UE||Y4();var t=null,e=Qi.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=Qi.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Qi.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),FE(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Qi.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(sg.substr(0,n.blockLength-s));for(var l,u=0,f=n.fullMessageLength.length-1;f>=0;--f)l=n.fullMessageLength[f]*8+u,u=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};FE(d,r,i);var h=Qi.util.createBuffer();return h.putInt32Le(d.h0),h.putInt32Le(d.h1),h.putInt32Le(d.h2),h.putInt32Le(d.h3),h},n};var sg=null,gd=null,Au=null,sl=null,UE=!1;function Y4(){sg=String.fromCharCode(128),sg+=Qi.util.fillString(String.fromCharCode(0),64),gd=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],Au=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],sl=new Array(64);for(var t=0;t<64;++t)sl[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);UE=!0}function FE(t,e,r){for(var n,i,a,s,l,u,f,d,h=r.length();h>=64;){for(i=t.h0,a=t.h1,s=t.h2,l=t.h3,d=0;d<16;++d)e[d]=r.getInt32Le(),u=l^a&(s^l),n=i+u+sl[d]+e[d],f=Au[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<32;++d)u=s^l&(a^s),n=i+u+sl[d]+e[gd[d]],f=Au[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<48;++d)u=a^s^l,n=i+u+sl[d]+e[gd[d]],f=Au[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<64;++d)u=s^(a|~l),n=i+u+sl[d]+e[gd[d]],f=Au[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;t.h0=t.h0+i|0,t.h1=t.h1+a|0,t.h2=t.h2+s|0,t.h3=t.h3+l|0,h-=64}}});var js=de((YV,VE)=>{var yd=mt();Ft();var GE=VE.exports=yd.pem=yd.pem||{};GE.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=vd(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=vd(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=vd(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=vd(t.headers[i]);return t.procType&&(r+=`\r
`),r+=yd.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};GE.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=r.exec(t),!!a;){var s=a[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var l={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:yd.util.decode64(a[3])};if(e.push(l),!!a[2]){for(var u=a[2].split(i),f=0;a&&f<u.length;){for(var d=u[f].replace(/\s+$/,""),h=f+1;h<u.length;++h){var g=u[h];if(!/\s/.test(g[0]))break;d+=g,f=h}if(a=d.match(n),a){for(var m={name:a[1],values:[]},y=a[2].split(","),_=0;_<y.length;++_)m.values.push(W4(y[_]));if(l.procType)if(!l.contentDomain&&m.name==="Content-Domain")l.contentDomain=y[0]||"";else if(!l.dekInfo&&m.name==="DEK-Info"){if(m.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:y[0],parameters:y[1]||null}}else l.headers.push(m);else{if(m.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(m.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:y[0],type:y[1]}}}++f}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function vd(t){for(var e=t.name+": ",r=[],n=function(u,f){return" "+f},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<e.length;++i,++a)if(a>65&&s!==-1){var l=e[s];l===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+l+e.substr(s+1),a=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function W4(t){return t.replace(/^\s+/,"")}});var ku=de((WV,HE)=>{var fr=mt();ud();tg();Ft();HE.exports=fr.des=fr.des||{};fr.des.startEncrypting=function(t,e,r,n){var i=_d({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};fr.des.createEncryptionCipher=function(t,e){return _d({key:t,output:null,decrypt:!1,mode:e})};fr.des.startDecrypting=function(t,e,r,n){var i=_d({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};fr.des.createDecryptionCipher=function(t,e){return _d({key:t,output:null,decrypt:!0,mode:e})};fr.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return jE(r._keys,n,i,!1)},decrypt:function(n,i){return jE(r._keys,n,i,!0)}}}),r._init=!1};fr.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=fr.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=r6(e),this._init=!0}};Xi("DES-ECB",fr.cipher.modes.ecb);Xi("DES-CBC",fr.cipher.modes.cbc);Xi("DES-CFB",fr.cipher.modes.cfb);Xi("DES-OFB",fr.cipher.modes.ofb);Xi("DES-CTR",fr.cipher.modes.ctr);Xi("3DES-ECB",fr.cipher.modes.ecb);Xi("3DES-CBC",fr.cipher.modes.cbc);Xi("3DES-CFB",fr.cipher.modes.cfb);Xi("3DES-OFB",fr.cipher.modes.ofb);Xi("3DES-CTR",fr.cipher.modes.ctr);function Xi(t,e){var r=function(){return new fr.des.Algorithm(t,e)};fr.cipher.registerAlgorithm(t,r)}var z4=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Q4=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],X4=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],J4=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Z4=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],$4=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],e6=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],t6=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function r6(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],f=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],g=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],m=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],_=t.length()>8?3:1,w=[],E=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],T=0,x,O=0;O<_;O++){var I=t.getInt32(),B=t.getInt32();x=(I>>>4^B)&252645135,B^=x,I^=x<<4,x=(B>>>-16^I)&65535,I^=x,B^=x<<-16,x=(I>>>2^B)&858993459,B^=x,I^=x<<2,x=(B>>>-16^I)&65535,I^=x,B^=x<<-16,x=(I>>>1^B)&1431655765,B^=x,I^=x<<1,x=(B>>>8^I)&16711935,I^=x,B^=x<<8,x=(I>>>1^B)&1431655765,B^=x,I^=x<<1,x=I<<8|B>>>20&240,I=B<<24|B<<8&16711680|B>>>8&65280|B>>>24&240,B=x;for(var z=0;z<E.length;++z){E[z]?(I=I<<2|I>>>26,B=B<<2|B>>>26):(I=I<<1|I>>>27,B=B<<1|B>>>27),I&=-15,B&=-15;var F=e[I>>>28]|r[I>>>24&15]|n[I>>>20&15]|i[I>>>16&15]|a[I>>>12&15]|s[I>>>8&15]|l[I>>>4&15],q=u[B>>>28]|f[B>>>24&15]|d[B>>>20&15]|h[B>>>16&15]|g[B>>>12&15]|m[B>>>8&15]|y[B>>>4&15];x=(q>>>16^F)&65535,w[T++]=F^x,w[T++]=q^x<<16}}return w}function jE(t,e,r,n){var i=t.length===32?3:9,a;i===3?a=n?[30,-2,-2]:[0,32,2]:a=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,l=e[0],u=e[1];s=(l>>>4^u)&252645135,u^=s,l^=s<<4,s=(l>>>16^u)&65535,u^=s,l^=s<<16,s=(u>>>2^l)&858993459,l^=s,u^=s<<2,s=(u>>>8^l)&16711935,l^=s,u^=s<<8,s=(l>>>1^u)&1431655765,u^=s,l^=s<<1,l=l<<1|l>>>31,u=u<<1|u>>>31;for(var f=0;f<i;f+=3){for(var d=a[f+1],h=a[f+2],g=a[f];g!=d;g+=h){var m=u^t[g],y=(u>>>4|u<<28)^t[g+1];s=l,l=u,u=s^(Q4[m>>>24&63]|J4[m>>>16&63]|$4[m>>>8&63]|t6[m&63]|z4[y>>>24&63]|X4[y>>>16&63]|Z4[y>>>8&63]|e6[y&63])}s=l,l=u,u=s}l=l>>>1|l<<31,u=u>>>1|u<<31,s=(l>>>1^u)&1431655765,u^=s,l^=s<<1,s=(u>>>8^l)&16711935,l^=s,u^=s<<8,s=(u>>>2^l)&858993459,l^=s,u^=s<<2,s=(l>>>16^u)&65535,u^=s,l^=s<<16,s=(l>>>4^u)&252645135,u^=s,l^=s<<4,r[0]=l,r[1]=u}function _d(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=fr.cipher.createDecipher(r,t.key):n=fr.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof fr.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var wd=de((zV,KE)=>{var gn=mt();al();zi();Ft();var n6=gn.pkcs5=gn.pkcs5||{},xa;gn.util.isNodejs&&!gn.options.usePureJavaScript&&(xa=require("crypto"));KE.exports=gn.pbkdf2=n6.pbkdf2=function(t,e,r,n,i,a){if(typeof i=="function"&&(a=i,i=null),gn.util.isNodejs&&!gn.options.usePureJavaScript&&xa.pbkdf2&&(i===null||typeof i!="object")&&(xa.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),a?xa.pbkdf2Sync.length===4?xa.pbkdf2(t,e,r,n,function(x,O){if(x)return a(x);a(null,O.toString("binary"))}):xa.pbkdf2(t,e,r,n,i,function(x,O){if(x)return a(x);a(null,O.toString("binary"))}):xa.pbkdf2Sync.length===4?xa.pbkdf2Sync(t,e,r,n).toString("binary"):xa.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in gn.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=gn.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var l=new Error("Derived key is too long.");if(a)return a(l);throw l}var u=Math.ceil(n/s),f=n-(u-1)*s,d=gn.hmac.create();d.start(i,t);var h="",g,m,y;if(!a){for(var _=1;_<=u;++_){d.start(null,null),d.update(e),d.update(gn.util.int32ToBytes(_)),g=y=d.digest().getBytes();for(var w=2;w<=r;++w)d.start(null,null),d.update(y),m=d.digest().getBytes(),g=gn.util.xorBytes(g,m,s),y=m;h+=_<u?g:g.substr(0,f)}return h}var _=1,w;function E(){if(_>u)return a(null,h);d.start(null,null),d.update(e),d.update(gn.util.int32ToBytes(_)),g=y=d.digest().getBytes(),w=2,T()}function T(){if(w<=r)return d.start(null,null),d.update(y),m=d.digest().getBytes(),g=gn.util.xorBytes(g,m,s),y=m,++w,gn.util.setImmediate(T);h+=_<u?g:g.substr(0,f),++_,E()}E()}});var lg=de((QV,XE)=>{var Ji=mt();zi();Ft();var YE=XE.exports=Ji.sha256=Ji.sha256||{};Ji.md.sha256=Ji.md.algorithms.sha256=YE;YE.create=function(){WE||i6();var t=null,e=Ji.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=Ji.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Ji.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),QE(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Ji.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(og.substr(0,n.blockLength-s));for(var l,u,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,u=l/4294967296>>>0,f+=u,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};QE(h,r,i);var g=Ji.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g.putInt32(h.h5),g.putInt32(h.h6),g.putInt32(h.h7),g},n};var og=null,WE=!1,zE=null;function i6(){og=String.fromCharCode(128),og+=Ji.util.fillString(String.fromCharCode(0),64),zE=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],WE=!0}function QE(t,e,r){for(var n,i,a,s,l,u,f,d,h,g,m,y,_,w,E,T=r.length();T>=64;){for(f=0;f<16;++f)e[f]=r.getInt32();for(;f<64;++f)n=e[f-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[f-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[f]=n+e[f-7]+i+e[f-16]|0;for(d=t.h0,h=t.h1,g=t.h2,m=t.h3,y=t.h4,_=t.h5,w=t.h6,E=t.h7,f=0;f<64;++f)s=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),l=w^y&(_^w),a=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),u=d&h|g&(d^h),n=E+s+l+zE[f]+e[f],i=a+u,E=w,w=_,_=y,y=m+n>>>0,m=g,g=h,h=d,d=n+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+h|0,t.h2=t.h2+g|0,t.h3=t.h3+m|0,t.h4=t.h4+y|0,t.h5=t.h5+_|0,t.h6=t.h6+w|0,t.h7=t.h7+E|0,T-=64}}});var ug=de((XV,JE)=>{var Zi=mt();Ft();var Ed=null;Zi.util.isNodejs&&!Zi.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Ed=require("crypto"));var a6=JE.exports=Zi.prng=Zi.prng||{};a6.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(f,d){if(!d)return e.generateSync(f);var h=e.plugin.cipher,g=e.plugin.increment,m=e.plugin.formatKey,y=e.plugin.formatSeed,_=Zi.util.createBuffer();e.key=null,w();function w(E){if(E)return d(E);if(_.length()>=f)return d(null,_.getBytes(f));if(e.generated>1048575&&(e.key=null),e.key===null)return Zi.util.nextTick(function(){a(w)});var T=h(e.key,e.seed);e.generated+=T.length,_.putBytes(T),e.key=m(h(e.key,g(e.seed))),e.seed=y(h(e.key,e.seed)),Zi.util.setImmediate(w)}},e.generateSync=function(f){var d=e.plugin.cipher,h=e.plugin.increment,g=e.plugin.formatKey,m=e.plugin.formatSeed;e.key=null;for(var y=Zi.util.createBuffer();y.length()<f;){e.generated>1048575&&(e.key=null),e.key===null&&s();var _=d(e.key,e.seed);e.generated+=_.length,y.putBytes(_),e.key=g(d(e.key,h(e.seed))),e.seed=m(d(e.key,e.seed))}return y.getBytes(f)};function a(f){if(e.pools[0].messageLength>=32)return l(),f();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(h,g){if(h)return f(h);e.collect(g),l(),f()})}function s(){if(e.pools[0].messageLength>=32)return l();var f=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(f)),l()}function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var f=e.plugin.md.create();f.update(e.keyBytes);for(var d=1,h=0;h<32;++h)e.reseeds%d==0&&(f.update(e.pools[h].digest().getBytes()),e.pools[h].start()),d=d<<1;e.keyBytes=f.digest().getBytes(),f.start(),f.update(e.keyBytes);var g=f.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(g),e.generated=0}function u(f){var d=null,h=Zi.util.globalScope,g=h.crypto||h.msCrypto;g&&g.getRandomValues&&(d=function(I){return g.getRandomValues(I)});var m=Zi.util.createBuffer();if(d)for(;m.length()<f;){var y=Math.max(1,Math.min(f-m.length(),65536)/4),_=new Uint32Array(Math.floor(y));try{d(_);for(var w=0;w<_.length;++w)m.putInt32(_[w])}catch(I){if(!(typeof QuotaExceededError!="undefined"&&I instanceof QuotaExceededError))throw I}}if(m.length()<f)for(var E,T,x,O=Math.floor(Math.random()*65536);m.length()<f;){T=16807*(O&65535),E=16807*(O>>16),T+=(E&32767)<<16,T+=E>>15,T=(T&2147483647)+(T>>31),O=T&4294967295;for(var w=0;w<3;++w)x=O>>>(w<<3),x^=Math.floor(Math.random()*256),m.putByte(x&255)}return m.getBytes(f)}return Ed?(e.seedFile=function(f,d){Ed.randomBytes(f,function(h,g){if(h)return d(h);d(null,g.toString())})},e.seedFileSync=function(f){return Ed.randomBytes(f).toString()}):(e.seedFile=function(f,d){try{d(null,u(f))}catch(h){d(h)}},e.seedFileSync=u),e.collect=function(f){for(var d=f.length,h=0;h<d;++h)e.pools[e.pool].update(f.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(f,d){for(var h="",g=0;g<d;g+=8)h+=String.fromCharCode(f>>g&255);e.collect(h)},e.registerWorker=function(f){if(f===self)e.seedFile=function(h,g){function m(y){var _=y.data;_.forge&&_.forge.prng&&(self.removeEventListener("message",m),g(_.forge.prng.err,_.forge.prng.bytes))}self.addEventListener("message",m),self.postMessage({forge:{prng:{needed:h}}})};else{var d=function(h){var g=h.data;g.forge&&g.forge.prng&&e.seedFile(g.forge.prng.needed,function(m,y){f.postMessage({forge:{prng:{err:m,bytes:y}}})})};f.addEventListener("message",d)}},e}});var ti=de((JV,cg)=>{var Vr=mt();as();lg();ug();Ft();(function(){if(Vr.random&&Vr.random.getBytes){cg.exports=Vr.random;return}(function(t){var e={},r=new Array(4),n=Vr.util.createBuffer();e.formatKey=function(h){var g=Vr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),Vr.aes._expandKey(h,!1)},e.formatSeed=function(h){var g=Vr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),h},e.cipher=function(h,g){return Vr.aes._updateBlock(h,g,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(h){return++h[3],h},e.md=Vr.md.sha256;function i(){var h=Vr.prng.create(e);return h.getBytes=function(g,m){return h.generate(g,m)},h.getBytesSync=function(g){return h.generate(g)},h}var a=i(),s=null,l=Vr.util.globalScope,u=l.crypto||l.msCrypto;if(u&&u.getRandomValues&&(s=function(h){return u.getRandomValues(h)}),Vr.options.usePureJavaScript||!Vr.util.isNodejs&&!s){if(typeof window=="undefined"||window.document===void 0,a.collectInt(+new Date,32),typeof navigator!="undefined"){var f="";for(var d in navigator)try{typeof navigator[d]=="string"&&(f+=navigator[d])}catch(h){}a.collect(f),f=null}t&&(t().mousemove(function(h){a.collectInt(h.clientX,16),a.collectInt(h.clientY,16)}),t().keypress(function(h){a.collectInt(h.charCode,8)}))}if(!Vr.random)Vr.random=a;else for(var d in a)Vr.random[d]=a[d];Vr.random.createInstance=i,cg.exports=Vr.random})(typeof jQuery!="undefined"?jQuery:null)})()});var dg=de((ZV,eC)=>{var An=mt();Ft();var fg=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],ZE=[1,2,3,5],s6=function(t,e){return t<<e&65535|(t&65535)>>16-e},o6=function(t,e){return(t&65535)>>e|t<<16-e&65535};eC.exports=An.rc2=An.rc2||{};An.rc2.expandKey=function(t,e){typeof t=="string"&&(t=An.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,a=Math.ceil(i/8),s=255>>(i&7),l;for(l=n;l<128;l++)r.putByte(fg[r.at(l-1)+r.at(l-n)&255]);for(r.setAt(128-a,fg[r.at(128-a)&s]),l=127-a;l>=0;l--)r.setAt(l,fg[r.at(l+1)^r.at(l+a)]);return r};var $E=function(t,e,r){var n=!1,i=null,a=null,s=null,l,u,f,d,h=[];for(t=An.rc2.expandKey(t,e),f=0;f<64;f++)h.push(t.getInt16Le());r?(l=function(y){for(f=0;f<4;f++)y[f]+=h[d]+(y[(f+3)%4]&y[(f+2)%4])+(~y[(f+3)%4]&y[(f+1)%4]),y[f]=s6(y[f],ZE[f]),d++},u=function(y){for(f=0;f<4;f++)y[f]+=h[y[(f+3)%4]&63]}):(l=function(y){for(f=3;f>=0;f--)y[f]=o6(y[f],ZE[f]),y[f]-=h[d]+(y[(f+3)%4]&y[(f+2)%4])+(~y[(f+3)%4]&y[(f+1)%4]),d--},u=function(y){for(f=3;f>=0;f--)y[f]-=h[y[(f+3)%4]&63]});var g=function(y){var _=[];for(f=0;f<4;f++){var w=i.getInt16Le();s!==null&&(r?w^=s.getInt16Le():s.putInt16Le(w)),_.push(w&65535)}d=r?0:63;for(var E=0;E<y.length;E++)for(var T=0;T<y[E][0];T++)y[E][1](_);for(f=0;f<4;f++)s!==null&&(r?s.putInt16Le(_[f]):_[f]^=s.getInt16Le()),a.putInt16Le(_[f])},m=null;return m={start:function(y,_){y&&typeof y=="string"&&(y=An.util.createBuffer(y)),n=!1,i=An.util.createBuffer(),a=_||new An.util.createBuffer,s=y,m.output=a},update:function(y){for(n||i.putBuffer(y);i.length()>=8;)g([[5,l],[1,u],[6,l],[1,u],[5,l]])},finish:function(y){var _=!0;if(r)if(y)_=y(8,i,!r);else{var w=i.length()===8?8:8-i.length();i.fillWithByte(w,w)}if(_&&(n=!0,m.update()),!r&&(_=i.length()===0,_))if(y)_=y(8,a,!r);else{var E=a.length(),T=a.at(E-1);T>E?_=!1:a.truncate(T)}return _}},m};An.rc2.startEncrypting=function(t,e,r){var n=An.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};An.rc2.createEncryptionCipher=function(t,e){return $E(t,e,!0)};An.rc2.startDecrypting=function(t,e,r){var n=An.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};An.rc2.createDecryptionCipher=function(t,e){return $E(t,e,!1)}});var Ru=de(($V,lC)=>{var hg=mt();lC.exports=hg.jsbn=hg.jsbn||{};var Sa,l6=244837814094590,tC=(l6&16777215)==15715070;function ve(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}hg.jsbn.BigInteger=ve;function qt(){return new ve(null)}function u6(t,e,r,n,i,a){for(;--a>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function c6(t,e,r,n,i,a){for(var s=e&32767,l=e>>15;--a>=0;){var u=this.data[t]&32767,f=this.data[t++]>>15,d=l*u+f*s;u=s*u+((d&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(d>>>15)+l*f+(i>>>30),r.data[n++]=u&1073741823}return i}function rC(t,e,r,n,i,a){for(var s=e&16383,l=e>>14;--a>=0;){var u=this.data[t]&16383,f=this.data[t++]>>14,d=l*u+f*s;u=s*u+((d&16383)<<14)+r.data[n]+i,i=(u>>28)+(d>>14)+l*f,r.data[n++]=u&268435455}return i}typeof navigator=="undefined"?(ve.prototype.am=rC,Sa=28):tC&&navigator.appName=="Microsoft Internet Explorer"?(ve.prototype.am=c6,Sa=30):tC&&navigator.appName!="Netscape"?(ve.prototype.am=u6,Sa=26):(ve.prototype.am=rC,Sa=28);ve.prototype.DB=Sa;ve.prototype.DM=(1<<Sa)-1;ve.prototype.DV=1<<Sa;var pg=52;ve.prototype.FV=Math.pow(2,pg);ve.prototype.F1=pg-Sa;ve.prototype.F2=2*Sa-pg;var f6="0123456789abcdefghijklmnopqrstuvwxyz",Cd=new Array,ol,ri;ol="0".charCodeAt(0);for(ri=0;ri<=9;++ri)Cd[ol++]=ri;ol="a".charCodeAt(0);for(ri=10;ri<36;++ri)Cd[ol++]=ri;ol="A".charCodeAt(0);for(ri=10;ri<36;++ri)Cd[ol++]=ri;function nC(t){return f6.charAt(t)}function iC(t,e){var r=Cd[t.charCodeAt(e)];return r==null?-1:r}function d6(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function h6(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function os(t){var e=qt();return e.fromInt(t),e}function p6(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,a=0;--n>=0;){var s=r==8?t[n]&255:iC(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&ve.ZERO.subTo(this,this)}function g6(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function m6(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,a="",s=this.t,l=this.DB-s*this.DB%e;if(s-- >0)for(l<this.DB&&(n=this.data[s]>>l)>0&&(i=!0,a=nC(n));s>=0;)l<e?(n=(this.data[s]&(1<<l)-1)<<e-l,n|=this.data[--s]>>(l+=this.DB-e)):(n=this.data[s]>>(l-=e)&r,l<=0&&(l+=this.DB,--s)),n>0&&(i=!0),i&&(a+=nC(n));return i?a:"0"}function y6(){var t=qt();return ve.ZERO.subTo(this,t),t}function v6(){return this.s<0?this.negate():this}function _6(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function bd(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function w6(){return this.t<=0?0:this.DB*(this.t-1)+bd(this.data[this.t-1]^this.s&this.DM)}function E6(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function C6(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function b6(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+a+1]=this.data[l]>>n|s,s=(this.data[l]&i)<<r;for(l=a-1;l>=0;--l)e.data[l]=0;e.data[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function x6(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,a=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&a)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&a)<<i),e.t=this.t-r,e.clamp()}function S6(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function T6(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&ve.ZERO.subTo(e,e)}function A6(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function k6(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=qt());var a=qt(),s=this.s,l=t.s,u=this.DB-bd(n.data[n.t-1]);u>0?(n.lShiftTo(u,a),i.lShiftTo(u,r)):(n.copyTo(a),i.copyTo(r));var f=a.t,d=a.data[f-1];if(d!=0){var h=d*(1<<this.F1)+(f>1?a.data[f-2]>>this.F2:0),g=this.FV/h,m=(1<<this.F1)/h,y=1<<this.F2,_=r.t,w=_-f,E=e==null?qt():e;for(a.dlShiftTo(w,E),r.compareTo(E)>=0&&(r.data[r.t++]=1,r.subTo(E,r)),ve.ONE.dlShiftTo(f,E),E.subTo(a,a);a.t<f;)a.data[a.t++]=0;for(;--w>=0;){var T=r.data[--_]==d?this.DM:Math.floor(r.data[_]*g+(r.data[_-1]+y)*m);if((r.data[_]+=a.am(0,T,r,w,0,f))<T)for(a.dlShiftTo(w,E),r.subTo(E,r);r.data[_]<--T;)r.subTo(E,r)}e!=null&&(r.drShiftTo(f,e),s!=l&&ve.ZERO.subTo(e,e)),r.t=f,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&ve.ZERO.subTo(r,r)}}}function I6(t){var e=qt();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(ve.ZERO)>0&&t.subTo(e,e),e}function Hs(t){this.m=t}function R6(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function N6(t){return t}function D6(t){t.divRemTo(this.m,null,t)}function B6(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function O6(t,e){t.squareTo(e),this.reduce(e)}Hs.prototype.convert=R6;Hs.prototype.revert=N6;Hs.prototype.reduce=D6;Hs.prototype.mulTo=B6;Hs.prototype.sqrTo=O6;function L6(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Ks(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function P6(t){var e=qt();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(ve.ZERO)>0&&this.m.subTo(e,e),e}function M6(t){var e=qt();return t.copyTo(e),this.reduce(e),e}function U6(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function F6(t,e){t.squareTo(e),this.reduce(e)}function q6(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Ks.prototype.convert=P6;Ks.prototype.revert=M6;Ks.prototype.reduce=U6;Ks.prototype.mulTo=q6;Ks.prototype.sqrTo=F6;function G6(){return(this.t>0?this.data[0]&1:this.s)==0}function V6(t,e){if(t>4294967295||t<1)return ve.ONE;var r=qt(),n=qt(),i=e.convert(this),a=bd(t)-1;for(i.copyTo(r);--a>=0;)if(e.sqrTo(r,n),(t&1<<a)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function j6(t,e){var r;return t<256||e.isEven()?r=new Hs(e):r=new Ks(e),this.exp(t,r)}ve.prototype.copyTo=d6;ve.prototype.fromInt=h6;ve.prototype.fromString=p6;ve.prototype.clamp=g6;ve.prototype.dlShiftTo=E6;ve.prototype.drShiftTo=C6;ve.prototype.lShiftTo=b6;ve.prototype.rShiftTo=x6;ve.prototype.subTo=S6;ve.prototype.multiplyTo=T6;ve.prototype.squareTo=A6;ve.prototype.divRemTo=k6;ve.prototype.invDigit=L6;ve.prototype.isEven=G6;ve.prototype.exp=V6;ve.prototype.toString=m6;ve.prototype.negate=y6;ve.prototype.abs=v6;ve.prototype.compareTo=_6;ve.prototype.bitLength=w6;ve.prototype.mod=I6;ve.prototype.modPowInt=j6;ve.ZERO=os(0);ve.ONE=os(1);function H6(){var t=qt();return this.copyTo(t),t}function K6(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Y6(){return this.t==0?this.s:this.data[0]<<24>>24}function W6(){return this.t==0?this.s:this.data[0]<<16>>16}function z6(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Q6(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function X6(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=os(r),i=qt(),a=qt(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(t)+s}function J6(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,a=0,s=0,l=0;l<t.length;++l){var u=iC(t,l);if(u<0){t.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+u,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),i&&ve.ZERO.subTo(this,this)}function Z6(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(ve.ONE.shiftLeft(t-1),gg,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(ve.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function $6(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function e5(t){return this.compareTo(t)==0}function t5(t){return this.compareTo(t)<0?this:t}function r5(t){return this.compareTo(t)>0?this:t}function n5(t,e,r){var n,i,a=Math.min(t.t,this.t);for(n=0;n<a;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=a;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function i5(t,e){return t&e}function a5(t){var e=qt();return this.bitwiseTo(t,i5,e),e}function gg(t,e){return t|e}function s5(t){var e=qt();return this.bitwiseTo(t,gg,e),e}function aC(t,e){return t^e}function o5(t){var e=qt();return this.bitwiseTo(t,aC,e),e}function sC(t,e){return t&~e}function l5(t){var e=qt();return this.bitwiseTo(t,sC,e),e}function u5(){for(var t=qt(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function c5(t){var e=qt();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function f5(t){var e=qt();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function d5(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function h5(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+d5(this.data[t]);return this.s<0?this.t*this.DB:-1}function p5(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function g5(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=p5(this.data[r]^e);return t}function m5(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function y5(t,e){var r=ve.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function v5(t){return this.changeBit(t,gg)}function _5(t){return this.changeBit(t,sC)}function w5(t){return this.changeBit(t,aC)}function E5(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function C5(t){var e=qt();return this.addTo(t,e),e}function b5(t){var e=qt();return this.subTo(t,e),e}function x5(t){var e=qt();return this.multiplyTo(t,e),e}function S5(t){var e=qt();return this.divRemTo(t,e,null),e}function T5(t){var e=qt();return this.divRemTo(t,null,e),e}function A5(t){var e=qt(),r=qt();return this.divRemTo(t,e,r),new Array(e,r)}function k5(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function I5(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Iu(){}function oC(t){return t}function R5(t,e,r){t.multiplyTo(e,r)}function N5(t,e){t.squareTo(e)}Iu.prototype.convert=oC;Iu.prototype.revert=oC;Iu.prototype.mulTo=R5;Iu.prototype.sqrTo=N5;function D5(t){return this.exp(t,new Iu)}function B5(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function O5(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function ll(t){this.r2=qt(),this.q3=qt(),ve.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function L5(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=qt();return t.copyTo(e),this.reduce(e),e}function P5(t){return t}function M5(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function U5(t,e){t.squareTo(e),this.reduce(e)}function F5(t,e,r){t.multiplyTo(e,r),this.reduce(r)}ll.prototype.convert=L5;ll.prototype.revert=P5;ll.prototype.reduce=M5;ll.prototype.mulTo=F5;ll.prototype.sqrTo=U5;function q5(t,e){var r=t.bitLength(),n,i=os(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new Hs(e):e.isEven()?a=new ll(e):a=new Ks(e);var s=new Array,l=3,u=n-1,f=(1<<n)-1;if(s[1]=a.convert(this),n>1){var d=qt();for(a.sqrTo(s[1],d);l<=f;)s[l]=qt(),a.mulTo(d,s[l-2],s[l]),l+=2}var h=t.t-1,g,m=!0,y=qt(),_;for(r=bd(t.data[h])-1;h>=0;){for(r>=u?g=t.data[h]>>r-u&f:(g=(t.data[h]&(1<<r+1)-1)<<u-r,h>0&&(g|=t.data[h-1]>>this.DB+r-u)),l=n;(g&1)==0;)g>>=1,--l;if((r-=l)<0&&(r+=this.DB,--h),m)s[g].copyTo(i),m=!1;else{for(;l>1;)a.sqrTo(i,y),a.sqrTo(y,i),l-=2;l>0?a.sqrTo(i,y):(_=i,i=y,y=_),a.mulTo(y,s[g],i)}for(;h>=0&&(t.data[h]&1<<r)==0;)a.sqrTo(i,y),_=i,i=y,y=_,--r<0&&(r=this.DB-1,--h)}return a.revert(i)}function G5(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return e;for(i<a&&(a=i),a>0&&(e.rShiftTo(a,e),r.rShiftTo(a,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function V5(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function j5(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return ve.ZERO;for(var r=t.clone(),n=this.clone(),i=os(1),a=os(0),s=os(0),l=os(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(t,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!l.isEven())&&(s.addTo(this,s),l.subTo(t,l)),s.rShiftTo(1,s)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),a.subTo(l,a)):(n.subTo(r,n),e&&s.subTo(i,s),l.subTo(a,l))}if(n.compareTo(ve.ONE)!=0)return ve.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}var xi=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],H5=(1<<26)/xi[xi.length-1];function K5(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=xi[xi.length-1]){for(e=0;e<xi.length;++e)if(r.data[0]==xi[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<xi.length;){for(var n=xi[e],i=e+1;i<xi.length&&n<H5;)n*=xi[i++];for(n=r.modInt(n);e<i;)if(n%xi[e++]==0)return!1}return r.millerRabin(t)}function Y5(t){var e=this.subtract(ve.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=W5(),a,s=0;s<t;++s){do a=new ve(this.bitLength(),i);while(a.compareTo(ve.ONE)<=0||a.compareTo(e)>=0);var l=a.modPow(n,this);if(l.compareTo(ve.ONE)!=0&&l.compareTo(e)!=0){for(var u=1;u++<r&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(ve.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}function W5(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}ve.prototype.chunkSize=z6;ve.prototype.toRadix=X6;ve.prototype.fromRadix=J6;ve.prototype.fromNumber=Z6;ve.prototype.bitwiseTo=n5;ve.prototype.changeBit=y5;ve.prototype.addTo=E5;ve.prototype.dMultiply=k5;ve.prototype.dAddOffset=I5;ve.prototype.multiplyLowerTo=B5;ve.prototype.multiplyUpperTo=O5;ve.prototype.modInt=V5;ve.prototype.millerRabin=Y5;ve.prototype.clone=H6;ve.prototype.intValue=K6;ve.prototype.byteValue=Y6;ve.prototype.shortValue=W6;ve.prototype.signum=Q6;ve.prototype.toByteArray=$6;ve.prototype.equals=e5;ve.prototype.min=t5;ve.prototype.max=r5;ve.prototype.and=a5;ve.prototype.or=s5;ve.prototype.xor=o5;ve.prototype.andNot=l5;ve.prototype.not=u5;ve.prototype.shiftLeft=c5;ve.prototype.shiftRight=f5;ve.prototype.getLowestSetBit=h5;ve.prototype.bitCount=g5;ve.prototype.testBit=m5;ve.prototype.setBit=v5;ve.prototype.clearBit=_5;ve.prototype.flipBit=w5;ve.prototype.add=C5;ve.prototype.subtract=b5;ve.prototype.multiply=x5;ve.prototype.divide=S5;ve.prototype.remainder=T5;ve.prototype.divideAndRemainder=A5;ve.prototype.modPow=q5;ve.prototype.modInverse=j5;ve.prototype.pow=D5;ve.prototype.gcd=G5;ve.prototype.isProbablePrime=K5});var ul=de((ej,dC)=>{var $i=mt();zi();Ft();var uC=dC.exports=$i.sha1=$i.sha1||{};$i.md.sha1=$i.md.algorithms.sha1=uC;uC.create=function(){cC||z5();var t=null,e=$i.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=$i.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=$i.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),fC(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=$i.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(mg.substr(0,n.blockLength-s));for(var l,u,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,u=l/4294967296>>>0,f+=u,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};fC(h,r,i);var g=$i.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g},n};var mg=null,cC=!1;function z5(){mg=String.fromCharCode(128),mg+=$i.util.fillString(String.fromCharCode(0),64),cC=!0}function fC(t,e,r){for(var n,i,a,s,l,u,f,d,h=r.length();h>=64;){for(i=t.h0,a=t.h1,s=t.h2,l=t.h3,u=t.h4,d=0;d<16;++d)n=r.getInt32(),e[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+u+1518500249+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<20;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+u+1518500249+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<32;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+1859775393+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<40;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+1859775393+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<60;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a&s|l&(a^s),n=(i<<5|i>>>27)+f+u+2400959708+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<80;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+3395469782+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+a|0,t.h2=t.h2+s|0,t.h3=t.h3+l|0,t.h4=t.h4+u|0,h-=64}}});var yg=de((tj,pC)=>{var ea=mt();Ft();ti();ul();var hC=pC.exports=ea.pkcs1=ea.pkcs1||{};hC.encode_rsa_oaep=function(t,e,r){var n,i,a,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,a=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=ea.md.sha1.create(),s||(s=a);var l=Math.ceil(t.n.bitLength()/8),u=l-2*a.digestLength-2;if(e.length>u){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=e.length,f.maxLength=u,f}n||(n=""),a.update(n,"raw");for(var d=a.digest(),h="",g=u-e.length,m=0;m<g;m++)h+="\0";var y=d.getBytes()+h+""+e;if(!i)i=ea.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=i.length,f.digestLength=a.digestLength,f}var _=xd(i,l-a.digestLength-1,s),w=ea.util.xorBytes(y,_,y.length),E=xd(w,a.digestLength,s),T=ea.util.xorBytes(i,E,i.length);return"\0"+T+w};hC.decode_rsa_oaep=function(t,e,r){var n,i,a;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var w=new Error("RSAES-OAEP encoded message length is invalid.");throw w.length=e.length,w.expectedLength=s,w}if(i===void 0?i=ea.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var l=i.digest().getBytes(),u=e.charAt(0),f=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),h=xd(d,i.digestLength,a),g=ea.util.xorBytes(f,h,f.length),m=xd(g,s-i.digestLength-1,a),y=ea.util.xorBytes(d,m,d.length),_=y.substring(0,i.digestLength),w=u!=="\0",E=0;E<i.digestLength;++E)w|=l.charAt(E)!==_.charAt(E);for(var T=1,x=i.digestLength,O=i.digestLength;O<y.length;O++){var I=y.charCodeAt(O),B=I&1^1,z=T?65534:0;w|=I&z,T=T&B,x+=T}if(w||y.charCodeAt(x)!==1)throw new Error("Invalid RSAES-OAEP padding.");return y.substring(x+1)};function xd(t,e,r){r||(r=ea.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var _g=de((rj,vg)=>{var ls=mt();Ft();Ru();ti();(function(){if(ls.prime){vg.exports=ls.prime;return}var t=vg.exports=ls.prime=ls.prime||{},e=ls.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(h,g){return h|g};t.generateProbablePrime=function(h,g,m){typeof g=="function"&&(m=g,g={}),g=g||{};var y=g.algorithm||"PRIMEINC";typeof y=="string"&&(y={name:y}),y.options=y.options||{};var _=g.prng||ls.random,w={nextBytes:function(E){for(var T=_.getBytesSync(E.length),x=0;x<E.length;++x)E[x]=T.charCodeAt(x)}};if(y.name==="PRIMEINC")return a(h,w,y.options,m);throw new Error("Invalid prime generation algorithm: "+y.name)};function a(h,g,m,y){return"workers"in m?u(h,g,m,y):s(h,g,m,y)}function s(h,g,m,y){var _=f(h,g),w=0,E=d(_.bitLength());"millerRabinTests"in m&&(E=m.millerRabinTests);var T=10;"maxBlockTime"in m&&(T=m.maxBlockTime),l(_,h,g,w,E,T,y)}function l(h,g,m,y,_,w,E){var T=+new Date;do{if(h.bitLength()>g&&(h=f(g,m)),h.isProbablePrime(_))return E(null,h);h.dAddOffset(r[y++%8],0)}while(w<0||+new Date-T<w);ls.util.setImmediate(function(){l(h,g,m,y,_,w,E)})}function u(h,g,m,y){if(typeof Worker=="undefined")return s(h,g,m,y);var _=f(h,g),w=m.workers,E=m.workLoad||100,T=E*30/8,x=m.workerScript||"forge/prime.worker.js";if(w===-1)return ls.util.estimateCores(function(I,B){I&&(B=2),w=B-1,O()});O();function O(){w=Math.max(1,w);for(var I=[],B=0;B<w;++B)I[B]=new Worker(x);for(var z=w,B=0;B<w;++B)I[B].addEventListener("message",q);var F=!1;function q(te){if(!F){--z;var ie=te.data;if(ie.found){for(var ye=0;ye<I.length;++ye)I[ye].terminate();return F=!0,y(null,new e(ie.prime,16))}_.bitLength()>h&&(_=f(h,g));var be=_.toString(16);te.target.postMessage({hex:be,workLoad:E}),_.dAddOffset(T,0)}}}}function f(h,g){var m=new e(h,g),y=h-1;return m.testBit(y)||m.bitwiseTo(e.ONE.shiftLeft(y),i,m),m.dAddOffset(31-m.mod(n).byteValue(),0),m}function d(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var Nu=de((nj,EC)=>{var qe=mt();bi();Ru();ss();yg();_g();ti();Ft();typeof Pt=="undefined"&&(Pt=qe.jsbn.BigInteger);var Pt,wg=qe.util.isNodejs?require("crypto"):null,ee=qe.asn1,ni=qe.util;qe.pki=qe.pki||{};EC.exports=qe.pki.rsa=qe.rsa=qe.rsa||{};var it=qe.pki,Q5=[6,4,2,4,2,4,6,2],X5={name:"PrivateKeyInfo",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},J5={name:"RSAPrivateKey",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Z5={name:"RSAPublicKey",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},$5=qe.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:ee.Class.UNIVERSAL,type:ee.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},eM={name:"DigestInfo",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:ee.Class.UNIVERSAL,type:ee.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},tM=function(t){var e;if(t.algorithm in it.oids)e=it.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=ee.oidToDer(e).getBytes(),i=ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[]),a=ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[]);a.value.push(ee.create(ee.Class.UNIVERSAL,ee.Type.OID,!1,n)),a.value.push(ee.create(ee.Class.UNIVERSAL,ee.Type.NULL,!1,""));var s=ee.create(ee.Class.UNIVERSAL,ee.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(a),i.value.push(s),ee.toDer(i).getBytes()},gC=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Pt.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Pt.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Pt(qe.util.bytesToHex(qe.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Pt.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(a)<0;)i=i.add(e.p);var s=i.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};it.rsa.encrypt=function(t,e,r){var n=r,i,a=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=mC(t,e,r)):(i=qe.util.createBuffer(),i.putBytes(t));for(var s=new Pt(i.toHex(),16),l=gC(s,e,n),u=l.toString(16),f=qe.util.createBuffer(),d=a-Math.ceil(u.length/2);d>0;)f.putByte(0),--d;return f.putBytes(qe.util.hexToBytes(u)),f.getBytes()};it.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=i,a}var s=new Pt(qe.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=gC(s,e,r),u=l.toString(16),f=qe.util.createBuffer(),d=i-Math.ceil(u.length/2);d>0;)f.putByte(0),--d;return f.putBytes(qe.util.hexToBytes(u)),n!==!1?Sd(f.getBytes(),e,r):f.getBytes()};it.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||qe.random,i={nextBytes:function(l){for(var u=n.getBytesSync(l.length),f=0;f<l.length;++f)l[f]=u.charCodeAt(f)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:t,rng:i,eInt:e||65537,e:new Pt(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};it.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Pt(null);r.fromInt(30);for(var n=0,i=function(h,g){return h|g},a=+new Date,s,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var u=t.p===null?t.pBits:t.qBits,f=u-1;t.pqState===0?(t.num=new Pt(u,t.rng),t.num.testBit(f)||t.num.bitwiseTo(Pt.ONE.shiftLeft(f),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>u?t.pqState=0:t.num.isProbablePrime(nM(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(Q5[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Pt.ONE),t.q1=t.q.subtract(Pt.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Pt.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:it.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:it.rsa.setPublicKey(t.n,t.e)}}s=+new Date,l+=s-a,a=s}return t.keys!==null};it.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!qe.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(yC("generateKeyPair"))return wg.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,u,f){if(l)return n(l);n(null,{privateKey:it.privateKeyFromPem(f),publicKey:it.publicKeyFromPem(u)})});if(vC("generateKey")&&vC("exportKey"))return ni.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:wC(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return ni.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){n(l)}).then(function(l){if(l){var u=it.privateKeyFromAsn1(ee.fromDer(qe.util.createBuffer(l)));n(null,{privateKey:u,publicKey:it.setRsaPublicKey(u.n,u.e)})}});if(_C("generateKey")&&_C("exportKey")){var i=ni.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:wC(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var u=l.target.result,f=ni.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);f.oncomplete=function(d){var h=d.target.result,g=it.privateKeyFromAsn1(ee.fromDer(qe.util.createBuffer(h)));n(null,{privateKey:g,publicKey:it.setRsaPublicKey(g.n,g.e)})},f.onerror=function(d){n(d)}},i.onerror=function(l){n(l)};return}}else if(yC("generateKeyPairSync")){var a=wg.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:it.privateKeyFromPem(a.privateKey),publicKey:it.publicKeyFromPem(a.publicKey)}}}var s=it.rsa.createKeyPairGenerationState(t,e,r);if(!n)return it.rsa.stepKeyPairGenerationState(s,0),s.keys;rM(s,r,n)};it.setRsaPublicKey=it.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(l,u,f){return mC(l,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(l,u){return qe.pkcs1.encode_rsa_oaep(u,l,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(l){return l}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return it.rsa.encrypt(s,r,!0)},r.verify=function(n,i,a,s){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),a==="RSASSA-PKCS1-V1_5"?a={verify:function(u,f){f=Sd(f,r,!0);var d=ee.fromDer(f,{parseAllBytes:s._parseAllDigestBytes}),h={},g=[];if(!ee.validate(d,eM,h,g)){var m=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw m.errors=g,m}var y=ee.derToOid(h.algorithmIdentifier);if(!(y===qe.oids.md2||y===qe.oids.md5||y===qe.oids.sha1||y===qe.oids.sha224||y===qe.oids.sha256||y===qe.oids.sha384||y===qe.oids.sha512||y===qe.oids["sha512-224"]||y===qe.oids["sha512-256"])){var m=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw m.oid=y,m}if((y===qe.oids.md2||y===qe.oids.md5)&&!("parameters"in h))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===h.digest}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(u,f){return f=Sd(f,r,!0),u===f}});var l=it.rsa.decrypt(i,r,!0,!1);return a.verify(n,l,r.n.bitLength())},r};it.setRsaPrivateKey=it.rsa.setPrivateKey=function(t,e,r,n,i,a,s,l){var u={n:t,e,d:r,p:n,q:i,dP:a,dQ:s,qInv:l};return u.decrypt=function(f,d,h){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var g=it.rsa.decrypt(f,u,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:Sd};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:function(m,y){return qe.pkcs1.decode_rsa_oaep(y,m,h)}};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:function(m){return m}};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(g,u,!1)},u.sign=function(f,d){var h=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:tM},h=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:function(){return f}},h=1);var g=d.encode(f,u.n.bitLength());return it.rsa.encrypt(g,u,h)},u};it.wrapRsaPrivateKey=function(t){return ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ee.integerToDer(0).getBytes()),ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.OID,!1,ee.oidToDer(it.oids.rsaEncryption).getBytes()),ee.create(ee.Class.UNIVERSAL,ee.Type.NULL,!1,"")]),ee.create(ee.Class.UNIVERSAL,ee.Type.OCTETSTRING,!1,ee.toDer(t).getBytes())])};it.privateKeyFromAsn1=function(t){var e={},r=[];if(ee.validate(t,X5,e,r)&&(t=ee.fromDer(qe.util.createBuffer(e.privateKey))),e={},r=[],!ee.validate(t,J5,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,s,l,u,f,d,h;return i=qe.util.createBuffer(e.privateKeyModulus).toHex(),a=qe.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=qe.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=qe.util.createBuffer(e.privateKeyPrime1).toHex(),u=qe.util.createBuffer(e.privateKeyPrime2).toHex(),f=qe.util.createBuffer(e.privateKeyExponent1).toHex(),d=qe.util.createBuffer(e.privateKeyExponent2).toHex(),h=qe.util.createBuffer(e.privateKeyCoefficient).toHex(),it.setRsaPrivateKey(new Pt(i,16),new Pt(a,16),new Pt(s,16),new Pt(l,16),new Pt(u,16),new Pt(f,16),new Pt(d,16),new Pt(h,16))};it.privateKeyToAsn1=it.privateKeyToRSAPrivateKey=function(t){return ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ee.integerToDer(0).getBytes()),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.n)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.e)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.d)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.p)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.q)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.dP)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.dQ)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.qInv))])};it.publicKeyFromAsn1=function(t){var e={},r=[];if(ee.validate(t,$5,e,r)){var n=ee.derToOid(e.publicKeyOid);if(n!==it.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!ee.validate(t,Z5,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=qe.util.createBuffer(e.publicKeyModulus).toHex(),s=qe.util.createBuffer(e.publicKeyExponent).toHex();return it.setRsaPublicKey(new Pt(a,16),new Pt(s,16))};it.publicKeyToAsn1=it.publicKeyToSubjectPublicKeyInfo=function(t){return ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.OID,!1,ee.oidToDer(it.oids.rsaEncryption).getBytes()),ee.create(ee.Class.UNIVERSAL,ee.Type.NULL,!1,"")]),ee.create(ee.Class.UNIVERSAL,ee.Type.BITSTRING,!1,[it.publicKeyToRSAPublicKey(t)])])};it.publicKeyToRSAPublicKey=function(t){return ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.n)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.e))])};function mC(t,e,r){var n=qe.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=t.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var s=i-3-t.length,l;if(r===0||r===1){l=r===0?0:255;for(var u=0;u<s;++u)n.putByte(l)}else for(;s>0;){for(var f=0,d=qe.random.getBytes(s),u=0;u<s;++u)l=d.charCodeAt(u),l===0?++f:n.putByte(l);s=f}return n.putByte(0),n.putBytes(t),n}function Sd(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),a=qe.util.createBuffer(t),s=a.getByte(),l=a.getByte();if(s!==0||r&&l!==0&&l!==1||!r&&l!=2||r&&l===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var u=0;if(l===0){u=i-3-n;for(var f=0;f<u;++f)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(u=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++u}else if(l===2)for(u=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++u}var d=a.getByte();if(d!==0||u!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function rM(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){a(t.pBits,function(l,u){if(l)return r(l);if(t.p=u,t.q!==null)return s(l,t.q);a(t.qBits,s)})}function a(l,u){qe.prime.generateProbablePrime(l,n,u)}function s(l,u){if(l)return r(l);if(t.q=u,t.p.compareTo(t.q)<0){var f=t.p;t.p=t.q,t.q=f}if(t.p.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)!==0){t.q=null,a(t.qBits,s);return}if(t.p1=t.p.subtract(Pt.ONE),t.q1=t.q.subtract(Pt.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Pt.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,a(t.qBits,s);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:it.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:it.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function ta(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=qe.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function nM(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function yC(t){return qe.util.isNodejs&&typeof wg[t]=="function"}function vC(t){return typeof ni.globalScope!="undefined"&&typeof ni.globalScope.crypto=="object"&&typeof ni.globalScope.crypto.subtle=="object"&&typeof ni.globalScope.crypto.subtle[t]=="function"}function _C(t){return typeof ni.globalScope!="undefined"&&typeof ni.globalScope.msCrypto=="object"&&typeof ni.globalScope.msCrypto.subtle=="object"&&typeof ni.globalScope.msCrypto.subtle[t]=="function"}function wC(t){for(var e=qe.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var Eg=de((ij,TC)=>{var Re=mt();as();bi();ku();zi();ss();wd();js();ti();dg();Nu();Ft();typeof CC=="undefined"&&(CC=Re.jsbn.BigInteger);var CC,ue=Re.asn1,pt=Re.pki=Re.pki||{};TC.exports=pt.pbe=Re.pbe=Re.pbe||{};var Ys=pt.oids,iM={name:"EncryptedPrivateKeyInfo",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},aM={name:"PBES2Algorithms",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},sM={name:"pkcs-12PbeParams",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"iterations"}]};pt.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Re.random.getBytesSync(r.saltSize),i=r.count,a=ue.integerToDer(i),s,l,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var f,d,h;switch(r.algorithm){case"aes128":s=16,f=16,d=Ys["aes128-CBC"],h=Re.aes.createEncryptionCipher;break;case"aes192":s=24,f=16,d=Ys["aes192-CBC"],h=Re.aes.createEncryptionCipher;break;case"aes256":s=32,f=16,d=Ys["aes256-CBC"],h=Re.aes.createEncryptionCipher;break;case"des":s=8,f=8,d=Ys.desCBC,h=Re.des.createEncryptionCipher;break;default:var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var m="hmacWith"+r.prfAlgorithm.toUpperCase(),y=SC(m),_=Re.pkcs5.pbkdf2(e,n,i,s,y),w=Re.random.getBytesSync(f),E=h(_);E.start(w),E.update(ue.toDer(t)),E.finish(),u=E.output.getBytes();var T=oM(n,a,s,m);l=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(Ys.pkcs5PBES2).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(Ys.pkcs5PBKDF2).getBytes()),T]),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(d).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,w)])])])}else if(r.algorithm==="3des"){s=24;var x=new Re.util.ByteBuffer(n),_=pt.pbe.generatePkcs12Key(e,x,1,i,s),w=pt.pbe.generatePkcs12Key(e,x,2,i,s),E=Re.des.createEncryptionCipher(_);E.start(w),E.update(ue.toDer(t)),E.finish(),u=E.output.getBytes(),l=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(Ys["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,n),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,a.getBytes())])])}else{var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var O=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[l,ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,u)]);return O};pt.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!ue.validate(t,iM,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=ue.derToOid(n.encryptionOid),l=pt.pbe.getCipher(s,n.encryptionParams,e),u=Re.util.createBuffer(n.encryptedData);return l.update(u),l.finish()&&(r=ue.fromDer(l.output)),r};pt.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:ue.toDer(t).getBytes()};return Re.pem.encode(r,{maxline:e})};pt.encryptedPrivateKeyFromPem=function(t){var e=Re.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return ue.fromDer(e.body)};pt.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=pt.wrapRsaPrivateKey(pt.privateKeyToAsn1(t));return n=pt.encryptPrivateKeyInfo(n,e,r),pt.encryptedPrivateKeyToPem(n)}var i,a,s,l;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,a=Re.random.getBytesSync(16),l=Re.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=Re.random.getBytesSync(16),l=Re.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=Re.random.getBytesSync(16),l=Re.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=Re.random.getBytesSync(8),l=Re.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=Re.random.getBytesSync(8),l=Re.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var f=Re.pbe.opensslDeriveBytes(e,a.substr(0,8),s),d=l(f);d.start(a),d.update(ue.toDer(pt.privateKeyToAsn1(t))),d.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Re.util.bytesToHex(a).toUpperCase()},body:d.output.getBytes()};return Re.pem.encode(h)};pt.decryptRsaPrivateKey=function(t,e){var r=null,n=Re.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var a,s;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,s=Re.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=Re.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=Re.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=Re.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=Re.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(h){return Re.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":a=8,s=function(h){return Re.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":a=16,s=function(h){return Re.rc2.createDecryptionCipher(h,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var l=Re.util.hexToBytes(n.dekInfo.parameters),u=Re.pbe.opensslDeriveBytes(e,l.substr(0,8),a),f=s(u);if(f.start(l),f.update(Re.util.createBuffer(n.body)),f.finish())r=f.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=pt.decryptPrivateKeyInfo(ue.fromDer(r),e):r=ue.fromDer(r),r!==null&&(r=pt.privateKeyFromAsn1(r)),r};pt.pbe.generatePkcs12Key=function(t,e,r,n,i,a){var s,l;if(typeof a=="undefined"||a===null){if(!("sha1"in Re.md))throw new Error('"sha1" hash algorithm unavailable.');a=Re.md.sha1.create()}var u=a.digestLength,f=a.blockLength,d=new Re.util.ByteBuffer,h=new Re.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)h.putInt16(t.charCodeAt(l));h.putInt16(0)}var g=h.length(),m=e.length(),y=new Re.util.ByteBuffer;y.fillWithByte(r,f);var _=f*Math.ceil(m/f),w=new Re.util.ByteBuffer;for(l=0;l<_;l++)w.putByte(e.at(l%m));var E=f*Math.ceil(g/f),T=new Re.util.ByteBuffer;for(l=0;l<E;l++)T.putByte(h.at(l%g));var x=w;x.putBuffer(T);for(var O=Math.ceil(i/u),I=1;I<=O;I++){var B=new Re.util.ByteBuffer;B.putBytes(y.bytes()),B.putBytes(x.bytes());for(var z=0;z<n;z++)a.start(),a.update(B.getBytes()),B=a.digest();var F=new Re.util.ByteBuffer;for(l=0;l<f;l++)F.putByte(B.at(l%u));var q=Math.ceil(m/f)+Math.ceil(g/f),te=new Re.util.ByteBuffer;for(s=0;s<q;s++){var ie=new Re.util.ByteBuffer(x.getBytes(f)),ye=511;for(l=F.length()-1;l>=0;l--)ye=ye>>8,ye+=F.at(l)+ie.at(l),ie.setAt(l,ye&255);te.putBuffer(ie)}x=te,d.putBuffer(B)}return d.truncate(d.length()-i),d};pt.pbe.getCipher=function(t,e,r){switch(t){case pt.oids.pkcs5PBES2:return pt.pbe.getCipherForPBES2(t,e,r);case pt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pt.oids["pbewithSHAAnd40BitRC2-CBC"]:return pt.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};pt.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!ue.validate(e,aM,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(t=ue.derToOid(n.kdfOid),t!==pt.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=t,a.supportedOids=["pkcs5PBKDF2"],a}if(t=ue.derToOid(n.encOid),t!==pt.oids["aes128-CBC"]&&t!==pt.oids["aes192-CBC"]&&t!==pt.oids["aes256-CBC"]&&t!==pt.oids["des-EDE3-CBC"]&&t!==pt.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=t,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=n.kdfSalt,l=Re.util.createBuffer(n.kdfIterationCount);l=l.getInt(l.length()<<3);var u,f;switch(pt.oids[t]){case"aes128-CBC":u=16,f=Re.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,f=Re.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,f=Re.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,f=Re.des.createDecryptionCipher;break;case"desCBC":u=8,f=Re.des.createDecryptionCipher;break}var d=xC(n.prfOid),h=Re.pkcs5.pbkdf2(r,s,l,u,d),g=n.encIv,m=f(h);return m.start(g),m};pt.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!ue.validate(e,sM,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=Re.util.createBuffer(n.salt),l=Re.util.createBuffer(n.iterations);l=l.getInt(l.length()<<3);var u,f,d;switch(t){case pt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,f=8,d=Re.des.startDecrypting;break;case pt.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,f=8,d=function(_,w){var E=Re.rc2.createDecryptionCipher(_,40);return E.start(w,null),E};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=t,a}var h=xC(n.prfOid),g=pt.pbe.generatePkcs12Key(r,s,1,l,u,h);h.start();var m=pt.pbe.generatePkcs12Key(r,s,2,l,f,h);return d(g,m)};pt.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in Re.md))throw new Error('"md5" hash algorithm unavailable.');n=Re.md.md5.create()}e===null&&(e="");for(var i=[bC(n,t+e)],a=16,s=1;a<r;++s,a+=16)i.push(bC(n,i[s-1]+t+e));return i.join("").substr(0,r)};function bC(t,e){return t.start().update(e).digest().getBytes()}function xC(t){var e;if(!t)e="hmacWithSHA1";else if(e=pt.oids[ue.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return SC(e)}function SC(t){var e=Re.md;switch(t){case"hmacWithSHA224":e=Re.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function oM(t,e,r,n){var i=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,t),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,Re.util.hexToBytes(r.toString(16))),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(pt.oids[n]).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.NULL,!1,"")])),i}});var Cg=de((aj,IC)=>{var cl=mt();bi();Ft();var Ie=cl.asn1,fl=IC.exports=cl.pkcs7asn1=cl.pkcs7asn1||{};cl.pkcs7=cl.pkcs7||{};cl.pkcs7.asn1=fl;var AC={name:"ContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};fl.contentInfoValidator=AC;var kC={name:"EncryptedContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Ie.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};fl.envelopedDataValidator={name:"EnvelopedData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(kC)};fl.encryptedDataValidator={name:"EncryptedData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"}].concat(kC)};var lM={name:"SignerInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Ie.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};fl.signedDataValidator={name:"SignedData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},AC,{name:"SignedData.Certificates",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,capture:"signerInfos",optional:!0,value:[lM]}]};fl.recipientInfoValidator={name:"RecipientInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Ie.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var bg=de((sj,RC)=>{var Ws=mt();Ft();Ws.mgf=Ws.mgf||{};var uM=RC.exports=Ws.mgf.mgf1=Ws.mgf1=Ws.mgf1||{};uM.create=function(t){var e={generate:function(r,n){for(var i=new Ws.util.ByteBuffer,a=Math.ceil(n/t.digestLength),s=0;s<a;s++){var l=new Ws.util.ByteBuffer;l.putInt32(s),t.start(),t.update(r+l.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}};return e}});var DC=de((oj,NC)=>{var Td=mt();bg();NC.exports=Td.mgf=Td.mgf||{};Td.mgf.mgf1=Td.mgf1});var Ad=de((lj,BC)=>{var zs=mt();ti();Ft();var cM=BC.exports=zs.pss=zs.pss||{};cM.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=zs.util.createBuffer(i));var a;if("saltLength"in t)a=t.saltLength;else if(i!==null)a=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==a)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||zs.random,l={};return l.encode=function(u,f){var d,h=f-1,g=Math.ceil(h/8),m=u.digest().getBytes();if(g<n+a+2)throw new Error("Message is too long to encrypt.");var y;i===null?y=s.getBytesSync(a):y=i.bytes();var _=new zs.util.ByteBuffer;_.fillWithByte(0,8),_.putBytes(m),_.putBytes(y),e.start(),e.update(_.getBytes());var w=e.digest().getBytes(),E=new zs.util.ByteBuffer;E.fillWithByte(0,g-a-n-2),E.putByte(1),E.putBytes(y);var T=E.getBytes(),x=g-n-1,O=r.generate(w,x),I="";for(d=0;d<x;d++)I+=String.fromCharCode(T.charCodeAt(d)^O.charCodeAt(d));var B=65280>>8*g-h&255;return I=String.fromCharCode(I.charCodeAt(0)&~B)+I.substr(1),I+w+String.fromCharCode(188)},l.verify=function(u,f,d){var h,g=d-1,m=Math.ceil(g/8);if(f=f.substr(-m),m<n+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(f.charCodeAt(m-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var y=m-n-1,_=f.substr(0,y),w=f.substr(y,n),E=65280>>8*m-g&255;if((_.charCodeAt(0)&E)!=0)throw new Error("Bits beyond keysize not zero as expected.");var T=r.generate(w,y),x="";for(h=0;h<y;h++)x+=String.fromCharCode(_.charCodeAt(h)^T.charCodeAt(h));x=String.fromCharCode(x.charCodeAt(0)&~E)+x.substr(1);var O=m-n-a-2;for(h=0;h<O;h++)if(x.charCodeAt(h)!==0)throw new Error("Leftmost octets not zero as expected");if(x.charCodeAt(O)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var I=x.substr(-a),B=new zs.util.ByteBuffer;B.fillWithByte(0,8),B.putBytes(u),B.putBytes(I),e.start(),e.update(B.getBytes());var z=e.digest().getBytes();return w===z},l}});var Rd=de((uj,UC)=>{var Ge=mt();as();bi();ku();zi();DC();ss();js();Ad();Nu();Ft();var b=Ge.asn1,Ce=UC.exports=Ge.pki=Ge.pki||{},Mt=Ce.oids,wr={};wr.CN=Mt.commonName;wr.commonName="CN";wr.C=Mt.countryName;wr.countryName="C";wr.L=Mt.localityName;wr.localityName="L";wr.ST=Mt.stateOrProvinceName;wr.stateOrProvinceName="ST";wr.O=Mt.organizationName;wr.organizationName="O";wr.OU=Mt.organizationalUnitName;wr.organizationalUnitName="OU";wr.E=Mt.emailAddress;wr.emailAddress="E";var OC=Ge.pki.rsa.publicKeyValidator,fM={name:"Certificate",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:b.Class.UNIVERSAL,type:b.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:b.Class.UNIVERSAL,type:b.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:b.Class.UNIVERSAL,type:b.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:b.Class.UNIVERSAL,type:b.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},OC,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:b.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:b.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},dM={name:"rsapss",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:b.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:b.Class.UNIVERSAL,type:b.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:b.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:b.Class.UNIVERSAL,type:b.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},hM={name:"CertificationRequestInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},OC,{name:"CertificationRequestInfo.attributes",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:b.Class.UNIVERSAL,type:b.Type.SET,constructed:!0}]}]}]},pM={name:"CertificationRequest",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[hM,{name:"CertificationRequest.signatureAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Ce.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,a,s=0;s<t.value.length;++s){n=t.value[s];for(var l=0;l<n.value.length;++l)a={},i=n.value[l],a.type=b.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in Mt&&(a.name=Mt[a.type],a.name in wr&&(a.shortName=wr[a.name])),e&&(e.update(a.type),e.update(a.value)),r.push(a)}return r};Ce.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=b.derToOid(n.value[0].value),a=n.value[1].value,s=0;s<a.length;++s){var l={};if(l.type=i,l.value=a[s].value,l.valueTagClass=a[s].type,l.type in Mt&&(l.name=Mt[l.type],l.name in wr&&(l.shortName=wr[l.name])),l.type===Mt.extensionRequest){l.extensions=[];for(var u=0;u<l.value.length;++u)l.extensions.push(Ce.certificateExtensionFromAsn1(l.value[u]))}e.push(l)}return e};function us(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}var kd=function(t,e,r){var n={};if(t!==Mt["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Mt.sha1},mgf:{algorithmOid:Mt.mgf1,hash:{algorithmOid:Mt.sha1}},saltLength:20});var i={},a=[];if(!b.validate(e,dM,i,a)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=a,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=b.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=b.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=b.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},Id=function(t){switch(Mt[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return Ge.md.sha1.create();case"md5WithRSAEncryption":return Ge.md.md5.create();case"sha256WithRSAEncryption":return Ge.md.sha256.create();case"sha384WithRSAEncryption":return Ge.md.sha384.create();case"sha512WithRSAEncryption":return Ge.md.sha512.create();case"RSASSA-PSS":return Ge.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},LC=function(t){var e=t.certificate,r;switch(e.signatureOid){case Mt.sha1WithRSAEncryption:case Mt.sha1WithRSASignature:break;case Mt["RSASSA-PSS"]:var n,i;if(n=Mt[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||Ge.md[n]===void 0){var a=new Error("Unsupported MGF hash function.");throw a.oid=e.signatureParameters.mgf.hash.algorithmOid,a.name=n,a}if(i=Mt[e.signatureParameters.mgf.algorithmOid],i===void 0||Ge.mgf[i]===void 0){var a=new Error("Unsupported MGF function.");throw a.oid=e.signatureParameters.mgf.algorithmOid,a.name=i,a}if(i=Ge.mgf[i].create(Ge.md[n].create()),n=Mt[e.signatureParameters.hash.algorithmOid],n===void 0||Ge.md[n]===void 0){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=e.signatureParameters.hash.algorithmOid,a.name=n,a}r=Ge.pss.create(Ge.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)};Ce.certificateFromPem=function(t,e,r){var n=Ge.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=b.fromDer(n.body,r);return Ce.certificateFromAsn1(a,e)};Ce.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:b.toDer(Ce.certificateToAsn1(t)).getBytes()};return Ge.pem.encode(r,{maxline:e})};Ce.publicKeyFromPem=function(t){var e=Ge.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=b.fromDer(e.body);return Ce.publicKeyFromAsn1(n)};Ce.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:b.toDer(Ce.publicKeyToAsn1(t)).getBytes()};return Ge.pem.encode(r,{maxline:e})};Ce.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:b.toDer(Ce.publicKeyToRSAPublicKey(t)).getBytes()};return Ge.pem.encode(r,{maxline:e})};Ce.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Ge.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=b.toDer(Ce.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=b.toDer(Ce.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var a=r.digest();if(e.encoding==="hex"){var s=a.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return a};Ce.certificationRequestFromPem=function(t,e,r){var n=Ge.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=b.fromDer(n.body,r);return Ce.certificationRequestFromAsn1(a,e)};Ce.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:b.toDer(Ce.certificationRequestToAsn1(t)).getBytes()};return Ge.pem.encode(r,{maxline:e})};Ce.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return us(t.issuer,e)},t.issuer.addField=function(e){ii([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return us(t.subject,e)},t.subject.addField=function(e){ii([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){ii(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){ii(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)PC(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||Ge.md.sha1.create();var n=Mt[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Ce.getTBSCertificate(t);var a=b.toDer(t.tbsCertificate);t.md.update(a.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=n.attributes,a}var s=e.md;if(s===null){s=Id({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||Ce.getTBSCertificate(e),u=b.toDer(l);s.update(u.getBytes())}return s!==null&&(r=LC({certificate:t,md:s,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var a,s,l=0;r&&l<n.attributes.length;++l)a=n.attributes[l],s=i.attributes[l],(a.type!==s.type||a.value!==s.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Ce.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=Mt.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return Ge.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Ce.certificateFromAsn1=function(t,e){var r={},n=[];if(!b.validate(t,fM,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var a=b.derToOid(r.publicKeyOid);if(a!==Ce.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Ce.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=Ge.util.createBuffer(r.certSerialNumber);s.serialNumber=l.toHex(),s.signatureOid=Ge.asn1.derToOid(r.certSignatureOid),s.signatureParameters=kd(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=Ge.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=kd(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var u=[];if(r.certValidity1UTCTime!==void 0&&u.push(b.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&u.push(b.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&u.push(b.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&u.push(b.generalizedTimeToDate(r.certValidity4GeneralizedTime)),u.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(u.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=u[0],s.validity.notAfter=u[1],s.tbsCertificate=r.tbsCertificate,e){s.md=Id({signatureOid:s.signatureOid,type:"certificate"});var f=b.toDer(s.tbsCertificate);s.md.update(f.getBytes())}var d=Ge.md.sha1.create(),h=b.toDer(r.certIssuer);d.update(h.getBytes()),s.issuer.getField=function(y){return us(s.issuer,y)},s.issuer.addField=function(y){ii([y]),s.issuer.attributes.push(y)},s.issuer.attributes=Ce.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=d.digest().toHex();var g=Ge.md.sha1.create(),m=b.toDer(r.certSubject);return g.update(m.getBytes()),s.subject.getField=function(y){return us(s.subject,y)},s.subject.addField=function(y){ii([y]),s.subject.attributes.push(y)},s.subject.attributes=Ce.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=g.digest().toHex(),r.certExtensions?s.extensions=Ce.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=Ce.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};Ce.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Ce.certificateExtensionFromAsn1(n.value[i]));return e};Ce.certificateExtensionFromAsn1=function(t){var e={};if(e.id=b.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===b.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in Mt){if(e.name=Mt[e.id],e.name==="keyUsage"){var r=b.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)==128,e.nonRepudiation=(n&64)==64,e.keyEncipherment=(n&32)==32,e.dataEncipherment=(n&16)==16,e.keyAgreement=(n&8)==8,e.keyCertSign=(n&4)==4,e.cRLSign=(n&2)==2,e.encipherOnly=(n&1)==1,e.decipherOnly=(i&128)==128}else if(e.name==="basicConstraints"){var r=b.fromDer(e.value);r.value.length>0&&r.value[0].type===b.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var a=null;r.value.length>0&&r.value[0].type===b.Type.INTEGER?a=r.value[0].value:r.value.length>1&&(a=r.value[1].value),a!==null&&(e.pathLenConstraint=b.derToInteger(a))}else if(e.name==="extKeyUsage")for(var r=b.fromDer(e.value),s=0;s<r.value.length;++s){var l=b.derToOid(r.value[s].value);l in Mt?e[Mt[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var r=b.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)==128,e.server=(n&64)==64,e.email=(n&32)==32,e.objsign=(n&16)==16,e.reserved=(n&8)==8,e.sslCA=(n&4)==4,e.emailCA=(n&2)==2,e.objCA=(n&1)==1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var u,r=b.fromDer(e.value),f=0;f<r.value.length;++f){u=r.value[f];var d={type:u.type,value:u.value};switch(e.altNames.push(d),u.type){case 1:case 2:case 6:break;case 7:d.ip=Ge.util.bytesToIP(u.value);break;case 8:d.oid=b.derToOid(u.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=b.fromDer(e.value);e.subjectKeyIdentifier=Ge.util.bytesToHex(r.value)}}return e};Ce.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!b.validate(t,pM,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var a=b.derToOid(r.publicKeyOid);if(a!==Ce.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Ce.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=Ge.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=kd(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=Ge.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=kd(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,e){s.md=Id({signatureOid:s.signatureOid,type:"certification request"});var l=b.toDer(s.certificationRequestInfo);s.md.update(l.getBytes())}var u=Ge.md.sha1.create();return s.subject.getField=function(f){return us(s.subject,f)},s.subject.addField=function(f){ii([f]),s.subject.attributes.push(f)},s.subject.attributes=Ce.RDNAttributesAsArray(r.certificationRequestInfoSubject,u),s.subject.hash=u.digest().toHex(),s.publicKey=Ce.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(f){return us(s,f)},s.addAttribute=function(f){ii([f]),s.attributes.push(f)},s.attributes=Ce.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};Ce.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return us(t.subject,e)},t.subject.addField=function(e){ii([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return us(t,e)},t.addAttribute=function(e){ii([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){ii(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){ii(e),t.attributes=e},t.sign=function(e,r){t.md=r||Ge.md.sha1.create();var n=Mt[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Ce.getCertificationRequestInfo(t);var a=b.toDer(t.certificationRequestInfo);t.md.update(a.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=Id({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Ce.getCertificationRequestInfo(t),i=b.toDer(n);r.update(i.getBytes())}return r!==null&&(e=LC({certificate:t,md:r,signature:t.signature})),e},t};function dl(t){for(var e=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,a=0;a<i.length;++a){r=i[a];var s=r.value,l=b.Type.PRINTABLESTRING;"valueTagClass"in r&&(l=r.valueTagClass,l===b.Type.UTF8&&(s=Ge.util.encodeUtf8(s))),n=b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(r.type).getBytes()),b.create(b.Class.UNIVERSAL,l,!1,s)])]),e.value.push(n)}return e}function ii(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name=="undefined"&&(e.type&&e.type in Ce.oids?e.name=Ce.oids[e.type]:e.shortName&&e.shortName in wr&&(e.name=Ce.oids[wr[e.shortName]])),typeof e.type=="undefined")if(e.name&&e.name in Ce.oids)e.type=Ce.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName=="undefined"&&e.name&&e.name in wr&&(e.shortName=wr[e.name]),e.type===Mt.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=b.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Ce.certificateExtensionToAsn1(PC(e.extensions[i])))}if(typeof e.value=="undefined"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function PC(t,e){if(e=e||{},typeof t.name=="undefined"&&t.id&&t.id in Ce.oids&&(t.name=Ce.oids[t.id]),typeof t.id=="undefined")if(t.name&&t.name in Ce.oids)t.id=Ce.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value!="undefined")return t;if(t.name==="keyUsage"){var n=0,i=0,a=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(a|=128,n=7);var s=String.fromCharCode(n);a!==0?s+=String.fromCharCode(i)+String.fromCharCode(a):i!==0&&(s+=String.fromCharCode(i)),t.value=b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,s)}else if(t.name==="basicConstraints")t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(b.create(b.Class.UNIVERSAL,b.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var u in t)t[u]===!0&&(u in Mt?l.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(Mt[u]).getBytes())):u.indexOf(".")!==-1&&l.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(u).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),t.value=b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,s)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);for(var f,d=0;d<t.altNames.length;++d){f=t.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=Ge.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else f.type===8&&(f.oid?s=b.oidToDer(b.oidToDer(f.oid)):s=b.oidToDer(s));t.value.value.push(b.create(b.Class.CONTEXT_SPECIFIC,f.type,!1,s))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=b.create(b.Class.UNIVERSAL,b.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var h=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=h.toHex(),t.value=b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,h.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var g=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!1,g))}if(t.authorityCertIssuer){var m=[b.create(b.Class.CONTEXT_SPECIFIC,4,!0,[dl(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,m))}if(t.serialNumber){var y=Ge.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!1,y))}}else if(t.name==="cRLDistributionPoints"){t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);for(var l=t.value.value,_=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),w=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[]),f,d=0;d<t.altNames.length;++d){f=t.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=Ge.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else f.type===8&&(f.oid?s=b.oidToDer(b.oidToDer(f.oid)):s=b.oidToDer(s));w.value.push(b.create(b.Class.CONTEXT_SPECIFIC,f.type,!1,s))}_.value.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[w])),l.push(_)}if(typeof t.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function xg(t,e){switch(t){case Mt["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.hash.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.mgf.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.mgf.hash.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.saltLength).getBytes())])),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,r);default:return b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")}}function gM(t){var e=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],a=i.value,s=b.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===b.Type.UTF8&&(a=Ge.util.encodeUtf8(a));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var u=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(i.type).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,s,l,a)])]);e.value.push(u)}return e}var mM=new Date("1950-01-01T00:00:00Z"),yM=new Date("2050-01-01T00:00:00Z");function MC(t){return t>=mM&&t<yM?b.create(b.Class.UNIVERSAL,b.Type.UTCTIME,!1,b.dateToUtcTime(t)):b.create(b.Class.UNIVERSAL,b.Type.GENERALIZEDTIME,!1,b.dateToGeneralizedTime(t))}Ce.getTBSCertificate=function(t){var e=MC(t.validity.notBefore),r=MC(t.validity.notAfter),n=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(t.version).getBytes())]),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,Ge.util.hexToBytes(t.serialNumber)),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.siginfo.algorithmOid).getBytes()),xg(t.siginfo.algorithmOid,t.siginfo.parameters)]),dl(t.issuer),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[e,r]),dl(t.subject),Ce.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!0,[b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Ce.certificateExtensionsToAsn1(t.extensions)),n};Ce.getCertificationRequestInfo=function(t){var e=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(t.version).getBytes()),dl(t.subject),Ce.publicKeyToAsn1(t.publicKey),gM(t)]);return e};Ce.distinguishedNameToAsn1=function(t){return dl(t)};Ce.certificateToAsn1=function(t){var e=t.tbsCertificate||Ce.getTBSCertificate(t);return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[e,b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.signatureOid).getBytes()),xg(t.signatureOid,t.signatureParameters)]),b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Ce.certificateExtensionsToAsn1=function(t){var e=b.create(b.Class.CONTEXT_SPECIFIC,3,!0,[]),r=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Ce.certificateExtensionToAsn1(t[n]));return e};Ce.certificateExtensionToAsn1=function(t){var e=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);e.value.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.id).getBytes())),t.critical&&e.value.push(b.create(b.Class.UNIVERSAL,b.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return typeof t.value!="string"&&(r=b.toDer(r).getBytes()),e.value.push(b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,r)),e};Ce.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Ce.getCertificationRequestInfo(t);return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[e,b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.signatureOid).getBytes()),xg(t.signatureOid,t.signatureParameters)]),b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Ce.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(s){var l=r(s.issuer);return l},e.addCertificate=function(s){if(typeof s=="string"&&(s=Ge.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))if(s.subject.hash in e.certs){var l=e.certs[s.subject.hash];Ge.util.isArray(l)||(l=[l]),l.push(s),e.certs[s.subject.hash]=l}else e.certs[s.subject.hash]=s},e.hasCertificate=function(s){typeof s=="string"&&(s=Ge.pki.certificateFromPem(s));var l=r(s.subject);if(!l)return!1;Ge.util.isArray(l)||(l=[l]);for(var u=b.toDer(Ce.certificateToAsn1(s)).getBytes(),f=0;f<l.length;++f){var d=b.toDer(Ce.certificateToAsn1(l[f])).getBytes();if(u===d)return!0}return!1},e.listAllCertificates=function(){var s=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var u=e.certs[l];if(!Ge.util.isArray(u))s.push(u);else for(var f=0;f<u.length;++f)s.push(u[f])}return s},e.removeCertificate=function(s){var l;if(typeof s=="string"&&(s=Ge.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))return null;var u=r(s.subject);if(!Ge.util.isArray(u))return l=e.certs[s.subject.hash],delete e.certs[s.subject.hash],l;for(var f=b.toDer(Ce.certificateToAsn1(s)).getBytes(),d=0;d<u.length;++d){var h=b.toDer(Ce.certificateToAsn1(u[d])).getBytes();f===h&&(l=u[d],u.splice(d,1))}return u.length===0&&delete e.certs[s.subject.hash],l};function r(s){return n(s),e.certs[s.hash]||null}function n(s){if(!s.hash){var l=Ge.md.sha1.create();s.attributes=Ce.RDNAttributesAsArray(dl(s),l),s.hash=l.digest().toHex()}}if(t)for(var i=0;i<t.length;++i){var a=t[i];e.addCertificate(a)}return e};Ce.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Ce.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i=="undefined"&&(i=new Date);var a=!0,s=null,l=0;do{var u=e.shift(),f=null,d=!1;if(i&&(i<u.validity.notBefore||i>u.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:Ce.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:i}),s===null){if(f=e[0]||t.getIssuer(u),f===null&&u.isIssuer(u)&&(d=!0,f=u),f){var h=f;Ge.util.isArray(h)||(h=[h]);for(var g=!1;!g&&h.length>0;){f=h.shift();try{g=f.verify(u)}catch(I){}}g||(s={message:"Certificate signature is invalid.",error:Ce.certificateError.bad_certificate})}s===null&&(!f||d)&&!t.hasCertificate(u)&&(s={message:"Certificate is not trusted.",error:Ce.certificateError.unknown_ca})}if(s===null&&f&&!u.isIssuer(f)&&(s={message:"Certificate issuer is invalid.",error:Ce.certificateError.bad_certificate}),s===null)for(var m={keyUsage:!0,basicConstraints:!0},y=0;s===null&&y<u.extensions.length;++y){var _=u.extensions[y];_.critical&&!(_.name in m)&&(s={message:"Certificate has an unsupported critical extension.",error:Ce.certificateError.unsupported_certificate})}if(s===null&&(!a||e.length===0&&(!f||d))){var w=u.getExtension("basicConstraints"),E=u.getExtension("keyUsage");if(E!==null&&(!E.keyCertSign||w===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Ce.certificateError.bad_certificate}),s===null&&w!==null&&!w.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Ce.certificateError.bad_certificate}),s===null&&E!==null&&"pathLenConstraint"in w){var T=l-1;T>w.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:Ce.certificateError.bad_certificate})}}var x=s===null?!0:s.error,O=r.verify?r.verify(x,l,n):x;if(O===!0)s=null;else throw x===!0&&(s={message:"The application rejected the certificate.",error:Ce.certificateError.bad_certificate}),(O||O===0)&&(typeof O=="object"&&!Ge.util.isArray(O)?(O.message&&(s.message=O.message),O.error&&(s.error=O.error)):typeof O=="string"&&(s.error=O)),s;a=!1,++l}while(e.length>0);return!0}});var Tg=de((cj,qC)=>{var ir=mt();bi();al();ss();Cg();Eg();ti();Nu();ul();Ft();Rd();var U=ir.asn1,St=ir.pki,Du=qC.exports=ir.pkcs12=ir.pkcs12||{},FC={name:"ContentInfo",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:U.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},vM={name:"PFX",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:U.Class.UNIVERSAL,type:U.Type.INTEGER,constructed:!1,capture:"version"},FC,{name:"PFX.macData",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:U.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:U.Class.UNIVERSAL,type:U.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:U.Class.UNIVERSAL,type:U.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:U.Class.UNIVERSAL,type:U.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},_M={name:"SafeBag",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:U.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:U.Class.UNIVERSAL,type:U.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},wM={name:"Attribute",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:U.Class.UNIVERSAL,type:U.Type.SET,constructed:!0,capture:"values"}]},EM={name:"CertBag",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:U.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:U.Class.UNIVERSAL,type:U.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function Bu(t,e,r,n){for(var i=[],a=0;a<t.length;a++)for(var s=0;s<t[a].safeBags.length;s++){var l=t[a].safeBags[s];if(!(n!==void 0&&l.type!==n)){if(e===null){i.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(r)>=0&&i.push(l)}}return i}Du.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!U.validate(t,vM,n,i)){var a=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw a.errors=a,a}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(w){var E={},T;return"localKeyId"in w?T=w.localKeyId:"localKeyIdHex"in w&&(T=ir.util.hexToBytes(w.localKeyIdHex)),T===void 0&&!("friendlyName"in w)&&"bagType"in w&&(E[w.bagType]=Bu(s.safeContents,null,null,w.bagType)),T!==void 0&&(E.localKeyId=Bu(s.safeContents,"localKeyId",T,w.bagType)),"friendlyName"in w&&(E.friendlyName=Bu(s.safeContents,"friendlyName",w.friendlyName,w.bagType)),E},getBagsByFriendlyName:function(w,E){return Bu(s.safeContents,"friendlyName",w,E)},getBagsByLocalKeyId:function(w,E){return Bu(s.safeContents,"localKeyId",w,E)}};if(n.version.charCodeAt(0)!==3){var a=new Error("PKCS#12 PFX of version other than 3 not supported.");throw a.version=n.version.charCodeAt(0),a}if(U.derToOid(n.contentType)!==St.oids.data){var a=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw a.oid=U.derToOid(n.contentType),a}var l=n.content.value[0];if(l.tagClass!==U.Class.UNIVERSAL||l.type!==U.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=Sg(l),n.mac){var u=null,f=0,d=U.derToOid(n.macAlgorithm);switch(d){case St.oids.sha1:u=ir.md.sha1.create(),f=20;break;case St.oids.sha256:u=ir.md.sha256.create(),f=32;break;case St.oids.sha384:u=ir.md.sha384.create(),f=48;break;case St.oids.sha512:u=ir.md.sha512.create(),f=64;break;case St.oids.md5:u=ir.md.md5.create(),f=16;break}if(u===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var h=new ir.util.ByteBuffer(n.macSalt),g="macIterations"in n?parseInt(ir.util.bytesToHex(n.macIterations),16):1,m=Du.generateKey(r,h,3,g,f,u),y=ir.hmac.create();y.start(u,m),y.update(l.value);var _=y.getMac();if(_.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return CM(s,l.value,e,r),s};function Sg(t){if(t.composed||t.constructed){for(var e=ir.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function CM(t,e,r,n){if(e=U.fromDer(e,r),e.tagClass!==U.Class.UNIVERSAL||e.type!==U.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var a=e.value[i],s={},l=[];if(!U.validate(a,FC,s,l)){var u=new Error("Cannot read ContentInfo.");throw u.errors=l,u}var f={encrypted:!1},d=null,h=s.content.value[0];switch(U.derToOid(s.contentType)){case St.oids.data:if(h.tagClass!==U.Class.UNIVERSAL||h.type!==U.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=Sg(h).value;break;case St.oids.encryptedData:d=bM(h,n),f.encrypted=!0;break;default:var u=new Error("Unsupported PKCS#12 contentType.");throw u.contentType=U.derToOid(s.contentType),u}f.safeBags=xM(d,r,n),t.safeContents.push(f)}}function bM(t,e){var r={},n=[];if(!U.validate(t,ir.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var a=U.derToOid(r.contentType);if(a!==St.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=a,i}a=U.derToOid(r.encAlgorithm);var s=St.pbe.getCipher(a,r.encParameter,e),l=Sg(r.encryptedContentAsn1),u=ir.util.createBuffer(l.value);if(s.update(u),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function xM(t,e,r){if(!e&&t.length===0)return[];if(t=U.fromDer(t,e),t.tagClass!==U.Class.UNIVERSAL||t.type!==U.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var a=t.value[i],s={},l=[];if(!U.validate(a,_M,s,l)){var u=new Error("Cannot read SafeBag.");throw u.errors=l,u}var f={type:U.derToOid(s.bagId),attributes:SM(s.bagAttributes)};n.push(f);var d,h,g=s.bagValue.value[0];switch(f.type){case St.oids.pkcs8ShroudedKeyBag:if(g=St.decryptPrivateKeyInfo(g,r),g===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case St.oids.keyBag:try{f.key=St.privateKeyFromAsn1(g)}catch(y){f.key=null,f.asn1=g}continue;case St.oids.certBag:d=EM,h=function(){if(U.derToOid(s.certId)!==St.oids.x509Certificate){var y=new Error("Unsupported certificate type, only X.509 supported.");throw y.oid=U.derToOid(s.certId),y}var _=U.fromDer(s.cert,e);try{f.cert=St.certificateFromAsn1(_,!0)}catch(w){f.cert=null,f.asn1=_}};break;default:var u=new Error("Unsupported PKCS#12 SafeBag type.");throw u.oid=f.type,u}if(d!==void 0&&!U.validate(g,d,s,l)){var u=new Error("Cannot read PKCS#12 "+d.name);throw u.errors=l,u}h()}return n}function SM(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!U.validate(t[r],wM,n,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var s=U.derToOid(n.oid);if(St.oids[s]!==void 0){e[St.oids[s]]=[];for(var l=0;l<n.values.length;++l)e[St.oids[s]].push(n.values[l].value)}}return e}Du.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,a;if(i!==null)i=ir.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var s=ir.util.isArray(e)?e[0]:e;typeof s=="string"&&(s=St.certificateFromPem(s));var l=ir.md.sha1.create();l.update(U.toDer(St.certificateToAsn1(s)).getBytes()),i=l.digest().getBytes()}else i=ir.random.getBytes(20);var u=[];i!==null&&u.push(U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(St.oids.localKeyId).getBytes()),U.create(U.Class.UNIVERSAL,U.Type.SET,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&u.push(U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(St.oids.friendlyName).getBytes()),U.create(U.Class.UNIVERSAL,U.Type.SET,!0,[U.create(U.Class.UNIVERSAL,U.Type.BMPSTRING,!1,n.friendlyName)])])),u.length>0&&(a=U.create(U.Class.UNIVERSAL,U.Type.SET,!0,u));var f=[],d=[];e!==null&&(ir.util.isArray(e)?d=e:d=[e]);for(var h=[],g=0;g<d.length;++g){e=d[g],typeof e=="string"&&(e=St.certificateFromPem(e));var m=g===0?a:void 0,y=St.certificateToAsn1(e),_=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(St.oids.certBag).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(St.oids.x509Certificate).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,U.toDer(y).getBytes())])])]),m]);h.push(_)}if(h.length>0){var w=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,h),E=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(St.oids.data).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,U.toDer(w).getBytes())])]);f.push(E)}var T=null;if(t!==null){var x=St.wrapRsaPrivateKey(St.privateKeyToAsn1(t));r===null?T=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(St.oids.keyBag).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[x]),a]):T=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(St.oids.pkcs8ShroudedKeyBag).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[St.encryptPrivateKeyInfo(x,r,n)]),a]);var O=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[T]),I=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(St.oids.data).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,U.toDer(O).getBytes())])]);f.push(I)}var B=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,f),z;if(n.useMac){var l=ir.md.sha1.create(),F=new ir.util.ByteBuffer(ir.random.getBytes(n.saltSize)),q=n.count,t=Du.generateKey(r,F,3,q,20),te=ir.hmac.create();te.start(l,t),te.update(U.toDer(B).getBytes());var ie=te.getMac();z=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(St.oids.sha1).getBytes()),U.create(U.Class.UNIVERSAL,U.Type.NULL,!1,"")]),U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,ie.getBytes())]),U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,F.getBytes()),U.create(U.Class.UNIVERSAL,U.Type.INTEGER,!1,U.integerToDer(q).getBytes())])}return U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.INTEGER,!1,U.integerToDer(3).getBytes()),U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(St.oids.data).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,U.toDer(B).getBytes())])]),z])};Du.generateKey=ir.pbe.generatePkcs12Key});var kg=de((fj,GC)=>{var cs=mt();bi();ss();Eg();js();wd();Tg();Ad();Nu();Ft();Rd();var Ag=cs.asn1,hl=GC.exports=cs.pki=cs.pki||{};hl.pemToDer=function(t){var e=cs.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return cs.util.createBuffer(e.body)};hl.privateKeyFromPem=function(t){var e=cs.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=Ag.fromDer(e.body);return hl.privateKeyFromAsn1(n)};hl.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:Ag.toDer(hl.privateKeyToAsn1(t)).getBytes()};return cs.pem.encode(r,{maxline:e})};hl.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:Ag.toDer(t).getBytes()};return cs.pem.encode(r,{maxline:e})}});var Og=de((dj,QC)=>{var _e=mt();bi();al();md();js();kg();ti();ul();Ft();var Nd=function(t,e,r,n){var i=_e.util.createBuffer(),a=t.length>>1,s=a+(t.length&1),l=t.substr(0,s),u=t.substr(a,s),f=_e.util.createBuffer(),d=_e.hmac.create();r=e+r;var h=Math.ceil(n/16),g=Math.ceil(n/20);d.start("MD5",l);var m=_e.util.createBuffer();f.putBytes(r);for(var y=0;y<h;++y)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),m.putBuffer(d.digest());d.start("SHA1",u);var _=_e.util.createBuffer();f.clear(),f.putBytes(r);for(var y=0;y<g;++y)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),_.putBuffer(d.digest());return i.putBytes(_e.util.xorBytes(m.getBytes(),_.getBytes(),n)),i},TM=function(t,e,r){var n=_e.hmac.create();n.start("SHA1",t);var i=_e.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},AM=function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=_e.util.createBuffer(i),e.length=i.length,n=!0}catch(a){}return n},kM=function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=_e.util.createBuffer(i),e.length=i.length,n=!0}catch(a){}return n},qn=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return _e.util.createBuffer(t.getBytes(r))},ai=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},A={};A.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};A.SupportedVersions=[A.Versions.TLS_1_1,A.Versions.TLS_1_0];A.Version=A.SupportedVersions[0];A.MaxFragment=16384-1024;A.ConnectionEnd={server:0,client:1};A.PRFAlgorithm={tls_prf_sha256:0};A.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};A.CipherType={stream:0,block:1,aead:2};A.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};A.CompressionMethod={none:0,deflate:1};A.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};A.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};A.Alert={};A.Alert.Level={warning:1,fatal:2};A.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};A.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};A.CipherSuites={};A.getCipherSuite=function(t){var e=null;for(var r in A.CipherSuites){var n=A.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};A.handleUnexpected=function(t,e){var r=!t.open&&t.entity===A.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unexpected_message}})};A.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(A.queue(t,A.createAlert(t,{level:A.Alert.Level.warning,description:A.Alert.Description.no_renegotiation})),A.flush(t)),t.process()};A.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===A.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});else{var a=e.fragment,s=a.length();if(n={version:{major:a.getByte(),minor:a.getByte()},random:_e.util.createBuffer(a.getBytes(32)),session_id:qn(a,1),extensions:[]},i?(n.cipher_suite=a.getBytes(2),n.compression_method=a.getByte()):(n.cipher_suites=qn(a,2),n.compression_methods=qn(a,1)),s=r-(s-a.length()),s>0){for(var l=qn(a,2);l.length()>0;)n.extensions.push({type:[l.getByte(),l.getByte()],data:qn(l,2)});if(!i)for(var u=0;u<n.extensions.length;++u){var f=n.extensions[u];if(f.type[0]===0&&f.type[1]===0)for(var d=qn(f.data,2);d.length()>0;){var h=d.getByte();if(h!==0)break;t.session.extensions.server_name.serverNameList.push(qn(d,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=A.getCipherSuite(n.cipher_suite);else for(var g=_e.util.createBuffer(n.cipher_suites.bytes());g.length()>0&&(t.session.cipherSuite=A.getCipherSuite(g.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.handshake_failure},cipherSuite:_e.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=A.CompressionMethod.none}return n};A.createSecurityParameters=function(t,e){var r=t.entity===A.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,a=r?n:A.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:A.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}};A.handleServerHello=function(t,e,r){var n=A.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=jC,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=RM,t.session.resuming=!1,A.createSecurityParameters(t,n)),t.session.id=i,t.process()}};A.handleClientHello=function(t,e,r){var n=A.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),a=null;if(t.sessionCache&&(a=t.sessionCache.getSession(i),a===null?i="":(a.version.major!==n.version.major||a.version.minor>n.version.minor)&&(a=null,i="")),i.length===0&&(i=_e.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},a)t.version=t.session.version=a.version,t.session.sp=a.sp;else{for(var s,l=1;l<A.SupportedVersions.length&&(s=A.SupportedVersions[l],!(s.minor<=n.version.minor));++l);t.version={major:s.major,minor:s.minor},t.session.version=t.version}a!==null?(t.expect=Rg,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?MM:Ig,t.session.resuming=!1,A.createSecurityParameters(t,n)),t.open=!0,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerHello(t)})),t.session.resuming?(A.queue(t,A.createRecord(t,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),t.state.pending=A.createConnectionState(t),t.state.current.write=t.state.pending.write,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createFinished(t)}))):(A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificate(t)})),t.fail||(A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerKeyExchange(t)})),t.verifyClient!==!1&&A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificateRequest(t)})),A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerHelloDone(t)})))),A.flush(t),t.process()}};A.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:qn(n,3)},a,s,l=[];try{for(;i.certificate_list.length()>0;)a=qn(i.certificate_list,3),s=_e.asn1.fromDer(a),a=_e.pki.certificateFromAsn1(s,!0),l.push(a)}catch(f){return t.error(t,{message:"Could not parse certificate list.",cause:f,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate}})}var u=t.entity===A.ConnectionEnd.client;(u||t.verifyClient===!0)&&l.length===0?t.error(t,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}}):l.length===0?t.expect=u?VC:Ig:(u?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],A.verifyCertificateChain(t,l)&&(t.expect=u?VC:Ig)),t.process()};A.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unsupported_certificate}});t.expect=NM,t.process()};A.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:qn(n,2).getBytes()},a=null;if(t.getPrivateKey)try{a=t.getPrivateKey(t,t.session.serverCertificate),a=_e.pki.privateKeyFromPem(a)}catch(u){t.error(t,{message:"Could not get private key.",cause:u,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}})}if(a===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==s.pre_master_secret.charCodeAt(0)||l.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(u){s.pre_master_secret=_e.random.getBytes(48)}t.expect=Rg,t.session.clientCertificate!==null&&(t.expect=UM),t.process()};A.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:qn(n,1),certificate_authorities:qn(n,2)};t.session.certificateRequest=i,t.expect=DM,t.process()};A.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a={signature:qn(n,2).getBytes()},s=_e.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch(u){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.handshake_failure}})}t.expect=Rg,t.process()};A.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.insufficient_security}},i=0,a=t.verify(t,n.alert.description,i,[]);if(a!==!0)return(a||a===0)&&(typeof a=="object"&&!_e.util.isArray(a)?(a.message&&(n.message=a.message),a.alert&&(n.alert.description=a.alert)):typeof a=="number"&&(n.alert.description=a)),t.error(t,n)}t.session.certificateRequest!==null&&(e=A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificate(t)}),A.queue(t,e)),e=A.createRecord(t,{type:A.ContentType.handshake,data:A.createClientKeyExchange(t)}),A.queue(t,e),t.expect=LM;var s=function(l,u){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&A.queue(l,A.createRecord(l,{type:A.ContentType.handshake,data:A.createCertificateVerify(l,u)})),A.queue(l,A.createRecord(l,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),l.state.pending=A.createConnectionState(l),l.state.current.write=l.state.pending.write,A.queue(l,A.createRecord(l,{type:A.ContentType.handshake,data:A.createFinished(l)})),l.expect=jC,A.flush(l),l.process()};if(t.session.certificateRequest===null||t.session.clientCertificate===null)return s(t,null);A.getClientSignature(t,s)};A.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var r=t.entity===A.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=A.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?BM:FM,t.process()};A.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a=e.fragment.getBytes();n=_e.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var s=t.entity===A.ConnectionEnd.client,l=s?"server finished":"client finished",u=t.session.sp,f=12,d=Nd;if(n=d(u.master_secret,l,n.getBytes(),f),n.getBytes()!==a)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&s||!t.session.resuming&&!s)&&(A.queue(t,A.createRecord(t,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createFinished(t)}))),t.expect=s?OM:qM,t.handshaking=!1,++t.handshakes,t.peerCertificate=s?t.session.serverCertificate:t.session.clientCertificate,A.flush(t),t.isConnected=!0,t.connected(t),t.process()};A.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case A.Alert.Description.close_notify:i="Connection closed.";break;case A.Alert.Description.unexpected_message:i="Unexpected message.";break;case A.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case A.Alert.Description.decryption_failed:i="Decryption failed.";break;case A.Alert.Description.record_overflow:i="Record overflow.";break;case A.Alert.Description.decompression_failure:i="Decompression failed.";break;case A.Alert.Description.handshake_failure:i="Handshake failure.";break;case A.Alert.Description.bad_certificate:i="Bad certificate.";break;case A.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case A.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case A.Alert.Description.certificate_expired:i="Certificate expired.";break;case A.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case A.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case A.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case A.Alert.Description.access_denied:i="Access denied.";break;case A.Alert.Description.decode_error:i="Decode error.";break;case A.Alert.Description.decrypt_error:i="Decrypt error.";break;case A.Alert.Description.export_restriction:i="Export restriction.";break;case A.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case A.Alert.Description.insufficient_security:i="Insufficient security.";break;case A.Alert.Description.internal_error:i="Internal error.";break;case A.Alert.Description.user_canceled:i="User canceled.";break;case A.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===A.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===A.ConnectionEnd.client?"server":"client",alert:n}),t.process()};A.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=_e.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var a=r.bytes(i+4);r.read+=4,n in Bd[t.entity][t.expect]?(t.entity===A.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:_e.md.md5.create(),sha1:_e.md.sha1.create()}),n!==A.HandshakeType.hello_request&&n!==A.HandshakeType.certificate_verify&&n!==A.HandshakeType.finished&&(t.session.md5.update(a),t.session.sha1.update(a)),Bd[t.entity][t.expect][n](t,e,i)):A.handleUnexpected(t,e)};A.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};A.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),a=r.getBytes(i);if(n===A.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>a.length)return t.process();A.queue(t,A.createRecord(t,{type:A.ContentType.heartbeat,data:A.createHeartbeat(A.HeartbeatMessageType.heartbeat_response,a)})),A.flush(t)}else if(n===A.HeartbeatMessageType.heartbeat_response){if(a!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,_e.util.createBuffer(a))}t.process()};var IM=0,RM=1,VC=2,NM=3,DM=4,jC=5,BM=6,OM=7,LM=8,PM=0,MM=1,Ig=2,UM=3,Rg=4,FM=5,qM=6,S=A.handleUnexpected,HC=A.handleChangeCipherSpec,Jr=A.handleAlert,mn=A.handleHandshake,KC=A.handleApplicationData,Zr=A.handleHeartbeat,Ng=[];Ng[A.ConnectionEnd.client]=[[S,Jr,mn,S,Zr],[S,Jr,mn,S,Zr],[S,Jr,mn,S,Zr],[S,Jr,mn,S,Zr],[S,Jr,mn,S,Zr],[HC,Jr,S,S,Zr],[S,Jr,mn,S,Zr],[S,Jr,mn,KC,Zr],[S,Jr,mn,S,Zr]];Ng[A.ConnectionEnd.server]=[[S,Jr,mn,S,Zr],[S,Jr,mn,S,Zr],[S,Jr,mn,S,Zr],[S,Jr,mn,S,Zr],[HC,Jr,S,S,Zr],[S,Jr,mn,S,Zr],[S,Jr,mn,KC,Zr],[S,Jr,mn,S,Zr]];var fs=A.handleHelloRequest,GM=A.handleServerHello,YC=A.handleCertificate,WC=A.handleServerKeyExchange,Dg=A.handleCertificateRequest,Dd=A.handleServerHelloDone,zC=A.handleFinished,Bd=[];Bd[A.ConnectionEnd.client]=[[S,S,GM,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,YC,WC,Dg,Dd,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,S,WC,Dg,Dd,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,S,S,Dg,Dd,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,S,S,S,Dd,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,zC],[fs,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[fs,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S]];var VM=A.handleClientHello,jM=A.handleClientKeyExchange,HM=A.handleCertificateVerify;Bd[A.ConnectionEnd.server]=[[S,VM,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,YC,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,jM,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,HM,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,zC],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S]];A.generateKeys=function(t,e){var r=Nd,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,a=t.version.major===A.Versions.TLS_1_0.major&&t.version.minor===A.Versions.TLS_1_0.minor;a&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),l={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return a&&(l.client_write_IV=s.getBytes(e.fixed_iv_length),l.server_write_IV=s.getBytes(e.fixed_iv_length)),l};A.createConnectionState=function(t){var e=t.entity===A.ConnectionEnd.client,r=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},n={read:r(),write:r()};if(n.read.update=function(a,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(a,s,n.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_record_mac}}),!a.fail},n.write.update=function(a,s){return n.write.compressFunction(a,s,n.write)?n.write.cipherFunction(s,n.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}),!a.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=A.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case A.CompressionMethod.none:break;case A.CompressionMethod.deflate:n.read.compressFunction=kM,n.write.compressFunction=AM;break;default:throw new Error("Unsupported compression algorithm.")}}return n};A.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=_e.util.createBuffer();return r.putInt32(e),r.putBytes(_e.random.getBytes(28)),r};A.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};A.createAlert=function(t,e){var r=_e.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),A.createRecord(t,{type:A.ContentType.alert,data:r})};A.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=_e.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),a=_e.util.createBuffer();a.putByte(A.CompressionMethod.none);var s=a.length(),l=_e.util.createBuffer();if(t.virtualHost){var u=_e.util.createBuffer();u.putByte(0),u.putByte(0);var f=_e.util.createBuffer();f.putByte(0),ai(f,2,_e.util.createBuffer(t.virtualHost));var d=_e.util.createBuffer();ai(d,2,f),ai(u,2,d),l.putBuffer(u)}var h=l.length();h>0&&(h+=2);var g=t.session.id,m=g.length+1+2+4+28+2+i+1+s+h,y=_e.util.createBuffer();return y.putByte(A.HandshakeType.client_hello),y.putInt24(m),y.putByte(t.version.major),y.putByte(t.version.minor),y.putBytes(t.session.sp.client_random),ai(y,1,_e.util.createBuffer(g)),ai(y,2,e),ai(y,1,a),h>0&&ai(y,2,l),y};A.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=_e.util.createBuffer();return n.putByte(A.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),ai(n,1,_e.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};A.createCertificate=function(t){var e=t.entity===A.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=_e.util.createBuffer();if(r!==null)try{_e.util.isArray(r)||(r=[r]);for(var a=null,s=0;s<r.length;++s){var l=_e.pem.decode(r[s])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=l.type,u}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var f=_e.util.createBuffer(l.body);a===null&&(a=_e.asn1.fromDer(f.bytes(),!1));var d=_e.util.createBuffer();ai(d,3,f),i.putBuffer(d)}r=_e.pki.certificateFromAsn1(a),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(m){return t.error(t,{message:"Could not send certificate list.",cause:m,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate}})}var h=3+i.length(),g=_e.util.createBuffer();return g.putByte(A.HandshakeType.certificate),g.putInt24(h),ai(g,3,i),g};A.createClientKeyExchange=function(t){var e=_e.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(_e.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,a=_e.util.createBuffer();return a.putByte(A.HandshakeType.client_key_exchange),a.putInt24(i),a.putInt16(e.length),a.putBytes(e),a};A.createServerKeyExchange=function(t){var e=0,r=_e.util.createBuffer();return e>0&&(r.putByte(A.HandshakeType.server_key_exchange),r.putInt24(e)),r};A.getClientSignature=function(t,e){var r=_e.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,a){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=_e.pki.privateKeyFromPem(s)}catch(l){n.error(n,{message:"Could not get private key.",cause:l,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}):i=s.sign(i,null),a(n,i)},t.getSignature(t,r,e)};A.createCertificateVerify=function(t,e){var r=e.length+2,n=_e.util.createBuffer();return n.putByte(A.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};A.createCertificateRequest=function(t){var e=_e.util.createBuffer();e.putByte(1);var r=_e.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],a=_e.pki.distinguishedNameToAsn1(i.subject),s=_e.asn1.toDer(a);r.putInt16(s.length()),r.putBuffer(s)}var l=1+e.length()+2+r.length(),u=_e.util.createBuffer();return u.putByte(A.HandshakeType.certificate_request),u.putInt24(l),ai(u,1,e),ai(u,2,r),u};A.createServerHelloDone=function(t){var e=_e.util.createBuffer();return e.putByte(A.HandshakeType.server_hello_done),e.putInt24(0),e};A.createChangeCipherSpec=function(){var t=_e.util.createBuffer();return t.putByte(1),t};A.createFinished=function(t){var e=_e.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===A.ConnectionEnd.client,n=t.session.sp,i=12,a=Nd,s=r?"client finished":"server finished";e=a(n.master_secret,s,e.getBytes(),i);var l=_e.util.createBuffer();return l.putByte(A.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};A.createHeartbeat=function(t,e,r){typeof r=="undefined"&&(r=e.length);var n=_e.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),a=Math.max(16,i-r-3);return n.putBytes(_e.random.getBytes(a)),n};A.queue=function(t,e){if(!!e&&!(e.fragment.length()===0&&(e.type===A.ContentType.handshake||e.type===A.ContentType.alert||e.type===A.ContentType.change_cipher_spec))){if(e.type===A.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=A.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>A.MaxFragment;)n.push(A.createRecord(t,{type:e.type,data:_e.util.createBuffer(i.slice(0,A.MaxFragment))})),i=i.slice(A.MaxFragment);i.length>0&&n.push(A.createRecord(t,{type:e.type,data:_e.util.createBuffer(i)}))}for(var a=0;a<n.length&&!t.fail;++a){var s=n[a],l=t.state.current.write;l.update(t,s)&&t.records.push(s)}}};A.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var Bg=function(t){switch(t){case!0:return!0;case _e.pki.certificateError.bad_certificate:return A.Alert.Description.bad_certificate;case _e.pki.certificateError.unsupported_certificate:return A.Alert.Description.unsupported_certificate;case _e.pki.certificateError.certificate_revoked:return A.Alert.Description.certificate_revoked;case _e.pki.certificateError.certificate_expired:return A.Alert.Description.certificate_expired;case _e.pki.certificateError.certificate_unknown:return A.Alert.Description.certificate_unknown;case _e.pki.certificateError.unknown_ca:return A.Alert.Description.unknown_ca;default:return A.Alert.Description.bad_certificate}},KM=function(t){switch(t){case!0:return!0;case A.Alert.Description.bad_certificate:return _e.pki.certificateError.bad_certificate;case A.Alert.Description.unsupported_certificate:return _e.pki.certificateError.unsupported_certificate;case A.Alert.Description.certificate_revoked:return _e.pki.certificateError.certificate_revoked;case A.Alert.Description.certificate_expired:return _e.pki.certificateError.certificate_expired;case A.Alert.Description.certificate_unknown:return _e.pki.certificateError.certificate_unknown;case A.Alert.Description.unknown_ca:return _e.pki.certificateError.unknown_ca;default:return _e.pki.certificateError.bad_certificate}};A.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(a,s,l){var u=Bg(a),f=t.verify(t,a,s,l);if(f!==!0){if(typeof f=="object"&&!_e.util.isArray(f)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate},f.message&&(d.message=f.message),f.alert&&(d.alert.description=f.alert),d}f!==a&&(f=KM(f))}return f},_e.pki.verifyCertificateChain(t.caStore,e,r)}catch(a){var i=a;(typeof i!="object"||_e.util.isArray(i))&&(i={send:!0,alert:{level:A.Alert.Level.fatal,description:Bg(a)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:A.Alert.Level.fatal,description:Bg(i.error)}),t.error(t,i)}return!t.fail};A.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var a=null,s=null;if(i?s=_e.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){a=r.cache[s],delete r.cache[s];for(var l in r.order)if(r.order[l]===s){r.order.splice(l,1);break}}return a},r.setSession=function(i,a){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=_e.util.bytesToHex(i);r.order.push(s),r.cache[s]=a}}return r};A.createConnection=function(t){var e=null;t.caStore?_e.util.isArray(t.caStore)?e=_e.pki.createCaStore(t.caStore):e=t.caStore:e=_e.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in A.CipherSuites)r.push(A.CipherSuites[n])}var i=t.server?A.ConnectionEnd.server:A.ConnectionEnd.client,a=t.sessionCache?A.createSessionCache(t.sessionCache):null,s={version:{major:A.Version.major,minor:A.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:a,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,h,g,m){return h},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:_e.util.createBuffer(),tlsData:_e.util.createBuffer(),data:_e.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(d,h){h.origin=h.origin||(d.entity===A.ConnectionEnd.client?"client":"server"),h.send&&(A.queue(d,A.createAlert(d,h.alert)),A.flush(d));var g=h.fatal!==!1;g&&(d.fail=!0),t.error(d,h),g&&d.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};s.reset=function(d){s.version={major:A.Version.major,minor:A.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===A.ConnectionEnd.client?IM:PM,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(d||typeof d=="undefined"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=A.createConnectionState(s)},s.reset();var l=function(d,h){var g=h.type-A.ContentType.change_cipher_spec,m=Ng[d.entity][d.expect];g in m?m[g](d,h):A.handleUnexpected(d,h)},u=function(d){var h=0,g=d.input,m=g.length();if(m<5)h=5-m;else{d.record={type:g.getByte(),version:{major:g.getByte(),minor:g.getByte()},length:g.getInt16(),fragment:_e.util.createBuffer(),ready:!1};var y=d.record.version.major===d.version.major;y&&d.session&&d.session.version&&(y=d.record.version.minor===d.version.minor),y||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}})}return h},f=function(d){var h=0,g=d.input,m=g.length();if(m<d.record.length)h=d.record.length-m;else{d.record.fragment.putBytes(g.getBytes(d.record.length)),g.compact();var y=d.state.current.read;y.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unexpected_message}})),d.record.ready=!0)}return h};return s.handshake=function(d){if(s.entity!==A.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,d=d||"";var h=null;d.length>0&&(s.sessionCache&&(h=s.sessionCache.getSession(d)),h===null&&(d="")),d.length===0&&s.sessionCache&&(h=s.sessionCache.getSession(),h!==null&&(d=h.id)),s.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:_e.md.md5.create(),sha1:_e.md.sha1.create()},h&&(s.version=h.version,s.session.sp=h.sp),s.session.sp.client_random=A.createRandom().getBytes(),s.open=!0,A.queue(s,A.createRecord(s,{type:A.ContentType.handshake,data:A.createClientHello(s)})),A.flush(s)}},s.process=function(d){var h=0;return d&&s.input.putBytes(d),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(h=u(s)),!s.fail&&s.record!==null&&!s.record.ready&&(h=f(s)),!s.fail&&s.record!==null&&s.record.ready&&l(s,s.record)),h},s.prepare=function(d){return A.queue(s,A.createRecord(s,{type:A.ContentType.application_data,data:_e.util.createBuffer(d)})),A.flush(s)},s.prepareHeartbeatRequest=function(d,h){return d instanceof _e.util.ByteBuffer&&(d=d.bytes()),typeof h=="undefined"&&(h=d.length),s.expectedHeartbeatPayload=d,A.queue(s,A.createRecord(s,{type:A.ContentType.heartbeat,data:A.createHeartbeat(A.HeartbeatMessageType.heartbeat_request,d,h)})),A.flush(s)},s.close=function(d){if(!s.fail&&s.sessionCache&&s.session){var h={id:s.session.id,version:s.session.version,sp:s.session.sp};h.sp.keys=null,s.sessionCache.setSession(h.id,h)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,A.queue(s,A.createAlert(s,{level:A.Alert.Level.warning,description:A.Alert.Description.close_notify})),A.flush(s)),s.closed(s)),s.reset(d)},s};QC.exports=_e.tls=_e.tls||{};for(Od in A)typeof A[Od]!="function"&&(_e.tls[Od]=A[Od]);var Od;_e.tls.prf_tls1=Nd;_e.tls.hmac_sha1=TM;_e.tls.createSessionCache=A.createSessionCache;_e.tls.createConnection=A.createConnection});var ZC=de((hj,JC)=>{var ds=mt();as();Og();var si=JC.exports=ds.tls;si.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=si.BulkCipherAlgorithm.aes,t.cipher_type=si.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=si.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:XC};si.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=si.BulkCipherAlgorithm.aes,t.cipher_type=si.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=si.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:XC};function XC(t,e,r){var n=e.entity===ds.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:ds.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:ds.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=QM,t.write.cipherFunction=YM,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=si.hmac_sha1}function YM(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===si.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=ds.random.getBytesSync(16),e.cipherState.init=!0;var a=e.cipherState.cipher;return a.start({iv:i}),t.version.minor>=si.Versions.TLS_1_1.minor&&a.output.putBytes(i),a.update(t.fragment),a.finish(WM)&&(t.fragment=a.output,t.length=t.fragment.length(),r=!0),r}function WM(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function zM(t,e,r){var n=!0;if(r){for(var i=e.length(),a=e.last(),s=i-1-a;s<i-1;++s)n=n&&e.at(s)==a;n&&e.truncate(a+1)}return n}function QM(t,e){var r=!1,n;t.version.minor===si.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(zM);var a=e.macLength,s=ds.random.getBytesSync(a),l=i.output.length();l>=a?(t.fragment=i.output.getBytes(l-a),s=i.output.getBytes(a)):t.fragment=i.output.getBytes(),t.fragment=ds.util.createBuffer(t.fragment),t.length=t.fragment.length();var u=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=XM(e.macKey,s,u)&&r,r}function XM(t,e,r){var n=ds.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}});var Mg=de((pj,rb)=>{var lr=mt();zi();Ft();var Ou=rb.exports=lr.sha512=lr.sha512||{};lr.md.sha512=lr.md.algorithms.sha512=Ou;var $C=lr.sha384=lr.sha512.sha384=lr.sha512.sha384||{};$C.create=function(){return Ou.create("SHA-384")};lr.md.sha384=lr.md.algorithms.sha384=$C;lr.sha512.sha256=lr.sha512.sha256||{create:function(){return Ou.create("SHA-512/256")}};lr.md["sha512/256"]=lr.md.algorithms["sha512/256"]=lr.sha512.sha256;lr.sha512.sha224=lr.sha512.sha224||{create:function(){return Ou.create("SHA-512/224")}};lr.md["sha512/224"]=lr.md.algorithms["sha512/224"]=lr.sha512.sha224;Ou.create=function(t){if(eb||JM(),typeof t=="undefined"&&(t="SHA-512"),!(t in Qs))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=Qs[t],r=null,n=lr.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var u=l.messageLengthSize/4,f=0;f<u;++f)l.fullMessageLength.push(0);n=lr.util.createBuffer(),r=new Array(e.length);for(var f=0;f<e.length;++f)r[f]=e[f].slice(0);return l},l.start(),l.update=function(u,f){f==="utf8"&&(u=lr.util.encodeUtf8(u));var d=u.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var h=l.fullMessageLength.length-1;h>=0;--h)l.fullMessageLength[h]+=d[1],d[1]=d[0]+(l.fullMessageLength[h]/4294967296>>>0),l.fullMessageLength[h]=l.fullMessageLength[h]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(u),tb(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),l},l.digest=function(){var u=lr.util.createBuffer();u.putBytes(n.bytes());var f=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=f&l.blockLength-1;u.putBytes(Lg.substr(0,l.blockLength-d));for(var h,g,m=l.fullMessageLength[0]*8,y=0;y<l.fullMessageLength.length-1;++y)h=l.fullMessageLength[y+1]*8,g=h/4294967296>>>0,m+=g,u.putInt32(m>>>0),m=h>>>0;u.putInt32(m);for(var _=new Array(r.length),y=0;y<r.length;++y)_[y]=r[y].slice(0);tb(_,i,u);var w=lr.util.createBuffer(),E;t==="SHA-512"?E=_.length:t==="SHA-384"?E=_.length-2:E=_.length-4;for(var y=0;y<E;++y)w.putInt32(_[y][0]),(y!==E-1||t!=="SHA-512/224")&&w.putInt32(_[y][1]);return w},l};var Lg=null,eb=!1,Pg=null,Qs=null;function JM(){Lg=String.fromCharCode(128),Lg+=lr.util.fillString(String.fromCharCode(0),128),Pg=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Qs={},Qs["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Qs["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Qs["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Qs["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],eb=!0}function tb(t,e,r){for(var n,i,a,s,l,u,f,d,h,g,m,y,_,w,E,T,x,O,I,B,z,F,q,te,ie,ye,be,Ve,Ne,me,re,Fe,Ze,ut,Je,ct=r.length();ct>=128;){for(Ne=0;Ne<16;++Ne)e[Ne][0]=r.getInt32()>>>0,e[Ne][1]=r.getInt32()>>>0;for(;Ne<80;++Ne)Fe=e[Ne-2],me=Fe[0],re=Fe[1],n=((me>>>19|re<<13)^(re>>>29|me<<3)^me>>>6)>>>0,i=((me<<13|re>>>19)^(re<<3|me>>>29)^(me<<26|re>>>6))>>>0,ut=e[Ne-15],me=ut[0],re=ut[1],a=((me>>>1|re<<31)^(me>>>8|re<<24)^me>>>7)>>>0,s=((me<<31|re>>>1)^(me<<24|re>>>8)^(me<<25|re>>>7))>>>0,Ze=e[Ne-7],Je=e[Ne-16],re=i+Ze[1]+s+Je[1],e[Ne][0]=n+Ze[0]+a+Je[0]+(re/4294967296>>>0)>>>0,e[Ne][1]=re>>>0;for(_=t[0][0],w=t[0][1],E=t[1][0],T=t[1][1],x=t[2][0],O=t[2][1],I=t[3][0],B=t[3][1],z=t[4][0],F=t[4][1],q=t[5][0],te=t[5][1],ie=t[6][0],ye=t[6][1],be=t[7][0],Ve=t[7][1],Ne=0;Ne<80;++Ne)f=((z>>>14|F<<18)^(z>>>18|F<<14)^(F>>>9|z<<23))>>>0,d=((z<<18|F>>>14)^(z<<14|F>>>18)^(F<<23|z>>>9))>>>0,h=(ie^z&(q^ie))>>>0,g=(ye^F&(te^ye))>>>0,l=((_>>>28|w<<4)^(w>>>2|_<<30)^(w>>>7|_<<25))>>>0,u=((_<<4|w>>>28)^(w<<30|_>>>2)^(w<<25|_>>>7))>>>0,m=(_&E|x&(_^E))>>>0,y=(w&T|O&(w^T))>>>0,re=Ve+d+g+Pg[Ne][1]+e[Ne][1],n=be+f+h+Pg[Ne][0]+e[Ne][0]+(re/4294967296>>>0)>>>0,i=re>>>0,re=u+y,a=l+m+(re/4294967296>>>0)>>>0,s=re>>>0,be=ie,Ve=ye,ie=q,ye=te,q=z,te=F,re=B+i,z=I+n+(re/4294967296>>>0)>>>0,F=re>>>0,I=x,B=O,x=E,O=T,E=_,T=w,re=i+s,_=n+a+(re/4294967296>>>0)>>>0,w=re>>>0;re=t[0][1]+w,t[0][0]=t[0][0]+_+(re/4294967296>>>0)>>>0,t[0][1]=re>>>0,re=t[1][1]+T,t[1][0]=t[1][0]+E+(re/4294967296>>>0)>>>0,t[1][1]=re>>>0,re=t[2][1]+O,t[2][0]=t[2][0]+x+(re/4294967296>>>0)>>>0,t[2][1]=re>>>0,re=t[3][1]+B,t[3][0]=t[3][0]+I+(re/4294967296>>>0)>>>0,t[3][1]=re>>>0,re=t[4][1]+F,t[4][0]=t[4][0]+z+(re/4294967296>>>0)>>>0,t[4][1]=re>>>0,re=t[5][1]+te,t[5][0]=t[5][0]+q+(re/4294967296>>>0)>>>0,t[5][1]=re>>>0,re=t[6][1]+ye,t[6][0]=t[6][0]+ie+(re/4294967296>>>0)>>>0,t[6][1]=re>>>0,re=t[7][1]+Ve,t[7][0]=t[7][0]+be+(re/4294967296>>>0)>>>0,t[7][1]=re>>>0,ct-=128}}});var nb=de(Ug=>{var ZM=mt();bi();var jr=ZM.asn1;Ug.privateKeyValidator={name:"PrivateKeyInfo",tagClass:jr.Class.UNIVERSAL,type:jr.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:jr.Class.UNIVERSAL,type:jr.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:jr.Class.UNIVERSAL,type:jr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:jr.Class.UNIVERSAL,type:jr.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:jr.Class.UNIVERSAL,type:jr.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Ug.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:jr.Class.UNIVERSAL,type:jr.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:jr.Class.UNIVERSAL,type:jr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:jr.Class.UNIVERSAL,type:jr.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:jr.Class.UNIVERSAL,type:jr.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var mb=de((mj,gb)=>{var $r=mt();Ru();ti();Mg();Ft();var ib=nb(),$M=ib.publicKeyValidator,e8=ib.privateKeyValidator;typeof ab=="undefined"&&(ab=$r.jsbn.BigInteger);var ab,Fg=$r.util.ByteBuffer,kn=typeof Buffer=="undefined"?Uint8Array:Buffer;$r.pki=$r.pki||{};gb.exports=$r.pki.ed25519=$r.ed25519=$r.ed25519||{};var Tt=$r.ed25519;Tt.constants={};Tt.constants.PUBLIC_KEY_BYTE_LENGTH=32;Tt.constants.PRIVATE_KEY_BYTE_LENGTH=64;Tt.constants.SEED_BYTE_LENGTH=32;Tt.constants.SIGN_BYTE_LENGTH=64;Tt.constants.HASH_BYTE_LENGTH=64;Tt.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=$r.random.getBytesSync(Tt.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Tt.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Tt.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=Ta({message:e,encoding:"binary"});for(var r=new kn(Tt.constants.PUBLIC_KEY_BYTE_LENGTH),n=new kn(Tt.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return i8(r,n),{publicKey:r,privateKey:n}};Tt.privateKeyFromAsn1=function(t){var e={},r=[],n=$r.asn1.validate(t,e8,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=$r.asn1.derToOid(e.privateKeyOid),s=$r.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=e.privateKey,u=Ta({message:$r.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:u}};Tt.publicKeyFromAsn1=function(t){var e={},r=[],n=$r.asn1.validate(t,$M,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=$r.asn1.derToOid(e.publicKeyOid),s=$r.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=e.ed25519PublicKey;if(l.length!==Tt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Ta({message:l,encoding:"binary"})};Tt.publicKeyFromPrivateKey=function(t){t=t||{};var e=Ta({message:t.privateKey,encoding:"binary"});if(e.length!==Tt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Tt.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new kn(Tt.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};Tt.sign=function(t){t=t||{};var e=Ta(t),r=Ta({message:t.privateKey,encoding:"binary"});if(r.length===Tt.constants.SEED_BYTE_LENGTH){var n=Tt.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Tt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Tt.constants.SEED_BYTE_LENGTH+" or "+Tt.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new kn(Tt.constants.SIGN_BYTE_LENGTH+e.length);a8(i,e,e.length,r);for(var a=new kn(Tt.constants.SIGN_BYTE_LENGTH),s=0;s<a.length;++s)a[s]=i[s];return a};Tt.verify=function(t){t=t||{};var e=Ta(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Ta({message:t.signature,encoding:"binary"});if(r.length!==Tt.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Tt.constants.SIGN_BYTE_LENGTH);var n=Ta({message:t.publicKey,encoding:"binary"});if(n.length!==Tt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Tt.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new kn(Tt.constants.SIGN_BYTE_LENGTH+e.length),a=new kn(Tt.constants.SIGN_BYTE_LENGTH+e.length),s;for(s=0;s<Tt.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<e.length;++s)i[s+Tt.constants.SIGN_BYTE_LENGTH]=e[s];return s8(a,i,i.length,n)>=0};function Ta(t){var e=t.message;if(e instanceof Uint8Array||e instanceof kn)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer!="undefined")return Buffer.from(e,r);e=new Fg(e,r)}else if(!(e instanceof Fg))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new kn(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}var qg=ze(),Ld=ze([1]),t8=ze([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),r8=ze([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),sb=ze([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),ob=ze([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Gg=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),n8=ze([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Lu(t,e){var r=$r.md.sha512.create(),n=new Fg(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(i,"binary");for(var a=new kn(Tt.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function i8(t,e){var r=[ze(),ze(),ze(),ze()],n,i=Lu(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Kg(r,i),Hg(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}function a8(t,e,r,n){var i,a,s=new Float64Array(64),l=[ze(),ze(),ze(),ze()],u=Lu(n,32);u[0]&=248,u[31]&=127,u[31]|=64;var f=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=u[32+i];var d=Lu(t.subarray(32),r+32);for(Vg(d),Kg(l,d),Hg(t,l),i=32;i<64;++i)t[i]=n[i];var h=Lu(t,r+64);for(Vg(h),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=d[i];for(i=0;i<32;++i)for(a=0;a<32;a++)s[i+a]+=h[i]*u[a];return lb(t.subarray(32),s),f}function s8(t,e,r,n){var i,a,s=new kn(32),l=[ze(),ze(),ze(),ze()],u=[ze(),ze(),ze(),ze()];if(a=-1,r<64||o8(u,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var f=Lu(t,r);if(Vg(f),hb(l,u,f),Kg(u,e.subarray(32)),jg(l,u),Hg(s,l),r-=64,fb(e,0,s,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return a=r,a}function lb(t,e){var r,n,i,a;for(n=63;n>=32;--n){for(r=0,i=n-32,a=n-12;i<a;++i)e[i]+=r-16*e[n]*Gg[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*Gg[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*Gg[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function Vg(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;lb(t,e)}function jg(t,e){var r=ze(),n=ze(),i=ze(),a=ze(),s=ze(),l=ze(),u=ze(),f=ze(),d=ze();gl(r,t[1],t[0]),gl(d,e[1],e[0]),$t(r,r,d),pl(n,t[0],t[1]),pl(d,e[0],e[1]),$t(n,n,d),$t(i,t[3],e[3]),$t(i,i,r8),$t(a,t[2],e[2]),pl(a,a,a),gl(s,n,r),gl(l,a,i),pl(u,a,i),pl(f,n,r),$t(t[0],s,l),$t(t[1],f,u),$t(t[2],u,l),$t(t[3],s,f)}function ub(t,e,r){for(var n=0;n<4;++n)pb(t[n],e[n],r)}function Hg(t,e){var r=ze(),n=ze(),i=ze();f8(i,e[2]),$t(r,e[0],i),$t(n,e[1],i),Pd(t,n),t[31]^=db(r)<<7}function Pd(t,e){var r,n,i,a=ze(),s=ze();for(r=0;r<16;++r)s[r]=e[r];for(Yg(s),Yg(s),Yg(s),n=0;n<2;++n){for(a[0]=s[0]-65517,r=1;r<15;++r)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,pb(s,a,1-i)}for(r=0;r<16;r++)t[2*r]=s[r]&255,t[2*r+1]=s[r]>>8}function o8(t,e){var r=ze(),n=ze(),i=ze(),a=ze(),s=ze(),l=ze(),u=ze();return hs(t[2],Ld),l8(t[1],e),Xs(i,t[1]),$t(a,i,t8),gl(i,i,t[2]),pl(a,t[2],a),Xs(s,a),Xs(l,s),$t(u,l,s),$t(r,u,i),$t(r,r,a),u8(r,r),$t(r,r,i),$t(r,r,a),$t(r,r,a),$t(t[0],r,a),Xs(n,t[0]),$t(n,n,a),cb(n,i)&&$t(t[0],t[0],n8),Xs(n,t[0]),$t(n,n,a),cb(n,i)?-1:(db(t[0])===e[31]>>7&&gl(t[0],qg,t[0]),$t(t[3],t[0],t[1]),0)}function l8(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function u8(t,e){var r=ze(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)Xs(r,r),n!==1&&$t(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function cb(t,e){var r=new kn(32),n=new kn(32);return Pd(r,t),Pd(n,e),fb(r,0,n,0)}function fb(t,e,r,n){return c8(t,e,r,n,32)}function c8(t,e,r,n,i){var a,s=0;for(a=0;a<i;++a)s|=t[e+a]^r[n+a];return(1&s-1>>>8)-1}function db(t){var e=new kn(32);return Pd(e,t),e[0]&1}function hb(t,e,r){var n,i;for(hs(t[0],qg),hs(t[1],Ld),hs(t[2],Ld),hs(t[3],qg),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,ub(t,e,n),jg(e,t),jg(t,t),ub(t,e,n)}function Kg(t,e){var r=[ze(),ze(),ze(),ze()];hs(r[0],sb),hs(r[1],ob),hs(r[2],Ld),$t(r[3],sb,ob),hb(t,r,e)}function hs(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function f8(t,e){var r=ze(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)Xs(r,r),n!==2&&n!==4&&$t(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function Yg(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}function pb(t,e,r){for(var n,i=~(r-1),a=0;a<16;++a)n=i&(t[a]^e[a]),t[a]^=n,e[a]^=n}function ze(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function pl(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function gl(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function Xs(t,e){$t(t,e,e)}function $t(t,e,r){var n,i,a=0,s=0,l=0,u=0,f=0,d=0,h=0,g=0,m=0,y=0,_=0,w=0,E=0,T=0,x=0,O=0,I=0,B=0,z=0,F=0,q=0,te=0,ie=0,ye=0,be=0,Ve=0,Ne=0,me=0,re=0,Fe=0,Ze=0,ut=r[0],Je=r[1],ct=r[2],le=r[3],Nt=r[4],Dt=r[5],et=r[6],tt=r[7],ft=r[8],R=r[9],D=r[10],L=r[11],K=r[12],j=r[13],X=r[14],Z=r[15];n=e[0],a+=n*ut,s+=n*Je,l+=n*ct,u+=n*le,f+=n*Nt,d+=n*Dt,h+=n*et,g+=n*tt,m+=n*ft,y+=n*R,_+=n*D,w+=n*L,E+=n*K,T+=n*j,x+=n*X,O+=n*Z,n=e[1],s+=n*ut,l+=n*Je,u+=n*ct,f+=n*le,d+=n*Nt,h+=n*Dt,g+=n*et,m+=n*tt,y+=n*ft,_+=n*R,w+=n*D,E+=n*L,T+=n*K,x+=n*j,O+=n*X,I+=n*Z,n=e[2],l+=n*ut,u+=n*Je,f+=n*ct,d+=n*le,h+=n*Nt,g+=n*Dt,m+=n*et,y+=n*tt,_+=n*ft,w+=n*R,E+=n*D,T+=n*L,x+=n*K,O+=n*j,I+=n*X,B+=n*Z,n=e[3],u+=n*ut,f+=n*Je,d+=n*ct,h+=n*le,g+=n*Nt,m+=n*Dt,y+=n*et,_+=n*tt,w+=n*ft,E+=n*R,T+=n*D,x+=n*L,O+=n*K,I+=n*j,B+=n*X,z+=n*Z,n=e[4],f+=n*ut,d+=n*Je,h+=n*ct,g+=n*le,m+=n*Nt,y+=n*Dt,_+=n*et,w+=n*tt,E+=n*ft,T+=n*R,x+=n*D,O+=n*L,I+=n*K,B+=n*j,z+=n*X,F+=n*Z,n=e[5],d+=n*ut,h+=n*Je,g+=n*ct,m+=n*le,y+=n*Nt,_+=n*Dt,w+=n*et,E+=n*tt,T+=n*ft,x+=n*R,O+=n*D,I+=n*L,B+=n*K,z+=n*j,F+=n*X,q+=n*Z,n=e[6],h+=n*ut,g+=n*Je,m+=n*ct,y+=n*le,_+=n*Nt,w+=n*Dt,E+=n*et,T+=n*tt,x+=n*ft,O+=n*R,I+=n*D,B+=n*L,z+=n*K,F+=n*j,q+=n*X,te+=n*Z,n=e[7],g+=n*ut,m+=n*Je,y+=n*ct,_+=n*le,w+=n*Nt,E+=n*Dt,T+=n*et,x+=n*tt,O+=n*ft,I+=n*R,B+=n*D,z+=n*L,F+=n*K,q+=n*j,te+=n*X,ie+=n*Z,n=e[8],m+=n*ut,y+=n*Je,_+=n*ct,w+=n*le,E+=n*Nt,T+=n*Dt,x+=n*et,O+=n*tt,I+=n*ft,B+=n*R,z+=n*D,F+=n*L,q+=n*K,te+=n*j,ie+=n*X,ye+=n*Z,n=e[9],y+=n*ut,_+=n*Je,w+=n*ct,E+=n*le,T+=n*Nt,x+=n*Dt,O+=n*et,I+=n*tt,B+=n*ft,z+=n*R,F+=n*D,q+=n*L,te+=n*K,ie+=n*j,ye+=n*X,be+=n*Z,n=e[10],_+=n*ut,w+=n*Je,E+=n*ct,T+=n*le,x+=n*Nt,O+=n*Dt,I+=n*et,B+=n*tt,z+=n*ft,F+=n*R,q+=n*D,te+=n*L,ie+=n*K,ye+=n*j,be+=n*X,Ve+=n*Z,n=e[11],w+=n*ut,E+=n*Je,T+=n*ct,x+=n*le,O+=n*Nt,I+=n*Dt,B+=n*et,z+=n*tt,F+=n*ft,q+=n*R,te+=n*D,ie+=n*L,ye+=n*K,be+=n*j,Ve+=n*X,Ne+=n*Z,n=e[12],E+=n*ut,T+=n*Je,x+=n*ct,O+=n*le,I+=n*Nt,B+=n*Dt,z+=n*et,F+=n*tt,q+=n*ft,te+=n*R,ie+=n*D,ye+=n*L,be+=n*K,Ve+=n*j,Ne+=n*X,me+=n*Z,n=e[13],T+=n*ut,x+=n*Je,O+=n*ct,I+=n*le,B+=n*Nt,z+=n*Dt,F+=n*et,q+=n*tt,te+=n*ft,ie+=n*R,ye+=n*D,be+=n*L,Ve+=n*K,Ne+=n*j,me+=n*X,re+=n*Z,n=e[14],x+=n*ut,O+=n*Je,I+=n*ct,B+=n*le,z+=n*Nt,F+=n*Dt,q+=n*et,te+=n*tt,ie+=n*ft,ye+=n*R,be+=n*D,Ve+=n*L,Ne+=n*K,me+=n*j,re+=n*X,Fe+=n*Z,n=e[15],O+=n*ut,I+=n*Je,B+=n*ct,z+=n*le,F+=n*Nt,q+=n*Dt,te+=n*et,ie+=n*tt,ye+=n*ft,be+=n*R,Ve+=n*D,Ne+=n*L,me+=n*K,re+=n*j,Fe+=n*X,Ze+=n*Z,a+=38*I,s+=38*B,l+=38*z,u+=38*F,f+=38*q,d+=38*te,h+=38*ie,g+=38*ye,m+=38*be,y+=38*Ve,_+=38*Ne,w+=38*me,E+=38*re,T+=38*Fe,x+=38*Ze,i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,a+=i-1+37*(i-1),i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,a+=i-1+37*(i-1),t[0]=a,t[1]=s,t[2]=l,t[3]=u,t[4]=f,t[5]=d,t[6]=h,t[7]=g,t[8]=m,t[9]=y,t[10]=_,t[11]=w,t[12]=E,t[13]=T,t[14]=x,t[15]=O}});var wb=de((yj,_b)=>{var Gn=mt();Ft();ti();Ru();_b.exports=Gn.kem=Gn.kem||{};var yb=Gn.jsbn.BigInteger;Gn.kem.rsa={};Gn.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||Gn.random,n={};return n.encrypt=function(i,a){var s=Math.ceil(i.n.bitLength()/8),l;do l=new yb(Gn.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(l.compareTo(yb.ONE)<=0);l=Gn.util.hexToBytes(l.toString(16));var u=s-l.length;u>0&&(l=Gn.util.fillString(String.fromCharCode(0),u)+l);var f=i.encrypt(l,"NONE"),d=t.generate(l,a);return{encapsulation:f,key:d}},n.decrypt=function(i,a,s){var l=i.decrypt(a,"NONE");return t.generate(l,s)},n};Gn.kem.kdf1=function(t,e){vb(this,t,0,e||t.digestLength)};Gn.kem.kdf2=function(t,e){vb(this,t,1,e||t.digestLength)};function vb(t,e,r,n){t.generate=function(i,a){for(var s=new Gn.util.ByteBuffer,l=Math.ceil(a/n)+r,u=new Gn.util.ByteBuffer,f=r;f<l;++f){u.putInt32(f),e.start(),e.update(i+u.getBytes());var d=e.digest();s.putBytes(d.getBytes(n))}return s.truncate(s.length()-a),s.getBytes()}}});var xb=de((vj,bb)=>{var It=mt();Ft();bb.exports=It.log=It.log||{};It.log.levels=["none","error","warning","info","debug","verbose","max"];var Md={},Wg=[],Pu=null;It.log.LEVEL_LOCKED=1<<1;It.log.NO_LEVEL_CHECK=1<<2;It.log.INTERPOLATE=1<<3;for(ra=0;ra<It.log.levels.length;++ra)zg=It.log.levels[ra],Md[zg]={index:ra,name:zg.toUpperCase()};var zg,ra;It.log.logMessage=function(t){for(var e=Md[t.level].index,r=0;r<Wg.length;++r){var n=Wg[r];if(n.flags&It.log.NO_LEVEL_CHECK)n.f(t);else{var i=Md[n.level].index;e<=i&&n.f(n,t)}}};It.log.prepareStandard=function(t){"standard"in t||(t.standard=Md[t.level].name+" ["+t.category+"] "+t.message)};It.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=It.util.format.apply(this,e)}};It.log.prepareStandardFull=function(t){"standardFull"in t||(It.log.prepareStandard(t),t.standardFull=t.standard)};for(Qg=["error","warning","info","debug","verbose"],ra=0;ra<Qg.length;++ra)(function(e){It.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:e,category:r,message:n,arguments:i};It.log.logMessage(a)}})(Qg[ra]);var Qg,ra;It.log.makeLogger=function(t){var e={flags:0,f:t};return It.log.setLevel(e,"none"),e};It.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&It.log.LEVEL_LOCKED))for(var n=0;n<It.log.levels.length;++n){var i=It.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};It.log.lock=function(t,e){typeof e=="undefined"||e?t.flags|=It.log.LEVEL_LOCKED:t.flags&=~It.log.LEVEL_LOCKED};It.log.addLogger=function(t){Wg.push(t)};typeof console!="undefined"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(Eb={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Mu=function(t,e){It.log.prepareStandard(e);var r=Eb[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},ml=It.log.makeLogger(Mu)):(Mu=function(e,r){It.log.prepareStandardFull(r),console.log(r.standardFull)},ml=It.log.makeLogger(Mu)),It.log.setLevel(ml,"debug"),It.log.addLogger(ml),Pu=ml):console={log:function(){}};var ml,Eb,Mu;Pu!==null&&typeof window!="undefined"&&window.location&&(Uu=new URL(window.location.href).searchParams,Uu.has("console.level")&&It.log.setLevel(Pu,Uu.get("console.level").slice(-1)[0]),Uu.has("console.lock")&&(Cb=Uu.get("console.lock").slice(-1)[0],Cb=="true"&&It.log.lock(Pu)));var Uu,Cb;It.log.consoleLogger=Pu});var Tb=de((_j,Sb)=>{Sb.exports=zi();md();ul();lg();Mg()});var Ib=de((wj,kb)=>{var xe=mt();as();bi();ku();ss();js();Cg();ti();Ft();Rd();var V=xe.asn1,yn=kb.exports=xe.pkcs7=xe.pkcs7||{};yn.messageFromPem=function(t){var e=xe.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=V.fromDer(e.body);return yn.messageFromAsn1(n)};yn.messageToPem=function(t,e){var r={type:"PKCS7",body:V.toDer(t.toAsn1()).getBytes()};return xe.pem.encode(r,{maxline:e})};yn.messageFromAsn1=function(t){var e={},r=[];if(!V.validate(t,yn.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=V.derToOid(e.contentType),a;switch(i){case xe.pki.oids.envelopedData:a=yn.createEnvelopedData();break;case xe.pki.oids.encryptedData:a=yn.createEncryptedData();break;case xe.pki.oids.signedData:a=yn.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(e.content.value[0]),a};yn.createSignedData=function(){var t=null;return t={type:xe.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(Jg(t,n,yn.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,a=0;a<i.length;++a)t.certificates.push(xe.pki.certificateFromAsn1(i[a]))},toAsn1:function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(xe.pki.certificateToAsn1(t.certificates[i]));var a=[],s=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&s.value[0].value.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,n)),a.length>0&&s.value[0].value.push(V.create(V.Class.CONTEXT_SPECIFIC,1,!0,a)),s.value[0].value.push(V.create(V.Class.UNIVERSAL,V.Type.SET,!0,t.signerInfos)),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,a=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=xe.pki.certificateFromPem(s)),i=s.issuer.attributes,a=s.serialNumber}var l=n.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=xe.pki.privateKeyFromPem(l));var u=n.digestAlgorithm||xe.pki.oids.sha1;switch(u){case xe.pki.oids.sha1:case xe.pki.oids.sha256:case xe.pki.oids.sha384:case xe.pki.oids.sha512:case xe.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+u)}var f=n.authenticatedAttributes||[];if(f.length>0){for(var d=!1,h=!1,g=0;g<f.length;++g){var m=f[g];if(!d&&m.type===xe.pki.oids.contentType){if(d=!0,h)break;continue}if(!h&&m.type===xe.pki.oids.messageDigest){if(h=!0,d)break;continue}}if(!d||!h)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:i,serialNumber:a,digestAlgorithm:u,signatureAlgorithm:xe.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:f,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(xe.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof xe.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=xe.util.encodeUtf8(t.content)),n.detached?t.detachedContent=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var a=e();r(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=xe.pki.certificateFromPem(n)),t.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var a=t.signers[i],s=a.digestAlgorithm;s in n||(n[s]=xe.md[xe.pki.oids[s]].create()),a.authenticatedAttributes.length===0?a.md=n[s]:a.md=xe.md[xe.pki.oids[s]].create()}t.digestAlgorithmIdentifiers=[];for(var s in n)t.digestAlgorithmIdentifiers.push(V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(s).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]));return n}function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=V.derToOid(t.contentInfo.value[0].value),s=V.toDer(i);s.getByte(),V.getBerValueLength(s),s=s.getBytes();for(var l in n)n[l].start().update(s);for(var u=new Date,f=0;f<t.signers.length;++f){var d=t.signers[f];if(d.authenticatedAttributes.length===0){if(a!==xe.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[]),g=0;g<d.authenticatedAttributes.length;++g){var m=d.authenticatedAttributes[g];m.type===xe.pki.oids.messageDigest?m.value=n[d.digestAlgorithm].digest():m.type===xe.pki.oids.signingTime&&(m.value||(m.value=u)),h.value.push(Xg(m)),d.authenticatedAttributesAsn1.value.push(Xg(m))}s=V.toDer(h).getBytes(),d.md.start().update(s)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=y8(t.signers)}};yn.createEncryptedData=function(){var t=null;return t={type:xe.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:xe.pki.oids["aes256-CBC"]},fromAsn1:function(e){Jg(t,e,yn.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),Ab(t)}},t};yn.createEnvelopedData=function(){var t=null;return t={type:xe.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:xe.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=Jg(t,e,yn.asn1.envelopedDataValidator);t.recipients=p8(r.recipientInfos.value)},toAsn1:function(){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.type).getBytes()),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,g8(t.recipients)),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,v8(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],a=i.issuer;if(i.serialNumber===e.serialNumber&&a.length===r.length){for(var s=!0,l=0;l<r.length;++l)if(a[l].type!==r[l].type||a[l].value!==r[l].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case xe.pki.oids.rsaEncryption:case xe.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=xe.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}Ab(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:xe.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,a;switch(r){case xe.pki.oids["aes128-CBC"]:n=16,i=16,a=xe.aes.createEncryptionCipher;break;case xe.pki.oids["aes192-CBC"]:n=24,i=16,a=xe.aes.createEncryptionCipher;break;case xe.pki.oids["aes256-CBC"]:n=32,i=16,a=xe.aes.createEncryptionCipher;break;case xe.pki.oids["des-EDE3-CBC"]:n=24,i=8,a=xe.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=xe.util.createBuffer(xe.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=xe.util.createBuffer(xe.random.getBytes(i));var s=a(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var l=0;l<t.recipients.length;++l){var u=t.recipients[l];if(u.encryptedContent.content===void 0)switch(u.encryptedContent.algorithm){case xe.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}},t};function d8(t){var e={},r=[];if(!V.validate(t,yn.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:xe.pki.RDNAttributesAsArray(e.issuer),serialNumber:xe.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:V.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function h8(t){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[xe.pki.distinguishedNameToAsn1({attributes:t.issuer}),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,xe.util.hexToBytes(t.serialNumber))]),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.encryptedContent.algorithm).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]),V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function p8(t){for(var e=[],r=0;r<t.length;++r)e.push(d8(t[r]));return e}function g8(t){for(var e=[],r=0;r<t.length;++r)e.push(h8(t[r]));return e}function m8(t){var e=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[xe.pki.distinguishedNameToAsn1({attributes:t.issuer}),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,xe.util.hexToBytes(t.serialNumber))]),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.digestAlgorithm).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.signatureAlgorithm).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])),e.value.push(V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=V.create(V.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(Xg(i))}e.value.push(r)}return e}function y8(t){for(var e=[],r=0;r<t.length;++r)e.push(m8(t[r]));return e}function Xg(t){var e;if(t.type===xe.pki.oids.contentType)e=V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.value).getBytes());else if(t.type===xe.pki.oids.messageDigest)e=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===xe.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var a=Date.parse(i);isNaN(a)?i.length===13?i=V.utcTimeToDate(i):i=V.generalizedTimeToDate(i):i=new Date(a)}i>=r&&i<n?e=V.create(V.Class.UNIVERSAL,V.Type.UTCTIME,!1,V.dateToUtcTime(i)):e=V.create(V.Class.UNIVERSAL,V.Type.GENERALIZEDTIME,!1,V.dateToGeneralizedTime(i))}return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.type).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[e])])}function v8(t){return[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(xe.pki.oids.data).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.algorithm).getBytes()),t.parameter?V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.content.getBytes())])]}function Jg(t,e,r){var n={},i=[];if(!V.validate(e,r,n,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var s=V.derToOid(n.contentType);if(s!==xe.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var l="";if(xe.util.isArray(n.encryptedContent))for(var u=0;u<n.encryptedContent.length;++u){if(n.encryptedContent[u].type!==V.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=n.encryptedContent[u].value}else l=n.encryptedContent;t.encryptedContent={algorithm:V.derToOid(n.encAlgorithm),parameter:xe.util.createBuffer(n.encParameter.value),content:xe.util.createBuffer(l)}}if(n.content){var l="";if(xe.util.isArray(n.content))for(var u=0;u<n.content.length;++u){if(n.content[u].type!==V.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=n.content[u].value}else l=n.content;t.content=xe.util.createBuffer(l)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function Ab(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case xe.pki.oids["aes128-CBC"]:case xe.pki.oids["aes192-CBC"]:case xe.pki.oids["aes256-CBC"]:e=xe.aes.createDecryptionCipher(t.encryptedContent.key);break;case xe.pki.oids.desCBC:case xe.pki.oids["des-EDE3-CBC"]:e=xe.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var Nb=de((Ej,Rb)=>{var kr=mt();as();al();md();ul();Ft();var Ud=Rb.exports=kr.ssh=kr.ssh||{};Ud.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",a="PuTTY-User-Key-File-2: "+n+`\r
`;a+="Encryption: "+i+`\r
`,a+="Comment: "+r+`\r
`;var s=kr.util.createBuffer();yl(s,n),na(s,t.e),na(s,t.n);var l=kr.util.encode64(s.bytes(),64),u=Math.floor(l.length/66)+1;a+="Public-Lines: "+u+`\r
`,a+=l;var f=kr.util.createBuffer();na(f,t.d),na(f,t.p),na(f,t.q),na(f,t.qInv);var d;if(!e)d=kr.util.encode64(f.bytes(),64);else{var h=f.length()+16-1;h-=h%16;var g=Fd(f.bytes());g.truncate(g.length()-h+f.length()),f.putBuffer(g);var m=kr.util.createBuffer();m.putBuffer(Fd("\0\0\0\0",e)),m.putBuffer(Fd("\0\0\0",e));var y=kr.aes.createEncryptionCipher(m.truncate(8),"CBC");y.start(kr.util.createBuffer().fillWithByte(0,16)),y.update(f.copy()),y.finish();var _=y.output;_.truncate(16),d=kr.util.encode64(_.bytes(),64)}u=Math.floor(d.length/66)+1,a+=`\r
Private-Lines: `+u+`\r
`,a+=d;var w=Fd("putty-private-key-file-mac-key",e),E=kr.util.createBuffer();yl(E,n),yl(E,i),yl(E,r),E.putInt32(s.length()),E.putBuffer(s),E.putInt32(f.length()),E.putBuffer(f);var T=kr.hmac.create();return T.start("sha1",w),T.update(E.bytes()),a+=`\r
Private-MAC: `+T.digest().toHex()+`\r
`,a};Ud.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=kr.util.createBuffer();return yl(n,r),na(n,t.e),na(n,t.n),r+" "+kr.util.encode64(n.bytes())+" "+e};Ud.privateKeyToOpenSSH=function(t,e){return e?kr.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):kr.pki.privateKeyToPem(t)};Ud.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||kr.md.md5.create(),n="ssh-rsa",i=kr.util.createBuffer();yl(i,n),na(i,t.e),na(i,t.n),r.start(),r.update(i.getBytes());var a=r.digest();if(e.encoding==="hex"){var s=a.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return a};function na(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=kr.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}function yl(t,e){t.putInt32(e.length),t.putString(e)}function Fd(){for(var t=kr.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}});var Bb=de((Cj,Db)=>{Db.exports=mt();as();ZC();bi();ud();ku();mb();al();wb();xb();Tb();bg();wd();js();yg();Tg();Ib();kg();_g();ug();Ad();ti();dg();Nb();Og();Ft()});var Lb=de(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});Gd.getPem=void 0;var _8=require("fs"),qd=Bb(),w8=require("util"),E8=w8.promisify(_8.readFile);function C8(t,e){if(e)Ob(t).then(r=>e(null,r)).catch(r=>e(r,null));else return Ob(t)}Gd.getPem=C8;function Ob(t){return E8(t,{encoding:"base64"}).then(e=>b8(e))}function b8(t){let e=qd.util.decode64(t),r=qd.asn1.fromDer(e),i=qd.pkcs12.pkcs12FromAsn1(r,"notasecret").getBags({friendlyName:"privatekey"});if(i.friendlyName){let a=i.friendlyName[0].key;return qd.pki.privateKeyToPem(a).replace(/\r\n/g,`
`)}else throw new Error("Unable to get friendly name.")}});var Gb=de(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.GoogleToken=void 0;var Pb=require("fs"),Mb=Gw(),x8=z0(),S8=require("path"),T8=require("util"),Ub=Pb.readFile?T8.promisify(Pb.readFile):()=>M(qu,null,function*(){throw new Fu("use key rather than keyFile.","MISSING_CREDENTIALS")}),Fb="https://www.googleapis.com/oauth2/v4/token",A8="https://accounts.google.com/o/oauth2/revoke?token=",Fu=class extends Error{constructor(e,r){super(e);this.code=r}},Zg,qb=class{constructor(e){this.configure(e)}get accessToken(){return this.rawToken?this.rawToken.access_token:void 0}get idToken(){return this.rawToken?this.rawToken.id_token:void 0}get tokenType(){return this.rawToken?this.rawToken.token_type:void 0}get refreshToken(){return this.rawToken?this.rawToken.refresh_token:void 0}hasExpired(){let e=new Date().getTime();return this.rawToken&&this.expiresAt?e>=this.expiresAt:!0}isTokenExpiring(){var e;let r=new Date().getTime(),n=(e=this.eagerRefreshThresholdMillis)!==null&&e!==void 0?e:0;return this.rawToken&&this.expiresAt?this.expiresAt<=r+n:!0}getToken(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),r=Object.assign({forceRefresh:!1},r),e){let n=e;this.getTokenAsync(r).then(i=>n(null,i),e);return}return this.getTokenAsync(r)}getCredentials(e){return M(this,null,function*(){switch(S8.extname(e)){case".json":{let n=yield Ub(e,"utf8"),i=JSON.parse(n),a=i.private_key,s=i.client_email;if(!a||!s)throw new Fu("private_key and client_email are required.","MISSING_CREDENTIALS");return{privateKey:a,clientEmail:s}}case".der":case".crt":case".pem":return{privateKey:yield Ub(e,"utf8")};case".p12":case".pfx":return Zg||(Zg=(yield Promise.resolve().then(()=>Lb())).getPem),{privateKey:yield Zg(e)};default:throw new Fu("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, *.pem, and *.p12.","UNKNOWN_CERTIFICATE_TYPE")}})}getTokenAsync(e){return M(this,null,function*(){if(this.inFlightRequest&&!e.forceRefresh)return this.inFlightRequest;try{return yield this.inFlightRequest=this.getTokenAsyncInner(e)}finally{this.inFlightRequest=void 0}})}getTokenAsyncInner(e){return M(this,null,function*(){if(this.isTokenExpiring()===!1&&e.forceRefresh===!1)return Promise.resolve(this.rawToken);if(!this.key&&!this.keyFile)throw new Error("No key or keyFile set.");if(!this.key&&this.keyFile){let r=yield this.getCredentials(this.keyFile);this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||this.ensureEmail()}return this.requestToken()})}ensureEmail(){if(!this.iss)throw new Fu("email is required.","MISSING_CREDENTIALS")}revokeToken(e){if(e){this.revokeTokenAsync().then(()=>e(),e);return}return this.revokeTokenAsync()}revokeTokenAsync(){return M(this,null,function*(){if(!this.accessToken)throw new Error("No token to revoke.");let e=A8+this.accessToken;yield Mb.request({url:e}),this.configure({email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims})})}configure(e={}){this.keyFile=e.keyFile,this.key=e.key,this.rawToken=void 0,this.iss=e.email||e.iss,this.sub=e.sub,this.additionalClaims=e.additionalClaims,typeof e.scope=="object"?this.scope=e.scope.join(" "):this.scope=e.scope,this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis}requestToken(){return M(this,null,function*(){let e=Math.floor(new Date().getTime()/1e3),r=this.additionalClaims||{},n=Object.assign({iss:this.iss,scope:this.scope,aud:Fb,exp:e+3600,iat:e,sub:this.sub},r),i=x8.sign({header:{alg:"RS256"},payload:n,secret:this.key});try{let a=yield Mb.request({method:"POST",url:Fb,data:{grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i},headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"json"});return this.rawToken=a.data,this.expiresAt=a.data.expires_in===null||a.data.expires_in===void 0?void 0:(e+a.data.expires_in)*1e3,this.rawToken}catch(a){this.rawToken=void 0,this.tokenExpires=void 0;let s=a.response&&a.response.data?a.response.data:{};if(s.error){let l=s.error_description?`: ${s.error_description}`:"";a.message=`${s.error}${l}`}throw a}})}};qu.GoogleToken=qb});var jb=de((Sj,Vb)=>{"use strict";Vb.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Kb=de((Tj,Hb)=>{"use strict";Hb.exports=Vt;Vt.Node=Js;Vt.create=Vt;function Vt(t){var e=this;if(e instanceof Vt||(e=new Vt),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Vt.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Vt.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Vt.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Vt.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)I8(this,arguments[t]);return this.length};Vt.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)R8(this,arguments[t]);return this.length};Vt.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Vt.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Vt.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Vt.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Vt.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Vt.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Vt.prototype.map=function(t,e){e=e||this;for(var r=new Vt,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Vt.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Vt,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Vt.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};Vt.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};Vt.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Vt.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Vt.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Vt;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};Vt.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Vt;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};Vt.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var a=[],n=0;i&&n<e;n++)a.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=k8(this,i,r[n]);return a};Vt.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function k8(t,e,r){var n=e===t.head?new Js(r,null,e,t):new Js(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function I8(t,e){t.tail=new Js(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function R8(t,e){t.head=new Js(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Js(t,e,r,n){if(!(this instanceof Js))return new Js(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{jb()(Vt)}catch(t){}});var Zb=de((Aj,Jb)=>{"use strict";var N8=Kb(),Zs=Symbol("max"),Aa=Symbol("length"),vl=Symbol("lengthCalculator"),Gu=Symbol("allowStale"),$s=Symbol("maxAge"),ka=Symbol("dispose"),Yb=Symbol("noDisposeOnSet"),Hr=Symbol("lruList"),Si=Symbol("cache"),Wb=Symbol("updateAgeOnGet"),$g=()=>1,zb=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Zs]=e.max||1/0,n=e.length||$g;if(this[vl]=typeof n!="function"?$g:n,this[Gu]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[$s]=e.maxAge||0,this[ka]=e.dispose,this[Yb]=e.noDisposeOnSet||!1,this[Wb]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Zs]=e||1/0,Vu(this)}get max(){return this[Zs]}set allowStale(e){this[Gu]=!!e}get allowStale(){return this[Gu]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[$s]=e,Vu(this)}get maxAge(){return this[$s]}set lengthCalculator(e){typeof e!="function"&&(e=$g),e!==this[vl]&&(this[vl]=e,this[Aa]=0,this[Hr].forEach(r=>{r.length=this[vl](r.value,r.key),this[Aa]+=r.length})),Vu(this)}get lengthCalculator(){return this[vl]}get length(){return this[Aa]}get itemCount(){return this[Hr].length}rforEach(e,r){r=r||this;for(let n=this[Hr].tail;n!==null;){let i=n.prev;Xb(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[Hr].head;n!==null;){let i=n.next;Xb(this,e,n,r),n=i}}keys(){return this[Hr].toArray().map(e=>e.key)}values(){return this[Hr].toArray().map(e=>e.value)}reset(){this[ka]&&this[Hr]&&this[Hr].length&&this[Hr].forEach(e=>this[ka](e.key,e.value)),this[Si]=new Map,this[Hr]=new N8,this[Aa]=0}dump(){return this[Hr].map(e=>Vd(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Hr]}set(e,r,n){if(n=n||this[$s],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,a=this[vl](r,e);if(this[Si].has(e)){if(a>this[Zs])return _l(this,this[Si].get(e)),!1;let u=this[Si].get(e).value;return this[ka]&&(this[Yb]||this[ka](e,u.value)),u.now=i,u.maxAge=n,u.value=r,this[Aa]+=a-u.length,u.length=a,this.get(e),Vu(this),!0}let s=new Qb(e,r,a,i,n);return s.length>this[Zs]?(this[ka]&&this[ka](e,r),!1):(this[Aa]+=s.length,this[Hr].unshift(s),this[Si].set(e,this[Hr].head),Vu(this),!0)}has(e){if(!this[Si].has(e))return!1;let r=this[Si].get(e).value;return!Vd(this,r)}get(e){return em(this,e,!0)}peek(e){return em(this,e,!1)}pop(){let e=this[Hr].tail;return e?(_l(this,e),e.value):null}del(e){_l(this,this[Si].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],a=i.e||0;if(a===0)this.set(i.k,i.v);else{let s=a-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Si].forEach((e,r)=>em(this,r,!1))}},em=(t,e,r)=>{let n=t[Si].get(e);if(n){let i=n.value;if(Vd(t,i)){if(_l(t,n),!t[Gu])return}else r&&(t[Wb]&&(n.value.now=Date.now()),t[Hr].unshiftNode(n));return i.value}},Vd=(t,e)=>{if(!e||!e.maxAge&&!t[$s])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[$s]&&r>t[$s]},Vu=t=>{if(t[Aa]>t[Zs])for(let e=t[Hr].tail;t[Aa]>t[Zs]&&e!==null;){let r=e.prev;_l(t,e),e=r}},_l=(t,e)=>{if(e){let r=e.value;t[ka]&&t[ka](r.key,r.value),t[Aa]-=r.length,t[Si].delete(r.key),t[Hr].removeNode(e)}},Qb=class{constructor(e,r,n,i,a){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=a||0}},Xb=(t,e,r,n)=>{let i=r.value;Vd(t,i)&&(_l(t,r),t[Gu]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};Jb.exports=zb});var tm=de(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.JWTAccess=void 0;var D8=z0(),B8=Zb(),$b={alg:"RS256",typ:"JWT"},jd=class{constructor(e,r,n,i){this.cache=new B8({max:500,maxAge:60*60*1e3}),this.email=e,this.key=r,this.keyId=n,this.eagerRefreshThresholdMillis=i!=null?i:5*60*1e3}getCachedKey(e,r){let n=e;if(r&&Array.isArray(r)&&r.length?n=e?`${e}_${r.join("_")}`:`${r.join("_")}`:typeof r=="string"&&(n=e?`${e}_${r}`:r),!n)throw Error("Scopes or url must be provided");return n}getRequestHeaders(e,r,n){let i=this.getCachedKey(e,n),a=this.cache.get(i),s=Date.now();if(a&&a.expiration-s>this.eagerRefreshThresholdMillis)return a.headers;let l=Math.floor(Date.now()/1e3),u=jd.getExpirationTime(l),f;if(Array.isArray(n)&&(n=n.join(" ")),n?f={iss:this.email,sub:this.email,scope:n,exp:u,iat:l}:f={iss:this.email,sub:this.email,aud:e,exp:u,iat:l},r){for(let y in f)if(r[y])throw new Error(`The '${y}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let d=this.keyId?Gi($n({},$b),{kid:this.keyId}):$b,h=Object.assign(f,r),m={Authorization:`Bearer ${D8.sign({header:d,payload:h,secret:this.key})}`};return this.cache.set(i,{expiration:u*1e3,headers:m}),m}static getExpirationTime(e){return e+3600}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{e||n(new Error("Must pass in a stream containing the service account auth settings."));let i="";e.setEncoding("utf8").on("data",a=>i+=a).on("error",n).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}};Hd.JWTAccess=jd});var rm=de(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.JWT=void 0;var ex=Gb(),O8=tm(),L8=Gs(),Kd=class extends L8.OAuth2Client{constructor(e,r,n,i,a,s){let l=e&&typeof e=="object"?e:{email:e,keyFile:r,key:n,keyId:s,scopes:i,subject:a};super({eagerRefreshThresholdMillis:l.eagerRefreshThresholdMillis,forceRefreshOnFailure:l.forceRefreshOnFailure});this.email=l.email,this.keyFile=l.keyFile,this.key=l.key,this.keyId=l.keyId,this.scopes=l.scopes,this.subject=l.subject,this.additionalClaims=l.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(e){return new Kd({email:this.email,keyFile:this.keyFile,key:this.key,keyId:this.keyId,scopes:e,subject:this.subject,additionalClaims:this.additionalClaims})}getRequestMetadataAsync(e){var r=n=>super[n];return M(this,null,function*(){e=this.defaultServicePath?`https://${this.defaultServicePath}/`:e;let i=!this.hasUserScopes()&&e||this.useJWTAccessWithScope&&this.hasAnyScopes();if(!this.apiKey&&i)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:a}=yield this.refreshToken();return{headers:this.addSharedMetadataHeaders({Authorization:`Bearer ${a.id_token}`})}}else{this.access||(this.access=new O8.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let a;this.hasUserScopes()?a=this.scopes:e||(a=this.defaultScopes);let s=yield this.access.getRequestHeaders(e!=null?e:void 0,this.additionalClaims,this.useJWTAccessWithScope?a:void 0);return{headers:this.addSharedMetadataHeaders(s)}}else return this.hasAnyScopes()||this.apiKey?r("getRequestMetadataAsync").call(this,e):{headers:{}}})}fetchIdToken(e){return M(this,null,function*(){let r=new ex.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:e}});if(yield r.getToken({forceRefresh:!0}),!r.idToken)throw new Error("Unknown error: Failed to fetch ID token");return r.idToken})}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(e){if(e)this.authorizeAsync().then(r=>e(null,r),e);else return this.authorizeAsync()}authorizeAsync(){return M(this,null,function*(){let e=yield this.refreshToken();if(!e)throw new Error("No result returned");return this.credentials=e.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,e.tokens})}refreshTokenNoCache(e){return M(this,null,function*(){let r=this.createGToken(),i={access_token:(yield r.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:r.expiresAt,id_token:r.idToken};return this.emit("tokens",i),{res:null,tokens:i}})}createGToken(){return this.gtoken||(this.gtoken=new ex.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims})),this.gtoken}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id,this.quotaProjectId=e.quota_project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{if(!e)throw new Error("Must pass in a stream containing the service account auth settings.");let i="";e.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}fromAPIKey(e){if(typeof e!="string")throw new Error("Must provide an API Key string.");this.apiKey=e}getCredentials(){return M(this,null,function*(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let r=yield this.createGToken().getCredentials(this.keyFile);return{private_key:r.privateKey,client_email:r.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")})}};Yd.JWT=Kd});var nm=de(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.UserRefreshClient=void 0;var P8=Gs(),tx=class extends P8.OAuth2Client{constructor(e,r,n,i,a){let s=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,refreshToken:n,eagerRefreshThresholdMillis:i,forceRefreshOnFailure:a};super({clientId:s.clientId,clientSecret:s.clientSecret,eagerRefreshThresholdMillis:s.eagerRefreshThresholdMillis,forceRefreshOnFailure:s.forceRefreshOnFailure});this._refreshToken=s.refreshToken,this.credentials.refresh_token=s.refreshToken}refreshTokenNoCache(e){var r=n=>super[n];return M(this,null,function*(){return r("refreshTokenNoCache").call(this,this._refreshToken)})}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the user refresh token");if(e.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!e.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!e.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!e.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=e.client_id,this._clientSecret=e.client_secret,this._refreshToken=e.refresh_token,this.credentials.refresh_token=e.refresh_token,this.quotaProjectId=e.quota_project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return M(this,null,function*(){return new Promise((r,n)=>{if(!e)return n(new Error("Must pass in a stream containing the user refresh token."));let i="";e.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);return this.fromJSON(a),r()}catch(a){return n(a)}})})})}};Wd.UserRefreshClient=tx});var ix=de(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.getErrorFromOAuthErrorResponse=wl.OAuthClientAuthHandler=void 0;var rx=require("querystring"),M8=Qo(),U8=["PUT","POST","PATCH"],nx=class{constructor(e){this.clientAuthentication=e,this.crypto=(0,M8.createCrypto)()}applyClientAuthenticationOptions(e,r){this.injectAuthenticatedHeaders(e,r),r||this.injectAuthenticatedRequestBody(e)}injectAuthenticatedHeaders(e,r){var n;if(r)e.headers=e.headers||{},Object.assign(e.headers,{Authorization:`Bearer ${r}}`});else if(((n=this.clientAuthentication)===null||n===void 0?void 0:n.confidentialClientType)==="basic"){e.headers=e.headers||{};let i=this.clientAuthentication.clientId,a=this.clientAuthentication.clientSecret||"",s=this.crypto.encodeBase64StringUtf8(`${i}:${a}`);Object.assign(e.headers,{Authorization:`Basic ${s}`})}}injectAuthenticatedRequestBody(e){var r;if(((r=this.clientAuthentication)===null||r===void 0?void 0:r.confidentialClientType)==="request-body"){let n=(e.method||"GET").toUpperCase();if(U8.indexOf(n)!==-1){let i,a=e.headers||{};for(let s in a)if(s.toLowerCase()==="content-type"&&a[s]){i=a[s].toLowerCase();break}if(i==="application/x-www-form-urlencoded"){e.data=e.data||"";let s=rx.parse(e.data);Object.assign(s,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""}),e.data=rx.stringify(s)}else if(i==="application/json")e.data=e.data||{},Object.assign(e.data,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""});else throw new Error(`${i} content-types are not supported with ${this.clientAuthentication.confidentialClientType} client authentication`)}else throw new Error(`${n} HTTP method does not support ${this.clientAuthentication.confidentialClientType} client authentication`)}}};wl.OAuthClientAuthHandler=nx;function F8(t,e){let r=t.error,n=t.error_description,i=t.error_uri,a=`Error code ${r}`;typeof n!="undefined"&&(a+=`: ${n}`),typeof i!="undefined"&&(a+=` - ${i}`);let s=new Error(a);if(e){let l=Object.keys(e);e.stack&&l.push("stack"),l.forEach(u=>{u!=="message"&&Object.defineProperty(s,u,{value:e[u],writable:!1,enumerable:!0})})}return s}wl.getErrorFromOAuthErrorResponse=F8});var im=de(zd=>{"use strict";Object.defineProperty(zd,"__esModule",{value:!0});zd.StsCredentials=void 0;var q8=Wo(),G8=require("querystring"),V8=vu(),ax=ix(),sx=class extends ax.OAuthClientAuthHandler{constructor(e,r){super(r);this.tokenExchangeEndpoint=e,this.transporter=new V8.DefaultTransporter}exchangeToken(e,r,n){return M(this,null,function*(){var i,a,s;let l={grant_type:e.grantType,resource:e.resource,audience:e.audience,scope:(i=e.scope)===null||i===void 0?void 0:i.join(" "),requested_token_type:e.requestedTokenType,subject_token:e.subjectToken,subject_token_type:e.subjectTokenType,actor_token:(a=e.actingParty)===null||a===void 0?void 0:a.actorToken,actor_token_type:(s=e.actingParty)===null||s===void 0?void 0:s.actorTokenType,options:n&&JSON.stringify(n)};Object.keys(l).forEach(d=>{typeof l[d]=="undefined"&&delete l[d]});let u={"Content-Type":"application/x-www-form-urlencoded"};Object.assign(u,r||{});let f={url:this.tokenExchangeEndpoint,method:"POST",headers:u,data:G8.stringify(l),responseType:"json"};this.applyClientAuthenticationOptions(f);try{let d=yield this.transporter.request(f),h=d.data;return h.res=d,h}catch(d){throw d instanceof q8.GaxiosError&&d.response?(0,ax.getErrorFromOAuthErrorResponse)(d.response.data,d):d}})}};zd.StsCredentials=sx});var El=de(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.BaseExternalAccountClient=In.CLOUD_RESOURCE_MANAGER=In.EXTERNAL_ACCOUNT_TYPE=In.EXPIRATION_TIME_OFFSET=void 0;var j8=require("stream"),H8=_u(),K8=im(),Y8="urn:ietf:params:oauth:grant-type:token-exchange",W8="urn:ietf:params:oauth:token-type:access_token",am="https://www.googleapis.com/auth/cloud-platform",Qd="\\.googleapis\\.com$",sm="[^\\.\\s\\/\\\\]+";In.EXPIRATION_TIME_OFFSET=5*60*1e3;In.EXTERNAL_ACCOUNT_TYPE="external_account";In.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var z8="//iam.googleapis.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",ox=class extends H8.AuthClient{constructor(e,r){super();if(e.type!==In.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${In.EXTERNAL_ACCOUNT_TYPE}" type but received "${e.type}"`);if(this.clientAuth=e.client_id?{confidentialClientType:"basic",clientId:e.client_id,clientSecret:e.client_secret}:void 0,!this.validateGoogleAPIsUrl("sts",e.token_url))throw new Error(`"${e.token_url}" is not a valid token url.`);this.stsCredential=new K8.StsCredentials(e.token_url,this.clientAuth),this.scopes=[am],this.cachedAccessToken=null,this.audience=e.audience,this.subjectTokenType=e.subject_token_type,this.quotaProjectId=e.quota_project_id,this.workforcePoolUserProject=e.workforce_pool_user_project;let n=new RegExp(z8);if(this.workforcePoolUserProject&&!this.audience.match(n))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");if(typeof e.service_account_impersonation_url!="undefined"&&!this.validateGoogleAPIsUrl("iamcredentials",e.service_account_impersonation_url))throw new Error(`"${e.service_account_impersonation_url}" is not a valid service account impersonation url.`);this.serviceAccountImpersonationUrl=e.service_account_impersonation_url,typeof(r==null?void 0:r.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=In.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=r.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(r==null?void 0:r.forceRefreshOnFailure),this.projectId=null,this.projectNumber=this.getProjectNumber(this.audience)}getServiceAccountEmail(){var e;if(this.serviceAccountImpersonationUrl){let n=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return((e=n==null?void 0:n.groups)===null||e===void 0?void 0:e.email)||null}return null}setCredentials(e){super.setCredentials(e),this.cachedAccessToken=e}getAccessToken(){return M(this,null,function*(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}})}getRequestHeaders(){return M(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}getProjectId(){return M(this,null,function*(){let e=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(e){let r=yield this.getRequestHeaders(),n=yield this.transporter.request({headers:r,url:`${In.CLOUD_RESOURCE_MANAGER}${e}`,responseType:"json"});return this.projectId=n.data.projectId,this.projectId}return null})}requestAsync(e,r=!1){return M(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();e.headers=e.headers||{},i&&i["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(e.headers.Authorization=i.Authorization),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof j8.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(e,!0)}throw i}return n})}refreshAccessTokenAsync(){return M(this,null,function*(){let e=yield this.retrieveSubjectToken(),r={grantType:Y8,audience:this.audience,requestedTokenType:W8,subjectToken:e,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[am]:this.getScopesArray()},n=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,i=yield this.stsCredential.exchangeToken(r,void 0,n);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=yield this.getImpersonatedAccessToken(i.access_token):i.expires_in?this.cachedAccessToken={access_token:i.access_token,expiry_date:new Date().getTime()+i.expires_in*1e3,res:i.res}:this.cachedAccessToken={access_token:i.access_token,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken})}getProjectNumber(e){let r=e.match(/\/projects\/([^/]+)/);return r?r[1]:null}getImpersonatedAccessToken(e){return M(this,null,function*(){let r={url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},data:{scope:this.getScopesArray()},responseType:"json"},n=yield this.transporter.request(r),i=n.data;return{access_token:i.accessToken,expiry_date:new Date(i.expireTime).getTime(),res:n}})}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:typeof this.scopes=="undefined"?[am]:this.scopes}validateGoogleAPIsUrl(e,r){let n;try{n=new URL(r)}catch(s){return!1}let i=n.hostname;if(n.protocol!=="https:")return!1;let a=[new RegExp("^"+sm+"\\."+e+Qd),new RegExp("^"+e+Qd),new RegExp("^"+e+"\\."+sm+Qd),new RegExp("^"+sm+"\\-"+e+Qd)];for(let s of a)if(i.match(s))return!0;return!1}};In.BaseExternalAccountClient=ox});var dm=de(Xd=>{"use strict";var om,lm,um;Object.defineProperty(Xd,"__esModule",{value:!0});Xd.IdentityPoolClient=void 0;var cm=require("fs"),fm=require("util"),Q8=El(),X8=(0,fm.promisify)((om=cm.readFile)!==null&&om!==void 0?om:()=>{}),J8=(0,fm.promisify)((lm=cm.realpath)!==null&&lm!==void 0?lm:()=>{}),Z8=(0,fm.promisify)((um=cm.lstat)!==null&&um!==void 0?um:()=>{}),lx=class extends Q8.BaseExternalAccountClient{constructor(e,r){var n,i;super(e,r);if(this.file=e.credential_source.file,this.url=e.credential_source.url,this.headers=e.credential_source.headers,!this.file&&!this.url)throw new Error('No valid Identity Pool "credential_source" provided');if(this.formatType=((n=e.credential_source.format)===null||n===void 0?void 0:n.type)||"text",this.formatSubjectTokenFieldName=(i=e.credential_source.format)===null||i===void 0?void 0:i.subject_token_field_name,this.formatType!=="json"&&this.formatType!=="text")throw new Error(`Invalid credential_source format "${this.formatType}"`);if(this.formatType==="json"&&!this.formatSubjectTokenFieldName)throw new Error("Missing subject_token_field_name for JSON credential_source format")}retrieveSubjectToken(){return M(this,null,function*(){return this.file?yield this.getTokenFromFile(this.file,this.formatType,this.formatSubjectTokenFieldName):yield this.getTokenFromUrl(this.url,this.formatType,this.formatSubjectTokenFieldName,this.headers)})}getTokenFromFile(e,r,n){return M(this,null,function*(){try{if(e=yield J8(e),!(yield Z8(e)).isFile())throw new Error}catch(s){throw s instanceof Error&&(s.message=`The file at ${e} does not exist, or it is not a file. ${s.message}`),s}let i,a=yield X8(e,{encoding:"utf8"});if(r==="text"?i=a:r==="json"&&n&&(i=JSON.parse(a)[n]),!i)throw new Error("Unable to parse the subject_token from the credential_source file");return i})}getTokenFromUrl(e,r,n,i){return M(this,null,function*(){let a={url:e,method:"GET",headers:i,responseType:r},s;if(r==="text"?s=(yield this.transporter.request(a)).data:r==="json"&&n&&(s=(yield this.transporter.request(a)).data[n]),!s)throw new Error("Unable to parse the subject_token from the credential_source URL");return s})}};Xd.IdentityPoolClient=lx});var dx=de(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.AwsRequestSigner=void 0;var ux=Qo(),cx="AWS4-HMAC-SHA256",$8="aws4_request",fx=class{constructor(e,r){this.getCredentials=e,this.region=r,this.crypto=(0,ux.createCrypto)()}getRequestOptions(e){return M(this,null,function*(){if(!e.url)throw new Error('"url" is required in "amzOptions"');let r=typeof e.data=="object"?JSON.stringify(e.data):e.data,n=e.url,i=e.method||"GET",a=e.body||r,s=e.headers,l=yield this.getCredentials(),u=new URL(n),f=yield tU({crypto:this.crypto,host:u.host,canonicalUri:u.pathname,canonicalQuerystring:u.search.substr(1),method:i,region:this.region,securityCredentials:l,requestPayload:a,additionalAmzHeaders:s}),d=Object.assign(f.amzDate?{"x-amz-date":f.amzDate}:{},{Authorization:f.authorizationHeader,host:u.host},s||{});l.token&&Object.assign(d,{"x-amz-security-token":l.token});let h={url:n,method:i,headers:d};return typeof a!="undefined"&&(h.body=a),h})}};Jd.AwsRequestSigner=fx;function ju(t,e,r){return M(this,null,function*(){return yield t.signWithHmacSha256(e,r)})}function eU(t,e,r,n,i){return M(this,null,function*(){let a=yield ju(t,`AWS4${e}`,r),s=yield ju(t,a,n),l=yield ju(t,s,i);return yield ju(t,l,"aws4_request")})}function tU(t){return M(this,null,function*(){let e=t.additionalAmzHeaders||{},r=t.requestPayload||"",n=t.host.split(".")[0],i=new Date,a=i.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),s=i.toISOString().replace(/[-]/g,"").replace(/T.*/,""),l={};Object.keys(e).forEach(x=>{l[x.toLowerCase()]=e[x]}),t.securityCredentials.token&&(l["x-amz-security-token"]=t.securityCredentials.token);let u=Object.assign({host:t.host},l.date?{}:{"x-amz-date":a},l),f="",d=Object.keys(u).sort();d.forEach(x=>{f+=`${x}:${u[x]}
`});let h=d.join(";"),g=yield t.crypto.sha256DigestHex(r),m=`${t.method}
${t.canonicalUri}
${t.canonicalQuerystring}
${f}
${h}
${g}`,y=`${s}/${t.region}/${n}/${$8}`,_=`${cx}
${a}
${y}
`+(yield t.crypto.sha256DigestHex(m)),w=yield eU(t.crypto,t.securityCredentials.secretAccessKey,s,t.region,n),E=yield ju(t.crypto,w,_),T=`${cx} Credential=${t.securityCredentials.accessKeyId}/${y}, SignedHeaders=${h}, Signature=${(0,ux.fromArrayBufferToHex)(E)}`;return{amzDate:l.date?void 0:a,authorizationHeader:T,canonicalQuerystring:t.canonicalQuerystring}})}});var hm=de(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});Zd.AwsClient=void 0;var rU=dx(),nU=El(),hx=class extends nU.BaseExternalAccountClient{constructor(e,r){var n;super(e,r);this.environmentId=e.credential_source.environment_id,this.regionUrl=e.credential_source.region_url,this.securityCredentialsUrl=e.credential_source.url,this.regionalCredVerificationUrl=e.credential_source.regional_cred_verification_url,this.imdsV2SessionTokenUrl=e.credential_source.imdsv2_session_token_url;let i=(n=this.environmentId)===null||n===void 0?void 0:n.match(/^(aws)(\d+)$/);if(!i||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(i[2],10)!==1)throw new Error(`aws version "${i[2]}" is not supported in the current build.`);this.awsRequestSigner=null,this.region=""}retrieveSubjectToken(){return M(this,null,function*(){if(!this.awsRequestSigner){let i={};this.imdsV2SessionTokenUrl&&(i["x-aws-ec2-metadata-token"]=yield this.getImdsV2SessionToken()),this.region=yield this.getAwsRegion(i),this.awsRequestSigner=new rU.AwsRequestSigner(()=>M(this,null,function*(){if(process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY)return{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN};let a=yield this.getAwsRoleName(i),s=yield this.getAwsSecurityCredentials(a,i);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,token:s.Token}}),this.region)}let e=yield this.awsRequestSigner.getRequestOptions({url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),r=[],n=Object.assign({"x-goog-cloud-target-resource":this.audience},e.headers);for(let i in n)r.push({key:i,value:n[i]});return encodeURIComponent(JSON.stringify({url:e.url,method:e.method,headers:r}))})}getImdsV2SessionToken(){return M(this,null,function*(){let e={url:this.imdsV2SessionTokenUrl,method:"PUT",responseType:"text",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return(yield this.transporter.request(e)).data})}getAwsRegion(e){return M(this,null,function*(){if(process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION)return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION;if(!this.regionUrl)throw new Error('Unable to determine AWS region due to missing "options.credential_source.region_url"');let r={url:this.regionUrl,method:"GET",responseType:"text",headers:e},n=yield this.transporter.request(r);return n.data.substr(0,n.data.length-1)})}getAwsRoleName(e){return M(this,null,function*(){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let r={url:this.securityCredentialsUrl,method:"GET",responseType:"text",headers:e};return(yield this.transporter.request(r)).data})}getAwsSecurityCredentials(e,r){return M(this,null,function*(){return(yield this.transporter.request({url:`${this.securityCredentialsUrl}/${e}`,responseType:"json",headers:r})).data})}};Zd.AwsClient=hx});var pm=de($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.ExternalAccountClient=void 0;var iU=El(),aU=dm(),sU=hm(),px=class{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options) or via new GoogleAuth(options).getClient()")}static fromJSON(e,r){var n;return e&&e.type===iU.EXTERNAL_ACCOUNT_TYPE?((n=e.credential_source)===null||n===void 0?void 0:n.environment_id)?new sU.AwsClient(e,r):new aU.IdentityPoolClient(e,r):null}};$d.ExternalAccountClient=px});var yx=de(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.GoogleAuth=bl.CLOUD_SDK_CLIENT_ID=void 0;var oU=require("child_process"),Hu=require("fs"),gm=Ff(),lU=require("os"),mm=require("path"),uU=Qo(),cU=vu(),fU=P0(),dU=M0(),hU=U0(),eo=rm(),gx=nm(),mx=pm(),Cl=El();bl.CLOUD_SDK_CLIENT_ID="764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com";var ym=class{constructor(e){this.checkIsGCE=void 0,this.jsonContent=null,this.cachedCredential=null,e=e||{},this._cachedProjectId=e.projectId||null,this.cachedCredential=e.authClient||null,this.keyFilename=e.keyFilename||e.keyFile,this.scopes=e.scopes,this.jsonContent=e.credentials||null,this.clientOptions=e.clientOptions}get isGCE(){return this.checkIsGCE}setGapicJWTValues(e){e.defaultServicePath=this.defaultServicePath,e.useJWTAccessWithScope=this.useJWTAccessWithScope,e.defaultScopes=this.defaultScopes}getProjectId(e){if(e)this.getProjectIdAsync().then(r=>e(null,r),e);else return this.getProjectIdAsync()}getProjectIdAsync(){return this._cachedProjectId?Promise.resolve(this._cachedProjectId):(this._getDefaultProjectIdPromise||(this._getDefaultProjectIdPromise=new Promise((e,r)=>M(this,null,function*(){try{let n=this.getProductionProjectId()||(yield this.getFileProjectId())||(yield this.getDefaultServiceProjectId())||(yield this.getGCEProjectId())||(yield this.getExternalAccountClientProjectId());if(this._cachedProjectId=n,!n)throw new Error(`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`);e(n)}catch(n){r(n)}}))),this._getDefaultProjectIdPromise)}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(e={},r){let n;if(typeof e=="function"?r=e:n=e,r)this.getApplicationDefaultAsync(n).then(i=>r(null,i.credential,i.projectId),r);else return this.getApplicationDefaultAsync(n)}getApplicationDefaultAsync(){return M(this,arguments,function*(e={}){if(this.cachedCredential)return{credential:this.cachedCredential,projectId:yield this.getProjectIdAsync()};let r,n;if(r=yield this._tryGetApplicationCredentialsFromEnvironmentVariable(e),r)return r instanceof eo.JWT?r.scopes=this.scopes:r instanceof Cl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};if(r=yield this._tryGetApplicationCredentialsFromWellKnownFile(e),r)return r instanceof eo.JWT?r.scopes=this.scopes:r instanceof Cl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};let i;try{i=yield this._checkIsGCE()}catch(a){throw a instanceof Error&&(a.message=`Unexpected error determining execution environment: ${a.message}`),a}if(!i)throw new Error("Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.");return e.scopes=this.getAnyScopes(),this.cachedCredential=new fU.Compute(e),n=yield this.getProjectId(),{projectId:n,credential:this.cachedCredential}})}_checkIsGCE(){return M(this,null,function*(){return this.checkIsGCE===void 0&&(this.checkIsGCE=yield gm.isAvailable()),this.checkIsGCE})}_tryGetApplicationCredentialsFromEnvironmentVariable(e){return M(this,null,function*(){let r=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!r||r.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(r,e)}catch(n){throw n instanceof Error&&(n.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${n.message}`),n}})}_tryGetApplicationCredentialsFromWellKnownFile(e){return M(this,null,function*(){let r=null;if(this._isWindows())r=process.env.APPDATA;else{let i=process.env.HOME;i&&(r=mm.join(i,".config"))}return r&&(r=mm.join(r,"gcloud","application_default_credentials.json"),Hu.existsSync(r)||(r=null)),r?yield this._getApplicationCredentialsFromFilePath(r,e):null})}_getApplicationCredentialsFromFilePath(n){return M(this,arguments,function*(e,r={}){if(!e||e.length===0)throw new Error("The file path is invalid.");try{if(e=Hu.realpathSync(e),!Hu.lstatSync(e).isFile())throw new Error}catch(a){throw a instanceof Error&&(a.message=`The file at ${e} does not exist, or it is not a file. ${a.message}`),a}let i=Hu.createReadStream(e);return this.fromStream(i,r)})}fromJSON(e,r){let n;if(!e)throw new Error("Must pass in a JSON object containing the Google auth settings.");return r=r||{},e.type==="authorized_user"?(n=new gx.UserRefreshClient(r),n.fromJSON(e)):e.type===Cl.EXTERNAL_ACCOUNT_TYPE?(n=mx.ExternalAccountClient.fromJSON(e,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new eo.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),n}_cacheClientFromJSON(e,r){let n;return r=r||{},e.type==="authorized_user"?(n=new gx.UserRefreshClient(r),n.fromJSON(e)):e.type===Cl.EXTERNAL_ACCOUNT_TYPE?(n=mx.ExternalAccountClient.fromJSON(e,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new eo.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),this.jsonContent=e,this.cachedCredential=n,n}fromStream(e,r={},n){let i={};if(typeof r=="function"?n=r:i=r,n)this.fromStreamAsync(e,i).then(a=>n(null,a),n);else return this.fromStreamAsync(e,i)}fromStreamAsync(e,r){return new Promise((n,i)=>{if(!e)throw new Error("Must pass in a stream containing the Google auth settings.");let a="";e.setEncoding("utf8").on("error",i).on("data",s=>a+=s).on("end",()=>{try{try{let s=JSON.parse(a),l=this._cacheClientFromJSON(s,r);return n(l)}catch(s){if(!this.keyFilename)throw s;let l=new eo.JWT(Gi($n({},this.clientOptions),{keyFile:this.keyFilename}));return this.cachedCredential=l,this.setGapicJWTValues(l),n(l)}}catch(s){return i(s)}})})}fromAPIKey(e,r){r=r||{};let n=new eo.JWT(r);return n.fromAPIKey(e),n}_isWindows(){let e=lU.platform();return!!(e&&e.length>=3&&e.substring(0,3).toLowerCase()==="win")}getDefaultServiceProjectId(){return M(this,null,function*(){return new Promise(e=>{(0,oU.exec)("gcloud config config-helper --format json",(r,n)=>{if(!r&&n)try{let i=JSON.parse(n).configuration.properties.core.project;e(i);return}catch(i){}e(null)})})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}getFileProjectId(){return M(this,null,function*(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let r=yield this.getClient();if(r&&r.projectId)return r.projectId}let e=yield this._tryGetApplicationCredentialsFromEnvironmentVariable();return e?e.projectId:null})}getExternalAccountClientProjectId(){return M(this,null,function*(){return!this.jsonContent||this.jsonContent.type!==Cl.EXTERNAL_ACCOUNT_TYPE?null:yield(yield this.getClient()).getProjectId()})}getGCEProjectId(){return M(this,null,function*(){try{return yield gm.project("project-id")}catch(e){return null}})}getCredentials(e){if(e)this.getCredentialsAsync().then(r=>e(null,r),e);else return this.getCredentialsAsync()}getCredentialsAsync(){return M(this,null,function*(){let e=yield this.getClient();if(e instanceof Cl.BaseExternalAccountClient){let i=e.getServiceAccountEmail();if(i)return{client_email:i}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key};if(!(yield this._checkIsGCE()))throw new Error("Unknown error.");let n=yield gm.instance({property:"service-accounts/",params:{recursive:"true"}});if(!n||!n.default||!n.default.email)throw new Error("Failure from metadata server.");return{client_email:n.default.email}})}getClient(){return M(this,null,function*(){if(!this.cachedCredential)if(this.jsonContent)this._cacheClientFromJSON(this.jsonContent,this.clientOptions);else if(this.keyFilename){let e=mm.resolve(this.keyFilename),r=Hu.createReadStream(e);yield this.fromStreamAsync(r,this.clientOptions)}else yield this.getApplicationDefaultAsync(this.clientOptions);return this.cachedCredential})}getIdTokenClient(e){return M(this,null,function*(){let r=yield this.getClient();if(!("fetchIdToken"in r))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new dU.IdTokenClient({targetAudience:e,idTokenProvider:r})})}getAccessToken(){return M(this,null,function*(){return(yield(yield this.getClient()).getAccessToken()).token})}getRequestHeaders(e){return M(this,null,function*(){return(yield this.getClient()).getRequestHeaders(e)})}authorizeRequest(e){return M(this,null,function*(){e=e||{};let r=e.url||e.uri,i=yield(yield this.getClient()).getRequestHeaders(r);return e.headers=Object.assign(e.headers||{},i),e})}request(e){return M(this,null,function*(){return(yield this.getClient()).request(e)})}getEnv(){return(0,hU.getEnv)()}sign(e){return M(this,null,function*(){let r=yield this.getClient(),n=(0,uU.createCrypto)();if(r instanceof eo.JWT&&r.key)return yield n.sign(r.key,e);if(!(yield this.getProjectId()))throw new Error("Cannot sign data without a project ID.");let a=yield this.getCredentials();if(!a.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(n,a.client_email,e)})}signBlob(e,r,n){return M(this,null,function*(){let i=`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${r}:signBlob`;return(yield this.request({method:"POST",url:i,data:{payload:e.encodeBase64StringUtf8(n)}})).data.signedBlob})}};bl.GoogleAuth=ym;ym.DefaultTransporter=cU.DefaultTransporter});var _x=de(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.IAMAuth=void 0;var vx=class{constructor(e,r){this.selector=e,this.token=r,this.selector=e,this.token=r}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}};eh.IAMAuth=vx});var Cx=de(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.Impersonated=void 0;var wx=Gs(),pU=Wo(),Ex=class extends wx.OAuth2Client{constructor(e={}){var r,n,i,a,s,l;super(e);this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=(r=e.sourceClient)!==null&&r!==void 0?r:new wx.OAuth2Client,this.targetPrincipal=(n=e.targetPrincipal)!==null&&n!==void 0?n:"",this.delegates=(i=e.delegates)!==null&&i!==void 0?i:[],this.targetScopes=(a=e.targetScopes)!==null&&a!==void 0?a:[],this.lifetime=(s=e.lifetime)!==null&&s!==void 0?s:3600,this.endpoint=(l=e.endpoint)!==null&&l!==void 0?l:"https://iamcredentials.googleapis.com"}refreshToken(e){return M(this,null,function*(){var r,n,i,a,s,l;try{yield this.sourceClient.getAccessToken();let u="projects/-/serviceAccounts/"+this.targetPrincipal,f=`${this.endpoint}/v1/${u}:generateAccessToken`,d={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},h=yield this.sourceClient.request({url:f,data:d,method:"POST"}),g=h.data;return this.credentials.access_token=g.accessToken,this.credentials.expiry_date=Date.parse(g.expireTime),{tokens:this.credentials,res:h}}catch(u){if(!(u instanceof Error))throw u;let f=0,d="";throw u instanceof pU.GaxiosError&&(f=(i=(n=(r=u==null?void 0:u.response)===null||r===void 0?void 0:r.data)===null||n===void 0?void 0:n.error)===null||i===void 0?void 0:i.status,d=(l=(s=(a=u==null?void 0:u.response)===null||a===void 0?void 0:a.data)===null||s===void 0?void 0:s.error)===null||l===void 0?void 0:l.message),f&&d?(u.message=`${f}: unable to impersonate: ${d}`,u):(u.message=`unable to impersonate: ${u}`,u)}})}};th.Impersonated=Ex});var xx=de(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.DownscopedClient=Ti.EXPIRATION_TIME_OFFSET=Ti.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var gU=require("stream"),mU=_u(),yU=im(),vU="urn:ietf:params:oauth:grant-type:token-exchange",_U="urn:ietf:params:oauth:token-type:access_token",wU="urn:ietf:params:oauth:token-type:access_token",EU="https://sts.googleapis.com/v1/token";Ti.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;Ti.EXPIRATION_TIME_OFFSET=5*60*1e3;var bx=class extends mU.AuthClient{constructor(e,r,n,i){super();if(this.authClient=e,this.credentialAccessBoundary=r,r.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(r.accessBoundary.accessBoundaryRules.length>Ti.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${Ti.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let a of r.accessBoundary.accessBoundaryRules)if(a.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new yU.StsCredentials(EU),this.cachedDownscopedAccessToken=null,typeof(n==null?void 0:n.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=Ti.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=n.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(n==null?void 0:n.forceRefreshOnFailure),this.quotaProjectId=i}setCredentials(e){if(!e.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(e),this.cachedDownscopedAccessToken=e}getAccessToken(){return M(this,null,function*(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}})}getRequestHeaders(){return M(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}requestAsync(e,r=!1){return M(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();e.headers=e.headers||{},i&&i["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(e.headers.Authorization=i.Authorization),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof gU.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(e,!0)}throw i}return n})}refreshAccessTokenAsync(){return M(this,null,function*(){var e;let r=(yield this.authClient.getAccessToken()).token,n={grantType:vU,requestedTokenType:_U,subjectToken:r,subjectTokenType:wU},i=yield this.stsCredential.exchangeToken(n,void 0,this.credentialAccessBoundary),a=((e=this.authClient.credentials)===null||e===void 0?void 0:e.expiry_date)||null,s=i.expires_in?new Date().getTime()+i.expires_in*1e3:a;return this.cachedDownscopedAccessToken={access_token:i.access_token,expiry_date:s,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken})}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}};Ti.DownscopedClient=bx});var Ax=de(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.GoogleAuth=ot.auth=ot.DefaultTransporter=ot.DownscopedClient=ot.BaseExternalAccountClient=ot.ExternalAccountClient=ot.IdentityPoolClient=ot.AwsClient=ot.UserRefreshClient=ot.LoginTicket=ot.OAuth2Client=ot.CodeChallengeMethod=ot.Impersonated=ot.JWT=ot.JWTAccess=ot.IdTokenClient=ot.IAMAuth=ot.GCPEnv=ot.Compute=ot.AuthClient=void 0;var Sx=yx();Object.defineProperty(ot,"GoogleAuth",{enumerable:!0,get:function(){return Sx.GoogleAuth}});var CU=_u();Object.defineProperty(ot,"AuthClient",{enumerable:!0,get:function(){return CU.AuthClient}});var bU=P0();Object.defineProperty(ot,"Compute",{enumerable:!0,get:function(){return bU.Compute}});var xU=U0();Object.defineProperty(ot,"GCPEnv",{enumerable:!0,get:function(){return xU.GCPEnv}});var SU=_x();Object.defineProperty(ot,"IAMAuth",{enumerable:!0,get:function(){return SU.IAMAuth}});var TU=M0();Object.defineProperty(ot,"IdTokenClient",{enumerable:!0,get:function(){return TU.IdTokenClient}});var AU=tm();Object.defineProperty(ot,"JWTAccess",{enumerable:!0,get:function(){return AU.JWTAccess}});var kU=rm();Object.defineProperty(ot,"JWT",{enumerable:!0,get:function(){return kU.JWT}});var IU=Cx();Object.defineProperty(ot,"Impersonated",{enumerable:!0,get:function(){return IU.Impersonated}});var Tx=Gs();Object.defineProperty(ot,"CodeChallengeMethod",{enumerable:!0,get:function(){return Tx.CodeChallengeMethod}});Object.defineProperty(ot,"OAuth2Client",{enumerable:!0,get:function(){return Tx.OAuth2Client}});var RU=O0();Object.defineProperty(ot,"LoginTicket",{enumerable:!0,get:function(){return RU.LoginTicket}});var NU=nm();Object.defineProperty(ot,"UserRefreshClient",{enumerable:!0,get:function(){return NU.UserRefreshClient}});var DU=hm();Object.defineProperty(ot,"AwsClient",{enumerable:!0,get:function(){return DU.AwsClient}});var BU=dm();Object.defineProperty(ot,"IdentityPoolClient",{enumerable:!0,get:function(){return BU.IdentityPoolClient}});var OU=pm();Object.defineProperty(ot,"ExternalAccountClient",{enumerable:!0,get:function(){return OU.ExternalAccountClient}});var LU=El();Object.defineProperty(ot,"BaseExternalAccountClient",{enumerable:!0,get:function(){return LU.BaseExternalAccountClient}});var PU=xx();Object.defineProperty(ot,"DownscopedClient",{enumerable:!0,get:function(){return PU.DownscopedClient}});var MU=vu();Object.defineProperty(ot,"DefaultTransporter",{enumerable:!0,get:function(){return MU.DefaultTransporter}});var UU=new Sx.GoogleAuth;ot.auth=UU});var Ix=de((jj,kx)=>{kx.exports=FU;function FU(t){var e={};t.on("connection",function(r){var n=r.remoteAddress+":"+r.remotePort;e[n]=r,r.on("close",function(){delete e[n]})}),t.destroy=function(r){t.close(r);for(var n in e)e[n].destroy()}}});var uh=de(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});var yr=require("obsidian"),Pm="YYYY-MM-DD",Mm="gggg-[W]ww",oS="YYYY-MM",lS="YYYY-[Q]Q",uS="YYYY";function tc(t){var r,n;let e=window.app.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r[t])==null?void 0:n.enabled)}function rc(){var t,e,r,n;try{let{internalPlugins:i,plugins:a}=window.app;if(tc("daily")){let{format:f,folder:d,template:h}=((e=(t=a.getPlugin("periodic-notes"))==null?void 0:t.settings)==null?void 0:e.daily)||{};return{format:f||Pm,folder:(d==null?void 0:d.trim())||"",template:(h==null?void 0:h.trim())||""}}let{folder:s,format:l,template:u}=((n=(r=i.getPluginById("daily-notes"))==null?void 0:r.instance)==null?void 0:n.options)||{};return{format:l||Pm,folder:(s==null?void 0:s.trim())||"",template:(u==null?void 0:u.trim())||""}}catch(i){console.info("No custom daily note settings found!",i)}}function nc(){var t,e,r,n,i,a,s;try{let l=window.app.plugins,u=(t=l.getPlugin("calendar"))==null?void 0:t.options,f=(r=(e=l.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.weekly;if(tc("weekly"))return{format:f.format||Mm,folder:((n=f.folder)==null?void 0:n.trim())||"",template:((i=f.template)==null?void 0:i.trim())||""};let d=u||{};return{format:d.weeklyNoteFormat||Mm,folder:((a=d.weeklyNoteFolder)==null?void 0:a.trim())||"",template:((s=d.weeklyNoteTemplate)==null?void 0:s.trim())||""}}catch(l){console.info("No custom weekly note settings found!",l)}}function ic(){var e,r,n,i;let t=window.app.plugins;try{let a=tc("monthly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.monthly)||{};return{format:a.format||oS,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom monthly note settings found!",a)}}function ac(){var e,r,n,i;let t=window.app.plugins;try{let a=tc("quarterly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.quarterly)||{};return{format:a.format||lS,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom quarterly note settings found!",a)}}function sc(){var e,r,n,i;let t=window.app.plugins;try{let a=tc("yearly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.yearly)||{};return{format:a.format||uS,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom yearly note settings found!",a)}}function cS(...t){let e=[];for(let n=0,i=t.length;n<i;n++)e=e.concat(t[n].split("/"));let r=[];for(let n=0,i=e.length;n<i;n++){let a=e[n];!a||a==="."||r.push(a)}return e[0]===""&&r.unshift(""),r.join("/")}function bF(t){let e=t.substring(t.lastIndexOf("/")+1);return e.lastIndexOf(".")!=-1&&(e=e.substring(0,e.lastIndexOf("."))),e}function xF(t){return M(this,null,function*(){let e=t.replace(/\\/g,"/").split("/");if(e.pop(),e.length){let r=cS(...e);window.app.vault.getAbstractFileByPath(r)||(yield window.app.vault.createFolder(r))}})}function oc(t,e){return M(this,null,function*(){e.endsWith(".md")||(e+=".md");let r=yr.normalizePath(cS(t,e));return yield xF(r),r})}function Il(t){return M(this,null,function*(){let{metadataCache:e,vault:r}=window.app,n=yr.normalizePath(t);if(n==="/")return Promise.resolve(["",null]);try{let i=e.getFirstLinkpathDest(n,""),a=yield r.cachedRead(i),s=window.app.foldManager.load(i);return[a,s]}catch(i){return console.error(`Failed to read the daily note template '${n}'`,i),new yr.Notice("Failed to read the daily note template"),["",null]}})}function Ni(t,e="day"){let r=t.clone().startOf(e).format();return`${e}-${r}`}function fS(t){return t.replace(/\[[^\]]*\]/g,"")}function SF(t,e){if(e==="week"){let r=fS(t);return/w{1,2}/i.test(r)&&(/M{1,4}/.test(r)||/D{1,4}/.test(r))}return!1}function Rl(t,e){return dS(t.basename,e)}function TF(t,e){return dS(bF(t),e)}function dS(t,e){let n={day:rc,week:nc,month:ic,quarter:ac,year:sc}[e]().format.split("/").pop(),i=window.moment(t,n,!0);if(!i.isValid())return null;if(SF(n,e)&&e==="week"){let a=fS(n);if(/w{1,2}/i.test(a))return window.moment(t,n.replace(/M{1,4}/g,"").replace(/D{1,4}/g,""),!1)}return i}var hS=class extends Error{};function pS(t){return M(this,null,function*(){let e=window.app,{vault:r}=e,n=window.moment,{template:i,format:a,folder:s}=rc(),[l,u]=yield Il(i),f=t.format(a),d=yield oc(s,f);try{let h=yield r.create(d,l.replace(/{{\s*date\s*}}/gi,f).replace(/{{\s*time\s*}}/gi,n().format("HH:mm")).replace(/{{\s*title\s*}}/gi,f).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(g,m,y,_,w,E)=>{let T=n(),x=t.clone().set({hour:T.get("hour"),minute:T.get("minute"),second:T.get("second")});return y&&x.add(parseInt(_,10),w),E?x.format(E.substring(1).trim()):x.format(a)}).replace(/{{\s*yesterday\s*}}/gi,t.clone().subtract(1,"day").format(a)).replace(/{{\s*tomorrow\s*}}/gi,t.clone().add(1,"d").format(a)));return e.foldManager.save(h,u),h}catch(h){console.error(`Failed to create file: '${d}'`,h),new yr.Notice("Unable to create new file.")}})}function AF(t,e){var r;return(r=e[Ni(t,"day")])!=null?r:null}function kF(){let{vault:t}=window.app,{folder:e}=rc(),r=t.getAbstractFileByPath(yr.normalizePath(e));if(!r)throw new hS("Failed to find daily notes folder");let n={};return yr.Vault.recurseChildren(r,i=>{if(i instanceof yr.TFile){let a=Rl(i,"day");if(a){let s=Ni(a,"day");n[s]=i}}}),n}var gS=class extends Error{};function IF(){let{moment:t}=window,e=t.localeData()._week.dow,r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(;e;)r.push(r.shift()),e--;return r}function RF(t){return IF().indexOf(t.toLowerCase())}function mS(t){return M(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=nc(),[a,s]=yield Il(r),l=t.format(n),u=yield oc(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,m,y,_)=>{let w=window.moment(),E=t.clone().set({hour:w.get("hour"),minute:w.get("minute"),second:w.get("second")});return g&&E.add(parseInt(m,10),y),_?E.format(_.substring(1).trim()):E.format(n)}).replace(/{{\s*title\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi,(d,h,g)=>{let m=RF(h);return t.weekday(m).format(g.trim())}));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new yr.Notice("Unable to create new file.")}})}function NF(t,e){var r;return(r=e[Ni(t,"week")])!=null?r:null}function DF(){let t={};if(!ES())return t;let{vault:e}=window.app,{folder:r}=nc(),n=e.getAbstractFileByPath(yr.normalizePath(r));if(!n)throw new gS("Failed to find weekly notes folder");return yr.Vault.recurseChildren(n,i=>{if(i instanceof yr.TFile){let a=Rl(i,"week");if(a){let s=Ni(a,"week");t[s]=i}}}),t}var yS=class extends Error{};function vS(t){return M(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=ic(),[a,s]=yield Il(r),l=t.format(n),u=yield oc(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,m,y,_)=>{let w=window.moment(),E=t.clone().set({hour:w.get("hour"),minute:w.get("minute"),second:w.get("second")});return g&&E.add(parseInt(m,10),y),_?E.format(_.substring(1).trim()):E.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new yr.Notice("Unable to create new file.")}})}function BF(t,e){var r;return(r=e[Ni(t,"month")])!=null?r:null}function OF(){let t={};if(!CS())return t;let{vault:e}=window.app,{folder:r}=ic(),n=e.getAbstractFileByPath(yr.normalizePath(r));if(!n)throw new yS("Failed to find monthly notes folder");return yr.Vault.recurseChildren(n,i=>{if(i instanceof yr.TFile){let a=Rl(i,"month");if(a){let s=Ni(a,"month");t[s]=i}}}),t}var _S=class extends Error{};function LF(t){return M(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=ac(),[a,s]=yield Il(r),l=t.format(n),u=yield oc(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,m,y,_)=>{let w=window.moment(),E=t.clone().set({hour:w.get("hour"),minute:w.get("minute"),second:w.get("second")});return g&&E.add(parseInt(m,10),y),_?E.format(_.substring(1).trim()):E.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new yr.Notice("Unable to create new file.")}})}function PF(t,e){var r;return(r=e[Ni(t,"quarter")])!=null?r:null}function MF(){let t={};if(!bS())return t;let{vault:e}=window.app,{folder:r}=ac(),n=e.getAbstractFileByPath(yr.normalizePath(r));if(!n)throw new _S("Failed to find quarterly notes folder");return yr.Vault.recurseChildren(n,i=>{if(i instanceof yr.TFile){let a=Rl(i,"quarter");if(a){let s=Ni(a,"quarter");t[s]=i}}}),t}var wS=class extends Error{};function UF(t){return M(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=sc(),[a,s]=yield Il(r),l=t.format(n),u=yield oc(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,m,y,_)=>{let w=window.moment(),E=t.clone().set({hour:w.get("hour"),minute:w.get("minute"),second:w.get("second")});return g&&E.add(parseInt(m,10),y),_?E.format(_.substring(1).trim()):E.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new yr.Notice("Unable to create new file.")}})}function FF(t,e){var r;return(r=e[Ni(t,"year")])!=null?r:null}function qF(){let t={};if(!xS())return t;let{vault:e}=window.app,{folder:r}=sc(),n=e.getAbstractFileByPath(yr.normalizePath(r));if(!n)throw new wS("Failed to find yearly notes folder");return yr.Vault.recurseChildren(n,i=>{if(i instanceof yr.TFile){let a=Rl(i,"year");if(a){let s=Ni(a,"year");t[s]=i}}}),t}function GF(){var n,i;let{app:t}=window,e=t.internalPlugins.plugins["daily-notes"];if(e&&e.enabled)return!0;let r=t.plugins.getPlugin("periodic-notes");return r&&((i=(n=r.settings)==null?void 0:n.daily)==null?void 0:i.enabled)}function ES(){var r,n;let{app:t}=window;if(t.plugins.getPlugin("calendar"))return!0;let e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.weekly)==null?void 0:n.enabled)}function CS(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.monthly)==null?void 0:n.enabled)}function bS(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.quarterly)==null?void 0:n.enabled)}function xS(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.yearly)==null?void 0:n.enabled)}function VF(t){return{day:rc,week:nc,month:ic,quarter:ac,year:sc}[t]()}function jF(t,e){return{day:pS,month:vS,week:mS}[t](e)}Et.DEFAULT_DAILY_NOTE_FORMAT=Pm;Et.DEFAULT_MONTHLY_NOTE_FORMAT=oS;Et.DEFAULT_QUARTERLY_NOTE_FORMAT=lS;Et.DEFAULT_WEEKLY_NOTE_FORMAT=Mm;Et.DEFAULT_YEARLY_NOTE_FORMAT=uS;Et.appHasDailyNotesPluginLoaded=GF;Et.appHasMonthlyNotesPluginLoaded=CS;Et.appHasQuarterlyNotesPluginLoaded=bS;Et.appHasWeeklyNotesPluginLoaded=ES;Et.appHasYearlyNotesPluginLoaded=xS;Et.createDailyNote=pS;Et.createMonthlyNote=vS;Et.createPeriodicNote=jF;Et.createQuarterlyNote=LF;Et.createWeeklyNote=mS;Et.createYearlyNote=UF;Et.getAllDailyNotes=kF;Et.getAllMonthlyNotes=OF;Et.getAllQuarterlyNotes=MF;Et.getAllWeeklyNotes=DF;Et.getAllYearlyNotes=qF;Et.getDailyNote=AF;Et.getDailyNoteSettings=rc;Et.getDateFromFile=Rl;Et.getDateFromPath=TF;Et.getDateUID=Ni;Et.getMonthlyNote=BF;Et.getMonthlyNoteSettings=ic;Et.getPeriodicNoteSettings=VF;Et.getQuarterlyNote=PF;Et.getQuarterlyNoteSettings=ac;Et.getTemplateInfo=Il;Et.getWeeklyNote=NF;Et.getWeeklyNoteSettings=nc;Et.getYearlyNote=FF;Et.getYearlyNoteSettings=sc});var Da=de((Nl,lc)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",a="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",f=1,d=2,h=4,g=1,m=2,y=1,_=2,w=4,E=8,T=16,x=32,O=64,I=128,B=256,z=512,F=30,q="...",te=800,ie=16,ye=1,be=2,Ve=3,Ne=1/0,me=9007199254740991,re=17976931348623157e292,Fe=0/0,Ze=4294967295,ut=Ze-1,Je=Ze>>>1,ct=[["ary",I],["bind",y],["bindKey",_],["curry",E],["curryRight",T],["flip",z],["partial",x],["partialRight",O],["rearg",B]],le="[object Arguments]",Nt="[object Array]",Dt="[object AsyncFunction]",et="[object Boolean]",tt="[object Date]",ft="[object DOMException]",R="[object Error]",D="[object Function]",L="[object GeneratorFunction]",K="[object Map]",j="[object Number]",X="[object Null]",Z="[object Object]",Y="[object Promise]",J="[object Proxy]",ne="[object RegExp]",$="[object Set]",he="[object String]",Oe="[object Symbol]",Ue="[object Undefined]",dt="[object WeakMap]",Qt="[object WeakSet]",Xt="[object ArrayBuffer]",rt="[object DataView]",Bt="[object Float32Array]",pr="[object Float64Array]",qa="[object Int8Array]",Ss="[object Int16Array]",Ts="[object Int32Array]",Cn="[object Uint8Array]",ca="[object Uint8ClampedArray]",nn="[object Uint16Array]",Nr="[object Uint32Array]",ur=/\b__p \+= '';/g,sk=/\b(__p \+=) '' \+/g,ok=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ay=/&(?:amp|lt|gt|quot|#39);/g,ky=/[&<>"']/g,lk=RegExp(Ay.source),uk=RegExp(ky.source),ck=/<%-([\s\S]+?)%>/g,fk=/<%([\s\S]+?)%>/g,Iy=/<%=([\s\S]+?)%>/g,dk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hk=/^\w*$/,pk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tp=/[\\^$.*+?()[\]{}|]/g,gk=RegExp(tp.source),rp=/^\s+/,mk=/\s/,yk=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,vk=/\{\n\/\* \[wrapped with (.+)\] \*/,_k=/,? & /,wk=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ek=/[()=,{}\[\]\/\s]/,Ck=/\\(\\)?/g,bk=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ry=/\w*$/,xk=/^[-+]0x[0-9a-f]+$/i,Sk=/^0b[01]+$/i,Tk=/^\[object .+?Constructor\]$/,Ak=/^0o[0-7]+$/i,kk=/^(?:0|[1-9]\d*)$/,Ik=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oc=/($^)/,Rk=/['\n\r\u2028\u2029\\]/g,Lc="\\ud800-\\udfff",Nk="\\u0300-\\u036f",Dk="\\ufe20-\\ufe2f",Bk="\\u20d0-\\u20ff",Ny=Nk+Dk+Bk,Dy="\\u2700-\\u27bf",By="a-z\\xdf-\\xf6\\xf8-\\xff",Ok="\\xac\\xb1\\xd7\\xf7",Lk="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Pk="\\u2000-\\u206f",Mk=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oy="A-Z\\xc0-\\xd6\\xd8-\\xde",Ly="\\ufe0e\\ufe0f",Py=Ok+Lk+Pk+Mk,np="['\u2019]",Uk="["+Lc+"]",My="["+Py+"]",Pc="["+Ny+"]",Uy="\\d+",Fk="["+Dy+"]",Fy="["+By+"]",qy="[^"+Lc+Py+Uy+Dy+By+Oy+"]",ip="\\ud83c[\\udffb-\\udfff]",qk="(?:"+Pc+"|"+ip+")",Gy="[^"+Lc+"]",ap="(?:\\ud83c[\\udde6-\\uddff]){2}",sp="[\\ud800-\\udbff][\\udc00-\\udfff]",ko="["+Oy+"]",Vy="\\u200d",jy="(?:"+Fy+"|"+qy+")",Gk="(?:"+ko+"|"+qy+")",Hy="(?:"+np+"(?:d|ll|m|re|s|t|ve))?",Ky="(?:"+np+"(?:D|LL|M|RE|S|T|VE))?",Yy=qk+"?",Wy="["+Ly+"]?",Vk="(?:"+Vy+"(?:"+[Gy,ap,sp].join("|")+")"+Wy+Yy+")*",jk="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Hk="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",zy=Wy+Yy+Vk,Kk="(?:"+[Fk,ap,sp].join("|")+")"+zy,Yk="(?:"+[Gy+Pc+"?",Pc,ap,sp,Uk].join("|")+")",Wk=RegExp(np,"g"),zk=RegExp(Pc,"g"),op=RegExp(ip+"(?="+ip+")|"+Yk+zy,"g"),Qk=RegExp([ko+"?"+Fy+"+"+Hy+"(?="+[My,ko,"$"].join("|")+")",Gk+"+"+Ky+"(?="+[My,ko+jy,"$"].join("|")+")",ko+"?"+jy+"+"+Hy,ko+"+"+Ky,Hk,jk,Uy,Kk].join("|"),"g"),Xk=RegExp("["+Vy+Lc+Ny+Ly+"]"),Jk=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zk=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$k=-1,sr={};sr[Bt]=sr[pr]=sr[qa]=sr[Ss]=sr[Ts]=sr[Cn]=sr[ca]=sr[nn]=sr[Nr]=!0,sr[le]=sr[Nt]=sr[Xt]=sr[et]=sr[rt]=sr[tt]=sr[R]=sr[D]=sr[K]=sr[j]=sr[Z]=sr[ne]=sr[$]=sr[he]=sr[dt]=!1;var tr={};tr[le]=tr[Nt]=tr[Xt]=tr[rt]=tr[et]=tr[tt]=tr[Bt]=tr[pr]=tr[qa]=tr[Ss]=tr[Ts]=tr[K]=tr[j]=tr[Z]=tr[ne]=tr[$]=tr[he]=tr[Oe]=tr[Cn]=tr[ca]=tr[nn]=tr[Nr]=!0,tr[R]=tr[D]=tr[dt]=!1;var eI={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},tI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rI={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nI={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},iI=parseFloat,aI=parseInt,Qy=typeof global=="object"&&global&&global.Object===Object&&global,sI=typeof self=="object"&&self&&self.Object===Object&&self,Ur=Qy||sI||Function("return this")(),lp=typeof Nl=="object"&&Nl&&!Nl.nodeType&&Nl,As=lp&&typeof lc=="object"&&lc&&!lc.nodeType&&lc,Xy=As&&As.exports===lp,up=Xy&&Qy.process,Kn=function(){try{var W=As&&As.require&&As.require("util").types;return W||up&&up.binding&&up.binding("util")}catch(fe){}}(),Jy=Kn&&Kn.isArrayBuffer,Zy=Kn&&Kn.isDate,$y=Kn&&Kn.isMap,ev=Kn&&Kn.isRegExp,tv=Kn&&Kn.isSet,rv=Kn&&Kn.isTypedArray;function Bn(W,fe,se){switch(se.length){case 0:return W.call(fe);case 1:return W.call(fe,se[0]);case 2:return W.call(fe,se[0],se[1]);case 3:return W.call(fe,se[0],se[1],se[2])}return W.apply(fe,se)}function oI(W,fe,se,De){for(var $e=-1,jt=W==null?0:W.length;++$e<jt;){var Dr=W[$e];fe(De,Dr,se(Dr),W)}return De}function Yn(W,fe){for(var se=-1,De=W==null?0:W.length;++se<De&&fe(W[se],se,W)!==!1;);return W}function lI(W,fe){for(var se=W==null?0:W.length;se--&&fe(W[se],se,W)!==!1;);return W}function nv(W,fe){for(var se=-1,De=W==null?0:W.length;++se<De;)if(!fe(W[se],se,W))return!1;return!0}function Ga(W,fe){for(var se=-1,De=W==null?0:W.length,$e=0,jt=[];++se<De;){var Dr=W[se];fe(Dr,se,W)&&(jt[$e++]=Dr)}return jt}function Mc(W,fe){var se=W==null?0:W.length;return!!se&&Io(W,fe,0)>-1}function cp(W,fe,se){for(var De=-1,$e=W==null?0:W.length;++De<$e;)if(se(fe,W[De]))return!0;return!1}function cr(W,fe){for(var se=-1,De=W==null?0:W.length,$e=Array(De);++se<De;)$e[se]=fe(W[se],se,W);return $e}function Va(W,fe){for(var se=-1,De=fe.length,$e=W.length;++se<De;)W[$e+se]=fe[se];return W}function fp(W,fe,se,De){var $e=-1,jt=W==null?0:W.length;for(De&&jt&&(se=W[++$e]);++$e<jt;)se=fe(se,W[$e],$e,W);return se}function uI(W,fe,se,De){var $e=W==null?0:W.length;for(De&&$e&&(se=W[--$e]);$e--;)se=fe(se,W[$e],$e,W);return se}function dp(W,fe){for(var se=-1,De=W==null?0:W.length;++se<De;)if(fe(W[se],se,W))return!0;return!1}var cI=hp("length");function fI(W){return W.split("")}function dI(W){return W.match(wk)||[]}function iv(W,fe,se){var De;return se(W,function($e,jt,Dr){if(fe($e,jt,Dr))return De=jt,!1}),De}function Uc(W,fe,se,De){for(var $e=W.length,jt=se+(De?1:-1);De?jt--:++jt<$e;)if(fe(W[jt],jt,W))return jt;return-1}function Io(W,fe,se){return fe===fe?xI(W,fe,se):Uc(W,av,se)}function hI(W,fe,se,De){for(var $e=se-1,jt=W.length;++$e<jt;)if(De(W[$e],fe))return $e;return-1}function av(W){return W!==W}function sv(W,fe){var se=W==null?0:W.length;return se?gp(W,fe)/se:Fe}function hp(W){return function(fe){return fe==null?t:fe[W]}}function pp(W){return function(fe){return W==null?t:W[fe]}}function ov(W,fe,se,De,$e){return $e(W,function(jt,Dr,Zt){se=De?(De=!1,jt):fe(se,jt,Dr,Zt)}),se}function pI(W,fe){var se=W.length;for(W.sort(fe);se--;)W[se]=W[se].value;return W}function gp(W,fe){for(var se,De=-1,$e=W.length;++De<$e;){var jt=fe(W[De]);jt!==t&&(se=se===t?jt:se+jt)}return se}function mp(W,fe){for(var se=-1,De=Array(W);++se<W;)De[se]=fe(se);return De}function gI(W,fe){return cr(fe,function(se){return[se,W[se]]})}function lv(W){return W&&W.slice(0,dv(W)+1).replace(rp,"")}function On(W){return function(fe){return W(fe)}}function yp(W,fe){return cr(fe,function(se){return W[se]})}function Xl(W,fe){return W.has(fe)}function uv(W,fe){for(var se=-1,De=W.length;++se<De&&Io(fe,W[se],0)>-1;);return se}function cv(W,fe){for(var se=W.length;se--&&Io(fe,W[se],0)>-1;);return se}function mI(W,fe){for(var se=W.length,De=0;se--;)W[se]===fe&&++De;return De}var yI=pp(eI),vI=pp(tI);function _I(W){return"\\"+nI[W]}function wI(W,fe){return W==null?t:W[fe]}function Ro(W){return Xk.test(W)}function EI(W){return Jk.test(W)}function CI(W){for(var fe,se=[];!(fe=W.next()).done;)se.push(fe.value);return se}function vp(W){var fe=-1,se=Array(W.size);return W.forEach(function(De,$e){se[++fe]=[$e,De]}),se}function fv(W,fe){return function(se){return W(fe(se))}}function ja(W,fe){for(var se=-1,De=W.length,$e=0,jt=[];++se<De;){var Dr=W[se];(Dr===fe||Dr===u)&&(W[se]=u,jt[$e++]=se)}return jt}function Fc(W){var fe=-1,se=Array(W.size);return W.forEach(function(De){se[++fe]=De}),se}function bI(W){var fe=-1,se=Array(W.size);return W.forEach(function(De){se[++fe]=[De,De]}),se}function xI(W,fe,se){for(var De=se-1,$e=W.length;++De<$e;)if(W[De]===fe)return De;return-1}function SI(W,fe,se){for(var De=se+1;De--;)if(W[De]===fe)return De;return De}function No(W){return Ro(W)?AI(W):cI(W)}function mi(W){return Ro(W)?kI(W):fI(W)}function dv(W){for(var fe=W.length;fe--&&mk.test(W.charAt(fe)););return fe}var TI=pp(rI);function AI(W){for(var fe=op.lastIndex=0;op.test(W);)++fe;return fe}function kI(W){return W.match(op)||[]}function II(W){return W.match(Qk)||[]}var RI=function W(fe){fe=fe==null?Ur:Ha.defaults(Ur.Object(),fe,Ha.pick(Ur,Zk));var se=fe.Array,De=fe.Date,$e=fe.Error,jt=fe.Function,Dr=fe.Math,Zt=fe.Object,_p=fe.RegExp,NI=fe.String,Wn=fe.TypeError,qc=se.prototype,DI=jt.prototype,Do=Zt.prototype,Gc=fe["__core-js_shared__"],Vc=DI.toString,Wt=Do.hasOwnProperty,BI=0,hv=function(){var o=/[^.]+$/.exec(Gc&&Gc.keys&&Gc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),jc=Do.toString,OI=Vc.call(Zt),LI=Ur._,PI=_p("^"+Vc.call(Wt).replace(tp,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hc=Xy?fe.Buffer:t,Ka=fe.Symbol,Kc=fe.Uint8Array,pv=Hc?Hc.allocUnsafe:t,Yc=fv(Zt.getPrototypeOf,Zt),gv=Zt.create,mv=Do.propertyIsEnumerable,Wc=qc.splice,yv=Ka?Ka.isConcatSpreadable:t,Jl=Ka?Ka.iterator:t,ks=Ka?Ka.toStringTag:t,zc=function(){try{var o=Bs(Zt,"defineProperty");return o({},"",{}),o}catch(c){}}(),MI=fe.clearTimeout!==Ur.clearTimeout&&fe.clearTimeout,UI=De&&De.now!==Ur.Date.now&&De.now,FI=fe.setTimeout!==Ur.setTimeout&&fe.setTimeout,Qc=Dr.ceil,Xc=Dr.floor,wp=Zt.getOwnPropertySymbols,qI=Hc?Hc.isBuffer:t,vv=fe.isFinite,GI=qc.join,VI=fv(Zt.keys,Zt),Br=Dr.max,an=Dr.min,jI=De.now,HI=fe.parseInt,_v=Dr.random,KI=qc.reverse,Ep=Bs(fe,"DataView"),Zl=Bs(fe,"Map"),Cp=Bs(fe,"Promise"),Bo=Bs(fe,"Set"),$l=Bs(fe,"WeakMap"),eu=Bs(Zt,"create"),Jc=$l&&new $l,Oo={},YI=Os(Ep),WI=Os(Zl),zI=Os(Cp),QI=Os(Bo),XI=Os($l),Zc=Ka?Ka.prototype:t,tu=Zc?Zc.valueOf:t,wv=Zc?Zc.toString:t;function k(o){if(_r(o)&&!nt(o)&&!(o instanceof kt)){if(o instanceof zn)return o;if(Wt.call(o,"__wrapped__"))return E1(o)}return new zn(o)}var Lo=function(){function o(){}return function(c){if(!gr(c))return{};if(gv)return gv(c);o.prototype=c;var p=new o;return o.prototype=t,p}}();function $c(){}function zn(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}k.templateSettings={escape:ck,evaluate:fk,interpolate:Iy,variable:"",imports:{_:k}},k.prototype=$c.prototype,k.prototype.constructor=k,zn.prototype=Lo($c.prototype),zn.prototype.constructor=zn;function kt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ze,this.__views__=[]}function JI(){var o=new kt(this.__wrapped__);return o.__actions__=bn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=bn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=bn(this.__views__),o}function ZI(){if(this.__filtered__){var o=new kt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function $I(){var o=this.__wrapped__.value(),c=this.__dir__,p=nt(o),v=c<0,C=p?o.length:0,N=fN(0,C,this.__views__),P=N.start,G=N.end,Q=G-P,pe=v?G:P-1,ge=this.__iteratees__,we=ge.length,Ae=0,Pe=an(Q,this.__takeCount__);if(!p||!v&&C==Q&&Pe==Q)return Hv(o,this.__actions__);var Ye=[];e:for(;Q--&&Ae<Pe;){pe+=c;for(var gt=-1,We=o[pe];++gt<we;){var bt=ge[gt],Ot=bt.iteratee,Mn=bt.type,hn=Ot(We);if(Mn==be)We=hn;else if(!hn){if(Mn==ye)continue e;break e}}Ye[Ae++]=We}return Ye}kt.prototype=Lo($c.prototype),kt.prototype.constructor=kt;function Is(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function eR(){this.__data__=eu?eu(null):{},this.size=0}function tR(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function rR(o){var c=this.__data__;if(eu){var p=c[o];return p===s?t:p}return Wt.call(c,o)?c[o]:t}function nR(o){var c=this.__data__;return eu?c[o]!==t:Wt.call(c,o)}function iR(o,c){var p=this.__data__;return this.size+=this.has(o)?0:1,p[o]=eu&&c===t?s:c,this}Is.prototype.clear=eR,Is.prototype.delete=tR,Is.prototype.get=rR,Is.prototype.has=nR,Is.prototype.set=iR;function fa(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function aR(){this.__data__=[],this.size=0}function sR(o){var c=this.__data__,p=ef(c,o);if(p<0)return!1;var v=c.length-1;return p==v?c.pop():Wc.call(c,p,1),--this.size,!0}function oR(o){var c=this.__data__,p=ef(c,o);return p<0?t:c[p][1]}function lR(o){return ef(this.__data__,o)>-1}function uR(o,c){var p=this.__data__,v=ef(p,o);return v<0?(++this.size,p.push([o,c])):p[v][1]=c,this}fa.prototype.clear=aR,fa.prototype.delete=sR,fa.prototype.get=oR,fa.prototype.has=lR,fa.prototype.set=uR;function da(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function cR(){this.size=0,this.__data__={hash:new Is,map:new(Zl||fa),string:new Is}}function fR(o){var c=hf(this,o).delete(o);return this.size-=c?1:0,c}function dR(o){return hf(this,o).get(o)}function hR(o){return hf(this,o).has(o)}function pR(o,c){var p=hf(this,o),v=p.size;return p.set(o,c),this.size+=p.size==v?0:1,this}da.prototype.clear=cR,da.prototype.delete=fR,da.prototype.get=dR,da.prototype.has=hR,da.prototype.set=pR;function Rs(o){var c=-1,p=o==null?0:o.length;for(this.__data__=new da;++c<p;)this.add(o[c])}function gR(o){return this.__data__.set(o,s),this}function mR(o){return this.__data__.has(o)}Rs.prototype.add=Rs.prototype.push=gR,Rs.prototype.has=mR;function yi(o){var c=this.__data__=new fa(o);this.size=c.size}function yR(){this.__data__=new fa,this.size=0}function vR(o){var c=this.__data__,p=c.delete(o);return this.size=c.size,p}function _R(o){return this.__data__.get(o)}function wR(o){return this.__data__.has(o)}function ER(o,c){var p=this.__data__;if(p instanceof fa){var v=p.__data__;if(!Zl||v.length<r-1)return v.push([o,c]),this.size=++p.size,this;p=this.__data__=new da(v)}return p.set(o,c),this.size=p.size,this}yi.prototype.clear=yR,yi.prototype.delete=vR,yi.prototype.get=_R,yi.prototype.has=wR,yi.prototype.set=ER;function Ev(o,c){var p=nt(o),v=!p&&Ls(o),C=!p&&!v&&Xa(o),N=!p&&!v&&!C&&Fo(o),P=p||v||C||N,G=P?mp(o.length,NI):[],Q=G.length;for(var pe in o)(c||Wt.call(o,pe))&&!(P&&(pe=="length"||C&&(pe=="offset"||pe=="parent")||N&&(pe=="buffer"||pe=="byteLength"||pe=="byteOffset")||ma(pe,Q)))&&G.push(pe);return G}function Cv(o){var c=o.length;return c?o[Bp(0,c-1)]:t}function CR(o,c){return pf(bn(o),Ns(c,0,o.length))}function bR(o){return pf(bn(o))}function bp(o,c,p){(p!==t&&!vi(o[c],p)||p===t&&!(c in o))&&ha(o,c,p)}function ru(o,c,p){var v=o[c];(!(Wt.call(o,c)&&vi(v,p))||p===t&&!(c in o))&&ha(o,c,p)}function ef(o,c){for(var p=o.length;p--;)if(vi(o[p][0],c))return p;return-1}function xR(o,c,p,v){return Ya(o,function(C,N,P){c(v,C,p(C),P)}),v}function bv(o,c){return o&&Fi(c,Fr(c),o)}function SR(o,c){return o&&Fi(c,Sn(c),o)}function ha(o,c,p){c=="__proto__"&&zc?zc(o,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):o[c]=p}function xp(o,c){for(var p=-1,v=c.length,C=se(v),N=o==null;++p<v;)C[p]=N?t:i0(o,c[p]);return C}function Ns(o,c,p){return o===o&&(p!==t&&(o=o<=p?o:p),c!==t&&(o=o>=c?o:c)),o}function Qn(o,c,p,v,C,N){var P,G=c&f,Q=c&d,pe=c&h;if(p&&(P=C?p(o,v,C,N):p(o)),P!==t)return P;if(!gr(o))return o;var ge=nt(o);if(ge){if(P=hN(o),!G)return bn(o,P)}else{var we=sn(o),Ae=we==D||we==L;if(Xa(o))return Wv(o,G);if(we==Z||we==le||Ae&&!C){if(P=Q||Ae?{}:d1(o),!G)return Q?rN(o,SR(P,o)):tN(o,bv(P,o))}else{if(!tr[we])return C?o:{};P=pN(o,we,G)}}N||(N=new yi);var Pe=N.get(o);if(Pe)return Pe;N.set(o,P),G1(o)?o.forEach(function(We){P.add(Qn(We,c,p,We,o,N))}):F1(o)&&o.forEach(function(We,bt){P.set(bt,Qn(We,c,p,bt,o,N))});var Ye=pe?Q?Hp:jp:Q?Sn:Fr,gt=ge?t:Ye(o);return Yn(gt||o,function(We,bt){gt&&(bt=We,We=o[bt]),ru(P,bt,Qn(We,c,p,bt,o,N))}),P}function TR(o){var c=Fr(o);return function(p){return xv(p,o,c)}}function xv(o,c,p){var v=p.length;if(o==null)return!v;for(o=Zt(o);v--;){var C=p[v],N=c[C],P=o[C];if(P===t&&!(C in o)||!N(P))return!1}return!0}function Sv(o,c,p){if(typeof o!="function")throw new Wn(i);return uu(function(){o.apply(t,p)},c)}function nu(o,c,p,v){var C=-1,N=Mc,P=!0,G=o.length,Q=[],pe=c.length;if(!G)return Q;p&&(c=cr(c,On(p))),v?(N=cp,P=!1):c.length>=r&&(N=Xl,P=!1,c=new Rs(c));e:for(;++C<G;){var ge=o[C],we=p==null?ge:p(ge);if(ge=v||ge!==0?ge:0,P&&we===we){for(var Ae=pe;Ae--;)if(c[Ae]===we)continue e;Q.push(ge)}else N(c,we,v)||Q.push(ge)}return Q}var Ya=Zv(Ui),Tv=Zv(Tp,!0);function AR(o,c){var p=!0;return Ya(o,function(v,C,N){return p=!!c(v,C,N),p}),p}function tf(o,c,p){for(var v=-1,C=o.length;++v<C;){var N=o[v],P=c(N);if(P!=null&&(G===t?P===P&&!Pn(P):p(P,G)))var G=P,Q=N}return Q}function kR(o,c,p,v){var C=o.length;for(p=ht(p),p<0&&(p=-p>C?0:C+p),v=v===t||v>C?C:ht(v),v<0&&(v+=C),v=p>v?0:j1(v);p<v;)o[p++]=c;return o}function Av(o,c){var p=[];return Ya(o,function(v,C,N){c(v,C,N)&&p.push(v)}),p}function Qr(o,c,p,v,C){var N=-1,P=o.length;for(p||(p=mN),C||(C=[]);++N<P;){var G=o[N];c>0&&p(G)?c>1?Qr(G,c-1,p,v,C):Va(C,G):v||(C[C.length]=G)}return C}var Sp=$v(),kv=$v(!0);function Ui(o,c){return o&&Sp(o,c,Fr)}function Tp(o,c){return o&&kv(o,c,Fr)}function rf(o,c){return Ga(c,function(p){return ya(o[p])})}function Ds(o,c){c=za(c,o);for(var p=0,v=c.length;o!=null&&p<v;)o=o[qi(c[p++])];return p&&p==v?o:t}function Iv(o,c,p){var v=c(o);return nt(o)?v:Va(v,p(o))}function fn(o){return o==null?o===t?Ue:X:ks&&ks in Zt(o)?cN(o):bN(o)}function Ap(o,c){return o>c}function IR(o,c){return o!=null&&Wt.call(o,c)}function RR(o,c){return o!=null&&c in Zt(o)}function NR(o,c,p){return o>=an(c,p)&&o<Br(c,p)}function kp(o,c,p){for(var v=p?cp:Mc,C=o[0].length,N=o.length,P=N,G=se(N),Q=1/0,pe=[];P--;){var ge=o[P];P&&c&&(ge=cr(ge,On(c))),Q=an(ge.length,Q),G[P]=!p&&(c||C>=120&&ge.length>=120)?new Rs(P&&ge):t}ge=o[0];var we=-1,Ae=G[0];e:for(;++we<C&&pe.length<Q;){var Pe=ge[we],Ye=c?c(Pe):Pe;if(Pe=p||Pe!==0?Pe:0,!(Ae?Xl(Ae,Ye):v(pe,Ye,p))){for(P=N;--P;){var gt=G[P];if(!(gt?Xl(gt,Ye):v(o[P],Ye,p)))continue e}Ae&&Ae.push(Ye),pe.push(Pe)}}return pe}function DR(o,c,p,v){return Ui(o,function(C,N,P){c(v,p(C),N,P)}),v}function iu(o,c,p){c=za(c,o),o=m1(o,c);var v=o==null?o:o[qi(Jn(c))];return v==null?t:Bn(v,o,p)}function Rv(o){return _r(o)&&fn(o)==le}function BR(o){return _r(o)&&fn(o)==Xt}function OR(o){return _r(o)&&fn(o)==tt}function au(o,c,p,v,C){return o===c?!0:o==null||c==null||!_r(o)&&!_r(c)?o!==o&&c!==c:LR(o,c,p,v,au,C)}function LR(o,c,p,v,C,N){var P=nt(o),G=nt(c),Q=P?Nt:sn(o),pe=G?Nt:sn(c);Q=Q==le?Z:Q,pe=pe==le?Z:pe;var ge=Q==Z,we=pe==Z,Ae=Q==pe;if(Ae&&Xa(o)){if(!Xa(c))return!1;P=!0,ge=!1}if(Ae&&!ge)return N||(N=new yi),P||Fo(o)?u1(o,c,p,v,C,N):lN(o,c,Q,p,v,C,N);if(!(p&g)){var Pe=ge&&Wt.call(o,"__wrapped__"),Ye=we&&Wt.call(c,"__wrapped__");if(Pe||Ye){var gt=Pe?o.value():o,We=Ye?c.value():c;return N||(N=new yi),C(gt,We,p,v,N)}}return Ae?(N||(N=new yi),uN(o,c,p,v,C,N)):!1}function PR(o){return _r(o)&&sn(o)==K}function Ip(o,c,p,v){var C=p.length,N=C,P=!v;if(o==null)return!N;for(o=Zt(o);C--;){var G=p[C];if(P&&G[2]?G[1]!==o[G[0]]:!(G[0]in o))return!1}for(;++C<N;){G=p[C];var Q=G[0],pe=o[Q],ge=G[1];if(P&&G[2]){if(pe===t&&!(Q in o))return!1}else{var we=new yi;if(v)var Ae=v(pe,ge,Q,o,c,we);if(!(Ae===t?au(ge,pe,g|m,v,we):Ae))return!1}}return!0}function Nv(o){if(!gr(o)||vN(o))return!1;var c=ya(o)?PI:Tk;return c.test(Os(o))}function MR(o){return _r(o)&&fn(o)==ne}function UR(o){return _r(o)&&sn(o)==$}function FR(o){return _r(o)&&wf(o.length)&&!!sr[fn(o)]}function Dv(o){return typeof o=="function"?o:o==null?Tn:typeof o=="object"?nt(o)?Lv(o[0],o[1]):Ov(o):e_(o)}function Rp(o){if(!lu(o))return VI(o);var c=[];for(var p in Zt(o))Wt.call(o,p)&&p!="constructor"&&c.push(p);return c}function qR(o){if(!gr(o))return CN(o);var c=lu(o),p=[];for(var v in o)v=="constructor"&&(c||!Wt.call(o,v))||p.push(v);return p}function Np(o,c){return o<c}function Bv(o,c){var p=-1,v=xn(o)?se(o.length):[];return Ya(o,function(C,N,P){v[++p]=c(C,N,P)}),v}function Ov(o){var c=Yp(o);return c.length==1&&c[0][2]?p1(c[0][0],c[0][1]):function(p){return p===o||Ip(p,o,c)}}function Lv(o,c){return zp(o)&&h1(c)?p1(qi(o),c):function(p){var v=i0(p,o);return v===t&&v===c?a0(p,o):au(c,v,g|m)}}function nf(o,c,p,v,C){o!==c&&Sp(c,function(N,P){if(C||(C=new yi),gr(N))GR(o,c,P,p,nf,v,C);else{var G=v?v(Xp(o,P),N,P+"",o,c,C):t;G===t&&(G=N),bp(o,P,G)}},Sn)}function GR(o,c,p,v,C,N,P){var G=Xp(o,p),Q=Xp(c,p),pe=P.get(Q);if(pe){bp(o,p,pe);return}var ge=N?N(G,Q,p+"",o,c,P):t,we=ge===t;if(we){var Ae=nt(Q),Pe=!Ae&&Xa(Q),Ye=!Ae&&!Pe&&Fo(Q);ge=Q,Ae||Pe||Ye?nt(G)?ge=G:Cr(G)?ge=bn(G):Pe?(we=!1,ge=Wv(Q,!0)):Ye?(we=!1,ge=zv(Q,!0)):ge=[]:cu(Q)||Ls(Q)?(ge=G,Ls(G)?ge=H1(G):(!gr(G)||ya(G))&&(ge=d1(Q))):we=!1}we&&(P.set(Q,ge),C(ge,Q,v,N,P),P.delete(Q)),bp(o,p,ge)}function Pv(o,c){var p=o.length;if(!!p)return c+=c<0?p:0,ma(c,p)?o[c]:t}function Mv(o,c,p){c.length?c=cr(c,function(N){return nt(N)?function(P){return Ds(P,N.length===1?N[0]:N)}:N}):c=[Tn];var v=-1;c=cr(c,On(He()));var C=Bv(o,function(N,P,G){var Q=cr(c,function(pe){return pe(N)});return{criteria:Q,index:++v,value:N}});return pI(C,function(N,P){return eN(N,P,p)})}function VR(o,c){return Uv(o,c,function(p,v){return a0(o,v)})}function Uv(o,c,p){for(var v=-1,C=c.length,N={};++v<C;){var P=c[v],G=Ds(o,P);p(G,P)&&su(N,za(P,o),G)}return N}function jR(o){return function(c){return Ds(c,o)}}function Dp(o,c,p,v){var C=v?hI:Io,N=-1,P=c.length,G=o;for(o===c&&(c=bn(c)),p&&(G=cr(o,On(p)));++N<P;)for(var Q=0,pe=c[N],ge=p?p(pe):pe;(Q=C(G,ge,Q,v))>-1;)G!==o&&Wc.call(G,Q,1),Wc.call(o,Q,1);return o}function Fv(o,c){for(var p=o?c.length:0,v=p-1;p--;){var C=c[p];if(p==v||C!==N){var N=C;ma(C)?Wc.call(o,C,1):Pp(o,C)}}return o}function Bp(o,c){return o+Xc(_v()*(c-o+1))}function HR(o,c,p,v){for(var C=-1,N=Br(Qc((c-o)/(p||1)),0),P=se(N);N--;)P[v?N:++C]=o,o+=p;return P}function Op(o,c){var p="";if(!o||c<1||c>me)return p;do c%2&&(p+=o),c=Xc(c/2),c&&(o+=o);while(c);return p}function vt(o,c){return Jp(g1(o,c,Tn),o+"")}function KR(o){return Cv(qo(o))}function YR(o,c){var p=qo(o);return pf(p,Ns(c,0,p.length))}function su(o,c,p,v){if(!gr(o))return o;c=za(c,o);for(var C=-1,N=c.length,P=N-1,G=o;G!=null&&++C<N;){var Q=qi(c[C]),pe=p;if(Q==="__proto__"||Q==="constructor"||Q==="prototype")return o;if(C!=P){var ge=G[Q];pe=v?v(ge,Q,G):t,pe===t&&(pe=gr(ge)?ge:ma(c[C+1])?[]:{})}ru(G,Q,pe),G=G[Q]}return o}var qv=Jc?function(o,c){return Jc.set(o,c),o}:Tn,WR=zc?function(o,c){return zc(o,"toString",{configurable:!0,enumerable:!1,value:o0(c),writable:!0})}:Tn;function zR(o){return pf(qo(o))}function Xn(o,c,p){var v=-1,C=o.length;c<0&&(c=-c>C?0:C+c),p=p>C?C:p,p<0&&(p+=C),C=c>p?0:p-c>>>0,c>>>=0;for(var N=se(C);++v<C;)N[v]=o[v+c];return N}function QR(o,c){var p;return Ya(o,function(v,C,N){return p=c(v,C,N),!p}),!!p}function af(o,c,p){var v=0,C=o==null?v:o.length;if(typeof c=="number"&&c===c&&C<=Je){for(;v<C;){var N=v+C>>>1,P=o[N];P!==null&&!Pn(P)&&(p?P<=c:P<c)?v=N+1:C=N}return C}return Lp(o,c,Tn,p)}function Lp(o,c,p,v){var C=0,N=o==null?0:o.length;if(N===0)return 0;c=p(c);for(var P=c!==c,G=c===null,Q=Pn(c),pe=c===t;C<N;){var ge=Xc((C+N)/2),we=p(o[ge]),Ae=we!==t,Pe=we===null,Ye=we===we,gt=Pn(we);if(P)var We=v||Ye;else pe?We=Ye&&(v||Ae):G?We=Ye&&Ae&&(v||!Pe):Q?We=Ye&&Ae&&!Pe&&(v||!gt):Pe||gt?We=!1:We=v?we<=c:we<c;We?C=ge+1:N=ge}return an(N,ut)}function Gv(o,c){for(var p=-1,v=o.length,C=0,N=[];++p<v;){var P=o[p],G=c?c(P):P;if(!p||!vi(G,Q)){var Q=G;N[C++]=P===0?0:P}}return N}function Vv(o){return typeof o=="number"?o:Pn(o)?Fe:+o}function Ln(o){if(typeof o=="string")return o;if(nt(o))return cr(o,Ln)+"";if(Pn(o))return wv?wv.call(o):"";var c=o+"";return c=="0"&&1/o==-Ne?"-0":c}function Wa(o,c,p){var v=-1,C=Mc,N=o.length,P=!0,G=[],Q=G;if(p)P=!1,C=cp;else if(N>=r){var pe=c?null:sN(o);if(pe)return Fc(pe);P=!1,C=Xl,Q=new Rs}else Q=c?[]:G;e:for(;++v<N;){var ge=o[v],we=c?c(ge):ge;if(ge=p||ge!==0?ge:0,P&&we===we){for(var Ae=Q.length;Ae--;)if(Q[Ae]===we)continue e;c&&Q.push(we),G.push(ge)}else C(Q,we,p)||(Q!==G&&Q.push(we),G.push(ge))}return G}function Pp(o,c){return c=za(c,o),o=m1(o,c),o==null||delete o[qi(Jn(c))]}function jv(o,c,p,v){return su(o,c,p(Ds(o,c)),v)}function sf(o,c,p,v){for(var C=o.length,N=v?C:-1;(v?N--:++N<C)&&c(o[N],N,o););return p?Xn(o,v?0:N,v?N+1:C):Xn(o,v?N+1:0,v?C:N)}function Hv(o,c){var p=o;return p instanceof kt&&(p=p.value()),fp(c,function(v,C){return C.func.apply(C.thisArg,Va([v],C.args))},p)}function Mp(o,c,p){var v=o.length;if(v<2)return v?Wa(o[0]):[];for(var C=-1,N=se(v);++C<v;)for(var P=o[C],G=-1;++G<v;)G!=C&&(N[C]=nu(N[C]||P,o[G],c,p));return Wa(Qr(N,1),c,p)}function Kv(o,c,p){for(var v=-1,C=o.length,N=c.length,P={};++v<C;){var G=v<N?c[v]:t;p(P,o[v],G)}return P}function Up(o){return Cr(o)?o:[]}function Fp(o){return typeof o=="function"?o:Tn}function za(o,c){return nt(o)?o:zp(o,c)?[o]:w1(Ht(o))}var XR=vt;function Qa(o,c,p){var v=o.length;return p=p===t?v:p,!c&&p>=v?o:Xn(o,c,p)}var Yv=MI||function(o){return Ur.clearTimeout(o)};function Wv(o,c){if(c)return o.slice();var p=o.length,v=pv?pv(p):new o.constructor(p);return o.copy(v),v}function qp(o){var c=new o.constructor(o.byteLength);return new Kc(c).set(new Kc(o)),c}function JR(o,c){var p=c?qp(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.byteLength)}function ZR(o){var c=new o.constructor(o.source,Ry.exec(o));return c.lastIndex=o.lastIndex,c}function $R(o){return tu?Zt(tu.call(o)):{}}function zv(o,c){var p=c?qp(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.length)}function Qv(o,c){if(o!==c){var p=o!==t,v=o===null,C=o===o,N=Pn(o),P=c!==t,G=c===null,Q=c===c,pe=Pn(c);if(!G&&!pe&&!N&&o>c||N&&P&&Q&&!G&&!pe||v&&P&&Q||!p&&Q||!C)return 1;if(!v&&!N&&!pe&&o<c||pe&&p&&C&&!v&&!N||G&&p&&C||!P&&C||!Q)return-1}return 0}function eN(o,c,p){for(var v=-1,C=o.criteria,N=c.criteria,P=C.length,G=p.length;++v<P;){var Q=Qv(C[v],N[v]);if(Q){if(v>=G)return Q;var pe=p[v];return Q*(pe=="desc"?-1:1)}}return o.index-c.index}function Xv(o,c,p,v){for(var C=-1,N=o.length,P=p.length,G=-1,Q=c.length,pe=Br(N-P,0),ge=se(Q+pe),we=!v;++G<Q;)ge[G]=c[G];for(;++C<P;)(we||C<N)&&(ge[p[C]]=o[C]);for(;pe--;)ge[G++]=o[C++];return ge}function Jv(o,c,p,v){for(var C=-1,N=o.length,P=-1,G=p.length,Q=-1,pe=c.length,ge=Br(N-G,0),we=se(ge+pe),Ae=!v;++C<ge;)we[C]=o[C];for(var Pe=C;++Q<pe;)we[Pe+Q]=c[Q];for(;++P<G;)(Ae||C<N)&&(we[Pe+p[P]]=o[C++]);return we}function bn(o,c){var p=-1,v=o.length;for(c||(c=se(v));++p<v;)c[p]=o[p];return c}function Fi(o,c,p,v){var C=!p;p||(p={});for(var N=-1,P=c.length;++N<P;){var G=c[N],Q=v?v(p[G],o[G],G,p,o):t;Q===t&&(Q=o[G]),C?ha(p,G,Q):ru(p,G,Q)}return p}function tN(o,c){return Fi(o,Wp(o),c)}function rN(o,c){return Fi(o,c1(o),c)}function of(o,c){return function(p,v){var C=nt(p)?oI:xR,N=c?c():{};return C(p,o,He(v,2),N)}}function Po(o){return vt(function(c,p){var v=-1,C=p.length,N=C>1?p[C-1]:t,P=C>2?p[2]:t;for(N=o.length>3&&typeof N=="function"?(C--,N):t,P&&dn(p[0],p[1],P)&&(N=C<3?t:N,C=1),c=Zt(c);++v<C;){var G=p[v];G&&o(c,G,v,N)}return c})}function Zv(o,c){return function(p,v){if(p==null)return p;if(!xn(p))return o(p,v);for(var C=p.length,N=c?C:-1,P=Zt(p);(c?N--:++N<C)&&v(P[N],N,P)!==!1;);return p}}function $v(o){return function(c,p,v){for(var C=-1,N=Zt(c),P=v(c),G=P.length;G--;){var Q=P[o?G:++C];if(p(N[Q],Q,N)===!1)break}return c}}function nN(o,c,p){var v=c&y,C=ou(o);function N(){var P=this&&this!==Ur&&this instanceof N?C:o;return P.apply(v?p:this,arguments)}return N}function e1(o){return function(c){c=Ht(c);var p=Ro(c)?mi(c):t,v=p?p[0]:c.charAt(0),C=p?Qa(p,1).join(""):c.slice(1);return v[o]()+C}}function Mo(o){return function(c){return fp(Z1(J1(c).replace(Wk,"")),o,"")}}function ou(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=Lo(o.prototype),v=o.apply(p,c);return gr(v)?v:p}}function iN(o,c,p){var v=ou(o);function C(){for(var N=arguments.length,P=se(N),G=N,Q=Uo(C);G--;)P[G]=arguments[G];var pe=N<3&&P[0]!==Q&&P[N-1]!==Q?[]:ja(P,Q);if(N-=pe.length,N<p)return a1(o,c,lf,C.placeholder,t,P,pe,t,t,p-N);var ge=this&&this!==Ur&&this instanceof C?v:o;return Bn(ge,this,P)}return C}function t1(o){return function(c,p,v){var C=Zt(c);if(!xn(c)){var N=He(p,3);c=Fr(c),p=function(G){return N(C[G],G,C)}}var P=o(c,p,v);return P>-1?C[N?c[P]:P]:t}}function r1(o){return ga(function(c){var p=c.length,v=p,C=zn.prototype.thru;for(o&&c.reverse();v--;){var N=c[v];if(typeof N!="function")throw new Wn(i);if(C&&!P&&df(N)=="wrapper")var P=new zn([],!0)}for(v=P?v:p;++v<p;){N=c[v];var G=df(N),Q=G=="wrapper"?Kp(N):t;Q&&Qp(Q[0])&&Q[1]==(I|E|x|B)&&!Q[4].length&&Q[9]==1?P=P[df(Q[0])].apply(P,Q[3]):P=N.length==1&&Qp(N)?P[G]():P.thru(N)}return function(){var pe=arguments,ge=pe[0];if(P&&pe.length==1&&nt(ge))return P.plant(ge).value();for(var we=0,Ae=p?c[we].apply(this,pe):ge;++we<p;)Ae=c[we].call(this,Ae);return Ae}})}function lf(o,c,p,v,C,N,P,G,Q,pe){var ge=c&I,we=c&y,Ae=c&_,Pe=c&(E|T),Ye=c&z,gt=Ae?t:ou(o);function We(){for(var bt=arguments.length,Ot=se(bt),Mn=bt;Mn--;)Ot[Mn]=arguments[Mn];if(Pe)var hn=Uo(We),Un=mI(Ot,hn);if(v&&(Ot=Xv(Ot,v,C,Pe)),N&&(Ot=Jv(Ot,N,P,Pe)),bt-=Un,Pe&&bt<pe){var br=ja(Ot,hn);return a1(o,c,lf,We.placeholder,p,Ot,br,G,Q,pe-bt)}var _i=we?p:this,_a=Ae?_i[o]:o;return bt=Ot.length,G?Ot=xN(Ot,G):Ye&&bt>1&&Ot.reverse(),ge&&Q<bt&&(Ot.length=Q),this&&this!==Ur&&this instanceof We&&(_a=gt||ou(_a)),_a.apply(_i,Ot)}return We}function n1(o,c){return function(p,v){return DR(p,o,c(v),{})}}function uf(o,c){return function(p,v){var C;if(p===t&&v===t)return c;if(p!==t&&(C=p),v!==t){if(C===t)return v;typeof p=="string"||typeof v=="string"?(p=Ln(p),v=Ln(v)):(p=Vv(p),v=Vv(v)),C=o(p,v)}return C}}function Gp(o){return ga(function(c){return c=cr(c,On(He())),vt(function(p){var v=this;return o(c,function(C){return Bn(C,v,p)})})})}function cf(o,c){c=c===t?" ":Ln(c);var p=c.length;if(p<2)return p?Op(c,o):c;var v=Op(c,Qc(o/No(c)));return Ro(c)?Qa(mi(v),0,o).join(""):v.slice(0,o)}function aN(o,c,p,v){var C=c&y,N=ou(o);function P(){for(var G=-1,Q=arguments.length,pe=-1,ge=v.length,we=se(ge+Q),Ae=this&&this!==Ur&&this instanceof P?N:o;++pe<ge;)we[pe]=v[pe];for(;Q--;)we[pe++]=arguments[++G];return Bn(Ae,C?p:this,we)}return P}function i1(o){return function(c,p,v){return v&&typeof v!="number"&&dn(c,p,v)&&(p=v=t),c=va(c),p===t?(p=c,c=0):p=va(p),v=v===t?c<p?1:-1:va(v),HR(c,p,v,o)}}function ff(o){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=Zn(c),p=Zn(p)),o(c,p)}}function a1(o,c,p,v,C,N,P,G,Q,pe){var ge=c&E,we=ge?P:t,Ae=ge?t:P,Pe=ge?N:t,Ye=ge?t:N;c|=ge?x:O,c&=~(ge?O:x),c&w||(c&=~(y|_));var gt=[o,c,C,Pe,we,Ye,Ae,G,Q,pe],We=p.apply(t,gt);return Qp(o)&&y1(We,gt),We.placeholder=v,v1(We,o,c)}function Vp(o){var c=Dr[o];return function(p,v){if(p=Zn(p),v=v==null?0:an(ht(v),292),v&&vv(p)){var C=(Ht(p)+"e").split("e"),N=c(C[0]+"e"+(+C[1]+v));return C=(Ht(N)+"e").split("e"),+(C[0]+"e"+(+C[1]-v))}return c(p)}}var sN=Bo&&1/Fc(new Bo([,-0]))[1]==Ne?function(o){return new Bo(o)}:c0;function s1(o){return function(c){var p=sn(c);return p==K?vp(c):p==$?bI(c):gI(c,o(c))}}function pa(o,c,p,v,C,N,P,G){var Q=c&_;if(!Q&&typeof o!="function")throw new Wn(i);var pe=v?v.length:0;if(pe||(c&=~(x|O),v=C=t),P=P===t?P:Br(ht(P),0),G=G===t?G:ht(G),pe-=C?C.length:0,c&O){var ge=v,we=C;v=C=t}var Ae=Q?t:Kp(o),Pe=[o,c,p,v,C,ge,we,N,P,G];if(Ae&&EN(Pe,Ae),o=Pe[0],c=Pe[1],p=Pe[2],v=Pe[3],C=Pe[4],G=Pe[9]=Pe[9]===t?Q?0:o.length:Br(Pe[9]-pe,0),!G&&c&(E|T)&&(c&=~(E|T)),!c||c==y)var Ye=nN(o,c,p);else c==E||c==T?Ye=iN(o,c,G):(c==x||c==(y|x))&&!C.length?Ye=aN(o,c,p,v):Ye=lf.apply(t,Pe);var gt=Ae?qv:y1;return v1(gt(Ye,Pe),o,c)}function o1(o,c,p,v){return o===t||vi(o,Do[p])&&!Wt.call(v,p)?c:o}function l1(o,c,p,v,C,N){return gr(o)&&gr(c)&&(N.set(c,o),nf(o,c,t,l1,N),N.delete(c)),o}function oN(o){return cu(o)?t:o}function u1(o,c,p,v,C,N){var P=p&g,G=o.length,Q=c.length;if(G!=Q&&!(P&&Q>G))return!1;var pe=N.get(o),ge=N.get(c);if(pe&&ge)return pe==c&&ge==o;var we=-1,Ae=!0,Pe=p&m?new Rs:t;for(N.set(o,c),N.set(c,o);++we<G;){var Ye=o[we],gt=c[we];if(v)var We=P?v(gt,Ye,we,c,o,N):v(Ye,gt,we,o,c,N);if(We!==t){if(We)continue;Ae=!1;break}if(Pe){if(!dp(c,function(bt,Ot){if(!Xl(Pe,Ot)&&(Ye===bt||C(Ye,bt,p,v,N)))return Pe.push(Ot)})){Ae=!1;break}}else if(!(Ye===gt||C(Ye,gt,p,v,N))){Ae=!1;break}}return N.delete(o),N.delete(c),Ae}function lN(o,c,p,v,C,N,P){switch(p){case rt:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case Xt:return!(o.byteLength!=c.byteLength||!N(new Kc(o),new Kc(c)));case et:case tt:case j:return vi(+o,+c);case R:return o.name==c.name&&o.message==c.message;case ne:case he:return o==c+"";case K:var G=vp;case $:var Q=v&g;if(G||(G=Fc),o.size!=c.size&&!Q)return!1;var pe=P.get(o);if(pe)return pe==c;v|=m,P.set(o,c);var ge=u1(G(o),G(c),v,C,N,P);return P.delete(o),ge;case Oe:if(tu)return tu.call(o)==tu.call(c)}return!1}function uN(o,c,p,v,C,N){var P=p&g,G=jp(o),Q=G.length,pe=jp(c),ge=pe.length;if(Q!=ge&&!P)return!1;for(var we=Q;we--;){var Ae=G[we];if(!(P?Ae in c:Wt.call(c,Ae)))return!1}var Pe=N.get(o),Ye=N.get(c);if(Pe&&Ye)return Pe==c&&Ye==o;var gt=!0;N.set(o,c),N.set(c,o);for(var We=P;++we<Q;){Ae=G[we];var bt=o[Ae],Ot=c[Ae];if(v)var Mn=P?v(Ot,bt,Ae,c,o,N):v(bt,Ot,Ae,o,c,N);if(!(Mn===t?bt===Ot||C(bt,Ot,p,v,N):Mn)){gt=!1;break}We||(We=Ae=="constructor")}if(gt&&!We){var hn=o.constructor,Un=c.constructor;hn!=Un&&"constructor"in o&&"constructor"in c&&!(typeof hn=="function"&&hn instanceof hn&&typeof Un=="function"&&Un instanceof Un)&&(gt=!1)}return N.delete(o),N.delete(c),gt}function ga(o){return Jp(g1(o,t,x1),o+"")}function jp(o){return Iv(o,Fr,Wp)}function Hp(o){return Iv(o,Sn,c1)}var Kp=Jc?function(o){return Jc.get(o)}:c0;function df(o){for(var c=o.name+"",p=Oo[c],v=Wt.call(Oo,c)?p.length:0;v--;){var C=p[v],N=C.func;if(N==null||N==o)return C.name}return c}function Uo(o){var c=Wt.call(k,"placeholder")?k:o;return c.placeholder}function He(){var o=k.iteratee||l0;return o=o===l0?Dv:o,arguments.length?o(arguments[0],arguments[1]):o}function hf(o,c){var p=o.__data__;return yN(c)?p[typeof c=="string"?"string":"hash"]:p.map}function Yp(o){for(var c=Fr(o),p=c.length;p--;){var v=c[p],C=o[v];c[p]=[v,C,h1(C)]}return c}function Bs(o,c){var p=wI(o,c);return Nv(p)?p:t}function cN(o){var c=Wt.call(o,ks),p=o[ks];try{o[ks]=t;var v=!0}catch(N){}var C=jc.call(o);return v&&(c?o[ks]=p:delete o[ks]),C}var Wp=wp?function(o){return o==null?[]:(o=Zt(o),Ga(wp(o),function(c){return mv.call(o,c)}))}:f0,c1=wp?function(o){for(var c=[];o;)Va(c,Wp(o)),o=Yc(o);return c}:f0,sn=fn;(Ep&&sn(new Ep(new ArrayBuffer(1)))!=rt||Zl&&sn(new Zl)!=K||Cp&&sn(Cp.resolve())!=Y||Bo&&sn(new Bo)!=$||$l&&sn(new $l)!=dt)&&(sn=function(o){var c=fn(o),p=c==Z?o.constructor:t,v=p?Os(p):"";if(v)switch(v){case YI:return rt;case WI:return K;case zI:return Y;case QI:return $;case XI:return dt}return c});function fN(o,c,p){for(var v=-1,C=p.length;++v<C;){var N=p[v],P=N.size;switch(N.type){case"drop":o+=P;break;case"dropRight":c-=P;break;case"take":c=an(c,o+P);break;case"takeRight":o=Br(o,c-P);break}}return{start:o,end:c}}function dN(o){var c=o.match(vk);return c?c[1].split(_k):[]}function f1(o,c,p){c=za(c,o);for(var v=-1,C=c.length,N=!1;++v<C;){var P=qi(c[v]);if(!(N=o!=null&&p(o,P)))break;o=o[P]}return N||++v!=C?N:(C=o==null?0:o.length,!!C&&wf(C)&&ma(P,C)&&(nt(o)||Ls(o)))}function hN(o){var c=o.length,p=new o.constructor(c);return c&&typeof o[0]=="string"&&Wt.call(o,"index")&&(p.index=o.index,p.input=o.input),p}function d1(o){return typeof o.constructor=="function"&&!lu(o)?Lo(Yc(o)):{}}function pN(o,c,p){var v=o.constructor;switch(c){case Xt:return qp(o);case et:case tt:return new v(+o);case rt:return JR(o,p);case Bt:case pr:case qa:case Ss:case Ts:case Cn:case ca:case nn:case Nr:return zv(o,p);case K:return new v;case j:case he:return new v(o);case ne:return ZR(o);case $:return new v;case Oe:return $R(o)}}function gN(o,c){var p=c.length;if(!p)return o;var v=p-1;return c[v]=(p>1?"& ":"")+c[v],c=c.join(p>2?", ":" "),o.replace(yk,`{
/* [wrapped with `+c+`] */
`)}function mN(o){return nt(o)||Ls(o)||!!(yv&&o&&o[yv])}function ma(o,c){var p=typeof o;return c=c==null?me:c,!!c&&(p=="number"||p!="symbol"&&kk.test(o))&&o>-1&&o%1==0&&o<c}function dn(o,c,p){if(!gr(p))return!1;var v=typeof c;return(v=="number"?xn(p)&&ma(c,p.length):v=="string"&&c in p)?vi(p[c],o):!1}function zp(o,c){if(nt(o))return!1;var p=typeof o;return p=="number"||p=="symbol"||p=="boolean"||o==null||Pn(o)?!0:hk.test(o)||!dk.test(o)||c!=null&&o in Zt(c)}function yN(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function Qp(o){var c=df(o),p=k[c];if(typeof p!="function"||!(c in kt.prototype))return!1;if(o===p)return!0;var v=Kp(p);return!!v&&o===v[0]}function vN(o){return!!hv&&hv in o}var _N=Gc?ya:d0;function lu(o){var c=o&&o.constructor,p=typeof c=="function"&&c.prototype||Do;return o===p}function h1(o){return o===o&&!gr(o)}function p1(o,c){return function(p){return p==null?!1:p[o]===c&&(c!==t||o in Zt(p))}}function wN(o){var c=vf(o,function(v){return p.size===l&&p.clear(),v}),p=c.cache;return c}function EN(o,c){var p=o[1],v=c[1],C=p|v,N=C<(y|_|I),P=v==I&&p==E||v==I&&p==B&&o[7].length<=c[8]||v==(I|B)&&c[7].length<=c[8]&&p==E;if(!(N||P))return o;v&y&&(o[2]=c[2],C|=p&y?0:w);var G=c[3];if(G){var Q=o[3];o[3]=Q?Xv(Q,G,c[4]):G,o[4]=Q?ja(o[3],u):c[4]}return G=c[5],G&&(Q=o[5],o[5]=Q?Jv(Q,G,c[6]):G,o[6]=Q?ja(o[5],u):c[6]),G=c[7],G&&(o[7]=G),v&I&&(o[8]=o[8]==null?c[8]:an(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=C,o}function CN(o){var c=[];if(o!=null)for(var p in Zt(o))c.push(p);return c}function bN(o){return jc.call(o)}function g1(o,c,p){return c=Br(c===t?o.length-1:c,0),function(){for(var v=arguments,C=-1,N=Br(v.length-c,0),P=se(N);++C<N;)P[C]=v[c+C];C=-1;for(var G=se(c+1);++C<c;)G[C]=v[C];return G[c]=p(P),Bn(o,this,G)}}function m1(o,c){return c.length<2?o:Ds(o,Xn(c,0,-1))}function xN(o,c){for(var p=o.length,v=an(c.length,p),C=bn(o);v--;){var N=c[v];o[v]=ma(N,p)?C[N]:t}return o}function Xp(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var y1=_1(qv),uu=FI||function(o,c){return Ur.setTimeout(o,c)},Jp=_1(WR);function v1(o,c,p){var v=c+"";return Jp(o,gN(v,SN(dN(v),p)))}function _1(o){var c=0,p=0;return function(){var v=jI(),C=ie-(v-p);if(p=v,C>0){if(++c>=te)return arguments[0]}else c=0;return o.apply(t,arguments)}}function pf(o,c){var p=-1,v=o.length,C=v-1;for(c=c===t?v:c;++p<c;){var N=Bp(p,C),P=o[N];o[N]=o[p],o[p]=P}return o.length=c,o}var w1=wN(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(pk,function(p,v,C,N){c.push(C?N.replace(Ck,"$1"):v||p)}),c});function qi(o){if(typeof o=="string"||Pn(o))return o;var c=o+"";return c=="0"&&1/o==-Ne?"-0":c}function Os(o){if(o!=null){try{return Vc.call(o)}catch(c){}try{return o+""}catch(c){}}return""}function SN(o,c){return Yn(ct,function(p){var v="_."+p[0];c&p[1]&&!Mc(o,v)&&o.push(v)}),o.sort()}function E1(o){if(o instanceof kt)return o.clone();var c=new zn(o.__wrapped__,o.__chain__);return c.__actions__=bn(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function TN(o,c,p){(p?dn(o,c,p):c===t)?c=1:c=Br(ht(c),0);var v=o==null?0:o.length;if(!v||c<1)return[];for(var C=0,N=0,P=se(Qc(v/c));C<v;)P[N++]=Xn(o,C,C+=c);return P}function AN(o){for(var c=-1,p=o==null?0:o.length,v=0,C=[];++c<p;){var N=o[c];N&&(C[v++]=N)}return C}function kN(){var o=arguments.length;if(!o)return[];for(var c=se(o-1),p=arguments[0],v=o;v--;)c[v-1]=arguments[v];return Va(nt(p)?bn(p):[p],Qr(c,1))}var IN=vt(function(o,c){return Cr(o)?nu(o,Qr(c,1,Cr,!0)):[]}),RN=vt(function(o,c){var p=Jn(c);return Cr(p)&&(p=t),Cr(o)?nu(o,Qr(c,1,Cr,!0),He(p,2)):[]}),NN=vt(function(o,c){var p=Jn(c);return Cr(p)&&(p=t),Cr(o)?nu(o,Qr(c,1,Cr,!0),t,p):[]});function DN(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:ht(c),Xn(o,c<0?0:c,v)):[]}function BN(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:ht(c),c=v-c,Xn(o,0,c<0?0:c)):[]}function ON(o,c){return o&&o.length?sf(o,He(c,3),!0,!0):[]}function LN(o,c){return o&&o.length?sf(o,He(c,3),!0):[]}function PN(o,c,p,v){var C=o==null?0:o.length;return C?(p&&typeof p!="number"&&dn(o,c,p)&&(p=0,v=C),kR(o,c,p,v)):[]}function C1(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:ht(p);return C<0&&(C=Br(v+C,0)),Uc(o,He(c,3),C)}function b1(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=v-1;return p!==t&&(C=ht(p),C=p<0?Br(v+C,0):an(C,v-1)),Uc(o,He(c,3),C,!0)}function x1(o){var c=o==null?0:o.length;return c?Qr(o,1):[]}function MN(o){var c=o==null?0:o.length;return c?Qr(o,Ne):[]}function UN(o,c){var p=o==null?0:o.length;return p?(c=c===t?1:ht(c),Qr(o,c)):[]}function FN(o){for(var c=-1,p=o==null?0:o.length,v={};++c<p;){var C=o[c];v[C[0]]=C[1]}return v}function S1(o){return o&&o.length?o[0]:t}function qN(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:ht(p);return C<0&&(C=Br(v+C,0)),Io(o,c,C)}function GN(o){var c=o==null?0:o.length;return c?Xn(o,0,-1):[]}var VN=vt(function(o){var c=cr(o,Up);return c.length&&c[0]===o[0]?kp(c):[]}),jN=vt(function(o){var c=Jn(o),p=cr(o,Up);return c===Jn(p)?c=t:p.pop(),p.length&&p[0]===o[0]?kp(p,He(c,2)):[]}),HN=vt(function(o){var c=Jn(o),p=cr(o,Up);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===o[0]?kp(p,t,c):[]});function KN(o,c){return o==null?"":GI.call(o,c)}function Jn(o){var c=o==null?0:o.length;return c?o[c-1]:t}function YN(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=v;return p!==t&&(C=ht(p),C=C<0?Br(v+C,0):an(C,v-1)),c===c?SI(o,c,C):Uc(o,av,C,!0)}function WN(o,c){return o&&o.length?Pv(o,ht(c)):t}var zN=vt(T1);function T1(o,c){return o&&o.length&&c&&c.length?Dp(o,c):o}function QN(o,c,p){return o&&o.length&&c&&c.length?Dp(o,c,He(p,2)):o}function XN(o,c,p){return o&&o.length&&c&&c.length?Dp(o,c,t,p):o}var JN=ga(function(o,c){var p=o==null?0:o.length,v=xp(o,c);return Fv(o,cr(c,function(C){return ma(C,p)?+C:C}).sort(Qv)),v});function ZN(o,c){var p=[];if(!(o&&o.length))return p;var v=-1,C=[],N=o.length;for(c=He(c,3);++v<N;){var P=o[v];c(P,v,o)&&(p.push(P),C.push(v))}return Fv(o,C),p}function Zp(o){return o==null?o:KI.call(o)}function $N(o,c,p){var v=o==null?0:o.length;return v?(p&&typeof p!="number"&&dn(o,c,p)?(c=0,p=v):(c=c==null?0:ht(c),p=p===t?v:ht(p)),Xn(o,c,p)):[]}function eD(o,c){return af(o,c)}function tD(o,c,p){return Lp(o,c,He(p,2))}function rD(o,c){var p=o==null?0:o.length;if(p){var v=af(o,c);if(v<p&&vi(o[v],c))return v}return-1}function nD(o,c){return af(o,c,!0)}function iD(o,c,p){return Lp(o,c,He(p,2),!0)}function aD(o,c){var p=o==null?0:o.length;if(p){var v=af(o,c,!0)-1;if(vi(o[v],c))return v}return-1}function sD(o){return o&&o.length?Gv(o):[]}function oD(o,c){return o&&o.length?Gv(o,He(c,2)):[]}function lD(o){var c=o==null?0:o.length;return c?Xn(o,1,c):[]}function uD(o,c,p){return o&&o.length?(c=p||c===t?1:ht(c),Xn(o,0,c<0?0:c)):[]}function cD(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:ht(c),c=v-c,Xn(o,c<0?0:c,v)):[]}function fD(o,c){return o&&o.length?sf(o,He(c,3),!1,!0):[]}function dD(o,c){return o&&o.length?sf(o,He(c,3)):[]}var hD=vt(function(o){return Wa(Qr(o,1,Cr,!0))}),pD=vt(function(o){var c=Jn(o);return Cr(c)&&(c=t),Wa(Qr(o,1,Cr,!0),He(c,2))}),gD=vt(function(o){var c=Jn(o);return c=typeof c=="function"?c:t,Wa(Qr(o,1,Cr,!0),t,c)});function mD(o){return o&&o.length?Wa(o):[]}function yD(o,c){return o&&o.length?Wa(o,He(c,2)):[]}function vD(o,c){return c=typeof c=="function"?c:t,o&&o.length?Wa(o,t,c):[]}function $p(o){if(!(o&&o.length))return[];var c=0;return o=Ga(o,function(p){if(Cr(p))return c=Br(p.length,c),!0}),mp(c,function(p){return cr(o,hp(p))})}function A1(o,c){if(!(o&&o.length))return[];var p=$p(o);return c==null?p:cr(p,function(v){return Bn(c,t,v)})}var _D=vt(function(o,c){return Cr(o)?nu(o,c):[]}),wD=vt(function(o){return Mp(Ga(o,Cr))}),ED=vt(function(o){var c=Jn(o);return Cr(c)&&(c=t),Mp(Ga(o,Cr),He(c,2))}),CD=vt(function(o){var c=Jn(o);return c=typeof c=="function"?c:t,Mp(Ga(o,Cr),t,c)}),bD=vt($p);function xD(o,c){return Kv(o||[],c||[],ru)}function SD(o,c){return Kv(o||[],c||[],su)}var TD=vt(function(o){var c=o.length,p=c>1?o[c-1]:t;return p=typeof p=="function"?(o.pop(),p):t,A1(o,p)});function k1(o){var c=k(o);return c.__chain__=!0,c}function AD(o,c){return c(o),o}function gf(o,c){return c(o)}var kD=ga(function(o){var c=o.length,p=c?o[0]:0,v=this.__wrapped__,C=function(N){return xp(N,o)};return c>1||this.__actions__.length||!(v instanceof kt)||!ma(p)?this.thru(C):(v=v.slice(p,+p+(c?1:0)),v.__actions__.push({func:gf,args:[C],thisArg:t}),new zn(v,this.__chain__).thru(function(N){return c&&!N.length&&N.push(t),N}))});function ID(){return k1(this)}function RD(){return new zn(this.value(),this.__chain__)}function ND(){this.__values__===t&&(this.__values__=V1(this.value()));var o=this.__index__>=this.__values__.length,c=o?t:this.__values__[this.__index__++];return{done:o,value:c}}function DD(){return this}function BD(o){for(var c,p=this;p instanceof $c;){var v=E1(p);v.__index__=0,v.__values__=t,c?C.__wrapped__=v:c=v;var C=v;p=p.__wrapped__}return C.__wrapped__=o,c}function OD(){var o=this.__wrapped__;if(o instanceof kt){var c=o;return this.__actions__.length&&(c=new kt(this)),c=c.reverse(),c.__actions__.push({func:gf,args:[Zp],thisArg:t}),new zn(c,this.__chain__)}return this.thru(Zp)}function LD(){return Hv(this.__wrapped__,this.__actions__)}var PD=of(function(o,c,p){Wt.call(o,p)?++o[p]:ha(o,p,1)});function MD(o,c,p){var v=nt(o)?nv:AR;return p&&dn(o,c,p)&&(c=t),v(o,He(c,3))}function UD(o,c){var p=nt(o)?Ga:Av;return p(o,He(c,3))}var FD=t1(C1),qD=t1(b1);function GD(o,c){return Qr(mf(o,c),1)}function VD(o,c){return Qr(mf(o,c),Ne)}function jD(o,c,p){return p=p===t?1:ht(p),Qr(mf(o,c),p)}function I1(o,c){var p=nt(o)?Yn:Ya;return p(o,He(c,3))}function R1(o,c){var p=nt(o)?lI:Tv;return p(o,He(c,3))}var HD=of(function(o,c,p){Wt.call(o,p)?o[p].push(c):ha(o,p,[c])});function KD(o,c,p,v){o=xn(o)?o:qo(o),p=p&&!v?ht(p):0;var C=o.length;return p<0&&(p=Br(C+p,0)),Ef(o)?p<=C&&o.indexOf(c,p)>-1:!!C&&Io(o,c,p)>-1}var YD=vt(function(o,c,p){var v=-1,C=typeof c=="function",N=xn(o)?se(o.length):[];return Ya(o,function(P){N[++v]=C?Bn(c,P,p):iu(P,c,p)}),N}),WD=of(function(o,c,p){ha(o,p,c)});function mf(o,c){var p=nt(o)?cr:Bv;return p(o,He(c,3))}function zD(o,c,p,v){return o==null?[]:(nt(c)||(c=c==null?[]:[c]),p=v?t:p,nt(p)||(p=p==null?[]:[p]),Mv(o,c,p))}var QD=of(function(o,c,p){o[p?0:1].push(c)},function(){return[[],[]]});function XD(o,c,p){var v=nt(o)?fp:ov,C=arguments.length<3;return v(o,He(c,4),p,C,Ya)}function JD(o,c,p){var v=nt(o)?uI:ov,C=arguments.length<3;return v(o,He(c,4),p,C,Tv)}function ZD(o,c){var p=nt(o)?Ga:Av;return p(o,_f(He(c,3)))}function $D(o){var c=nt(o)?Cv:KR;return c(o)}function eB(o,c,p){(p?dn(o,c,p):c===t)?c=1:c=ht(c);var v=nt(o)?CR:YR;return v(o,c)}function tB(o){var c=nt(o)?bR:zR;return c(o)}function rB(o){if(o==null)return 0;if(xn(o))return Ef(o)?No(o):o.length;var c=sn(o);return c==K||c==$?o.size:Rp(o).length}function nB(o,c,p){var v=nt(o)?dp:QR;return p&&dn(o,c,p)&&(c=t),v(o,He(c,3))}var iB=vt(function(o,c){if(o==null)return[];var p=c.length;return p>1&&dn(o,c[0],c[1])?c=[]:p>2&&dn(c[0],c[1],c[2])&&(c=[c[0]]),Mv(o,Qr(c,1),[])}),yf=UI||function(){return Ur.Date.now()};function aB(o,c){if(typeof c!="function")throw new Wn(i);return o=ht(o),function(){if(--o<1)return c.apply(this,arguments)}}function N1(o,c,p){return c=p?t:c,c=o&&c==null?o.length:c,pa(o,I,t,t,t,t,c)}function D1(o,c){var p;if(typeof c!="function")throw new Wn(i);return o=ht(o),function(){return--o>0&&(p=c.apply(this,arguments)),o<=1&&(c=t),p}}var e0=vt(function(o,c,p){var v=y;if(p.length){var C=ja(p,Uo(e0));v|=x}return pa(o,v,c,p,C)}),B1=vt(function(o,c,p){var v=y|_;if(p.length){var C=ja(p,Uo(B1));v|=x}return pa(c,v,o,p,C)});function O1(o,c,p){c=p?t:c;var v=pa(o,E,t,t,t,t,t,c);return v.placeholder=O1.placeholder,v}function L1(o,c,p){c=p?t:c;var v=pa(o,T,t,t,t,t,t,c);return v.placeholder=L1.placeholder,v}function P1(o,c,p){var v,C,N,P,G,Q,pe=0,ge=!1,we=!1,Ae=!0;if(typeof o!="function")throw new Wn(i);c=Zn(c)||0,gr(p)&&(ge=!!p.leading,we="maxWait"in p,N=we?Br(Zn(p.maxWait)||0,c):N,Ae="trailing"in p?!!p.trailing:Ae);function Pe(br){var _i=v,_a=C;return v=C=t,pe=br,P=o.apply(_a,_i),P}function Ye(br){return pe=br,G=uu(bt,c),ge?Pe(br):P}function gt(br){var _i=br-Q,_a=br-pe,t_=c-_i;return we?an(t_,N-_a):t_}function We(br){var _i=br-Q,_a=br-pe;return Q===t||_i>=c||_i<0||we&&_a>=N}function bt(){var br=yf();if(We(br))return Ot(br);G=uu(bt,gt(br))}function Ot(br){return G=t,Ae&&v?Pe(br):(v=C=t,P)}function Mn(){G!==t&&Yv(G),pe=0,v=Q=C=G=t}function hn(){return G===t?P:Ot(yf())}function Un(){var br=yf(),_i=We(br);if(v=arguments,C=this,Q=br,_i){if(G===t)return Ye(Q);if(we)return Yv(G),G=uu(bt,c),Pe(Q)}return G===t&&(G=uu(bt,c)),P}return Un.cancel=Mn,Un.flush=hn,Un}var sB=vt(function(o,c){return Sv(o,1,c)}),oB=vt(function(o,c,p){return Sv(o,Zn(c)||0,p)});function lB(o){return pa(o,z)}function vf(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new Wn(i);var p=function(){var v=arguments,C=c?c.apply(this,v):v[0],N=p.cache;if(N.has(C))return N.get(C);var P=o.apply(this,v);return p.cache=N.set(C,P)||N,P};return p.cache=new(vf.Cache||da),p}vf.Cache=da;function _f(o){if(typeof o!="function")throw new Wn(i);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function uB(o){return D1(2,o)}var cB=XR(function(o,c){c=c.length==1&&nt(c[0])?cr(c[0],On(He())):cr(Qr(c,1),On(He()));var p=c.length;return vt(function(v){for(var C=-1,N=an(v.length,p);++C<N;)v[C]=c[C].call(this,v[C]);return Bn(o,this,v)})}),t0=vt(function(o,c){var p=ja(c,Uo(t0));return pa(o,x,t,c,p)}),M1=vt(function(o,c){var p=ja(c,Uo(M1));return pa(o,O,t,c,p)}),fB=ga(function(o,c){return pa(o,B,t,t,t,c)});function dB(o,c){if(typeof o!="function")throw new Wn(i);return c=c===t?c:ht(c),vt(o,c)}function hB(o,c){if(typeof o!="function")throw new Wn(i);return c=c==null?0:Br(ht(c),0),vt(function(p){var v=p[c],C=Qa(p,0,c);return v&&Va(C,v),Bn(o,this,C)})}function pB(o,c,p){var v=!0,C=!0;if(typeof o!="function")throw new Wn(i);return gr(p)&&(v="leading"in p?!!p.leading:v,C="trailing"in p?!!p.trailing:C),P1(o,c,{leading:v,maxWait:c,trailing:C})}function gB(o){return N1(o,1)}function mB(o,c){return t0(Fp(c),o)}function yB(){if(!arguments.length)return[];var o=arguments[0];return nt(o)?o:[o]}function vB(o){return Qn(o,h)}function _B(o,c){return c=typeof c=="function"?c:t,Qn(o,h,c)}function wB(o){return Qn(o,f|h)}function EB(o,c){return c=typeof c=="function"?c:t,Qn(o,f|h,c)}function CB(o,c){return c==null||xv(o,c,Fr(c))}function vi(o,c){return o===c||o!==o&&c!==c}var bB=ff(Ap),xB=ff(function(o,c){return o>=c}),Ls=Rv(function(){return arguments}())?Rv:function(o){return _r(o)&&Wt.call(o,"callee")&&!mv.call(o,"callee")},nt=se.isArray,SB=Jy?On(Jy):BR;function xn(o){return o!=null&&wf(o.length)&&!ya(o)}function Cr(o){return _r(o)&&xn(o)}function TB(o){return o===!0||o===!1||_r(o)&&fn(o)==et}var Xa=qI||d0,AB=Zy?On(Zy):OR;function kB(o){return _r(o)&&o.nodeType===1&&!cu(o)}function IB(o){if(o==null)return!0;if(xn(o)&&(nt(o)||typeof o=="string"||typeof o.splice=="function"||Xa(o)||Fo(o)||Ls(o)))return!o.length;var c=sn(o);if(c==K||c==$)return!o.size;if(lu(o))return!Rp(o).length;for(var p in o)if(Wt.call(o,p))return!1;return!0}function RB(o,c){return au(o,c)}function NB(o,c,p){p=typeof p=="function"?p:t;var v=p?p(o,c):t;return v===t?au(o,c,t,p):!!v}function r0(o){if(!_r(o))return!1;var c=fn(o);return c==R||c==ft||typeof o.message=="string"&&typeof o.name=="string"&&!cu(o)}function DB(o){return typeof o=="number"&&vv(o)}function ya(o){if(!gr(o))return!1;var c=fn(o);return c==D||c==L||c==Dt||c==J}function U1(o){return typeof o=="number"&&o==ht(o)}function wf(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=me}function gr(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function _r(o){return o!=null&&typeof o=="object"}var F1=$y?On($y):PR;function BB(o,c){return o===c||Ip(o,c,Yp(c))}function OB(o,c,p){return p=typeof p=="function"?p:t,Ip(o,c,Yp(c),p)}function LB(o){return q1(o)&&o!=+o}function PB(o){if(_N(o))throw new $e(n);return Nv(o)}function MB(o){return o===null}function UB(o){return o==null}function q1(o){return typeof o=="number"||_r(o)&&fn(o)==j}function cu(o){if(!_r(o)||fn(o)!=Z)return!1;var c=Yc(o);if(c===null)return!0;var p=Wt.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&Vc.call(p)==OI}var n0=ev?On(ev):MR;function FB(o){return U1(o)&&o>=-me&&o<=me}var G1=tv?On(tv):UR;function Ef(o){return typeof o=="string"||!nt(o)&&_r(o)&&fn(o)==he}function Pn(o){return typeof o=="symbol"||_r(o)&&fn(o)==Oe}var Fo=rv?On(rv):FR;function qB(o){return o===t}function GB(o){return _r(o)&&sn(o)==dt}function VB(o){return _r(o)&&fn(o)==Qt}var jB=ff(Np),HB=ff(function(o,c){return o<=c});function V1(o){if(!o)return[];if(xn(o))return Ef(o)?mi(o):bn(o);if(Jl&&o[Jl])return CI(o[Jl]());var c=sn(o),p=c==K?vp:c==$?Fc:qo;return p(o)}function va(o){if(!o)return o===0?o:0;if(o=Zn(o),o===Ne||o===-Ne){var c=o<0?-1:1;return c*re}return o===o?o:0}function ht(o){var c=va(o),p=c%1;return c===c?p?c-p:c:0}function j1(o){return o?Ns(ht(o),0,Ze):0}function Zn(o){if(typeof o=="number")return o;if(Pn(o))return Fe;if(gr(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=gr(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=lv(o);var p=Sk.test(o);return p||Ak.test(o)?aI(o.slice(2),p?2:8):xk.test(o)?Fe:+o}function H1(o){return Fi(o,Sn(o))}function KB(o){return o?Ns(ht(o),-me,me):o===0?o:0}function Ht(o){return o==null?"":Ln(o)}var YB=Po(function(o,c){if(lu(c)||xn(c)){Fi(c,Fr(c),o);return}for(var p in c)Wt.call(c,p)&&ru(o,p,c[p])}),K1=Po(function(o,c){Fi(c,Sn(c),o)}),Cf=Po(function(o,c,p,v){Fi(c,Sn(c),o,v)}),WB=Po(function(o,c,p,v){Fi(c,Fr(c),o,v)}),zB=ga(xp);function QB(o,c){var p=Lo(o);return c==null?p:bv(p,c)}var XB=vt(function(o,c){o=Zt(o);var p=-1,v=c.length,C=v>2?c[2]:t;for(C&&dn(c[0],c[1],C)&&(v=1);++p<v;)for(var N=c[p],P=Sn(N),G=-1,Q=P.length;++G<Q;){var pe=P[G],ge=o[pe];(ge===t||vi(ge,Do[pe])&&!Wt.call(o,pe))&&(o[pe]=N[pe])}return o}),JB=vt(function(o){return o.push(t,l1),Bn(Y1,t,o)});function ZB(o,c){return iv(o,He(c,3),Ui)}function $B(o,c){return iv(o,He(c,3),Tp)}function e3(o,c){return o==null?o:Sp(o,He(c,3),Sn)}function t3(o,c){return o==null?o:kv(o,He(c,3),Sn)}function r3(o,c){return o&&Ui(o,He(c,3))}function n3(o,c){return o&&Tp(o,He(c,3))}function i3(o){return o==null?[]:rf(o,Fr(o))}function a3(o){return o==null?[]:rf(o,Sn(o))}function i0(o,c,p){var v=o==null?t:Ds(o,c);return v===t?p:v}function s3(o,c){return o!=null&&f1(o,c,IR)}function a0(o,c){return o!=null&&f1(o,c,RR)}var o3=n1(function(o,c,p){c!=null&&typeof c.toString!="function"&&(c=jc.call(c)),o[c]=p},o0(Tn)),l3=n1(function(o,c,p){c!=null&&typeof c.toString!="function"&&(c=jc.call(c)),Wt.call(o,c)?o[c].push(p):o[c]=[p]},He),u3=vt(iu);function Fr(o){return xn(o)?Ev(o):Rp(o)}function Sn(o){return xn(o)?Ev(o,!0):qR(o)}function c3(o,c){var p={};return c=He(c,3),Ui(o,function(v,C,N){ha(p,c(v,C,N),v)}),p}function f3(o,c){var p={};return c=He(c,3),Ui(o,function(v,C,N){ha(p,C,c(v,C,N))}),p}var d3=Po(function(o,c,p){nf(o,c,p)}),Y1=Po(function(o,c,p,v){nf(o,c,p,v)}),h3=ga(function(o,c){var p={};if(o==null)return p;var v=!1;c=cr(c,function(N){return N=za(N,o),v||(v=N.length>1),N}),Fi(o,Hp(o),p),v&&(p=Qn(p,f|d|h,oN));for(var C=c.length;C--;)Pp(p,c[C]);return p});function p3(o,c){return W1(o,_f(He(c)))}var g3=ga(function(o,c){return o==null?{}:VR(o,c)});function W1(o,c){if(o==null)return{};var p=cr(Hp(o),function(v){return[v]});return c=He(c),Uv(o,p,function(v,C){return c(v,C[0])})}function m3(o,c,p){c=za(c,o);var v=-1,C=c.length;for(C||(C=1,o=t);++v<C;){var N=o==null?t:o[qi(c[v])];N===t&&(v=C,N=p),o=ya(N)?N.call(o):N}return o}function y3(o,c,p){return o==null?o:su(o,c,p)}function v3(o,c,p,v){return v=typeof v=="function"?v:t,o==null?o:su(o,c,p,v)}var z1=s1(Fr),Q1=s1(Sn);function _3(o,c,p){var v=nt(o),C=v||Xa(o)||Fo(o);if(c=He(c,4),p==null){var N=o&&o.constructor;C?p=v?new N:[]:gr(o)?p=ya(N)?Lo(Yc(o)):{}:p={}}return(C?Yn:Ui)(o,function(P,G,Q){return c(p,P,G,Q)}),p}function w3(o,c){return o==null?!0:Pp(o,c)}function E3(o,c,p){return o==null?o:jv(o,c,Fp(p))}function C3(o,c,p,v){return v=typeof v=="function"?v:t,o==null?o:jv(o,c,Fp(p),v)}function qo(o){return o==null?[]:yp(o,Fr(o))}function b3(o){return o==null?[]:yp(o,Sn(o))}function x3(o,c,p){return p===t&&(p=c,c=t),p!==t&&(p=Zn(p),p=p===p?p:0),c!==t&&(c=Zn(c),c=c===c?c:0),Ns(Zn(o),c,p)}function S3(o,c,p){return c=va(c),p===t?(p=c,c=0):p=va(p),o=Zn(o),NR(o,c,p)}function T3(o,c,p){if(p&&typeof p!="boolean"&&dn(o,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof o=="boolean"&&(p=o,o=t)),o===t&&c===t?(o=0,c=1):(o=va(o),c===t?(c=o,o=0):c=va(c)),o>c){var v=o;o=c,c=v}if(p||o%1||c%1){var C=_v();return an(o+C*(c-o+iI("1e-"+((C+"").length-1))),c)}return Bp(o,c)}var A3=Mo(function(o,c,p){return c=c.toLowerCase(),o+(p?X1(c):c)});function X1(o){return s0(Ht(o).toLowerCase())}function J1(o){return o=Ht(o),o&&o.replace(Ik,yI).replace(zk,"")}function k3(o,c,p){o=Ht(o),c=Ln(c);var v=o.length;p=p===t?v:Ns(ht(p),0,v);var C=p;return p-=c.length,p>=0&&o.slice(p,C)==c}function I3(o){return o=Ht(o),o&&uk.test(o)?o.replace(ky,vI):o}function R3(o){return o=Ht(o),o&&gk.test(o)?o.replace(tp,"\\$&"):o}var N3=Mo(function(o,c,p){return o+(p?"-":"")+c.toLowerCase()}),D3=Mo(function(o,c,p){return o+(p?" ":"")+c.toLowerCase()}),B3=e1("toLowerCase");function O3(o,c,p){o=Ht(o),c=ht(c);var v=c?No(o):0;if(!c||v>=c)return o;var C=(c-v)/2;return cf(Xc(C),p)+o+cf(Qc(C),p)}function L3(o,c,p){o=Ht(o),c=ht(c);var v=c?No(o):0;return c&&v<c?o+cf(c-v,p):o}function P3(o,c,p){o=Ht(o),c=ht(c);var v=c?No(o):0;return c&&v<c?cf(c-v,p)+o:o}function M3(o,c,p){return p||c==null?c=0:c&&(c=+c),HI(Ht(o).replace(rp,""),c||0)}function U3(o,c,p){return(p?dn(o,c,p):c===t)?c=1:c=ht(c),Op(Ht(o),c)}function F3(){var o=arguments,c=Ht(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var q3=Mo(function(o,c,p){return o+(p?"_":"")+c.toLowerCase()});function G3(o,c,p){return p&&typeof p!="number"&&dn(o,c,p)&&(c=p=t),p=p===t?Ze:p>>>0,p?(o=Ht(o),o&&(typeof c=="string"||c!=null&&!n0(c))&&(c=Ln(c),!c&&Ro(o))?Qa(mi(o),0,p):o.split(c,p)):[]}var V3=Mo(function(o,c,p){return o+(p?" ":"")+s0(c)});function j3(o,c,p){return o=Ht(o),p=p==null?0:Ns(ht(p),0,o.length),c=Ln(c),o.slice(p,p+c.length)==c}function H3(o,c,p){var v=k.templateSettings;p&&dn(o,c,p)&&(c=t),o=Ht(o),c=Cf({},c,v,o1);var C=Cf({},c.imports,v.imports,o1),N=Fr(C),P=yp(C,N),G,Q,pe=0,ge=c.interpolate||Oc,we="__p += '",Ae=_p((c.escape||Oc).source+"|"+ge.source+"|"+(ge===Iy?bk:Oc).source+"|"+(c.evaluate||Oc).source+"|$","g"),Pe="//# sourceURL="+(Wt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$k+"]")+`
`;o.replace(Ae,function(We,bt,Ot,Mn,hn,Un){return Ot||(Ot=Mn),we+=o.slice(pe,Un).replace(Rk,_I),bt&&(G=!0,we+=`' +
__e(`+bt+`) +
'`),hn&&(Q=!0,we+=`';
`+hn+`;
__p += '`),Ot&&(we+=`' +
((__t = (`+Ot+`)) == null ? '' : __t) +
'`),pe=Un+We.length,We}),we+=`';
`;var Ye=Wt.call(c,"variable")&&c.variable;if(!Ye)we=`with (obj) {
`+we+`
}
`;else if(Ek.test(Ye))throw new $e(a);we=(Q?we.replace(ur,""):we).replace(sk,"$1").replace(ok,"$1;"),we="function("+(Ye||"obj")+`) {
`+(Ye?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(Q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+we+`return __p
}`;var gt=$1(function(){return jt(N,Pe+"return "+we).apply(t,P)});if(gt.source=we,r0(gt))throw gt;return gt}function K3(o){return Ht(o).toLowerCase()}function Y3(o){return Ht(o).toUpperCase()}function W3(o,c,p){if(o=Ht(o),o&&(p||c===t))return lv(o);if(!o||!(c=Ln(c)))return o;var v=mi(o),C=mi(c),N=uv(v,C),P=cv(v,C)+1;return Qa(v,N,P).join("")}function z3(o,c,p){if(o=Ht(o),o&&(p||c===t))return o.slice(0,dv(o)+1);if(!o||!(c=Ln(c)))return o;var v=mi(o),C=cv(v,mi(c))+1;return Qa(v,0,C).join("")}function Q3(o,c,p){if(o=Ht(o),o&&(p||c===t))return o.replace(rp,"");if(!o||!(c=Ln(c)))return o;var v=mi(o),C=uv(v,mi(c));return Qa(v,C).join("")}function X3(o,c){var p=F,v=q;if(gr(c)){var C="separator"in c?c.separator:C;p="length"in c?ht(c.length):p,v="omission"in c?Ln(c.omission):v}o=Ht(o);var N=o.length;if(Ro(o)){var P=mi(o);N=P.length}if(p>=N)return o;var G=p-No(v);if(G<1)return v;var Q=P?Qa(P,0,G).join(""):o.slice(0,G);if(C===t)return Q+v;if(P&&(G+=Q.length-G),n0(C)){if(o.slice(G).search(C)){var pe,ge=Q;for(C.global||(C=_p(C.source,Ht(Ry.exec(C))+"g")),C.lastIndex=0;pe=C.exec(ge);)var we=pe.index;Q=Q.slice(0,we===t?G:we)}}else if(o.indexOf(Ln(C),G)!=G){var Ae=Q.lastIndexOf(C);Ae>-1&&(Q=Q.slice(0,Ae))}return Q+v}function J3(o){return o=Ht(o),o&&lk.test(o)?o.replace(Ay,TI):o}var Z3=Mo(function(o,c,p){return o+(p?" ":"")+c.toUpperCase()}),s0=e1("toUpperCase");function Z1(o,c,p){return o=Ht(o),c=p?t:c,c===t?EI(o)?II(o):dI(o):o.match(c)||[]}var $1=vt(function(o,c){try{return Bn(o,t,c)}catch(p){return r0(p)?p:new $e(p)}}),$3=ga(function(o,c){return Yn(c,function(p){p=qi(p),ha(o,p,e0(o[p],o))}),o});function eO(o){var c=o==null?0:o.length,p=He();return o=c?cr(o,function(v){if(typeof v[1]!="function")throw new Wn(i);return[p(v[0]),v[1]]}):[],vt(function(v){for(var C=-1;++C<c;){var N=o[C];if(Bn(N[0],this,v))return Bn(N[1],this,v)}})}function tO(o){return TR(Qn(o,f))}function o0(o){return function(){return o}}function rO(o,c){return o==null||o!==o?c:o}var nO=r1(),iO=r1(!0);function Tn(o){return o}function l0(o){return Dv(typeof o=="function"?o:Qn(o,f))}function aO(o){return Ov(Qn(o,f))}function sO(o,c){return Lv(o,Qn(c,f))}var oO=vt(function(o,c){return function(p){return iu(p,o,c)}}),lO=vt(function(o,c){return function(p){return iu(o,p,c)}});function u0(o,c,p){var v=Fr(c),C=rf(c,v);p==null&&!(gr(c)&&(C.length||!v.length))&&(p=c,c=o,o=this,C=rf(c,Fr(c)));var N=!(gr(p)&&"chain"in p)||!!p.chain,P=ya(o);return Yn(C,function(G){var Q=c[G];o[G]=Q,P&&(o.prototype[G]=function(){var pe=this.__chain__;if(N||pe){var ge=o(this.__wrapped__),we=ge.__actions__=bn(this.__actions__);return we.push({func:Q,args:arguments,thisArg:o}),ge.__chain__=pe,ge}return Q.apply(o,Va([this.value()],arguments))})}),o}function uO(){return Ur._===this&&(Ur._=LI),this}function c0(){}function cO(o){return o=ht(o),vt(function(c){return Pv(c,o)})}var fO=Gp(cr),dO=Gp(nv),hO=Gp(dp);function e_(o){return zp(o)?hp(qi(o)):jR(o)}function pO(o){return function(c){return o==null?t:Ds(o,c)}}var gO=i1(),mO=i1(!0);function f0(){return[]}function d0(){return!1}function yO(){return{}}function vO(){return""}function _O(){return!0}function wO(o,c){if(o=ht(o),o<1||o>me)return[];var p=Ze,v=an(o,Ze);c=He(c),o-=Ze;for(var C=mp(v,c);++p<o;)c(p);return C}function EO(o){return nt(o)?cr(o,qi):Pn(o)?[o]:bn(w1(Ht(o)))}function CO(o){var c=++BI;return Ht(o)+c}var bO=uf(function(o,c){return o+c},0),xO=Vp("ceil"),SO=uf(function(o,c){return o/c},1),TO=Vp("floor");function AO(o){return o&&o.length?tf(o,Tn,Ap):t}function kO(o,c){return o&&o.length?tf(o,He(c,2),Ap):t}function IO(o){return sv(o,Tn)}function RO(o,c){return sv(o,He(c,2))}function NO(o){return o&&o.length?tf(o,Tn,Np):t}function DO(o,c){return o&&o.length?tf(o,He(c,2),Np):t}var BO=uf(function(o,c){return o*c},1),OO=Vp("round"),LO=uf(function(o,c){return o-c},0);function PO(o){return o&&o.length?gp(o,Tn):0}function MO(o,c){return o&&o.length?gp(o,He(c,2)):0}return k.after=aB,k.ary=N1,k.assign=YB,k.assignIn=K1,k.assignInWith=Cf,k.assignWith=WB,k.at=zB,k.before=D1,k.bind=e0,k.bindAll=$3,k.bindKey=B1,k.castArray=yB,k.chain=k1,k.chunk=TN,k.compact=AN,k.concat=kN,k.cond=eO,k.conforms=tO,k.constant=o0,k.countBy=PD,k.create=QB,k.curry=O1,k.curryRight=L1,k.debounce=P1,k.defaults=XB,k.defaultsDeep=JB,k.defer=sB,k.delay=oB,k.difference=IN,k.differenceBy=RN,k.differenceWith=NN,k.drop=DN,k.dropRight=BN,k.dropRightWhile=ON,k.dropWhile=LN,k.fill=PN,k.filter=UD,k.flatMap=GD,k.flatMapDeep=VD,k.flatMapDepth=jD,k.flatten=x1,k.flattenDeep=MN,k.flattenDepth=UN,k.flip=lB,k.flow=nO,k.flowRight=iO,k.fromPairs=FN,k.functions=i3,k.functionsIn=a3,k.groupBy=HD,k.initial=GN,k.intersection=VN,k.intersectionBy=jN,k.intersectionWith=HN,k.invert=o3,k.invertBy=l3,k.invokeMap=YD,k.iteratee=l0,k.keyBy=WD,k.keys=Fr,k.keysIn=Sn,k.map=mf,k.mapKeys=c3,k.mapValues=f3,k.matches=aO,k.matchesProperty=sO,k.memoize=vf,k.merge=d3,k.mergeWith=Y1,k.method=oO,k.methodOf=lO,k.mixin=u0,k.negate=_f,k.nthArg=cO,k.omit=h3,k.omitBy=p3,k.once=uB,k.orderBy=zD,k.over=fO,k.overArgs=cB,k.overEvery=dO,k.overSome=hO,k.partial=t0,k.partialRight=M1,k.partition=QD,k.pick=g3,k.pickBy=W1,k.property=e_,k.propertyOf=pO,k.pull=zN,k.pullAll=T1,k.pullAllBy=QN,k.pullAllWith=XN,k.pullAt=JN,k.range=gO,k.rangeRight=mO,k.rearg=fB,k.reject=ZD,k.remove=ZN,k.rest=dB,k.reverse=Zp,k.sampleSize=eB,k.set=y3,k.setWith=v3,k.shuffle=tB,k.slice=$N,k.sortBy=iB,k.sortedUniq=sD,k.sortedUniqBy=oD,k.split=G3,k.spread=hB,k.tail=lD,k.take=uD,k.takeRight=cD,k.takeRightWhile=fD,k.takeWhile=dD,k.tap=AD,k.throttle=pB,k.thru=gf,k.toArray=V1,k.toPairs=z1,k.toPairsIn=Q1,k.toPath=EO,k.toPlainObject=H1,k.transform=_3,k.unary=gB,k.union=hD,k.unionBy=pD,k.unionWith=gD,k.uniq=mD,k.uniqBy=yD,k.uniqWith=vD,k.unset=w3,k.unzip=$p,k.unzipWith=A1,k.update=E3,k.updateWith=C3,k.values=qo,k.valuesIn=b3,k.without=_D,k.words=Z1,k.wrap=mB,k.xor=wD,k.xorBy=ED,k.xorWith=CD,k.zip=bD,k.zipObject=xD,k.zipObjectDeep=SD,k.zipWith=TD,k.entries=z1,k.entriesIn=Q1,k.extend=K1,k.extendWith=Cf,u0(k,k),k.add=bO,k.attempt=$1,k.camelCase=A3,k.capitalize=X1,k.ceil=xO,k.clamp=x3,k.clone=vB,k.cloneDeep=wB,k.cloneDeepWith=EB,k.cloneWith=_B,k.conformsTo=CB,k.deburr=J1,k.defaultTo=rO,k.divide=SO,k.endsWith=k3,k.eq=vi,k.escape=I3,k.escapeRegExp=R3,k.every=MD,k.find=FD,k.findIndex=C1,k.findKey=ZB,k.findLast=qD,k.findLastIndex=b1,k.findLastKey=$B,k.floor=TO,k.forEach=I1,k.forEachRight=R1,k.forIn=e3,k.forInRight=t3,k.forOwn=r3,k.forOwnRight=n3,k.get=i0,k.gt=bB,k.gte=xB,k.has=s3,k.hasIn=a0,k.head=S1,k.identity=Tn,k.includes=KD,k.indexOf=qN,k.inRange=S3,k.invoke=u3,k.isArguments=Ls,k.isArray=nt,k.isArrayBuffer=SB,k.isArrayLike=xn,k.isArrayLikeObject=Cr,k.isBoolean=TB,k.isBuffer=Xa,k.isDate=AB,k.isElement=kB,k.isEmpty=IB,k.isEqual=RB,k.isEqualWith=NB,k.isError=r0,k.isFinite=DB,k.isFunction=ya,k.isInteger=U1,k.isLength=wf,k.isMap=F1,k.isMatch=BB,k.isMatchWith=OB,k.isNaN=LB,k.isNative=PB,k.isNil=UB,k.isNull=MB,k.isNumber=q1,k.isObject=gr,k.isObjectLike=_r,k.isPlainObject=cu,k.isRegExp=n0,k.isSafeInteger=FB,k.isSet=G1,k.isString=Ef,k.isSymbol=Pn,k.isTypedArray=Fo,k.isUndefined=qB,k.isWeakMap=GB,k.isWeakSet=VB,k.join=KN,k.kebabCase=N3,k.last=Jn,k.lastIndexOf=YN,k.lowerCase=D3,k.lowerFirst=B3,k.lt=jB,k.lte=HB,k.max=AO,k.maxBy=kO,k.mean=IO,k.meanBy=RO,k.min=NO,k.minBy=DO,k.stubArray=f0,k.stubFalse=d0,k.stubObject=yO,k.stubString=vO,k.stubTrue=_O,k.multiply=BO,k.nth=WN,k.noConflict=uO,k.noop=c0,k.now=yf,k.pad=O3,k.padEnd=L3,k.padStart=P3,k.parseInt=M3,k.random=T3,k.reduce=XD,k.reduceRight=JD,k.repeat=U3,k.replace=F3,k.result=m3,k.round=OO,k.runInContext=W,k.sample=$D,k.size=rB,k.snakeCase=q3,k.some=nB,k.sortedIndex=eD,k.sortedIndexBy=tD,k.sortedIndexOf=rD,k.sortedLastIndex=nD,k.sortedLastIndexBy=iD,k.sortedLastIndexOf=aD,k.startCase=V3,k.startsWith=j3,k.subtract=LO,k.sum=PO,k.sumBy=MO,k.template=H3,k.times=wO,k.toFinite=va,k.toInteger=ht,k.toLength=j1,k.toLower=K3,k.toNumber=Zn,k.toSafeInteger=KB,k.toString=Ht,k.toUpper=Y3,k.trim=W3,k.trimEnd=z3,k.trimStart=Q3,k.truncate=X3,k.unescape=J3,k.uniqueId=CO,k.upperCase=Z3,k.upperFirst=s0,k.each=I1,k.eachRight=R1,k.first=S1,u0(k,function(){var o={};return Ui(k,function(c,p){Wt.call(k.prototype,p)||(o[p]=c)}),o}(),{chain:!1}),k.VERSION=e,Yn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){k[o].placeholder=k}),Yn(["drop","take"],function(o,c){kt.prototype[o]=function(p){p=p===t?1:Br(ht(p),0);var v=this.__filtered__&&!c?new kt(this):this.clone();return v.__filtered__?v.__takeCount__=an(p,v.__takeCount__):v.__views__.push({size:an(p,Ze),type:o+(v.__dir__<0?"Right":"")}),v},kt.prototype[o+"Right"]=function(p){return this.reverse()[o](p).reverse()}}),Yn(["filter","map","takeWhile"],function(o,c){var p=c+1,v=p==ye||p==Ve;kt.prototype[o]=function(C){var N=this.clone();return N.__iteratees__.push({iteratee:He(C,3),type:p}),N.__filtered__=N.__filtered__||v,N}}),Yn(["head","last"],function(o,c){var p="take"+(c?"Right":"");kt.prototype[o]=function(){return this[p](1).value()[0]}}),Yn(["initial","tail"],function(o,c){var p="drop"+(c?"":"Right");kt.prototype[o]=function(){return this.__filtered__?new kt(this):this[p](1)}}),kt.prototype.compact=function(){return this.filter(Tn)},kt.prototype.find=function(o){return this.filter(o).head()},kt.prototype.findLast=function(o){return this.reverse().find(o)},kt.prototype.invokeMap=vt(function(o,c){return typeof o=="function"?new kt(this):this.map(function(p){return iu(p,o,c)})}),kt.prototype.reject=function(o){return this.filter(_f(He(o)))},kt.prototype.slice=function(o,c){o=ht(o);var p=this;return p.__filtered__&&(o>0||c<0)?new kt(p):(o<0?p=p.takeRight(-o):o&&(p=p.drop(o)),c!==t&&(c=ht(c),p=c<0?p.dropRight(-c):p.take(c-o)),p)},kt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},kt.prototype.toArray=function(){return this.take(Ze)},Ui(kt.prototype,function(o,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),v=/^(?:head|last)$/.test(c),C=k[v?"take"+(c=="last"?"Right":""):c],N=v||/^find/.test(c);!C||(k.prototype[c]=function(){var P=this.__wrapped__,G=v?[1]:arguments,Q=P instanceof kt,pe=G[0],ge=Q||nt(P),we=function(bt){var Ot=C.apply(k,Va([bt],G));return v&&Ae?Ot[0]:Ot};ge&&p&&typeof pe=="function"&&pe.length!=1&&(Q=ge=!1);var Ae=this.__chain__,Pe=!!this.__actions__.length,Ye=N&&!Ae,gt=Q&&!Pe;if(!N&&ge){P=gt?P:new kt(this);var We=o.apply(P,G);return We.__actions__.push({func:gf,args:[we],thisArg:t}),new zn(We,Ae)}return Ye&&gt?o.apply(this,G):(We=this.thru(we),Ye?v?We.value()[0]:We.value():We)})}),Yn(["pop","push","shift","sort","splice","unshift"],function(o){var c=qc[o],p=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",v=/^(?:pop|shift)$/.test(o);k.prototype[o]=function(){var C=arguments;if(v&&!this.__chain__){var N=this.value();return c.apply(nt(N)?N:[],C)}return this[p](function(P){return c.apply(nt(P)?P:[],C)})}}),Ui(kt.prototype,function(o,c){var p=k[c];if(p){var v=p.name+"";Wt.call(Oo,v)||(Oo[v]=[]),Oo[v].push({name:c,func:p})}}),Oo[lf(t,_).name]=[{name:"wrapper",func:t}],kt.prototype.clone=JI,kt.prototype.reverse=ZI,kt.prototype.value=$I,k.prototype.at=kD,k.prototype.chain=ID,k.prototype.commit=RD,k.prototype.next=ND,k.prototype.plant=BD,k.prototype.reverse=OD,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=LD,k.prototype.first=k.prototype.head,Jl&&(k.prototype[Jl]=DD),k},Ha=RI();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ur._=Ha,define(function(){return Ha})):As?((As.exports=Ha)._=Ha,lp._=Ha):Ur._=Ha}).call(Nl)});var zm=de((BW,Eh)=>{var DS,BS,OS,LS,PS,MS,US,FS,qS,_h,Wm,GS,VS,jS,Ll,HS,KS,YS,WS,zS,QS,XS,JS,wh;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof Eh=="object"&&typeof Eh.exports=="object"?t(r(e,r(Eh.exports))):t(r(e));function r(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])};DS=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function a(){this.constructor=n}n.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)},BS=Object.assign||function(n){for(var i,a=1,s=arguments.length;a<s;a++){i=arguments[a];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},OS=function(n,i){var a={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&i.indexOf(s)<0&&(a[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(n);l<s.length;l++)i.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(n,s[l])&&(a[s[l]]=n[s[l]]);return a},LS=function(n,i,a,s){var l=arguments.length,u=l<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,a):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,a,s);else for(var d=n.length-1;d>=0;d--)(f=n[d])&&(u=(l<3?f(u):l>3?f(i,a,u):f(i,a))||u);return l>3&&u&&Object.defineProperty(i,a,u),u},PS=function(n,i){return function(a,s){i(a,s,n)}},MS=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},US=function(n,i,a,s){function l(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function d(m){try{g(s.next(m))}catch(y){f(y)}}function h(m){try{g(s.throw(m))}catch(y){f(y)}}function g(m){m.done?u(m.value):l(m.value).then(d,h)}g((s=s.apply(n,i||[])).next())})},FS=function(n,i){var a={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,l,u,f;return f={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function d(g){return function(m){return h([g,m])}}function h(g){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,l&&(u=g[0]&2?l.return:g[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,g[1])).done)return u;switch(l=0,u&&(g=[g[0]&2,u.value]),g[0]){case 0:case 1:u=g;break;case 4:return a.label++,{value:g[1],done:!1};case 5:a.label++,l=g[1],g=[0];continue;case 7:g=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(g[0]===6||g[0]===2)){a=0;continue}if(g[0]===3&&(!u||g[1]>u[0]&&g[1]<u[3])){a.label=g[1];break}if(g[0]===6&&a.label<u[1]){a.label=u[1],u=g;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(g);break}u[2]&&a.ops.pop(),a.trys.pop();continue}g=i.call(n,a)}catch(m){g=[6,m],l=0}finally{s=u=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},qS=function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&wh(i,n,a)},wh=Object.create?function(n,i,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]},_h=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&n[i],s=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Wm=function(n,i){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var s=a.call(n),l,u=[],f;try{for(;(i===void 0||i-- >0)&&!(l=s.next()).done;)u.push(l.value)}catch(d){f={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(f)throw f.error}}return u},GS=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(Wm(arguments[i]));return n},VS=function(){for(var n=0,i=0,a=arguments.length;i<a;i++)n+=arguments[i].length;for(var s=Array(n),l=0,i=0;i<a;i++)for(var u=arguments[i],f=0,d=u.length;f<d;f++,l++)s[l]=u[f];return s},jS=function(n,i){for(var a=0,s=i.length,l=n.length;a<s;a++,l++)n[l]=i[a];return n},Ll=function(n){return this instanceof Ll?(this.v=n,this):new Ll(n)},HS=function(n,i,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=a.apply(n,i||[]),l,u=[];return l={},f("next"),f("throw"),f("return"),l[Symbol.asyncIterator]=function(){return this},l;function f(_){s[_]&&(l[_]=function(w){return new Promise(function(E,T){u.push([_,w,E,T])>1||d(_,w)})})}function d(_,w){try{h(s[_](w))}catch(E){y(u[0][3],E)}}function h(_){_.value instanceof Ll?Promise.resolve(_.value.v).then(g,m):y(u[0][2],_)}function g(_){d("next",_)}function m(_){d("throw",_)}function y(_,w){_(w),u.shift(),u.length&&d(u[0][0],u[0][1])}},KS=function(n){var i,a;return i={},s("next"),s("throw",function(l){throw l}),s("return"),i[Symbol.iterator]=function(){return this},i;function s(l,u){i[l]=n[l]?function(f){return(a=!a)?{value:Ll(n[l](f)),done:l==="return"}:u?u(f):f}:u}},YS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],a;return i?i.call(n):(n=typeof _h=="function"?_h(n):n[Symbol.iterator](),a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a);function s(u){a[u]=n[u]&&function(f){return new Promise(function(d,h){f=n[u](f),l(d,h,f.done,f.value)})}}function l(u,f,d,h){Promise.resolve(h).then(function(g){u({value:g,done:d})},f)}},WS=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var r=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};zS=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var a in n)a!=="default"&&Object.prototype.hasOwnProperty.call(n,a)&&wh(i,n,a);return r(i,n),i},QS=function(n){return n&&n.__esModule?n:{default:n}},XS=function(n,i,a,s){if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!s:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?s:a==="a"?s.call(n):s?s.value:i.get(n)},JS=function(n,i,a,s,l){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!l:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?l.call(n,a):l?l.value=a:i.set(n,a),a},t("__extends",DS),t("__assign",BS),t("__rest",OS),t("__decorate",LS),t("__param",PS),t("__metadata",MS),t("__awaiter",US),t("__generator",FS),t("__exportStar",qS),t("__createBinding",wh),t("__values",_h),t("__read",Wm),t("__spread",GS),t("__spreadArrays",VS),t("__spreadArray",jS),t("__await",Ll),t("__asyncGenerator",HS),t("__asyncDelegator",KS),t("__asyncValues",YS),t("__makeTemplateObject",WS),t("__importStar",zS),t("__importDefault",QS),t("__classPrivateFieldGet",XS),t("__classPrivateFieldSet",JS)})});var ET=de((Bz,kh)=>{var tT,rT,nT,iT,aT,sT,oT,lT,uT,Ah,Xm,cT,fT,Pl,dT,hT,pT,gT,mT,yT,vT,_T,wT;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof kh=="object"&&typeof kh.exports=="object"?t(r(e,r(kh.exports))):t(r(e));function r(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])};tT=function(r,n){e(r,n);function i(){this.constructor=r}r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)},rT=Object.assign||function(r){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},nT=function(r,n){var i={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&n.indexOf(a)<0&&(i[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(r);s<a.length;s++)n.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(r,a[s])&&(i[a[s]]=r[a[s]]);return i},iT=function(r,n,i,a){var s=arguments.length,l=s<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,i):a,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,n,i,a);else for(var f=r.length-1;f>=0;f--)(u=r[f])&&(l=(s<3?u(l):s>3?u(n,i,l):u(n,i))||l);return s>3&&l&&Object.defineProperty(n,i,l),l},aT=function(r,n){return function(i,a){n(i,a,r)}},sT=function(r,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,n)},oT=function(r,n,i,a){function s(l){return l instanceof i?l:new i(function(u){u(l)})}return new(i||(i=Promise))(function(l,u){function f(g){try{h(a.next(g))}catch(m){u(m)}}function d(g){try{h(a.throw(g))}catch(m){u(m)}}function h(g){g.done?l(g.value):s(g.value).then(f,d)}h((a=a.apply(r,n||[])).next())})},lT=function(r,n){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,s,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(h){return function(g){return d([h,g])}}function d(h){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,s&&(l=h[0]&2?s.return:h[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,h[1])).done)return l;switch(s=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,s=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){i.label=h[1];break}if(h[0]===6&&i.label<l[1]){i.label=l[1],l=h;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(h);break}l[2]&&i.ops.pop(),i.trys.pop();continue}h=n.call(r,i)}catch(g){h=[6,g],s=0}finally{a=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},wT=function(r,n,i,a){a===void 0&&(a=i),r[a]=n[i]},uT=function(r,n){for(var i in r)i!=="default"&&!n.hasOwnProperty(i)&&(n[i]=r[i])},Ah=function(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],a=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Xm=function(r,n){var i=typeof Symbol=="function"&&r[Symbol.iterator];if(!i)return r;var a=i.call(r),s,l=[],u;try{for(;(n===void 0||n-- >0)&&!(s=a.next()).done;)l.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return l},cT=function(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(Xm(arguments[n]));return r},fT=function(){for(var r=0,n=0,i=arguments.length;n<i;n++)r+=arguments[n].length;for(var a=Array(r),s=0,n=0;n<i;n++)for(var l=arguments[n],u=0,f=l.length;u<f;u++,s++)a[s]=l[u];return a},Pl=function(r){return this instanceof Pl?(this.v=r,this):new Pl(r)},dT=function(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(r,n||[]),s,l=[];return s={},u("next"),u("throw"),u("return"),s[Symbol.asyncIterator]=function(){return this},s;function u(y){a[y]&&(s[y]=function(_){return new Promise(function(w,E){l.push([y,_,w,E])>1||f(y,_)})})}function f(y,_){try{d(a[y](_))}catch(w){m(l[0][3],w)}}function d(y){y.value instanceof Pl?Promise.resolve(y.value.v).then(h,g):m(l[0][2],y)}function h(y){f("next",y)}function g(y){f("throw",y)}function m(y,_){y(_),l.shift(),l.length&&f(l[0][0],l[0][1])}},hT=function(r){var n,i;return n={},a("next"),a("throw",function(s){throw s}),a("return"),n[Symbol.iterator]=function(){return this},n;function a(s,l){n[s]=r[s]?function(u){return(i=!i)?{value:Pl(r[s](u)),done:s==="return"}:l?l(u):u}:l}},pT=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof Ah=="function"?Ah(r):r[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(l){i[l]=r[l]&&function(u){return new Promise(function(f,d){u=r[l](u),s(f,d,u.done,u.value)})}}function s(l,u,f,d){Promise.resolve(d).then(function(h){l({value:h,done:f})},u)}},gT=function(r,n){return Object.defineProperty?Object.defineProperty(r,"raw",{value:n}):r.raw=n,r},mT=function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var i in r)Object.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n.default=r,n},yT=function(r){return r&&r.__esModule?r:{default:r}},vT=function(r,n){if(!n.has(r))throw new TypeError("attempted to get private field on non-instance");return n.get(r)},_T=function(r,n,i){if(!n.has(r))throw new TypeError("attempted to set private field on non-instance");return n.set(r,i),i},t("__extends",tT),t("__assign",rT),t("__rest",nT),t("__decorate",iT),t("__param",aT),t("__metadata",sT),t("__awaiter",oT),t("__generator",lT),t("__exportStar",uT),t("__createBinding",wT),t("__values",Ah),t("__read",Xm),t("__spread",cT),t("__spreadArrays",fT),t("__await",Pl),t("__asyncGenerator",dT),t("__asyncDelegator",hT),t("__asyncValues",pT),t("__makeTemplateObject",gT),t("__importStar",mT),t("__importDefault",yT),t("__classPrivateFieldGet",vT),t("__classPrivateFieldSet",_T)})});var hA=de(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.isDate=Es.isComparable=Es.isIterable=void 0;Es.isIterable=t=>!(t==null||t[Symbol.iterator]==null);Es.isComparable=t=>{let e=Object.prototype.toString,r=t;return r.compare!=null&&e.call(r.compare).endsWith("Function]")};Es.isDate=t=>Object.prototype.toString.call(t).endsWith("Date]")});var gA=de(pA=>{"use strict";Object.defineProperty(pA,"__esModule",{value:!0})});var mA=de(Dh=>{"use strict";Object.defineProperty(Dh,"__esModule",{value:!0});var Kq=zm(),ry=hA(),Yq=(t,e)=>t-e,Wq=(t,e)=>Number(t-e),zq=(t,e)=>t.localeCompare(e),Qq=(t,e)=>t.getTime()-e.getTime(),jl={number:Yq,string:zq,Date:Qq,bigInt:Wq,none:()=>0},Xq=t=>{if(typeof t=="number")return jl.number;if(typeof t=="string")return jl.string;if(typeof t=="bigint")return jl.bigInt;if(ry.isDate(t))return jl.Date;if(ry.isComparable(t))return(e,r)=>e.compare(r);throw new Error("Cannot sort keys in this map. You have to specify compareFn if the type of key in this map is not number, string, or Date.")},Co=class extends Map{constructor(e,r){super();this.specifiedCompareFn=!1,this.isCompareFn=n=>typeof n=="function",this.compareFn=jl.none,this.sortedKeys=[],ry.isIterable(e)&&this._constructor(e,r),this.isCompareFn(e)&&this._constructor(null,e),e==null&&this._constructor(null,r)}get comparator(){return this.compareFn}compare(e,r){return Math.sign(this.compareFn(e,r))}_constructor(e,r){if(this.compareFn=r==null?jl.none:r,this.specifiedCompareFn=r!=null,e!=null)for(let n of e)this.set(...n)}static fromMap(e,r){let n=new Co(r);return n.setAll(e),n}duplicate(){return Co.fromMap(this,this.compareFn)}toMap(){let e=new Map,r=Array.from(super.entries());return r.sort((n,i)=>this.compareFn(n[0],i[0])),r.forEach(([n,i])=>{e.set(n,i)}),e}reverseKeys(){return[...this.sortedKeys].reverse().values()}get(e){let r=this.sortedKeys.find(n=>this.comparator(n,e)===0);if(r!=null)return super.get(r)}set(e,r){this.sortedKeys.length===0&&!this.specifiedCompareFn&&(this.compareFn=Xq(e),this.specifiedCompareFn=!0);let n=this.sortedKeys.find(i=>this.compareFn(i,e)===0);return n==null?(this.sortedKeys.push(e),super.set(e,r)):super.set(n,r),this.sortedKeys.sort(this.compareFn),this}setAll(e){return e.forEach((r,n)=>{this.set(n,r)}),this}delete(e){return super.delete(e)?(this.sortedKeys=this.sortedKeys.filter(r=>this.compare(r,e)!==0),!0):!1}clear(){super.clear(),this.sortedKeys=[]}keys(){return this.sortedKeys.values()}values(){return this.sortedKeys.map(e=>super.get(e)).values()}entries(){return this.toMap().entries()}firstEntry(){let e=this.firstKey();if(e==null)return;let r=this.get(e);return r===void 0?void 0:[e,r]}firstKey(){return this.sortedKeys[0]}lastEntry(){let e=this.lastKey();if(e==null)return;let r=this.get(e);return r===void 0?void 0:[e,r]}lastKey(){return[...this.sortedKeys].reverse()[0]}shiftEntry(){let e=this.firstEntry();if(e!=null)return this.delete(e[0]),e}popEntry(){let e=this.lastEntry();if(e!=null)return this.delete(e[0]),e}floorEntry(e){let r=this.floorKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}floorKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)<=0).reverse()[0]}ceilingEntry(e){let r=this.ceilingKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}ceilingKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)>=0)[0]}lowerEntry(e){let r=this.lowerKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}lowerKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)<0).reverse()[0]}higherEntry(e){let r=this.higherKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}higherKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)>0)[0]}splitLower(e,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],e)<0;return r?a||this.compare(i[0],e)===0:a});return new Co(n,this.compareFn)}splitHigher(e,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],e)>0;return r?a||this.compare(i[0],e)===0:a});return new Co(n,this.compareFn)}forEach(e,r){Array.from(this.entries()).forEach(([n,i])=>{e(i,n,this)},r)}};Dh.default=Co;Kq.__exportStar(gA(),Dh)});KO(exports,{default:()=>st});var Ql=_t(require("obsidian"));var h0=_t(require("obsidian")),bf=new Map;function wt(t,e=!1){let r=window.moment();bf.has(t)?(bf.get(t).isBefore(r)||e)&&(new h0.Notice(t),bf.set(t,r.add(1,"minute"))):(console.log(`[Google Calendar] ${t}`),new h0.Notice(t),bf.set(t,r.add(0,"minute")))}var Gt=_t(require("obsidian"));var xf=()=>{var t;return(t=window.localStorage.getItem("googleCalendarAccessToken"))!=null?t:""},wa=()=>{var t;return(t=window.localStorage.getItem("googleCalendarRefreshToken"))!=null?t:""},Sf=()=>{var e;let t=(e=window.localStorage.getItem("googleCalendarExpirationTime"))!=null?e:"0";return parseInt(t,10)},Ps=()=>{var t;return(t=window.localStorage.getItem("googleCalendarUserId"))!=null?t:""},Ja=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarAccessToken",t)},Tf=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarUserId",t)},du=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarRefreshToken",t)},Za=t=>{isNaN(t)||window.localStorage.setItem("googleCalendarExpirationTime",t+"")};var rh=_t(require("obsidian"));var s_=_t(require("obsidian")),Xr=(t,e,r,n=!1)=>M(void 0,null,function*(){let i=st.getInstance(),a={"Content-Type":"application/json"};if(n==!1){let l=yield o_(i);if(!l)return;a.Authorization="Bearer "+l}if(i.settings.debugMode){console.log(`New Request ${e}:${t}`);let l=$n({},a);l.Authorization&&(l.Authorization=l.Authorization.substring(0,15)+"..."),console.log({body:r,headers:l});let u=yield fetch(t,{method:e,body:r?JSON.stringify(r):null,headers:a});return u.status>=400?void 0:e.toLowerCase()=="delete"?{status:"success"}:yield u.json()}let s=yield(0,s_.requestUrl)({method:e,url:t,body:r?JSON.stringify(r):null,headers:a});if(!(s.status>=400))return e.toLowerCase()=="delete"?{status:"success"}:yield s.json});var vm=42813;function qU(){return!(!xf()||xf()==""||!Sf()||isNaN(Sf())||Sf()<+new Date)}var GU=t=>M(void 0,null,function*(){let e={client_id:t.settings.googleClientId,client_secret:t.settings.googleClientSecret.trim(),grant_type:"refresh_token",refresh_token:wa()},r=yield Xr("https://oauth2.googleapis.com/token","POST",e,!0);return r?(Ja(r.access_token),Za(+new Date+r.expires_in*1e3),!0):(wt("Error while refreshing authentication"),!1)}),Rx=t=>M(void 0,null,function*(){let e={uid:Ps()},r=yield Xr(`${t.settings.googleOAuthServer}/api/google/refresh`,"POST",e,!0);return r?(Ja(r.access_token),Za(+new Date+r.expires_in*1e3),!0):(wt("Error while refreshing authentication"),!1)});function o_(t){return M(this,null,function*(){if(!zt())return"";let e=!1;return qU()==!1&&(wa()!=""||Ps()!="")&&(t.settings.useCustomClient?(e=yield GU(t),e==!1&&(e=yield Rx(t))):e=yield Rx(t)),xf()})}function Nx(){return M(this,null,function*(){let t=st.getInstance();if(rh.Platform.isDesktop){if(!Dx())return;let{OAuth2Client:e}=Ax(),r=require("http"),n=require("url"),i=Ix(),a=new e(t.settings.googleClientId,t.settings.googleClientSecret.trim(),`http://127.0.0.1:${vm}/callback`),s=a.generateAuthUrl({scope:["https://www.googleapis.com/auth/calendar"],access_type:"offline",prompt:"consent"}),l=r.createServer((u,f)=>M(this,null,function*(){try{if(u.url.indexOf("/callback")>-1){let h=new n.URL(u.url,`http://localhost:${vm}`).searchParams.get("code");f.end("Authentication successful! Please return to obsidian."),l.destroy();let g=yield a.getToken(h);du(g.tokens.refresh_token),Ja(g.tokens.access_token),Za(g.tokens.expiry_date),console.info("Tokens acquired."),t.settingsTab.display()}}catch(d){console.log("Auth failed")}})).listen(vm,()=>M(this,null,function*(){window.open(s)}));i(l)}else new rh.Notice("Can't use OAuth on this device")})}var _m=new Map,wm=new Map;function Bx(){return M(this,null,function*(){if(!zt())return;let t=yield Xr("https://www.googleapis.com/calendar/v3/colors","GET",null);if(!t){wt("Error fetching color data from google");return}Object.keys(t.calendar).forEach(e=>{_m.set(e,t.calendar[e].background)}),Object.keys(t.event).forEach(e=>{wm.set(e,t.event[e].background)})})}function Ku(t){return t.colorId&&wm.has(t.colorId)?wm.get(t.colorId):t.parent.colorId&&_m.has(t.parent.colorId)?_m.get(t.parent.colorId):"#a4bdfc"}var Em=[];function Ox(t,e){return e.filter(n=>!t.settings.calendarBlackList.some(i=>i[0]==n.id))}function Or(){return M(this,null,function*(){if(!zt())return[];let t=st.getInstance();if(Em.length)return Ox(t,Em);yield Bx();let e=yield Xr("https://www.googleapis.com/calendar/v3/users/me/calendarList","GET",null);return e?(Em=e.items,Ox(t,e.items)):(wt("Could not list Google Calendars"),[])})}var Ri=_t(require("obsidian"));var rS=_t(require("obsidian"));var Er="top",Lr="bottom",Ir="right",xr="left",nh="auto",ps=[Er,Lr,Ir,xr],Ia="start",to="end",Lx="clippingParents",ih="viewport",xl="popper",Px="reference",Cm=ps.reduce(function(t,e){return t.concat([e+"-"+Ia,e+"-"+to])},[]),ah=[].concat(ps,[nh]).reduce(function(t,e){return t.concat([e,e+"-"+Ia,e+"-"+to])},[]),VU="beforeRead",jU="read",HU="afterRead",KU="beforeMain",YU="main",WU="afterMain",zU="beforeWrite",QU="write",XU="afterWrite",Mx=[VU,jU,HU,KU,YU,WU,zU,QU,XU];function Kr(t){return t?(t.nodeName||"").toLowerCase():null}function mr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function oi(t){var e=mr(t).Element;return t instanceof e||t instanceof Element}function Pr(t){var e=mr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Sl(t){if(typeof ShadowRoot=="undefined")return!1;var e=mr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function JU(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},i=e.attributes[r]||{},a=e.elements[r];!Pr(a)||!Kr(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(s){var l=i[s];l===!1?a.removeAttribute(s):a.setAttribute(s,l===!0?"":l)}))})}function ZU(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],a=e.attributes[n]||{},s=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),l=s.reduce(function(u,f){return u[f]="",u},{});!Pr(i)||!Kr(i)||(Object.assign(i.style,l),Object.keys(a).forEach(function(u){i.removeAttribute(u)}))})}}var Ux={name:"applyStyles",enabled:!0,phase:"write",fn:JU,effect:ZU,requires:["computeStyles"]};function Yr(t){return t.split("-")[0]}var Ai=Math.max,ro=Math.min,Ra=Math.round;function Tl(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Yu(){return!/^((?!chrome|android).)*safari/i.test(Tl())}function li(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=t.getBoundingClientRect(),i=1,a=1;e&&Pr(t)&&(i=t.offsetWidth>0&&Ra(n.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Ra(n.height)/t.offsetHeight||1);var s=oi(t)?mr(t):window,l=s.visualViewport,u=!Yu()&&r,f=(n.left+(u&&l?l.offsetLeft:0))/i,d=(n.top+(u&&l?l.offsetTop:0))/a,h=n.width/i,g=n.height/a;return{width:h,height:g,top:d,right:f+h,bottom:d+g,left:f,x:f,y:d}}function no(t){var e=li(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function Wu(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&Sl(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function vn(t){return mr(t).getComputedStyle(t)}function bm(t){return["table","td","th"].indexOf(Kr(t))>=0}function en(t){return((oi(t)?t.ownerDocument:t.document)||window.document).documentElement}function Na(t){return Kr(t)==="html"?t:t.assignedSlot||t.parentNode||(Sl(t)?t.host:null)||en(t)}function Fx(t){return!Pr(t)||vn(t).position==="fixed"?null:t.offsetParent}function $U(t){var e=/firefox/i.test(Tl()),r=/Trident/i.test(Tl());if(r&&Pr(t)){var n=vn(t);if(n.position==="fixed")return null}var i=Na(t);for(Sl(i)&&(i=i.host);Pr(i)&&["html","body"].indexOf(Kr(i))<0;){var a=vn(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function ki(t){for(var e=mr(t),r=Fx(t);r&&bm(r)&&vn(r).position==="static";)r=Fx(r);return r&&(Kr(r)==="html"||Kr(r)==="body"&&vn(r).position==="static")?e:r||$U(t)||e}function io(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ao(t,e,r){return Ai(t,ro(e,r))}function qx(t,e,r){var n=ao(t,e,r);return n>r?r:n}function zu(){return{top:0,right:0,bottom:0,left:0}}function Qu(t){return Object.assign({},zu(),t)}function Xu(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var eF=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,Qu(typeof e!="number"?e:Xu(e,ps))};function tF(t){var e,r=t.state,n=t.name,i=t.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,l=Yr(r.placement),u=io(l),f=[xr,Ir].indexOf(l)>=0,d=f?"height":"width";if(!(!a||!s)){var h=eF(i.padding,r),g=no(a),m=u==="y"?Er:xr,y=u==="y"?Lr:Ir,_=r.rects.reference[d]+r.rects.reference[u]-s[u]-r.rects.popper[d],w=s[u]-r.rects.reference[u],E=ki(a),T=E?u==="y"?E.clientHeight||0:E.clientWidth||0:0,x=_/2-w/2,O=h[m],I=T-g[d]-h[y],B=T/2-g[d]/2+x,z=ao(O,B,I),F=u;r.modifiersData[n]=(e={},e[F]=z,e.centerOffset=z-B,e)}}function rF(t){var e=t.state,r=t.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!Wu(e.elements.popper,i)||(e.elements.arrow=i))}var Gx={name:"arrow",enabled:!0,phase:"main",fn:tF,effect:rF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ui(t){return t.split("-")[1]}var nF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function iF(t){var e=t.x,r=t.y,n=window,i=n.devicePixelRatio||1;return{x:Ra(e*i)/i||0,y:Ra(r*i)/i||0}}function Vx(t){var e,r=t.popper,n=t.popperRect,i=t.placement,a=t.variation,s=t.offsets,l=t.position,u=t.gpuAcceleration,f=t.adaptive,d=t.roundOffsets,h=t.isFixed,g=s.x,m=g===void 0?0:g,y=s.y,_=y===void 0?0:y,w=typeof d=="function"?d({x:m,y:_}):{x:m,y:_};m=w.x,_=w.y;var E=s.hasOwnProperty("x"),T=s.hasOwnProperty("y"),x=xr,O=Er,I=window;if(f){var B=ki(r),z="clientHeight",F="clientWidth";if(B===mr(r)&&(B=en(r),vn(B).position!=="static"&&l==="absolute"&&(z="scrollHeight",F="scrollWidth")),B=B,i===Er||(i===xr||i===Ir)&&a===to){O=Lr;var q=h&&B===I&&I.visualViewport?I.visualViewport.height:B[z];_-=q-n.height,_*=u?1:-1}if(i===xr||(i===Er||i===Lr)&&a===to){x=Ir;var te=h&&B===I&&I.visualViewport?I.visualViewport.width:B[F];m-=te-n.width,m*=u?1:-1}}var ie=Object.assign({position:l},f&&nF),ye=d===!0?iF({x:m,y:_}):{x:m,y:_};if(m=ye.x,_=ye.y,u){var be;return Object.assign({},ie,(be={},be[O]=T?"0":"",be[x]=E?"0":"",be.transform=(I.devicePixelRatio||1)<=1?"translate("+m+"px, "+_+"px)":"translate3d("+m+"px, "+_+"px, 0)",be))}return Object.assign({},ie,(e={},e[O]=T?_+"px":"",e[x]=E?m+"px":"",e.transform="",e))}function aF(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,s=a===void 0?!0:a,l=r.roundOffsets,u=l===void 0?!0:l;if(!1)var f;var d={placement:Yr(e.placement),variation:ui(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Vx(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Vx(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var jx={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:aF,data:{}};var sh={passive:!0};function sF(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,a=i===void 0?!0:i,s=n.resize,l=s===void 0?!0:s,u=mr(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&f.forEach(function(d){d.addEventListener("scroll",r.update,sh)}),l&&u.addEventListener("resize",r.update,sh),function(){a&&f.forEach(function(d){d.removeEventListener("scroll",r.update,sh)}),l&&u.removeEventListener("resize",r.update,sh)}}var Hx={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:sF,data:{}};var oF={left:"right",right:"left",bottom:"top",top:"bottom"};function Al(t){return t.replace(/left|right|bottom|top/g,function(e){return oF[e]})}var lF={start:"end",end:"start"};function oh(t){return t.replace(/start|end/g,function(e){return lF[e]})}function so(t){var e=mr(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function oo(t){return li(en(t)).left+so(t).scrollLeft}function xm(t,e){var r=mr(t),n=en(t),i=r.visualViewport,a=n.clientWidth,s=n.clientHeight,l=0,u=0;if(i){a=i.width,s=i.height;var f=Yu();(f||!f&&e==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:a,height:s,x:l+oo(t),y:u}}function Sm(t){var e,r=en(t),n=so(t),i=(e=t.ownerDocument)==null?void 0:e.body,a=Ai(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Ai(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-n.scrollLeft+oo(t),u=-n.scrollTop;return vn(i||r).direction==="rtl"&&(l+=Ai(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:l,y:u}}function lo(t){var e=vn(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function lh(t){return["html","body","#document"].indexOf(Kr(t))>=0?t.ownerDocument.body:Pr(t)&&lo(t)?t:lh(Na(t))}function gs(t,e){var r;e===void 0&&(e=[]);var n=lh(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),a=mr(n),s=i?[a].concat(a.visualViewport||[],lo(n)?n:[]):n,l=e.concat(s);return i?l:l.concat(gs(Na(s)))}function kl(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function uF(t,e){var r=li(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function Kx(t,e,r){return e===ih?kl(xm(t,r)):oi(e)?uF(e,r):kl(Sm(en(t)))}function cF(t){var e=gs(Na(t)),r=["absolute","fixed"].indexOf(vn(t).position)>=0,n=r&&Pr(t)?ki(t):t;return oi(n)?e.filter(function(i){return oi(i)&&Wu(i,n)&&Kr(i)!=="body"}):[]}function Tm(t,e,r,n){var i=e==="clippingParents"?cF(t):[].concat(e),a=[].concat(i,[r]),s=a[0],l=a.reduce(function(u,f){var d=Kx(t,f,n);return u.top=Ai(d.top,u.top),u.right=ro(d.right,u.right),u.bottom=ro(d.bottom,u.bottom),u.left=Ai(d.left,u.left),u},Kx(t,s,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Ju(t){var e=t.reference,r=t.element,n=t.placement,i=n?Yr(n):null,a=n?ui(n):null,s=e.x+e.width/2-r.width/2,l=e.y+e.height/2-r.height/2,u;switch(i){case Er:u={x:s,y:e.y-r.height};break;case Lr:u={x:s,y:e.y+e.height};break;case Ir:u={x:e.x+e.width,y:l};break;case xr:u={x:e.x-r.width,y:l};break;default:u={x:e.x,y:e.y}}var f=i?io(i):null;if(f!=null){var d=f==="y"?"height":"width";switch(a){case Ia:u[f]=u[f]-(e[d]/2-r[d]/2);break;case to:u[f]=u[f]+(e[d]/2-r[d]/2);break;default:}}return u}function Ii(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=n===void 0?t.placement:n,a=r.strategy,s=a===void 0?t.strategy:a,l=r.boundary,u=l===void 0?Lx:l,f=r.rootBoundary,d=f===void 0?ih:f,h=r.elementContext,g=h===void 0?xl:h,m=r.altBoundary,y=m===void 0?!1:m,_=r.padding,w=_===void 0?0:_,E=Qu(typeof w!="number"?w:Xu(w,ps)),T=g===xl?Px:xl,x=t.rects.popper,O=t.elements[y?T:g],I=Tm(oi(O)?O:O.contextElement||en(t.elements.popper),u,d,s),B=li(t.elements.reference),z=Ju({reference:B,element:x,strategy:"absolute",placement:i}),F=kl(Object.assign({},x,z)),q=g===xl?F:B,te={top:I.top-q.top+E.top,bottom:q.bottom-I.bottom+E.bottom,left:I.left-q.left+E.left,right:q.right-I.right+E.right},ie=t.modifiersData.offset;if(g===xl&&ie){var ye=ie[i];Object.keys(te).forEach(function(be){var Ve=[Ir,Lr].indexOf(be)>=0?1:-1,Ne=[Er,Lr].indexOf(be)>=0?"y":"x";te[be]+=ye[Ne]*Ve})}return te}function Am(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=r.boundary,a=r.rootBoundary,s=r.padding,l=r.flipVariations,u=r.allowedAutoPlacements,f=u===void 0?ah:u,d=ui(n),h=d?l?Cm:Cm.filter(function(y){return ui(y)===d}):ps,g=h.filter(function(y){return f.indexOf(y)>=0});g.length===0&&(g=h);var m=g.reduce(function(y,_){return y[_]=Ii(t,{placement:_,boundary:i,rootBoundary:a,padding:s})[Yr(_)],y},{});return Object.keys(m).sort(function(y,_){return m[y]-m[_]})}function fF(t){if(Yr(t)===nh)return[];var e=Al(t);return[oh(t),e,oh(e)]}function dF(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!0:s,u=r.fallbackPlacements,f=r.padding,d=r.boundary,h=r.rootBoundary,g=r.altBoundary,m=r.flipVariations,y=m===void 0?!0:m,_=r.allowedAutoPlacements,w=e.options.placement,E=Yr(w),T=E===w,x=u||(T||!y?[Al(w)]:fF(w)),O=[w].concat(x).reduce(function(Nt,Dt){return Nt.concat(Yr(Dt)===nh?Am(e,{placement:Dt,boundary:d,rootBoundary:h,padding:f,flipVariations:y,allowedAutoPlacements:_}):Dt)},[]),I=e.rects.reference,B=e.rects.popper,z=new Map,F=!0,q=O[0],te=0;te<O.length;te++){var ie=O[te],ye=Yr(ie),be=ui(ie)===Ia,Ve=[Er,Lr].indexOf(ye)>=0,Ne=Ve?"width":"height",me=Ii(e,{placement:ie,boundary:d,rootBoundary:h,altBoundary:g,padding:f}),re=Ve?be?Ir:xr:be?Lr:Er;I[Ne]>B[Ne]&&(re=Al(re));var Fe=Al(re),Ze=[];if(a&&Ze.push(me[ye]<=0),l&&Ze.push(me[re]<=0,me[Fe]<=0),Ze.every(function(Nt){return Nt})){q=ie,F=!1;break}z.set(ie,Ze)}if(F)for(var ut=y?3:1,Je=function(Dt){var et=O.find(function(tt){var ft=z.get(tt);if(ft)return ft.slice(0,Dt).every(function(R){return R})});if(et)return q=et,"break"},ct=ut;ct>0;ct--){var le=Je(ct);if(le==="break")break}e.placement!==q&&(e.modifiersData[n]._skip=!0,e.placement=q,e.reset=!0)}}var Yx={name:"flip",enabled:!0,phase:"main",fn:dF,requiresIfExists:["offset"],data:{_skip:!1}};function Wx(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function zx(t){return[Er,Ir,Lr,xr].some(function(e){return t[e]>=0})}function hF(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,s=Ii(e,{elementContext:"reference"}),l=Ii(e,{altBoundary:!0}),u=Wx(s,n),f=Wx(l,i,a),d=zx(u),h=zx(f);e.modifiersData[r]={referenceClippingOffsets:u,popperEscapeOffsets:f,isReferenceHidden:d,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}var Qx={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hF};function pF(t,e,r){var n=Yr(t),i=[xr,Er].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,s=a[0],l=a[1];return s=s||0,l=(l||0)*i,[xr,Ir].indexOf(n)>=0?{x:l,y:s}:{x:s,y:l}}function gF(t){var e=t.state,r=t.options,n=t.name,i=r.offset,a=i===void 0?[0,0]:i,s=ah.reduce(function(d,h){return d[h]=pF(h,e.rects,a),d},{}),l=s[e.placement],u=l.x,f=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=f),e.modifiersData[n]=s}var Xx={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:gF};function mF(t){var e=t.state,r=t.name;e.modifiersData[r]=Ju({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Jx={name:"popperOffsets",enabled:!0,phase:"read",fn:mF,data:{}};function km(t){return t==="x"?"y":"x"}function yF(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!1:s,u=r.boundary,f=r.rootBoundary,d=r.altBoundary,h=r.padding,g=r.tether,m=g===void 0?!0:g,y=r.tetherOffset,_=y===void 0?0:y,w=Ii(e,{boundary:u,rootBoundary:f,padding:h,altBoundary:d}),E=Yr(e.placement),T=ui(e.placement),x=!T,O=io(E),I=km(O),B=e.modifiersData.popperOffsets,z=e.rects.reference,F=e.rects.popper,q=typeof _=="function"?_(Object.assign({},e.rects,{placement:e.placement})):_,te=typeof q=="number"?{mainAxis:q,altAxis:q}:Object.assign({mainAxis:0,altAxis:0},q),ie=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ye={x:0,y:0};if(!!B){if(a){var be,Ve=O==="y"?Er:xr,Ne=O==="y"?Lr:Ir,me=O==="y"?"height":"width",re=B[O],Fe=re+w[Ve],Ze=re-w[Ne],ut=m?-F[me]/2:0,Je=T===Ia?z[me]:F[me],ct=T===Ia?-F[me]:-z[me],le=e.elements.arrow,Nt=m&&le?no(le):{width:0,height:0},Dt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:zu(),et=Dt[Ve],tt=Dt[Ne],ft=ao(0,z[me],Nt[me]),R=x?z[me]/2-ut-ft-et-te.mainAxis:Je-ft-et-te.mainAxis,D=x?-z[me]/2+ut+ft+tt+te.mainAxis:ct+ft+tt+te.mainAxis,L=e.elements.arrow&&ki(e.elements.arrow),K=L?O==="y"?L.clientTop||0:L.clientLeft||0:0,j=(be=ie==null?void 0:ie[O])!=null?be:0,X=re+R-j-K,Z=re+D-j,Y=ao(m?ro(Fe,X):Fe,re,m?Ai(Ze,Z):Ze);B[O]=Y,ye[O]=Y-re}if(l){var J,ne=O==="x"?Er:xr,$=O==="x"?Lr:Ir,he=B[I],Oe=I==="y"?"height":"width",Ue=he+w[ne],dt=he-w[$],Qt=[Er,xr].indexOf(E)!==-1,Xt=(J=ie==null?void 0:ie[I])!=null?J:0,rt=Qt?Ue:he-z[Oe]-F[Oe]-Xt+te.altAxis,Bt=Qt?he+z[Oe]+F[Oe]-Xt-te.altAxis:dt,pr=m&&Qt?qx(rt,he,Bt):ao(m?rt:Ue,he,m?Bt:dt);B[I]=pr,ye[I]=pr-he}e.modifiersData[n]=ye}}var Zx={name:"preventOverflow",enabled:!0,phase:"main",fn:yF,requiresIfExists:["offset"]};function Im(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Rm(t){return t===mr(t)||!Pr(t)?so(t):Im(t)}function vF(t){var e=t.getBoundingClientRect(),r=Ra(e.width)/t.offsetWidth||1,n=Ra(e.height)/t.offsetHeight||1;return r!==1||n!==1}function Nm(t,e,r){r===void 0&&(r=!1);var n=Pr(e),i=Pr(e)&&vF(e),a=en(e),s=li(t,i,r),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(n||!n&&!r)&&((Kr(e)!=="body"||lo(a))&&(l=Rm(e)),Pr(e)?(u=li(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=oo(a))),{x:s.left+l.scrollLeft-u.x,y:s.top+l.scrollTop-u.y,width:s.width,height:s.height}}function _F(t){var e=new Map,r=new Set,n=[];t.forEach(function(a){e.set(a.name,a)});function i(a){r.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(l){if(!r.has(l)){var u=e.get(l);u&&i(u)}}),n.push(a)}return t.forEach(function(a){r.has(a.name)||i(a)}),n}function Dm(t){var e=_F(t);return Mx.reduce(function(r,n){return r.concat(e.filter(function(i){return i.phase===n}))},[])}function Bm(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function Om(t){var e=t.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var $x={placement:"bottom",modifiers:[],strategy:"absolute"};function eS(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function tS(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,i=e.defaultOptions,a=i===void 0?$x:i;return function(l,u,f){f===void 0&&(f=a);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},$x,a),modifiersData:{},elements:{reference:l,popper:u},attributes:{},styles:{}},h=[],g=!1,m={state:d,setOptions:function(E){var T=typeof E=="function"?E(d.options):E;_(),d.options=Object.assign({},a,d.options,T),d.scrollParents={reference:oi(l)?gs(l):l.contextElement?gs(l.contextElement):[],popper:gs(u)};var x=Dm(Om([].concat(n,d.options.modifiers)));if(d.orderedModifiers=x.filter(function(ie){return ie.enabled}),!1){var O;if(getBasePlacement(d.options.placement)===auto)var I;var B,z,F,q,te}return y(),m.update()},forceUpdate:function(){if(!g){var E=d.elements,T=E.reference,x=E.popper;if(!!eS(T,x)){d.rects={reference:Nm(T,ki(x),d.options.strategy==="fixed"),popper:no(x)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(ie){return d.modifiersData[ie.name]=Object.assign({},ie.data)});for(var O=0,I=0;I<d.orderedModifiers.length;I++){if(d.reset===!0){d.reset=!1,I=-1;continue}var B=d.orderedModifiers[I],z=B.fn,F=B.options,q=F===void 0?{}:F,te=B.name;typeof z=="function"&&(d=z({state:d,options:q,name:te,instance:m})||d)}}}},update:Bm(function(){return new Promise(function(w){m.forceUpdate(),w(d)})}),destroy:function(){_(),g=!0}};if(!eS(l,u))return m;m.setOptions(f).then(function(w){!g&&f.onFirstUpdate&&f.onFirstUpdate(w)});function y(){d.orderedModifiers.forEach(function(w){var E=w.name,T=w.options,x=T===void 0?{}:T,O=w.effect;if(typeof O=="function"){var I=O({state:d,name:E,instance:m,options:x}),B=function(){};h.push(I||B)}})}function _(){h.forEach(function(w){return w()}),h=[]}return m}}var wF=[Hx,Jx,jx,Ux,Xx,Yx,Zx,Gx,Qx],Lm=tS({defaultModifiers:wF});var EF=(t,e)=>(t%e+e)%e,nS=class{constructor(e,r,n){this.owner=e,this.containerEl=r,r.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),r.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),n.register([],"ArrowUp",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem-1,!0),!1}),n.register([],"ArrowDown",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem+1,!0),!1}),n.register([],"Enter",i=>{if(!i.isComposing)return this.useSelectedItem(i),!1})}onSuggestionClick(e,r){e.preventDefault();let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1),this.useSelectedItem(e)}onSuggestionMouseover(e,r){let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1)}setSuggestions(e){this.containerEl.empty();let r=[];e.forEach(n=>{let i=this.containerEl.createDiv("suggestion-item");this.owner.renderSuggestion(n,i),r.push(i)}),this.values=e,this.suggestions=r,this.setSelectedItem(0,!1)}useSelectedItem(e){let r=this.values[this.selectedItem];r&&this.owner.selectSuggestion(r,e)}setSelectedItem(e,r){let n=EF(e,this.suggestions.length),i=this.suggestions[this.selectedItem],a=this.suggestions[n];i==null||i.removeClass("is-selected"),a==null||a.addClass("is-selected"),this.selectedItem=n,r&&a.scrollIntoView(!1)}},Zu=class{constructor(e){this.inputEl=e,this.scope=new rS.Scope,this.suggestEl=createDiv("suggestion-container");let r=this.suggestEl.createDiv("suggestion");this.suggest=new nS(this,r,this.scope),this.scope.register([],"Escape",this.close.bind(this)),this.inputEl.addEventListener("input",this.onInputChanged.bind(this)),this.inputEl.addEventListener("focus",this.onInputChanged.bind(this)),this.inputEl.addEventListener("blur",this.close.bind(this)),this.suggestEl.on("mousedown",".suggestion-container",n=>{n.preventDefault()})}onInputChanged(){let e=this.inputEl.value,r=this.getSuggestions(e);if(!r){this.close();return}r.length>0?(this.suggest.setSuggestions(r),this.open(app.dom.appContainerEl,this.inputEl)):this.close()}open(e,r){app.keymap.pushScope(this.scope),e.appendChild(this.suggestEl),this.popper=Lm(r,this.suggestEl,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:({state:n,instance:i})=>{let a=`${n.rects.reference.width}px`;n.styles.popper.width!==a&&(n.styles.popper.width=a,i.update())},phase:"beforeWrite",requires:["computeStyles"]}]})}close(){app.keymap.popScope(this.scope),this.suggest.setSuggestions([]),this.popper&&this.popper.destroy(),this.suggestEl.detach()}};function CF(t){t=(0,Ri.normalizePath)(t);let e=app.vault.getAbstractFileByPath(t);return!e||!(e instanceof Ri.TFolder)?null:e}function iS(t){let e=CF(t),r=[];return Ri.Vault.recurseChildren(e,n=>{n instanceof Ri.TFile&&r.push(n)}),r.sort((n,i)=>n.basename.localeCompare(i.basename)),r}var aS;(function(r){r[r.TemplateFiles=0]="TemplateFiles",r[r.ScriptFiles=1]="ScriptFiles"})(aS||(aS={}));var $u=class extends Zu{constructor(e,r){super(e);this.inputEl=e;this.plugin=r}getSuggestions(e){var s,l,u,f,d,h,g;let r=[];if(this.plugin.templaterPlugin){let m=(0,Ri.normalizePath)((u=(l=(s=this.plugin)==null?void 0:s.templaterPlugin)==null?void 0:l.settings)==null?void 0:u.templates_folder),y=iS(m);r=[...r,...y]}if(this.plugin.coreTemplatePlugin){let m=(0,Ri.normalizePath)((g=(h=(d=(f=this.plugin)==null?void 0:f.coreTemplatePlugin)==null?void 0:d.instance)==null?void 0:h.options)==null?void 0:g.folder),y=iS(m);r=[...r,...y]}if(!r)return[];let n=new Set(r),i=[],a=e.toLowerCase();return n.forEach(m=>{m instanceof Ri.TFile&&m.extension==="md"&&m.path.toLowerCase().contains(a)&&i.push(m)}),i}renderSuggestion(e,r){r.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}};var sS=_t(require("obsidian"));var ec=class extends Zu{getSuggestions(e){let r=app.vault.getAllLoadedFiles(),n=[],i=e.toLowerCase();return r.forEach(a=>{a instanceof sS.TFolder&&a.path.toLowerCase().contains(i)&&n.push(a)}),n}renderSuggestion(e,r){r.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}};var ms=_t(uh()),Um=_t(Da()),ch={},Fm={},uc=t=>M(void 0,null,function*(){if(!app.workspace.layoutReady||!t.settings.activateDailyNoteAddon)return;let e={};try{e=(0,ms.getAllDailyNotes)()}catch(r){console.log("Daily note folder not set. Deactivated Show Daily notes setting."),t.settings.activateDailyNoteAddon=!1,t.saveSettings()}Um.default.isEqual(ch,e)==!1&&(ch=e)}),uo=t=>M(void 0,null,function*(){if(!app.workspace.layoutReady||!t.settings.activateDailyNoteAddon||!t.settings.useWeeklyNotes)return;let e={};try{e=(0,ms.getAllWeeklyNotes)()}catch(r){console.log("Daily note folder not set. Deactivated Show Daily notes setting."),t.settings.activateDailyNoteAddon=!1,t.saveSettings()}Um.default.isEqual(Fm,e)==!1&&(Fm=e)}),fh=()=>ch,cc=t=>(0,ms.getDailyNote)(t,ch);var qm=t=>(0,ms.getWeeklyNote)(t,Fm);var Gm=class extends Gt.PluginSettingTab{constructor(e,r){super(e,r);this.plugin=r}display(){let{containerEl:e}=this,r=wa()||Ps();e.empty(),e.createEl("h2",{text:"Settings for Google Calendar"}),e.createEl("h4",{text:"Please restart Obsidian to let changes take effect"}),new Gt.Setting(e).setName("Use own authentication client").setDesc("Please create your own client.").addToggle(i=>i.setValue(this.plugin.settings.useCustomClient).onChange(a=>M(this,null,function*(){this.plugin.settings.useCustomClient=a,yield this.plugin.saveSettings(),this.display()}))),this.plugin.settings.useCustomClient?(new Gt.Setting(e).setName("ClientId").setDesc("Google client id").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter your client id").setValue(this.plugin.settings.googleClientId).onChange(a=>M(this,null,function*(){this.plugin.settings.googleClientId=a.trim(),yield this.plugin.saveSettings()}))),new Gt.Setting(e).setName("ClientSecret").setDesc("Google client secret").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter your client secret").setValue(this.plugin.settings.googleClientSecret).onChange(a=>M(this,null,function*(){this.plugin.settings.googleClientSecret=a.trim(),yield this.plugin.saveSettings()}))),Gt.Platform.isMobileApp&&new Gt.Setting(e).setName("Refresh Token").setDesc("Google Refresh Token from OAuth").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter refresh token").setValue(this.plugin.settings.googleRefreshToken).onChange(a=>M(this,null,function*(){this.plugin.settings.googleRefreshToken=a.trim(),du(a)})))):new Gt.Setting(e).setName("Server url").setDesc("The url to the server where the oauth takes place").setClass("SubSettings").addText(i=>{i.setValue(this.plugin.settings.googleOAuthServer).onChange(a=>M(this,null,function*(){this.plugin.settings.googleOAuthServer=a.trim(),yield this.plugin.saveSettings()}))}),new Gt.Setting(e).setName("Login with google").addButton(i=>{i.setButtonText(r?"Logout":"Login").onClick(()=>{r?(du(""),Tf(""),Ja(""),Za(0),this.hide(),this.display()):this.plugin.settings.useCustomClient?Nx():window.open(`${this.plugin.settings.googleOAuthServer}/api/google`)})}),new Gt.Setting(e).setName("Refresh Interval").setDesc("Time in seconds between refresh request from google server").addSlider(i=>{i.setValue(this.plugin.settings.refreshInterval),i.setLimits(10,360,1),i.setDynamicTooltip(),i.onChange(a=>M(this,null,function*(){this.plugin.settings.refreshInterval=a,yield this.plugin.saveSettings()}))}),new Gt.Setting(e).setName("Default webview theme").addDropdown(i=>M(this,null,function*(){i.addOption("auto","Auto"),i.addOption("dark","Dark"),i.addOption("light","Light"),i.setValue(this.plugin.settings.webViewDefaultColorMode),i.onChange(a=>M(this,null,function*(){this.plugin.settings.webViewDefaultColorMode=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))})),new Gt.Setting(e).setName("Show daily notes").setDesc("Will display daily notes and allow to open and create daily notes").addToggle(i=>{i.setValue(this.plugin.settings.activateDailyNoteAddon),i.onChange(a=>M(this,null,function*(){this.plugin.settings.activateDailyNoteAddon=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),this.plugin.settings.activateDailyNoteAddon&&(new Gt.Setting(e).setName("Use Weekly Notes").setDesc("Will show week numbers with weekly note dots").setClass("SubSettings").addToggle(i=>{i.setValue(this.plugin.settings.useWeeklyNotes),i.onChange(a=>M(this,null,function*(){this.plugin.settings.useWeeklyNotes=a,a&&uo(this.plugin),yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Gt.Setting(e).setName("Daily dot color").setDesc("Color for daily note dots in month view").setClass("SubSettings").addText(i=>{i.inputEl.type="color",i.setValue(this.plugin.settings.dailyNoteDotColor),i.onChange(a=>M(this,null,function*(){this.plugin.settings.dailyNoteDotColor=a,yield this.plugin.saveSettings()}))})),new Gt.Setting(e).setName("Enable @ Annotations").setDesc("Will help you to easily link events from you calendar in your notes").addToggle(i=>{i.setValue(this.plugin.settings.atAnnotationEnabled),i.onChange(a=>M(this,null,function*(){this.plugin.settings.atAnnotationEnabled=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),this.plugin.settings.atAnnotationEnabled&&new Gt.Setting(e).setName("@ Annotation date format").setDesc("SWitch between mm/dd/yyyy and dd/mm/yyyy").setClass("SubSettings").addDropdown(i=>{i.addOption("mm/dd/yyyy","mm/dd/yyyy"),i.addOption("dd/mm/yyyy","dd/mm/yyyy"),i.setValue(this.plugin.settings.usDateFormat?"mm/dd/yyyy":"dd/mm/yyyy"),i.onChange(a=>M(this,null,function*(){a=="mm/dd/yyyy"?this.plugin.settings.usDateFormat=!0:this.plugin.settings.usDateFormat=!1,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Gt.Setting(e).setName("Auto create Event Notes").setDesc("Will create new notes from a event if the description contains :obsidian:").addToggle(i=>{i.setValue(this.plugin.settings.autoCreateEventNotes),i.onChange(a=>M(this,null,function*(){this.plugin.settings.autoCreateEventNotes=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Gt.Setting(e).setName("Keep auto created Notes open").setDesc("When creating a new note should it stay open for direct editing").setClass("SubSettings").addToggle(i=>{i.setValue(this.plugin.settings.autoCreateEventKeepOpen),i.onChange(a=>M(this,null,function*(){this.plugin.settings.autoCreateEventKeepOpen=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Gt.Setting(e).setName("Import Start Offset").setDesc("Days in the past from events to import").setClass("SubSettings").addSlider(i=>{i.setValue(this.plugin.settings.importStartOffset),i.setLimits(0,7,1),i.setDynamicTooltip(),i.onChange(a=>M(this,null,function*(){i.showTooltip(),this.plugin.settings.importStartOffset=a,yield this.plugin.saveSettings()}))}),new Gt.Setting(e).setName("Import End Offset").setDesc("Days in the future from events to import").setClass("SubSettings").addSlider(i=>{i.setValue(this.plugin.settings.importEndOffset),i.setLimits(0,7,1),i.setDynamicTooltip(),i.onChange(a=>M(this,null,function*(){this.plugin.settings.importEndOffset=a,yield this.plugin.saveSettings()}))}),new Gt.Setting(e).setName("Debug Mode").setDesc("Enable if something is not working").addToggle(i=>{i.setValue(this.plugin.settings.debugMode),i.onChange(a=>M(this,null,function*(){this.plugin.settings.debugMode=a,yield this.plugin.saveSettings()}))}),new Gt.Setting(e).setName("Use defaults for note creation").setDesc("If active creating notes will be faster but less flexible").addToggle(i=>{i.setValue(this.plugin.settings.useDefaultTemplate),i.onChange(a=>M(this,null,function*(){this.plugin.settings.useDefaultTemplate=a,yield this.plugin.saveSettings(),this.display()}))}),this.plugin.settings.useDefaultTemplate&&(new Gt.Setting(e).setName("Default Template").setDesc("Template to use at note creation").setClass("SubSettings").addSearch(i=>{new $u(i.inputEl,this.plugin),i.setPlaceholder("Template").setValue(this.plugin.settings.defaultTemplate).onChange(a=>M(this,null,function*(){this.plugin.settings.defaultTemplate=a,yield this.plugin.saveSettings()})),i.containerEl.addClass("templater_search")}),new Gt.Setting(e).setName("Default Folder").setDesc("Folder to save notes to after creation").setClass("SubSettings").addSearch(i=>{new ec(i.inputEl),i.setPlaceholder("Example: folder1/folder2").setValue(this.plugin.settings.defaultFolder).onChange(a=>M(this,null,function*(){this.plugin.settings.defaultFolder=a,yield this.plugin.saveSettings()})),i.containerEl.addClass("templater_search")}));let n=this.plugin.settings.insertTemplates;if(n.length&&(new Gt.Setting(e).setName("Saved Templates"),n.forEach(i=>{let a=new Gt.Setting(e).setClass("SubSettings").setName(i.name).addButton(s=>{s.setButtonText("Remove"),s.onClick(()=>M(this,null,function*(){this.plugin.settings.insertTemplates.remove(i),a.settingEl.remove(),yield this.plugin.saveSettings(),this.hide(),this.display()}))})})),zt()){new Gt.Setting(e).setName("Default Calendar").addDropdown(a=>M(this,null,function*(){a.addOption("Default","Select a calendar"),(yield Or()).forEach(l=>{a.addOption(l.id,l.summary)}),a.setValue(this.plugin.settings.defaultCalendar),a.onChange(l=>M(this,null,function*(){this.plugin.settings.defaultCalendar=l,yield this.plugin.saveSettings()}))})),e.createEl("h3","Calendar Blacklist");let i=this.plugin.settings.calendarBlackList;new Gt.Setting(e).setName("Add Item to BlackList").addDropdown(a=>M(this,null,function*(){a.addOption("Default","Select Option to add"),(yield Or()).forEach(l=>{a.addOption(l.id+"_=_"+l.summary,l.summary)}),a.onChange(l=>M(this,null,function*(){let[u,f]=l.split("_=_");i.contains([u,f])||(this.plugin.settings.calendarBlackList=[...i,[u,f]],yield this.plugin.saveSettings());let d=new Gt.Setting(e).setClass("SubSettings").setName(f).addButton(h=>{h.setButtonText("Remove"),h.onClick(()=>M(this,null,function*(){this.plugin.settings.calendarBlackList.remove([u,f]),d.settingEl.remove(),yield this.plugin.saveSettings()}))})}))})),i.forEach(a=>{let s=new Gt.Setting(e).setClass("SubSettings").setName(a[1]).addButton(l=>{l.setButtonText("Remove"),l.onClick(()=>M(this,null,function*(){this.plugin.settings.calendarBlackList.remove(a),s.settingEl.remove(),yield this.plugin.saveSettings()}))})})}}};function Dx(){let t=st.getInstance();return t.settings.googleClientId==""||t.settings.googleClientSecret==""?(wt("Google Calendar missing settings"),!1):!0}function zt(){return(!wa()||wa()=="")&&(!Ps()||Ps()=="")?(wt("Google Calendar missing settings or not logged in"),!1):!0}var dA=_t(require("obsidian"));var SS=_t(Da());var dh=new Map;function Di(){dh.clear()}function dr(){return M(this,arguments,function*({startDate:t,endDate:e,exclude:r,include:n}={}){let i=st.getInstance();t||(t=window.moment()),t=t.startOf("day"),e||(e=t.clone()),e=e.endOf("day");let a=yield Or();n&&n.length?a=a.filter(l=>n.contains(l.id)||n.contains(l.summary)):r&&r.length&&(a=a.filter(l=>!(r.contains(l.id)||r.contains(l.summary))));let s=[];for(let l=0;l<a.length;l++){let u=yield YF(i,a[l],t,e);s=[...s,...u]}return s=SS.default.orderBy(s,[l=>{var u;return new Date((u=l.start.date)!=null?u:l.start.dateTime)}],"asc"),s})}function HF(t,e,r){return M(this,null,function*(){if(!zt())return[];let n,i=2500,a=[];do{let s=`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(t.id)}/events?`;if(s+=`maxResults=${i}`,s+="&futureevents=true",s+="&singleEvents=true",s+="&orderby=starttime",s+="&sortorder=ascending",s+=`&timeMin=${e}`,s+=`&timeMax=${r}`,n&&n.nextPageToken&&(s+=`&nextPageToken=${n.nextPageToken}`),n=yield Xr(s,"GET",null),!n){wt("Could not list Google Events");continue}let l=n.items.filter(u=>(u.parent=t,u.status!="cancelled"));a=[...a,...l]}while(n.items.length==i);return a})}function KF(t,e,r){let n=[];return t.forEach(i=>{if(!i.start.dateTime||!i.end.dateTime)return;let a=window.moment(i.end.dateTime),s=window.moment(i.start.dateTime);if(s.isSame(a,"day"))return;let l=[],u=a.endOf("day").diff(s.startOf("day"),"days")+1,f=i.summary,d=1;do i.summary=`${f} (Day ${d}/${u})`,i.eventType="multiDay",l=[...l,structuredClone(i)],d++,s=s.add(1,"days"),i.start.dateTime=s.format("YYYY-MM-DD HH:mm");while(!s.isAfter(a,"day"));l=l.filter(h=>{let g=window.moment(h.start.dateTime);return!(e&&g.isBefore(e,"day")||r&&g.isSameOrAfter(r,"day"))}),i.eventType="delete",n=[...n,...l]}),t=[...t,...n],t}function YF(t,e,r,n){return M(this,null,function*(){let i=r.toISOString(),a=n.toISOString(),s=JSON.stringify({start:i,end:a,calendar:e.id});if(dh.has(s)){let{events:u,updated:f}=dh.get(s);if(f.clone().add(t.settings.refreshInterval,"second").isAfter(window.moment()))return u}let l=yield HF(e,i,a);return l=KF(l,r,n),l=l.filter(u=>u.eventType!=="delete"),dh.set(s,{events:l,updated:window.moment()}),l})}var cA=_t(require("obsidian"));var uA=_t(require("obsidian"));function At(){}function Vm(t){return t()}function TS(){return Object.create(null)}function on(t){t.forEach(Vm)}function AS(t){return typeof t=="function"}function Rn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}var hh;function fc(t,e){return hh||(hh=document.createElement("a")),hh.href=e,t===hh.href}function kS(t){return Object.keys(t).length===0}function Dl(t){return t==null?"":t}var AW=typeof window!="undefined";var kW=new Set;var IS=!1;function WF(){IS=!0}function zF(){IS=!1}function oe(t,e){t.appendChild(e)}function ci(t,e,r){let n=QF(t);if(!n.getElementById(e)){let i=ce("style");i.id=e,i.textContent=r,XF(n,i)}}function QF(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function XF(t,e){oe(t.head||t,e)}function Te(t,e,r){t.insertBefore(e,r||null)}function Se(t){t.parentNode.removeChild(t)}function _n(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function ce(t){return document.createElement(t)}function Sr(t){return document.createTextNode(t)}function Le(){return Sr(" ")}function ia(){return Sr("")}function at(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function ae(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function JF(t){return Array.from(t.childNodes)}function fi(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Bi(t,e){t.value=e==null?"":e}function Xe(t,e,r,n){r===null?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":"")}function dc(t,e){for(let r=0;r<t.options.length;r+=1){let n=t.options[r];if(n.__value===e){n.selected=!0;return}}t.selectedIndex=-1}function jm(t){let e=t.querySelector(":checked")||t.options[0];return e&&e.__value}var IW=new Map;var hc;function pc(t){hc=t}function RS(){if(!hc)throw new Error("Function called outside component initialization");return hc}function co(t){RS().$$.on_mount.push(t)}function fo(t){RS().$$.on_destroy.push(t)}var gc=[];var Nn=[],ph=[],Hm=[],ZF=Promise.resolve(),Km=!1;function $F(){Km||(Km=!0,ZF.then(NS))}function Bl(t){ph.push(t)}function Ba(t){Hm.push(t)}var Ym=new Set,gh=0;function NS(){let t=hc;do{for(;gh<gc.length;){let e=gc[gh];gh++,pc(e),eq(e.$$)}for(pc(null),gc.length=0,gh=0;Nn.length;)Nn.pop()();for(let e=0;e<ph.length;e+=1){let r=ph[e];Ym.has(r)||(Ym.add(r),r())}ph.length=0}while(gc.length);for(;Hm.length;)Hm.pop()();Km=!1,Ym.clear(),pc(t)}function eq(t){if(t.fragment!==null){t.update(),on(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Bl)}}var mh=new Set,ho;function yh(){ho={r:0,c:[],p:ho}}function vh(){ho.r||on(ho.c),ho=ho.p}function di(t,e){t&&t.i&&(mh.delete(t),t.i(e))}function Oi(t,e,r,n){if(t&&t.o){if(mh.has(t))return;mh.add(t),ho.c.push(()=>{mh.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}var RW=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var NW=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);function Oa(t,e,r){let n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=r,r(t.$$.ctx[n]))}function mc(t){t&&t.c()}function Ol(t,e,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=t.$$;i&&i.m(e,r),n||Bl(()=>{let u=a.map(Vm).filter(AS);s?s.push(...u):on(u),t.$$.on_mount=[]}),l.forEach(Bl)}function po(t,e){let r=t.$$;r.fragment!==null&&(on(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function tq(t,e){t.$$.dirty[0]===-1&&(gc.push(t),$F(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Dn(t,e,r,n,i,a,s,l=[-1]){let u=hc;pc(t);let f=t.$$={fragment:null,ctx:null,props:a,update:At,not_equal:i,bound:TS(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:TS(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};s&&s(f.root);let d=!1;if(f.ctx=r?r(t,e.props||{},(h,g,...m)=>{let y=m.length?m[0]:g;return f.ctx&&i(f.ctx[h],f.ctx[h]=y)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](y),d&&tq(t,h)),g}):[],f.update(),d=!0,on(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){WF();let h=JF(e.target);f.fragment&&f.fragment.l(h),h.forEach(Se)}else f.fragment&&f.fragment.c();e.intro&&di(t.$$.fragment),Ol(t,e.target,e.anchor,e.customElement),zF(),NS()}pc(u)}var rq;typeof HTMLElement=="function"&&(rq=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(Vm).filter(AS);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,r){this[t]=r}disconnectedCallback(){on(this.$$.on_disconnect)}$destroy(){po(this,1),this.$destroy=At}$on(t,e){let r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{let n=r.indexOf(e);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!kS(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var wn=class{$destroy(){po(this,1),this.$destroy=At}$on(e,r){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!kS(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var ZS=_t(zm()),{__extends:OW,__assign:LW,__rest:PW,__decorate:MW,__param:UW,__metadata:FW,__awaiter:vr,__generator:qW,__exportStar:GW,__createBinding:VW,__values:jW,__read:HW,__spread:KW,__spreadArrays:YW,__spreadArray:WW,__await:zW,__asyncGenerator:QW,__asyncDelegator:XW,__asyncValues:JW,__makeTemplateObject:ZW,__importStar:$W,__importDefault:ez,__classPrivateFieldGet:tz,__classPrivateFieldSet:rz}=ZS.default;function Ch(t,e=!1){return M(this,null,function*(){var i;if(!zt())return!1;let r=(i=t.recurringEventId)!=null?i:t.id;return e&&t.recurringEventId&&(r=t.id),!!(yield Xr(`https://www.googleapis.com/calendar/v3/calendars/${t.parent.id}/events/${r}`,"DELETE",null))})}function bh(t,e=!1){return M(this,null,function*(){var a;if(!zt())return null;let r=(a=t.recurringEventId)!=null?a:t.id;e&&t.recurringEventId&&(r=t.id);let n=t.parent.id;delete t.parent;let i=yield Xr(`https://www.googleapis.com/calendar/v3/calendars/${n}/events/${r}`,"PUT",t);return i?(wt("Updated Event",!0),i):(wt("Could not create Google Event"),null)})}function xh(t){return M(this,null,function*(){if(!zt())return null;let e=t.parent.id;t.start.timeZone=t.parent.timeZone,t.end.timeZone=t.parent.timeZone,delete t.parent;let r=yield Xr(`https://www.googleapis.com/calendar/v3/calendars/${e}/events`,"POST",t);return r?(wt(`Google Event ${r.summary} created`,!0),r):(wt("Could not create Google Event"),null)})}var Sh=["MO","TU","WE","TH","FR","SA","SU"],Rr=function(){function t(e,r){if(r===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=r}return t.fromStr=function(e){return new t(Sh.indexOf(e))},t.prototype.nth=function(e){return this.n===e?this:new t(this.weekday,e)},t.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},t.prototype.toString=function(){var e=Sh[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},t.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},t}();var ar=function(t){return t!=null},Vn=function(t){return typeof t=="number"},Qm=function(t){return Sh.indexOf(t)>=0},tn=Array.isArray,hi=function(t,e){e===void 0&&(e=t),arguments.length===1&&(e=t,t=0);for(var r=[],n=t;n<e;n++)r.push(n);return r};var Rt=function(t,e){var r=0,n=[];if(tn(t))for(;r<e;r++)n[r]=[].concat(t);else for(;r<e;r++)n[r]=t;return n},$S=function(t){return tn(t)?t:[t]};function go(t,e,r){r===void 0&&(r=" ");var n=String(t);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>r.length&&(r+=Rt(r,e/r.length)),r.slice(0,e)+String(n))}var eT=function(t,e,r){var n=t.split(e);return r?n.slice(0,r).concat([n.slice(r).join(e)]):n},ln=function(t,e){var r=t%e;return r*e<0?r+e:r},Th=function(t,e){return{div:Math.floor(t/e),mod:ln(t,e)}},jn=function(t){return!ar(t)||t.length===0},Tr=function(t){return!jn(t)},Lt=function(t,e){return Tr(t)&&t.indexOf(e)!==-1};var ys;(function(t){t.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],t.ONE_DAY=1e3*60*60*24,t.MAXYEAR=9999,t.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),t.PY_WEEKDAYS=[6,0,1,2,3,4,5],t.getYearDay=function(e){var r=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((r.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/t.ONE_DAY)+1},t.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},t.isDate=function(e){return e instanceof Date},t.isValidDate=function(e){return t.isDate(e)&&!isNaN(e.getTime())},t.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},t.daysBetween=function(e,r){var n=e.getTime()-t.tzOffset(e),i=r.getTime()-t.tzOffset(r),a=n-i;return Math.round(a/t.ONE_DAY)},t.toOrdinal=function(e){return t.daysBetween(e,t.ORDINAL_BASE)},t.fromOrdinal=function(e){return new Date(t.ORDINAL_BASE.getTime()+e*t.ONE_DAY)},t.getMonthDays=function(e){var r=e.getUTCMonth();return r===1&&t.isLeapYear(e.getUTCFullYear())?29:t.MONTH_DAYS[r]},t.getWeekday=function(e){return t.PY_WEEKDAYS[e.getUTCDay()]},t.monthRange=function(e,r){var n=new Date(Date.UTC(e,r,1));return[t.getWeekday(n),t.getMonthDays(n)]},t.combine=function(e,r){return r=r||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()))},t.clone=function(e){var r=new Date(e.getTime());return r},t.cloneDates=function(e){for(var r=[],n=0;n<e.length;n++)r.push(t.clone(e[n]));return r},t.sort=function(e){e.sort(function(r,n){return r.getTime()-n.getTime()})},t.timeToUntilString=function(e,r){r===void 0&&(r=!0);var n=new Date(e);return[go(n.getUTCFullYear().toString(),4,"0"),go(n.getUTCMonth()+1,2,"0"),go(n.getUTCDate(),2,"0"),"T",go(n.getUTCHours(),2,"0"),go(n.getUTCMinutes(),2,"0"),go(n.getUTCSeconds(),2,"0"),r?"Z":""].join("")},t.untilStringToDate=function(e){var r=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=r.exec(e);if(!n)throw new Error("Invalid UNTIL value: "+e);return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(ys||(ys={}));var Qe=ys;var nq=function(){function t(e,r){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=r,e==="between"?(this.maxDate=r.inc?r.before:new Date(r.before.getTime()-1),this.minDate=r.inc?r.after:new Date(r.after.getTime()+1)):e==="before"?this.maxDate=r.inc?r.dt:new Date(r.dt.getTime()-1):e==="after"&&(this.minDate=r.inc?r.dt:new Date(r.dt.getTime()+1))}return t.prototype.accept=function(e){++this.total;var r=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(r)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return r?!0:(this.add(e),!1);return this.add(e)},t.prototype.add=function(e){return this._result.push(e),!0},t.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},t.prototype.clone=function(){return new t(this.method,this.args)},t}(),La=nq;var CT=_t(ET()),{__extends:Ml,__assign:En,__rest:Oz,__decorate:Lz,__param:Pz,__metadata:Mz,__awaiter:Uz,__generator:Fz,__exportStar:qz,__createBinding:Gz,__values:Vz,__read:jz,__spread:Hz,__spreadArrays:mo,__await:Kz,__asyncGenerator:Yz,__asyncDelegator:Wz,__asyncValues:zz,__makeTemplateObject:Qz,__importStar:Xz,__importDefault:Jz,__classPrivateFieldGet:Zz,__classPrivateFieldSet:$z}=CT.default;var iq=function(t){Ml(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.iterator=i,a}return e.prototype.add=function(r){return this.iterator(r,this._result.length)?(this._result.push(r),!0):!1},e}(La),Jm=iq;var aq={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},yo=aq;var bT=function(t,e){return t.indexOf(e)!==-1},sq=function(t){return t.toString()},oq=function(t,e,r){return e+" "+r+", "+t},lq=function(){function t(e,r,n,i){if(r===void 0&&(r=sq),n===void 0&&(n=yo),i===void 0&&(i=oq),this.text=[],this.language=n||yo,this.gettext=r,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),s=[].concat(this.options.bynmonthday);a.sort(function(d,h){return d-h}),s.sort(function(d,h){return h-d}),this.bymonthday=a.concat(s),this.bymonthday.length||(this.bymonthday=null)}if(ar(this.origOptions.byweekday)){var l=tn(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(l);this.byweekday={allWeeks:l.filter(function(d){return!d.n}),someWeeks:l.filter(function(d){return Boolean(d.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var f=function(d,h){return d.weekday-h.weekday};this.byweekday.allWeeks.sort(f),this.byweekday.someWeeks.sort(f),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return t.isFullyConvertible=function(e){var r=!0;if(!(e.options.freq in t.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(bT(["dtstart","wkst","freq"],n))return!0;if(!bT(t.IMPLEMENTED[e.options.freq],n))return!1}return r},t.prototype.isFullyConvertible=function(){return t.isFullyConvertible(this.rrule)},t.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in t.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[Me.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var r=this.options.until;this.add(this.dateFormatter(r.getUTCFullYear(),this.language.monthNames[r.getUTCMonth()],r.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},t.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},t.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},t.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},t.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},t.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},t.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},t.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},t.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},t.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},t.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},t.prototype.nth=function(e){e=parseInt(e.toString(),10);var r,n,i=this.gettext;if(e===-1)return i("last");switch(n=Math.abs(e),n){case 1:case 21:case 31:r=n+i("st");break;case 2:case 22:r=n+i("nd");break;case 3:case 23:r=n+i("rd");break;default:r=n+i("th")}return e<0?r+" "+i("last"):r},t.prototype.monthtext=function(e){return this.language.monthNames[e-1]},t.prototype.weekdaytext=function(e){var r=Vn(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[r]},t.prototype.plural=function(e){return e%100!=1},t.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},t.prototype.list=function(e,r,n,i){i===void 0&&(i=","),tn(e)||(e=[e]);var a=function(u,f,d){for(var h="",g=0;g<u.length;g++)g!==0&&(g===u.length-1?h+=" "+d+" ":h+=f+" "),h+=u[g];return h};r=r||function(u){return u.toString()};var s=this,l=function(u){return r&&r.call(s,u)};return n?a(e.map(l),i,n):e.map(l).join(i+" ")},t}(),aa=lq;var uq=function(){function t(e){this.done=!0,this.rules=e}return t.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},t.prototype.isDone=function(){return this.done&&this.symbol===null},t.prototype.nextSymbol=function(){var e,r,n=this;this.symbol=null,this.value=null;do{if(this.done)return!1;var i=void 0;e=null;for(var a in this.rules){i=this.rules[a];var s=i.exec(n.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,r=a)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(r==="SKIP");return this.symbol=r,this.value=e,!0},t.prototype.accept=function(e){if(this.symbol===e){if(this.value){var r=this.value;return this.nextSymbol(),r}return this.nextSymbol(),!0}return!1},t.prototype.acceptNumber=function(){return this.accept("number")},t.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},t}();function yc(t,e){e===void 0&&(e=yo);var r={},n=new uq(e.tokens);if(!n.start(t))return null;return i(),r;function i(){n.expect("every");var g=n.acceptNumber();if(g&&(r.interval=parseInt(g[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":r.freq=Me.DAILY,n.nextSymbol()&&(s(),h());break;case"weekday(s)":r.freq=Me.WEEKLY,r.byweekday=[Me.MO,Me.TU,Me.WE,Me.TH,Me.FR],n.nextSymbol(),h();break;case"week(s)":r.freq=Me.WEEKLY,n.nextSymbol()&&(a(),h());break;case"hour(s)":r.freq=Me.HOURLY,n.nextSymbol()&&(a(),h());break;case"minute(s)":r.freq=Me.MINUTELY,n.nextSymbol()&&(a(),h());break;case"month(s)":r.freq=Me.MONTHLY,n.nextSymbol()&&(a(),h());break;case"year(s)":r.freq=Me.YEARLY,n.nextSymbol()&&(a(),h());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":r.freq=Me.WEEKLY;var m=n.symbol.substr(0,2).toUpperCase();if(r.byweekday=[Me[m]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");r.byweekday.push(Me[y]),n.nextSymbol()}d(),h();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=Me.YEARLY,r.bymonth=[l()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var _=l();if(!_)throw new Error("Unexpected symbol "+n.symbol+", expected month");r.bymonth.push(_),n.nextSymbol()}a(),h();break;default:throw new Error("Unknown symbol")}}function a(){var g=n.accept("on"),m=n.accept("the");if(!!(g||m))do{var y=f(),_=u(),w=l();if(y)_?(n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Me[_].nth(y))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(y),n.accept("day(s)"));else if(_)n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Me[_]);else if(n.symbol==="weekday(s)")n.nextSymbol(),r.byweekday||(r.byweekday=[Me.MO,Me.TU,Me.WE,Me.TH,Me.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var E=n.acceptNumber();if(!E)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(r.byweekno=[parseInt(E[0],10)];n.accept("comma");){if(E=n.acceptNumber(),!E)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.byweekno.push(parseInt(E[0],10))}}else if(w)n.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(w);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function s(){var g=n.accept("at");if(!!g)do{var m=n.acceptNumber();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(r.byhour=[parseInt(m[0],10)];n.accept("comma");){if(m=n.acceptNumber(),!m)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");r.byhour.push(parseInt(m[0],10))}}while(n.accept("comma")||n.accept("at"))}function l(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function f(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var g=parseInt(n.value[1],10);if(g<-366||g>366)throw new Error("Nth out of range: "+g);return n.nextSymbol(),n.accept("last")?-g:g;default:return!1}}function d(){n.accept("on"),n.accept("the");var g=f();if(!!g)for(r.bymonthday=[g],n.nextSymbol();n.accept("comma");){if(g=f(),!g)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.bymonthday.push(g),n.nextSymbol()}}function h(){if(n.symbol==="until"){var g=Date.parse(n.text);if(!g)throw new Error("Cannot parse until date:"+n.text);r.until=new Date(g)}else n.accept("for")&&(r.count=parseInt(n.value[0],10),n.expect("number"))}}var Ct;(function(t){t[t.YEARLY=0]="YEARLY",t[t.MONTHLY=1]="MONTHLY",t[t.WEEKLY=2]="WEEKLY",t[t.DAILY=3]="DAILY",t[t.HOURLY=4]="HOURLY",t[t.MINUTELY=5]="MINUTELY",t[t.SECONDLY=6]="SECONDLY"})(Ct||(Ct={}));function vc(t){return t<Ct.HOURLY}var xT=function(t,e){return e===void 0&&(e=yo),new Me(yc(t,e)||void 0)},Ul=["count","until","interval","byweekday","bymonthday","bymonth"];aa.IMPLEMENTED=[];aa.IMPLEMENTED[Ct.HOURLY]=Ul;aa.IMPLEMENTED[Ct.MINUTELY]=Ul;aa.IMPLEMENTED[Ct.DAILY]=["byhour"].concat(Ul);aa.IMPLEMENTED[Ct.WEEKLY]=Ul;aa.IMPLEMENTED[Ct.MONTHLY]=Ul;aa.IMPLEMENTED[Ct.YEARLY]=["byweekno","byyearday"].concat(Ul);var ST=function(t,e,r,n){return new aa(t,e,r,n).toString()},TT=aa.isFullyConvertible;var Fl=function(){function t(e,r,n,i){this.hour=e,this.minute=r,this.second=n,this.millisecond=i||0}return t.prototype.getHours=function(){return this.hour},t.prototype.getMinutes=function(){return this.minute},t.prototype.getSeconds=function(){return this.second},t.prototype.getMilliseconds=function(){return this.millisecond},t.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},t}();var AT=function(t){Ml(e,t);function e(r,n,i,a,s,l,u){var f=t.call(this,a,s,l,u)||this;return f.year=r,f.month=n,f.day=i,f}return e.fromDate=function(r){return new this(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.valueOf()%1e3)},e.prototype.getWeekday=function(){return ys.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(r){this.year+=r},e.prototype.addMonths=function(r){if(this.month+=r,this.month>12){var n=Math.floor(this.month/12),i=ln(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(r,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+r*7:this.day+=-(this.getWeekday()-n)+r*7,this.fixDay()},e.prototype.addDaily=function(r){this.day+=r,this.fixDay()},e.prototype.addHours=function(r,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/r)*r);;){this.hour+=r;var a=Th(this.hour,24),s=a.div,l=a.mod;if(s&&(this.hour=l,this.addDaily(s)),jn(i)||Lt(i,this.hour))break}},e.prototype.addMinutes=function(r,n,i,a){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/r)*r);;){this.minute+=r;var s=Th(this.minute,60),l=s.div,u=s.mod;if(l&&(this.minute=u,this.addHours(l,!1,i)),(jn(i)||Lt(i,this.hour))&&(jn(a)||Lt(a,this.minute)))break}},e.prototype.addSeconds=function(r,n,i,a,s){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/r)*r);;){this.second+=r;var l=Th(this.second,60),u=l.div,f=l.mod;if(u&&(this.second=f,this.addMinutes(u,!1,i,a)),(jn(i)||Lt(i,this.hour))&&(jn(a)||Lt(a,this.minute))&&(jn(s)||Lt(s,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var r=ys.monthRange(this.year,this.month-1)[1];if(!(this.day<=r))for(;this.day>r;){if(this.day-=r,++this.month,this.month===13&&(this.month=1,++this.year,this.year>ys.MAXYEAR))return;r=ys.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(r,n){var i=r.freq,a=r.interval,s=r.wkst,l=r.byhour,u=r.byminute,f=r.bysecond;switch(i){case Ct.YEARLY:return this.addYears(a);case Ct.MONTHLY:return this.addMonths(a);case Ct.WEEKLY:return this.addWeekly(a,s);case Ct.DAILY:return this.addDaily(a);case Ct.HOURLY:return this.addHours(a,n,l);case Ct.MINUTELY:return this.addMinutes(a,n,l,u);case Ct.SECONDLY:return this.addSeconds(a,n,l,u,f)}},e}(Fl);function Zm(t){for(var e=[],r=Object.keys(t),n=0,i=r;n<i.length;n++){var a=i[n];Lt(RT,a)||e.push(a),Qe.isDate(t[a])&&!Qe.isValidDate(t[a])&&e.push(a)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return En({},t)}function kT(t){var e=En(En({},_c),Zm(t));if(ar(e.byeaster)&&(e.freq=Me.YEARLY),!(ar(e.freq)&&Me.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: "+e.freq+" "+t.freq);if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),ar(e.wkst)?Vn(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=Me.MO.weekday,ar(e.bysetpos)){Vn(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var r=0;r<e.bysetpos.length;r++){var n=e.bysetpos[r];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||Tr(e.byweekno)||Tr(e.byyearday)||Boolean(e.bymonthday)||Tr(e.bymonthday)||ar(e.byweekday)||ar(e.byeaster)))switch(e.freq){case Me.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case Me.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case Me.WEEKLY:e.byweekday=[Qe.getWeekday(e.dtstart)];break}if(ar(e.bymonth)&&!tn(e.bymonth)&&(e.bymonth=[e.bymonth]),ar(e.byyearday)&&!tn(e.byyearday)&&Vn(e.byyearday)&&(e.byyearday=[e.byyearday]),!ar(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(tn(e.bymonthday)){for(var i=[],a=[],r=0;r<e.bymonthday.length;r++){var n=e.bymonthday[r];n>0?i.push(n):n<0&&a.push(n)}e.bymonthday=i,e.bynmonthday=a}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(ar(e.byweekno)&&!tn(e.byweekno)&&(e.byweekno=[e.byweekno]),!ar(e.byweekday))e.bynweekday=null;else if(Vn(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(Qm(e.byweekday))e.byweekday=[Rr.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof Rr)!e.byweekday.n||e.freq>Me.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var s=[],l=[],r=0;r<e.byweekday.length;r++){var u=e.byweekday[r];if(Vn(u)){s.push(u);continue}else if(Qm(u)){s.push(Rr.fromStr(u).weekday);continue}!u.n||e.freq>Me.MONTHLY?s.push(u.weekday):l.push([u.weekday,u.n])}e.byweekday=Tr(s)?s:null,e.bynweekday=Tr(l)?l:null}return ar(e.byhour)?Vn(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<Me.HOURLY?[e.dtstart.getUTCHours()]:null,ar(e.byminute)?Vn(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<Me.MINUTELY?[e.dtstart.getUTCMinutes()]:null,ar(e.bysecond)?Vn(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<Me.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function IT(t){var e=t.dtstart.getTime()%1e3;if(!vc(t.freq))return[];var r=[];return t.byhour.forEach(function(n){t.byminute.forEach(function(i){t.bysecond.forEach(function(a){r.push(new Fl(n,i,a,e))})})}),r}function wc(t){var e=t.split(`
`).map(cq).filter(function(r){return r!==null});return En(En({},e[0]),e[1])}function Ec(t){var e={},r=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(t);if(!r)return e;var n=r[0],i=r[1],a=r[2];return i&&(e.tzid=i),e.dtstart=Qe.untilStringToDate(a),e}function cq(t){if(t=t.replace(/^\s+|\s+$/,""),!t.length)return null;var e=/^([A-Z]+?)[:;]/.exec(t.toUpperCase());if(!e)return NT(t);var r=e[0],n=e[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return NT(t);case"DTSTART":return Ec(t);default:throw new Error("Unsupported RFC prop "+n+" in "+t)}}function NT(t){var e=t.replace(/^RRULE:/i,""),r=Ec(e),n=t.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var a=i.split("="),s=a[0],l=a[1];switch(s.toUpperCase()){case"FREQ":r.freq=Ct[l.toUpperCase()];break;case"WKST":r.wkst=pi[l.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=fq(l),f=s.toLowerCase();r[f]=u;break;case"BYWEEKDAY":case"BYDAY":r.byweekday=dq(l);break;case"DTSTART":case"TZID":var d=Ec(t);r.tzid=d.tzid,r.dtstart=d.dtstart;break;case"UNTIL":r.until=Qe.untilStringToDate(l);break;case"BYEASTER":r.byeaster=Number(l);break;default:throw new Error("Unknown RRULE property '"+s+"'")}}),r}function fq(t){if(t.indexOf(",")!==-1){var e=t.split(",");return e.map(DT)}return DT(t)}function DT(t){return/^[+-]?\d+$/.test(t)?Number(t):t}function dq(t){var e=t.split(",");return e.map(function(r){if(r.length===2)return pi[r];var n=r.match(/^([+-]?\d{1,2})([A-Z]{2})$/),i=Number(n[1]),a=n[2],s=pi[a].weekday;return new Rr(s,i)})}var vo=function(){function t(e,r){this.date=e,this.tzid=r}return Object.defineProperty(t.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){var e=Qe.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":"+e:";TZID="+this.tzid+":"+e},t.prototype.getTime=function(){return this.date.getTime()},t.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var r=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:r})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid,e!=null?e:"UTC")})),a=i.getTime()-n.getTime();return new Date(this.date.getTime()-a)},t}();function Cc(t){for(var e=[],r="",n=Object.keys(t),i=Object.keys(_c),a=0;a<n.length;a++)if(n[a]!=="tzid"&&!!Lt(i,n[a])){var s=n[a].toUpperCase(),l=t[n[a]],u="";if(!(!ar(l)||tn(l)&&!l.length)){switch(s){case"FREQ":u=Me.FREQUENCIES[t.freq];break;case"WKST":Vn(l)?u=new Rr(l).toString():u=l.toString();break;case"BYWEEKDAY":s="BYDAY",u=$S(l).map(function(m){return m instanceof Rr?m:tn(m)?new Rr(m[0],m[1]):new Rr(m)}).toString();break;case"DTSTART":r=hq(l,t.tzid);break;case"UNTIL":u=Qe.timeToUntilString(l,!t.tzid);break;default:if(tn(l)){for(var f=[],d=0;d<l.length;d++)f[d]=String(l[d]);u=f.toString()}else u=String(l)}u&&e.push([s,u])}}var h=e.map(function(m){var y=m[0],_=m[1];return y+"="+_.toString()}).join(";"),g="";return h!==""&&(g="RRULE:"+h),[r,g].filter(function(m){return!!m}).join(`
`)}function hq(t,e){return t?"DTSTART"+new vo(new Date(t),e).toString():""}function pq(t,e){return Array.isArray(t)?!Array.isArray(e)||t.length!==e.length?!1:t.every(function(r,n){return r.getTime()===e[n].getTime()}):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():t===e}var BT=function(){function t(){this.all=!1,this.before=[],this.after=[],this.between=[]}return t.prototype._cacheAdd=function(e,r,n){r&&(r=r instanceof Date?Qe.clone(r):Qe.cloneDates(r)),e==="all"?this.all=r:(n._value=r,this[e].push(n))},t.prototype._cacheGet=function(e,r){var n=!1,i=r?Object.keys(r):[],a=function(d){for(var h=0;h<i.length;h++){var g=i[h];if(!pq(r[g],d[g]))return!0}return!1},s=this[e];if(e==="all")n=this.all;else if(tn(s))for(var l=0;l<s.length;l++){var u=s[l];if(!(i.length&&a(u))){n=u._value;break}}if(!n&&this.all){for(var f=new La(e,r),l=0;l<this.all.length&&f.accept(this.all[l]);l++);n=f.getValue(),this._cacheAdd(e,n,r)}return tn(n)?Qe.cloneDates(n):n instanceof Date?Qe.clone(n):n},t}();var OT=mo(Rt(1,31),Rt(2,28),Rt(3,31),Rt(4,30),Rt(5,31),Rt(6,30),Rt(7,31),Rt(8,31),Rt(9,30),Rt(10,31),Rt(11,30),Rt(12,31),Rt(1,7)),LT=mo(Rt(1,31),Rt(2,29),Rt(3,31),Rt(4,30),Rt(5,31),Rt(6,30),Rt(7,31),Rt(8,31),Rt(9,30),Rt(10,31),Rt(11,30),Rt(12,31),Rt(1,7)),gq=hi(1,29),mq=hi(1,30),vs=hi(1,31),un=hi(1,32),PT=mo(un,mq,un,vs,un,vs,un,un,vs,un,vs,un,un.slice(0,7)),MT=mo(un,gq,un,vs,un,vs,un,un,vs,un,vs,un,un.slice(0,7)),yq=hi(-28,0),vq=hi(-29,0),_s=hi(-30,0),cn=hi(-31,0),UT=mo(cn,vq,cn,_s,cn,_s,cn,cn,_s,cn,_s,cn,cn.slice(0,7)),FT=mo(cn,yq,cn,_s,cn,_s,cn,cn,_s,cn,_s,cn,cn.slice(0,7)),qT=[0,31,60,91,121,152,182,213,244,274,305,335,366],GT=[0,31,59,90,120,151,181,212,243,273,304,334,365],$m=function(){for(var t=[],e=0;e<55;e++)t=t.concat(hi(7));return t}();function VT(t,e){var r=new Date(Date.UTC(t,0,1)),n=Qe.isLeapYear(t)?366:365,i=Qe.isLeapYear(t+1)?366:365,a=Qe.toOrdinal(r),s=Qe.getWeekday(r),l=En(En({yearlen:n,nextyearlen:i,yearordinal:a,yearweekday:s},_q(t)),{wnomask:null});if(jn(e.byweekno))return l;l.wnomask=Rt(0,n+7);var u,f,d=u=ln(7-s+e.wkst,7);d>=4?(d=0,f=l.yearlen+ln(s-e.wkst,7)):f=n-d;for(var h=Math.floor(f/7),g=ln(f,7),m=Math.floor(h+g/4),y=0;y<e.byweekno.length;y++){var _=e.byweekno[y];if(_<0&&(_+=m+1),_>0&&_<=m){var w=void 0;_>1?(w=d+(_-1)*7,d!==u&&(w-=7-u)):w=d;for(var E=0;E<7&&(l.wnomask[w]=1,w++,l.wdaymask[w]!==e.wkst);E++);}}if(Lt(e.byweekno,1)){var w=d+m*7;if(d!==u&&(w-=7-u),w<n)for(var y=0;y<7&&(l.wnomask[w]=1,w+=1,l.wdaymask[w]!==e.wkst);y++);}if(d){var T=void 0;if(Lt(e.byweekno,-1))T=-1;else{var x=Qe.getWeekday(new Date(Date.UTC(t-1,0,1))),O=ln(7-x.valueOf()+e.wkst,7),I=Qe.isLeapYear(t-1)?366:365,B=void 0;O>=4?(O=0,B=I+ln(x-e.wkst,7)):B=n-d,T=Math.floor(52+ln(B,7)/4)}if(Lt(e.byweekno,T))for(var w=0;w<d;w++)l.wnomask[w]=1}return l}function _q(t){var e=Qe.isLeapYear(t)?366:365,r=new Date(Date.UTC(t,0,1)),n=Qe.getWeekday(r);return e===365?{mmask:OT,mdaymask:MT,nmdaymask:FT,wdaymask:$m.slice(n),mrange:GT}:{mmask:LT,mdaymask:PT,nmdaymask:UT,wdaymask:$m.slice(n),mrange:qT}}function jT(t,e,r,n,i,a){var s={lastyear:t,lastmonth:e,nwdaymask:[]},l=[];if(a.freq===Me.YEARLY)if(jn(a.bymonth))l=[[0,r]];else for(var u=0;u<a.bymonth.length;u++)e=a.bymonth[u],l.push(n.slice(e-1,e+1));else a.freq===Me.MONTHLY&&(l=[n.slice(e-1,e+1)]);if(jn(l))return s;s.nwdaymask=Rt(0,r);for(var u=0;u<l.length;u++)for(var f=l[u],d=f[0],h=f[1]-1,g=0;g<a.bynweekday.length;g++){var m=void 0,y=a.bynweekday[g],_=y[0],w=y[1];w<0?(m=h+(w+1)*7,m-=ln(i[m]-_,7)):(m=d+(w-1)*7,m+=ln(7-i[m]+_,7)),d<=m&&m<=h&&(s.nwdaymask[m]=1)}return s}function HT(t,e){e===void 0&&(e=0);var r=t%19,n=Math.floor(t/100),i=t%100,a=Math.floor(n/4),s=n%4,l=Math.floor((n+8)/25),u=Math.floor((n-l+1)/3),f=Math.floor(19*r+n-a-u+15)%30,d=Math.floor(i/4),h=i%4,g=Math.floor(32+2*s+2*d-f-h)%7,m=Math.floor((r+11*f+22*g)/451),y=Math.floor((f+g-7*m+114)/31),_=(f+g-7*m+114)%31+1,w=Date.UTC(t,y-1,_+e),E=Date.UTC(t,0,1);return[Math.ceil((w-E)/(1e3*60*60*24))]}var wq=function(){function t(e){this.options=e}return t.prototype.rebuild=function(e,r){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=VT(e,n)),Tr(n.bynweekday)&&(r!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,a=i.yearlen,s=i.mrange,l=i.wdaymask;this.monthinfo=jT(e,r,a,s,l,n)}ar(n.byeaster)&&(this.eastermask=HT(e,n.byeaster))},Object.defineProperty(t.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!0,configurable:!0}),t.prototype.ydayset=function(){return[hi(this.yearlen),0,this.yearlen]},t.prototype.mdayset=function(e,r,n){for(var i=this.mrange[r-1],a=this.mrange[r],s=Rt(null,this.yearlen),l=i;l<a;l++)s[l]=l;return[s,i,a]},t.prototype.wdayset=function(e,r,n){for(var i=Rt(null,this.yearlen+7),a=Qe.toOrdinal(new Date(Date.UTC(e,r-1,n)))-this.yearordinal,s=a,l=0;l<7&&(i[a]=a,++a,this.wdaymask[a]!==this.options.wkst);l++);return[i,s,a]},t.prototype.ddayset=function(e,r,n){var i=Rt(null,this.yearlen),a=Qe.toOrdinal(new Date(Date.UTC(e,r-1,n)))-this.yearordinal;return i[a]=a,[i,a,a+1]},t.prototype.htimeset=function(e,r,n,i){var a=this,s=[];return this.options.byminute.forEach(function(l){s=s.concat(a.mtimeset(e,l,n,i))}),Qe.sort(s),s},t.prototype.mtimeset=function(e,r,n,i){var a=this.options.bysecond.map(function(s){return new Fl(e,r,s,i)});return Qe.sort(a),a},t.prototype.stimeset=function(e,r,n,i){return[new Fl(e,r,n,i)]},t.prototype.getdayset=function(e){switch(e){case Ct.YEARLY:return this.ydayset.bind(this);case Ct.MONTHLY:return this.mdayset.bind(this);case Ct.WEEKLY:return this.wdayset.bind(this);case Ct.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},t.prototype.gettimeset=function(e){switch(e){case Ct.HOURLY:return this.htimeset.bind(this);case Ct.MINUTELY:return this.mtimeset.bind(this);case Ct.SECONDLY:return this.stimeset.bind(this)}},t}(),KT=wq;function YT(t,e,r,n,i,a){for(var s=[],l=0;l<t.length;l++){var u=void 0,f=void 0,d=t[l];d<0?(u=Math.floor(d/e.length),f=ln(d,e.length)):(u=Math.floor((d-1)/e.length),f=ln(d-1,e.length));for(var h=[],g=r;g<n;g++){var m=a[g];!ar(m)||h.push(m)}var y=void 0;u<0?y=h.slice(u)[0]:y=h[u];var _=e[f],w=Qe.fromOrdinal(i.yearordinal+y),E=Qe.combine(w,_);Lt(s,E)||s.push(E)}return Qe.sort(s),s}function Ih(t,e){var r=e.dtstart,n=e.freq,i=e.interval,a=e.until,s=e.bysetpos,l=e.count;if(l===0||i===0)return Pa(t);var u=AT.fromDate(r),f=new KT(e);f.rebuild(u.year,u.month);for(var d=bq(f,u,e);;){var h=f.getdayset(n)(u.year,u.month,u.day),g=h[0],m=h[1],y=h[2],_=Cq(g,m,y,f,e);if(Tr(s))for(var w=YT(s,d,m,y,f,g),E=0;E<w.length;E++){var T=w[E];if(a&&T>a)return Pa(t);if(T>=r){var x=WT(T,e);if(!t.accept(x)||l&&(--l,!l))return Pa(t)}}else for(var E=m;E<y;E++){var O=g[E];if(!!ar(O))for(var I=Qe.fromOrdinal(f.yearordinal+O),B=0;B<d.length;B++){var z=d[B],T=Qe.combine(I,z);if(a&&T>a)return Pa(t);if(T>=r){var x=WT(T,e);if(!t.accept(x)||l&&(--l,!l))return Pa(t)}}}if(e.interval===0||(u.add(e,_),u.year>Qe.MAXYEAR))return Pa(t);vc(n)||(d=f.gettimeset(n)(u.hour,u.minute,u.second,0)),f.rebuild(u.year,u.month)}}function Eq(t,e,r){var n=r.bymonth,i=r.byweekno,a=r.byweekday,s=r.byeaster,l=r.bymonthday,u=r.bynmonthday,f=r.byyearday;return Tr(n)&&!Lt(n,t.mmask[e])||Tr(i)&&!t.wnomask[e]||Tr(a)&&!Lt(a,t.wdaymask[e])||Tr(t.nwdaymask)&&!t.nwdaymask[e]||s!==null&&!Lt(t.eastermask,e)||(Tr(l)||Tr(u))&&!Lt(l,t.mdaymask[e])&&!Lt(u,t.nmdaymask[e])||Tr(f)&&(e<t.yearlen&&!Lt(f,e+1)&&!Lt(f,-t.yearlen+e)||e>=t.yearlen&&!Lt(f,e+1-t.yearlen)&&!Lt(f,-t.nextyearlen+e-t.yearlen))}function WT(t,e){return new vo(t,e.tzid).rezonedDate()}function Pa(t){return t.getValue()}function Cq(t,e,r,n,i){for(var a=!1,s=e;s<r;s++){var l=t[s];a=Eq(n,l,i),a&&(t[l]=null)}return a}function bq(t,e,r){var n=r.freq,i=r.byhour,a=r.byminute,s=r.bysecond;return vc(n)?IT(r):n>=Me.HOURLY&&Tr(i)&&!Lt(i,e.hour)||n>=Me.MINUTELY&&Tr(a)&&!Lt(a,e.minute)||n>=Me.SECONDLY&&Tr(s)&&!Lt(s,e.second)?[]:t.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var pi={MO:new Rr(0),TU:new Rr(1),WE:new Rr(2),TH:new Rr(3),FR:new Rr(4),SA:new Rr(5),SU:new Rr(6)},_c={freq:Ct.YEARLY,dtstart:null,interval:1,wkst:pi.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},RT=Object.keys(_c),Me=function(){function t(e,r){e===void 0&&(e={}),r===void 0&&(r=!1),this._cache=r?null:new BT,this.origOptions=Zm(e);var n=kT(e).parsedOptions;this.options=n}return t.parseText=function(e,r){return yc(e,r)},t.fromText=function(e,r){return xT(e,r)},t.fromString=function(e){return new t(t.parseString(e)||void 0)},t.prototype._iter=function(e){return Ih(e,this.options)},t.prototype._cacheGet=function(e,r){return this._cache?this._cache._cacheGet(e,r):!1},t.prototype._cacheAdd=function(e,r,n){if(!!this._cache)return this._cache._cacheAdd(e,r,n)},t.prototype.all=function(e){if(e)return this._iter(new Jm("all",{},e));var r=this._cacheGet("all");return r===!1&&(r=this._iter(new La("all",{})),this._cacheAdd("all",r)),r},t.prototype.between=function(e,r,n,i){if(n===void 0&&(n=!1),!Qe.isValidDate(e)||!Qe.isValidDate(r))throw new Error("Invalid date passed in to RRule.between");var a={before:r,after:e,inc:n};if(i)return this._iter(new Jm("between",a,i));var s=this._cacheGet("between",a);return s===!1&&(s=this._iter(new La("between",a)),this._cacheAdd("between",s,a)),s},t.prototype.before=function(e,r){if(r===void 0&&(r=!1),!Qe.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:r},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new La("before",n)),this._cacheAdd("before",i,n)),i},t.prototype.after=function(e,r){if(r===void 0&&(r=!1),!Qe.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:r},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new La("after",n)),this._cacheAdd("after",i,n)),i},t.prototype.count=function(){return this.all().length},t.prototype.toString=function(){return Cc(this.origOptions)},t.prototype.toText=function(e,r,n){return ST(this,e,r,n)},t.prototype.isFullyConvertibleToText=function(){return TT(this)},t.prototype.clone=function(){return new t(this.origOptions)},t.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],t.YEARLY=Ct.YEARLY,t.MONTHLY=Ct.MONTHLY,t.WEEKLY=Ct.WEEKLY,t.DAILY=Ct.DAILY,t.HOURLY=Ct.HOURLY,t.MINUTELY=Ct.MINUTELY,t.SECONDLY=Ct.SECONDLY,t.MO=pi.MO,t.TU=pi.TU,t.WE=pi.WE,t.TH=pi.TH,t.FR=pi.FR,t.SA=pi.SA,t.SU=pi.SU,t.parseString=wc,t.optionsToString=Cc,t}();function zT(t,e,r,n,i,a){var s={},l=t.accept;function u(g,m){r.forEach(function(y){y.between(g,m,!0).forEach(function(_){s[Number(_)]=!0})})}i.forEach(function(g){var m=new vo(g,a).rezonedDate();s[Number(m)]=!0}),t.accept=function(g){var m=Number(g);return isNaN(m)?l.call(this,g):!s[m]&&(u(new Date(m-1),new Date(m+1)),!s[m])?(s[m]=!0,l.call(this,g)):!0},t.method==="between"&&(u(t.args.after,t.args.before),t.accept=function(g){var m=Number(g);return s[m]?!0:(s[m]=!0,l.call(this,g))});for(var f=0;f<n.length;f++){var d=new vo(n[f],a).rezonedDate();if(!t.accept(new Date(d.getTime())))break}e.forEach(function(g){Ih(t,g.options)});var h=t._result;switch(Qe.sort(h),t.method){case"all":case"between":return h;case"before":return h.length&&h[h.length-1]||null;case"after":default:return h.length&&h[0]||null}}var QT={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function xq(t,e){var r=[],n=[],i=[],a=[],s=Ec(t),l=s.dtstart,u=s.tzid,f=Iq(t,e.unfold);return f.forEach(function(d){if(!!d){var h=kq(d),g=h.name,m=h.parms,y=h.value;switch(g.toUpperCase()){case"RRULE":if(m.length)throw new Error("unsupported RRULE parm: "+m.join(","));r.push(wc(d));break;case"RDATE":var _=/RDATE(?:;TZID=([^:=]+))?/i.exec(d),w=_[0],E=_[1];E&&!u&&(u=E),n=n.concat(XT(y,m));break;case"EXRULE":if(m.length)throw new Error("unsupported EXRULE parm: "+m.join(","));i.push(wc(y));break;case"EXDATE":a=a.concat(XT(y,m));break;case"DTSTART":break;default:throw new Error("unsupported property: "+g)}}}),{dtstart:l,tzid:u,rrulevals:r,rdatevals:n,exrulevals:i,exdatevals:a}}function Sq(t,e){var r=xq(t,e),n=r.rrulevals,i=r.rdatevals,a=r.exrulevals,s=r.exdatevals,l=r.dtstart,u=r.tzid,f=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||a.length||s.length){var d=new _o(f);return d.dtstart(l),d.tzid(u||void 0),n.forEach(function(g){d.rrule(new Me(ey(g,l,u),f))}),i.forEach(function(g){d.rdate(g)}),a.forEach(function(g){d.exrule(new Me(ey(g,l,u),f))}),s.forEach(function(g){d.exdate(g)}),e.compatible&&e.dtstart&&d.rdate(l),d}var h=n[0]||{};return new Me(ey(h,h.dtstart||e.dtstart||l,h.tzid||e.tzid||u),f)}function ql(t,e){return e===void 0&&(e={}),Sq(t,Tq(e))}function ey(t,e,r){return En(En({},t),{dtstart:e,tzid:r})}function Tq(t){var e=[],r=Object.keys(t),n=Object.keys(QT);if(r.forEach(function(i){Lt(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return En(En({},QT),t)}function Aq(t){if(t.indexOf(":")===-1)return{name:"RRULE",value:t};var e=eT(t,":",1),r=e[0],n=e[1];return{name:r,value:n}}function kq(t){var e=Aq(t),r=e.name,n=e.value,i=r.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function Iq(t,e){if(e===void 0&&(e=!1),t=t&&t.trim(),!t)throw new Error("Invalid empty string");if(!e)return t.split(/\s/);for(var r=t.split(`
`),n=0;n<r.length;){var i=r[n]=r[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(r[n-1]+=i.slice(1),r.splice(n,1)):n+=1:r.splice(n,1)}return r}function Rq(t){t.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function XT(t,e){return Rq(e),t.split(",").map(function(r){return Qe.untilStringToDate(r)})}function JT(t){var e=this;return function(r){if(r!==void 0&&(e["_"+t]=r),e["_"+t]!==void 0)return e["_"+t];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[t];if(i)return i}}}var _o=function(t){Ml(e,t);function e(r){r===void 0&&(r=!1);var n=t.call(this,{},r)||this;return n.dtstart=JT.apply(n,["dtstart"]),n.tzid=JT.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(r){return zT(r,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(r){ZT(r,this._rrule)},e.prototype.exrule=function(r){ZT(r,this._exrule)},e.prototype.rdate=function(r){$T(r,this._rdate)},e.prototype.exdate=function(r){$T(r,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(r){return ql(r.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(r){return ql(r.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(r){return new Date(r.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(r){return new Date(r.getTime())})},e.prototype.valueOf=function(){var r=[];return!this._rrule.length&&this._dtstart&&(r=r.concat(Cc({dtstart:this._dtstart}))),this._rrule.forEach(function(n){r=r.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){r=r.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&r.push(eA("RDATE",this._rdate,this.tzid())),this._exdate.length&&r.push(eA("EXDATE",this._exdate,this.tzid())),r},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var r=new e(!!this._cache);return this._rrule.forEach(function(n){return r.rrule(n.clone())}),this._exrule.forEach(function(n){return r.exrule(n.clone())}),this._rdate.forEach(function(n){return r.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return r.exdate(new Date(n.getTime()))}),r},e}(Me);function ZT(t,e){if(!(t instanceof Me))throw new TypeError(String(t)+" is not RRule instance");Lt(e.map(String),String(t))||e.push(t)}function $T(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");Lt(e.map(Number),Number(t))||(e.push(t),Qe.sort(e))}function eA(t,e,r){var n=!r||r.toUpperCase()==="UTC",i=n?t+":":t+";TZID="+r+":",a=e.map(function(s){return Qe.timeToUntilString(s.valueOf(),n)}).join(",");return""+i+a}var tA=Me;var rA=_t(Da());var Gl=_t(require("obsidian"));var wo=_t(require("obsidian"));var Rh=_t(Da()),ty=t=>M(void 0,null,function*(){var s,l;if(!t.settings.autoCreateEventNotes||!zt())return;let e=Math.abs(t.settings.importStartOffset),r=Math.abs(t.settings.importEndOffset),n=window.moment().local().subtract(e,"day"),i=window.moment().local().add(r,"day"),a=yield dr({startDate:n,endDate:i});for(let u=0;u<a.length;u++){let f=(l=(s=a[u].description)==null?void 0:s.match(/:(.*-)?obsidian-?(.*)?:/))!=null?l:[];f.length==3&&(yield Ma(a[u],f[1],f[2]))}}),Nq=(t,e)=>{let r=/{{gEvent\.([^}>]*)}}/gm,n,i=[];do n=r.exec(e),i.push(n);while(n);return i.forEach(a=>{if(a){let s="";if(a[1]=="attendees"){let l=Rh.default.get(t,a[1],"");for(let u=0;u<l.length;u++)l[u].displayName?s+=`- [[@${l[u].displayName}]]
`:s+=`- [[@${l[u].email}]]
`}else if(a[1]=="attachments"){let l=Rh.default.get(t,a[1],"");for(let u=0;u<l.length;u++)l[u].title?s+=`- [${l[u].title}](${l[u].fileUrl})
`:s+=`- [${l[u].fileUrl}](${l[u].fileUrl})
`}else s=Rh.default.get(t,a[1],"");s===Object(s)&&(s=JSON.stringify(s)),e=e.replace(a[0],s!=null?s:"")}}),e},Ma=(t,e,r)=>M(void 0,null,function*(){var m,y,_,w,E;let n=st.getInstance(),{vault:i}=app,{adapter:a}=i;e&&(e=e.replace("{{date}}",window.moment().format("YYYY-MM-DD")),e=e.replace("{{date-year}}",window.moment().format("YYYY")),e=e.replace("{{date-month}}",window.moment().format("MM")),e=e.replace("{{date-day}}",window.moment().format("DD")),e=e.replace("{{event-date}}",window.moment((m=t.start.date)!=null?m:t.start.dateTime).format("YYYY-MM-DD")),e=e.replace("{{event-year}}",window.moment((y=t.start.date)!=null?y:t.start.dateTime).format("YYYY")),e=e.replace("{{event-month}}",window.moment((_=t.start.date)!=null?_:t.start.dateTime).format("MM")),e=e.replace("{{event-day}}",window.moment((w=t.start.date)!=null?w:t.start.dateTime).format("DD")),e=e.replace("{{event-title}}",(E=t.summary)!=null?E:"event-title"));let s=app.fileManager.getNewFileParent("").path;e&&(e.endsWith("-")&&(e=e.slice(0,-1)),e="/"+e.split(/[/\\]/).join("/"),(yield a.exists(e))||(yield a.mkdir(e)),s=e);let l=t.summary.trim().replace("<","lt").replace(">","gt").replace('"',"''").replace("\\","-").replace("/","-").replace(":","-").replace("|","-").replace("*","").replace("?",""),u=(0,wo.normalizePath)(`${s}/${l}.md`);if(yield a.exists(u))return i.getAbstractFileByPath(u);let f=yield i.create(u,"");if(wt(`EventNote ${t.summary} created.`),!n.coreTemplatePlugin&&!n.templaterPlugin||!r)return i.getAbstractFileByPath(u);r.match(/.*\.md/)||(r=r+".md");let d={state:{mode:"source"},active:!0},h=yield app.workspace.getLeaf(!0);return yield h.setViewState({type:"MarkdownView"}),yield app.workspace.setActiveLeaf(h,!1,!0),yield h.openFile(f,d),n.templaterPlugin&&n.coreTemplatePlugin?(yield g(!0))||(yield g(!1))||wt("Template not compatible"):n.templaterPlugin?(yield g(!0))||wt("Template not compatible"):n.coreTemplatePlugin&&((yield g(!1))||wt("Template not compatible")),n.settings.autoCreateEventKeepOpen||h.detach(),i.getAbstractFileByPath(u);function g(T){return M(this,null,function*(){var te,ie,ye,be,Ve;let x;T?x=(0,wo.normalizePath)((ie=(te=n==null?void 0:n.templaterPlugin)==null?void 0:te.settings)==null?void 0:ie.templates_folder):x=(0,wo.normalizePath)((Ve=(be=(ye=n==null?void 0:n.coreTemplatePlugin)==null?void 0:ye.instance)==null?void 0:be.options)==null?void 0:Ve.folder);let O;if((yield a.exists(r))?O=r:(O=`${x}/${r}`,x==="/"&&(O=r)),!(yield a.exists(O)))return wt(`Template: ${r} doesn't exit.`),!1;let I=i.getAbstractFileByPath(O);if(!(I instanceof wo.TFile))return!1;let B=yield i.cachedRead(I),z=Nq(t,B);if(T&&z.contains("{{")&&z.contains("}}"))return!1;if(!T&&z.contains("<%")&&z.contains("%>"))return!1;let F=I.path+".tmp";yield a.write(F,z);let q=app.vault.getAbstractFileByPath(F);if(!(q instanceof wo.TFile))return!1;try{return T?yield n.templaterPlugin.templater.append_template_to_active_file(q):yield n.coreTemplatePlugin.instance.insertTemplate(q),a.remove(F),!0}catch(Ne){return a.remove(F),!1}})}});var Eo=class extends Gl.Modal{constructor(e,r){super(window.app);this.template=null;this.folder=null;this.plugin=st.getInstance();this.event=e,this.onSubmit=r}onOpen(){let{contentEl:e}=this;e.createEl("h1",{text:"You can now select a template to use"}),new Gl.Setting(e).setName("Template").addSearch(r=>{new $u(r.inputEl,this.plugin),r.setPlaceholder("Template").setValue("").onChange(n=>this.template=n),r.containerEl.addClass("templater_search")}),new Gl.Setting(e).setName("Folder").addSearch(r=>{new ec(r.inputEl),r.setPlaceholder("Example: folder1/folder2").setValue(app.vault.config.newFileFolderPath).onChange(n=>this.folder=n),r.containerEl.addClass("templater_search")}),new Gl.Setting(e).setName("").addButton(r=>{r.setButtonText("Create Note"),r.onClick(()=>M(this,null,function*(){let n=yield Ma(this.event,this.folder,this.template);this.onSubmit(n),this.close()}))})}onClose(){let{contentEl:e}=this;e.empty()}};function Vl(t,e){return M(this,null,function*(){if(!zt())return null;let r=yield Xr(`https://www.googleapis.com/calendar/v3/calendars/${e}/events/${t}`,"GET",null);return r.parent=(yield Or()).find(n=>n.id===e),r||(wt("Could not get Google Event"),null)})}function Dq(t){ci(t,"svelte-8eu8j5",".buttonRow.svelte-8eu8j5.svelte-8eu8j5{display:flex;flex-direction:row;align-items:center;justify-content:space-around;padding:5px}.summaryInput.svelte-8eu8j5.svelte-8eu8j5{border:none;border-bottom:2px solid;border-radius:0px;height:40px;font-size:35px;text-align:center}.disabled.svelte-8eu8j5.svelte-8eu8j5{opacity:0.2}label.svelte-8eu8j5.svelte-8eu8j5{margin-top:5px}.googleFullDayContainer.svelte-8eu8j5.svelte-8eu8j5{margin-top:10px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.googleEventButtonContainer.svelte-8eu8j5.svelte-8eu8j5{margin-top:10px;display:flex;flex-direction:column;justify-content:space-around}.googleEventButtonContainer.svelte-8eu8j5 button.svelte-8eu8j5{width:40%}")}function nA(t,e,r){let n=t.slice();return n[29]=e[r],n}function Bq(t){let e,r,n,i,a,s,l=t[3],u=[];for(let f=0;f<l.length;f+=1)u[f]=iA(nA(t,l,f));return{c(){var f;e=ce("label"),e.textContent="Calendar",r=Le(),n=ce("select");for(let d=0;d<u.length;d+=1)u[d].c();ae(e,"for","calendar"),ae(e,"class","svelte-8eu8j5"),ae(n,"name","calendar"),ae(n,"class","dropdown"),n.disabled=i=((f=t[0])==null?void 0:f.id)!==void 0},m(f,d){Te(f,e,d),Te(f,r,d),Te(f,n,d);for(let h=0;h<u.length;h+=1)u[h].m(n,null);a||(s=at(n,"change",t[11]),a=!0)},p(f,d){var h;if(d[0]&9){l=f[3];let g;for(g=0;g<l.length;g+=1){let m=nA(f,l,g);u[g]?u[g].p(m,d):(u[g]=iA(m),u[g].c(),u[g].m(n,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=l.length}d[0]&1&&i!==(i=((h=f[0])==null?void 0:h.id)!==void 0)&&(n.disabled=i)},d(f){f&&Se(e),f&&Se(r),f&&Se(n),_n(u,f),a=!1,s()}}}function Oq(t){let e;return{c(){e=ce("span"),e.textContent="Loading"},m(r,n){Te(r,e,n)},p:At,d(r){r&&Se(e)}}}function iA(t){let e,r=t[29].summary+"",n,i,a,s;return{c(){var l,u;e=ce("option"),n=Sr(r),ae(e,"id",i=t[29].id),e.__value=a=t[29].id,e.value=e.__value,e.selected=s=t[29].id==((u=(l=t[0])==null?void 0:l.parent)==null?void 0:u.id)},m(l,u){Te(l,e,u),oe(e,n)},p(l,u){var f,d;u[0]&8&&r!==(r=l[29].summary+"")&&fi(n,r),u[0]&8&&i!==(i=l[29].id)&&ae(e,"id",i),u[0]&8&&a!==(a=l[29].id)&&(e.__value=a,e.value=e.__value),u[0]&9&&s!==(s=l[29].id==((d=(f=l[0])==null?void 0:f.parent)==null?void 0:d.id))&&(e.selected=s)},d(l){l&&Se(e)}}}function Lq(t){let e,r,n,i,a,s,l,u,f,d;return{c(){e=ce("label"),e.textContent="Start Date",r=Le(),n=ce("input"),i=Le(),a=ce("label"),a.textContent="End Date",s=Le(),l=ce("input"),ae(e,"for","eventStartDate"),ae(e,"class","svelte-8eu8j5"),ae(n,"type","datetime-local"),ae(n,"name","eventStartDate"),ae(a,"for","eventEndDate"),ae(a,"class","svelte-8eu8j5"),ae(l,"type","datetime-local"),ae(l,"name","eventEndDate"),ae(l,"min",u=window.moment(t[1]).format("YYYY-MM-DDThh:mm"))},m(h,g){Te(h,e,g),Te(h,r,g),Te(h,n,g),Bi(n,t[1]),Te(h,i,g),Te(h,a,g),Te(h,s,g),Te(h,l,g),Bi(l,t[2]),f||(d=[at(n,"input",t[24]),at(l,"input",t[25])],f=!0)},p(h,g){g[0]&2&&Bi(n,h[1]),g[0]&2&&u!==(u=window.moment(h[1]).format("YYYY-MM-DDThh:mm"))&&ae(l,"min",u),g[0]&4&&Bi(l,h[2])},d(h){h&&Se(e),h&&Se(r),h&&Se(n),h&&Se(i),h&&Se(a),h&&Se(s),h&&Se(l),f=!1,on(d)}}}function Pq(t){let e,r,n,i,a;return{c(){e=ce("label"),e.textContent="Date",r=Le(),n=ce("input"),ae(e,"for","eventDate"),ae(e,"class","svelte-8eu8j5"),ae(n,"type","date"),ae(n,"name","eventDate")},m(s,l){Te(s,e,l),Te(s,r,l),Te(s,n,l),Bi(n,t[6]),i||(a=at(n,"input",t[23]),i=!0)},p(s,l){l[0]&64&&Bi(n,s[6])},d(s){s&&Se(e),s&&Se(r),s&&Se(n),i=!1,a()}}}function Mq(t){let e,r,n,i;return{c(){e=ce("div"),r=ce("button"),r.textContent="Create",ae(r,"class","svelte-8eu8j5"),ae(e,"class","buttonRow svelte-8eu8j5")},m(a,s){Te(a,e,s),oe(e,r),n||(i=at(r,"click",t[12]),n=!0)},p:At,d(a){a&&Se(e),n=!1,i()}}}function Uq(t){let e,r,n,i,a,s,l,u,f,d,h;function g(x,O){return x[7]!=""?qq:Fq}let m=g(t,[-1,-1]),y=m(t);function _(x,O){return x[8]?Vq:Gq}let w=_(t,[-1,-1]),E=w(t),T=t[7]!=""&&aA(t);return{c(){e=ce("div"),y.c(),r=Le(),E.c(),n=Le(),i=ce("div"),a=ce("button"),a.textContent="Update",s=Le(),l=ce("button"),l.textContent="Delete",u=Le(),T&&T.c(),f=ia(),ae(e,"class","buttonRow svelte-8eu8j5"),ae(a,"class","svelte-8eu8j5"),ae(l,"class","svelte-8eu8j5"),ae(i,"class","buttonRow svelte-8eu8j5")},m(x,O){Te(x,e,O),y.m(e,null),oe(e,r),E.m(e,null),Te(x,n,O),Te(x,i,O),oe(i,a),oe(i,s),oe(i,l),Te(x,u,O),T&&T.m(x,O),Te(x,f,O),d||(h=[at(a,"click",t[15]),at(l,"click",t[13])],d=!0)},p(x,O){m===(m=g(x,O))&&y?y.p(x,O):(y.d(1),y=m(x),y&&(y.c(),y.m(e,r))),w===(w=_(x,O))&&E?E.p(x,O):(E.d(1),E=w(x),E&&(E.c(),E.m(e,null))),x[7]!=""?T?T.p(x,O):(T=aA(x),T.c(),T.m(f.parentNode,f)):T&&(T.d(1),T=null)},d(x){x&&Se(e),y.d(),E.d(),x&&Se(n),x&&Se(i),x&&Se(u),T&&T.d(x),x&&Se(f),d=!1,on(h)}}}function Fq(t){let e,r,n;return{c(){e=ce("button"),e.textContent="Show Single Event",ae(e,"class","svelte-8eu8j5")},m(i,a){Te(i,e,a),r||(n=at(e,"click",t[19]),r=!0)},p:At,d(i){i&&Se(e),r=!1,n()}}}function qq(t){let e,r,n;return{c(){e=ce("button"),e.textContent="Show Recurring Event",ae(e,"class","svelte-8eu8j5")},m(i,a){Te(i,e,a),r||(n=at(e,"click",t[19]),r=!0)},p:At,d(i){i&&Se(e),r=!1,n()}}}function Gq(t){let e,r,n;return{c(){e=ce("button"),e.textContent="Create Event Note",ae(e,"class","svelte-8eu8j5")},m(i,a){Te(i,e,a),r||(n=at(e,"click",t[18]),r=!0)},p:At,d(i){i&&Se(e),r=!1,n()}}}function Vq(t){let e,r,n;return{c(){e=ce("button"),e.textContent="Open Event Note",ae(e,"class","svelte-8eu8j5")},m(i,a){Te(i,e,a),r||(n=at(e,"click",t[17]),r=!0)},p:At,d(i){i&&Se(e),r=!1,n()}}}function aA(t){let e,r,n,i,a,s;return{c(){e=ce("div"),r=ce("button"),r.textContent="Update All",n=Le(),i=ce("button"),i.textContent="Delete All",r.disabled=!0,ae(r,"class","disabled svelte-8eu8j5"),ae(i,"class","svelte-8eu8j5"),ae(e,"class","buttonRow svelte-8eu8j5")},m(l,u){Te(l,e,u),oe(e,r),oe(e,n),oe(e,i),a||(s=[at(r,"click",t[16]),at(i,"click",t[14])],a=!0)},p:At,d(l){l&&Se(e),a=!1,on(s)}}}function jq(t){let e,r,n,i,a,s,l,u,f,d,h,g,m,y,_,w,E,T,x,O,I,B,z;function F(re,Fe){return re[4]?Oq:Bq}let q=F(t,[-1,-1]),te=q(t);function ie(re,Fe){return re[5]?Pq:Lq}let ye=ie(t,[-1,-1]),be=ye(t);function Ve(re,Fe){return re[0].id?Uq:Mq}let Ne=Ve(t,[-1,-1]),me=Ne(t);return{c(){e=ce("div"),r=ce("input"),n=Le(),i=ce("label"),i.textContent="Description",a=Le(),s=ce("textarea"),u=Le(),te.c(),f=Le(),d=ce("div"),h=ce("label"),h.textContent="Full Day",g=Le(),m=ce("input"),y=Le(),be.c(),_=Le(),w=ce("label"),w.textContent="Reoccurring",E=Le(),T=ce("input"),O=Le(),I=ce("div"),me.c(),ae(r,"class","summaryInput svelte-8eu8j5"),ae(r,"name","summary"),ae(r,"type","text"),ae(r,"placeholder","Summary"),ae(i,"for","description"),ae(i,"class","svelte-8eu8j5"),ae(s,"name","description"),s.value=l=t[9](),ae(h,"for","fullDay"),ae(h,"class","svelte-8eu8j5"),ae(m,"type","checkbox"),ae(m,"name","fullDay"),ae(d,"class","googleFullDayContainer svelte-8eu8j5"),ae(w,"for","reoccurring"),ae(w,"class","svelte-8eu8j5"),ae(T,"type","text"),ae(T,"name","Reoccurring"),T.disabled=x=t[0].id!=null,ae(I,"class","googleEventButtonContainer svelte-8eu8j5"),ae(e,"class","googleEventDetails")},m(re,Fe){Te(re,e,Fe),oe(e,r),Bi(r,t[0].summary),oe(e,n),oe(e,i),oe(e,a),oe(e,s),oe(e,u),te.m(e,null),oe(e,f),oe(e,d),oe(d,h),oe(d,g),oe(d,m),m.checked=t[5],oe(e,y),be.m(e,null),oe(e,_),oe(e,w),oe(e,E),oe(e,T),Bi(T,t[7]),oe(e,O),oe(e,I),me.m(I,null),B||(z=[at(r,"input",t[21]),at(s,"change",t[10]),at(m,"change",t[22]),at(T,"input",t[26])],B=!0)},p(re,Fe){Fe[0]&1&&r.value!==re[0].summary&&Bi(r,re[0].summary),q===(q=F(re,Fe))&&te?te.p(re,Fe):(te.d(1),te=q(re),te&&(te.c(),te.m(e,f))),Fe[0]&32&&(m.checked=re[5]),ye===(ye=ie(re,Fe))&&be?be.p(re,Fe):(be.d(1),be=ye(re),be&&(be.c(),be.m(e,_))),Fe[0]&1&&x!==(x=re[0].id!=null)&&(T.disabled=x),Fe[0]&128&&T.value!==re[7]&&Bi(T,re[7]),Ne===(Ne=Ve(re,Fe))&&me?me.p(re,Fe):(me.d(1),me=Ne(re),me&&(me.c(),me.m(I,null)))},i:At,o:At,d(re){re&&Se(e),te.d(),be.d(),me.d(),B=!1,on(z)}}}function sA(){let t=15,e=1e3*60*t;return window.moment(new Date(Math.round(new Date().getTime()/e)*e))}function Hq(t,e,r){let{event:n}=e,{closeFunction:i}=e,a,s=!0,l,u=st.getInstance(),f,d,h,g="",m=app.vault.getFiles().find(me=>me.basename==n.summary);function y(me){let re=rA.default.cloneDeep(me);return l?(re.start.date=window.moment(h).format("YYYY-MM-DD"),re.end.date=window.moment(h).format("YYYY-MM-DD"),delete re.start.dateTime,delete re.end.dateTime):(re.start.dateTime=window.moment(f).format(),re.end.dateTime=window.moment(d).format(),delete re.start.date,delete re.end.date),re}co(()=>vr(void 0,void 0,void 0,function*(){var me,re,Fe,Ze,ut;if(r(5,l=((me=n==null?void 0:n.start)===null||me===void 0?void 0:me.dateTime)==null&&((re=n==null?void 0:n.start)===null||re===void 0?void 0:re.date)!==void 0),r(3,a=yield Or()),r(4,s=!1),n.id==null){r(0,n.summary=(Fe=n.summary)!==null&&Fe!==void 0?Fe:"",n),r(0,n.description=(Ze=n.description)!==null&&Ze!==void 0?Ze:"",n),r(0,n.parent=a.find(ct=>ct.id===u.settings.defaultCalendar),n),n.parent||r(0,n.parent=a[a.length-1],n),r(7,g="");let Je=sA();r(1,f=Je.format("YYYY-MM-DDTHH:mm")),r(2,d=Je.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(6,h=Je.format("YYYY-MM-DD")),n.start.date&&r(6,h=window.moment(n.start.date).format("YYYY-MM-DD")),n.start.dateTime&&n.end.dateTime&&(r(1,f=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,d=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")))}else{let Je=yield Vl((ut=n.recurringEventId)!==null&&ut!==void 0?ut:n.id,n.parent.id);if(Je==null?void 0:Je.recurrence){let ct=ql(Je.recurrence[0]);r(7,g=ct.toText())}else r(7,g="");if(l){let ct=sA();r(1,f=ct.format("YYYY-MM-DDTHH:mm")),r(2,d=ct.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(6,h=window.moment(n.start.date).format("YYYY-MM-DD"))}else r(1,f=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,d=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")),r(6,h=window.moment().format("YYYY-MM-DD"))}}));let _=()=>n.description?n.description.replace(/<\/?[^>]+(>|$)/g,""):"",w=me=>{me.target instanceof HTMLTextAreaElement&&r(0,n.description=me.target.value,n)},E=me=>{let re=me.target;if(re instanceof HTMLSelectElement){let Fe=re.value;r(0,n.parent.id=Fe,n)}},T=()=>vr(void 0,void 0,void 0,function*(){if(g&&g!="")try{let re=Me.fromText(g),Fe=new _o;Fe.rrule(re);let Ze=Fe.valueOf();if(g&&Ze[0]==""){wt("Event not created. Error in recurrence text.",!0);return}r(0,n.recurrence=Ze,n)}catch(re){wt("Event not created. Error in recurrence text.",!0);return}(yield xh(y(n))).id&&i()}),x=me=>vr(void 0,void 0,void 0,function*(){let re=!1;n.recurringEventId?re=yield Ch(n,!0):re=yield Ch(n),re&&i()}),O=()=>vr(void 0,void 0,void 0,function*(){(yield Ch(y(n)))&&i()}),I=()=>vr(void 0,void 0,void 0,function*(){let me=y(n),re;me.recurringEventId?re=yield bh(me,!0):re=yield bh(me),re.id&&i()}),B=()=>vr(void 0,void 0,void 0,function*(){(yield bh(y(n))).id&&i()}),z=()=>vr(void 0,void 0,void 0,function*(){app.workspace.getLeaf(!0).openFile(m),i()}),F=()=>vr(void 0,void 0,void 0,function*(){u.settings.useDefaultTemplate&&u.settings.defaultFolder&&u.settings.defaultFolder?Ma(n,u.settings.defaultFolder,u.settings.defaultTemplate):new Eo(n,me=>r(8,m=me)).open()}),q=()=>{window.open(n.htmlLink)};function te(){n.summary=this.value,r(0,n)}function ie(){l=this.checked,r(5,l)}function ye(){h=this.value,r(6,h)}function be(){f=this.value,r(1,f)}function Ve(){d=this.value,r(2,d),r(1,f)}function Ne(){g=this.value,r(7,g)}return t.$$set=me=>{"event"in me&&r(0,n=me.event),"closeFunction"in me&&r(20,i=me.closeFunction)},t.$$.update=()=>{if(t.$$.dirty[0]&6){e:{let me=window.moment(f);window.moment(d).isBefore(me)&&r(2,d=me.add(1,"hour").format("YYYY-MM-DDTHH:mm"))}}},[n,f,d,a,s,l,h,g,m,_,w,E,T,x,O,I,B,z,F,q,i,te,ie,ye,be,Ve,Ne]}var oA=class extends wn{constructor(e){super();Dn(this,e,Hq,jq,Rn,{event:0,closeFunction:20},Dq,[-1,-1])}},lA=oA;var gi=class extends uA.Modal{constructor(e,r){super(st.getInstance().app);this.selectedEvent=e,r&&(this.closeFunction=r)}onOpen(){return M(this,null,function*(){let{contentEl:e}=this;new lA({target:e,props:{event:this.selectedEvent,closeFunction:()=>{this.closeFunction&&this.closeFunction(),this.close()}}})})}onClose(){let{contentEl:e}=this;e.empty()}};var fA=_t(uh());var Li=class extends cA.FuzzySuggestModal{constructor(e,r,n=window.moment(),i=!1,a){super(window.app);this.plugin=st.getInstance();this.eventList=[...e],this.modalSelectMode=r,this.setPlaceholder(`${n.format("MM/DD/YYYY")} Arrow left/right to switch day`),this.emptyStateText="No events found enter to create a new one",this.eventsChanged=i,this.currentDate=n.clone(),a&&(this.closeFunction=a),this.inputEl.addEventListener("keydown",s=>M(this,null,function*(){let l=!1;!this.getSuggestions(this.inputEl.value).length&&s.key=="Enter"&&new gi({summary:this.inputEl.value,start:{date:n.format()},end:{}},()=>{this.eventsChanged=!0,this.close()}).open(),s.key=="ArrowRight"?(s.ctrlKey?this.currentDate=this.currentDate.add(1,"month"):s.shiftKey?this.currentDate=this.currentDate.add(1,"week"):this.currentDate=this.currentDate.add(1,"day"),l=!0):s.key=="ArrowLeft"&&(s.ctrlKey?this.currentDate=this.currentDate.subtract(1,"month"):s.shiftKey?this.currentDate=this.currentDate.subtract(1,"week"):this.currentDate=this.currentDate.subtract(1,"day"),l=!0),l&&(this.setPlaceholder("Loading"),this.eventList=yield dr({startDate:this.currentDate}),this.inputEl.dispatchEvent(new Event("input")),this.setPlaceholder(`${this.currentDate.format("MM/DD/YYYY")} Arrow left and right to switch day`))}))}getItems(){return this.plugin.settings.activateDailyNoteAddon?[{id:"xxx",start:null,end:null},...this.eventList]:this.eventList}getItemText(e){return e.id=="xxx"?cc(this.currentDate)?"Open daily note":"Create daily note":e.start.date?`${e.start.date}		 | ${e.summary}	`:`${window.moment(e.start.dateTime).format("YYYY-MM-DD HH:mm")}	 | ${e.summary}	`}onChooseItem(e){return M(this,null,function*(){if(e.id=="xxx"){let r=cc(this.currentDate);r||(r=yield(0,fA.createDailyNote)(this.currentDate)),yield app.workspace.getLeaf(!1).openFile(r,{active:!0});return}this.modalSelectMode=="details"?(this.open(),new gi(e,()=>this.eventsChanged=!0).open()):this.modalSelectMode=="createNote"&&(this.plugin.settings.useDefaultTemplate?Ma(e,this.plugin.settings.defaultFolder,this.plugin.settings.defaultTemplate):new Eo(e,()=>{}).open())})}onClose(){this.closeFunction&&this.eventsChanged&&this.closeFunction()}};var Nh=class extends dA.FuzzySuggestModal{constructor(e){super(st.getInstance().app);this.calendarList=e,this.setPlaceholder("Select a calendar to view it")}getItems(){return this.calendarList}getItemText(e){return`${e.summary}	`}onChooseItem(e){return M(this,null,function*(){let r=yield dr({include:[e.id]});new Li(r,"details").open()})}};var ws;(function(i){i.web="web",i.month="month",i.day="day",i.schedule="schedule"})(ws||(ws={}));var Qh=_t(require("obsidian"));var _A=_t(mA());function bc(t){return t.getHours()/24+t.getMinutes()/(60*24)}function yA(t,e){if(t.start.date||(t==null?void 0:t.eventType)=="multiDay")return 0;let r=bc(new Date(t.start.dateTime));return e*r}function vA(t,e){if(t.start.date||(t==null?void 0:t.eventType)=="multiDay")return 25;let r=bc(new Date(t.start.dateTime)),n=bc(new Date(t.end.dateTime));return e*(n-r)}function ny(t,e){return t/24*e}function iy(t,e){return t-t/24*e}var Bh=()=>app.vault.config.theme?app.vault.config.theme=="obsidian"?"dark":"light":"dark";function Jq(t){ci(t,"svelte-ozfeab",'.googleCalendarEvent.svelte-ozfeab{display:flex;padding:10px;padding-top:0;position:absolute;cursor:pointer;width:150px;left:40px;border-radius:5px;color:black;font-size:0.5em;box-shadow:3px 2px 8px 4px rgba(0,0,0,0.36);overflow:hidden}.hourLine.svelte-ozfeab::after{content:"";position:absolute;width:90%;left:25px;border-bottom:1px solid white}.hourLineLarge.svelte-ozfeab::after{width:80%;left:50px}.hourText.svelte-ozfeab{display:block;font-family:"consolas"}.timeline.svelte-ozfeab,.hourText.svelte-ozfeab,.hourTextContainer.svelte-ozfeab{overflow:hidden}.timeDisplay.svelte-ozfeab{position:absolute;height:3px;background:red;overflow:visible}.timeline.svelte-ozfeab{position:relative;display:flex;flex-direction:row;overflow:visible}')}function wA(t,e,r){let n=t.slice();return n[20]=e[r],n[22]=r,n}function EA(t,e,r){let n=t.slice();return n[23]=e[r],n[22]=r,n}function CA(t,e,r){let n=t.slice();return n[23]=e[r],n[22]=r,n}function Zq(t){let e,r,n,i,a=`-${t[1]/52}px`,s,l=window.moment().isSame(t[0],"day"),u,f=`${t[1]}px`,d=`${t[2]}px`,h=` -${ny(t[1],t[3][0])}px 0px -${iy(t[1],t[3][1])}px 0px`,g={length:24},m=[];for(let x=0;x<g.length;x+=1)m[x]=bA(CA(t,g,x));let y={length:24},_=[];for(let x=0;x<y.length;x+=1)_[x]=xA(EA(t,y,x));let w=l&&SA(t),E=t[6],T=[];for(let x=0;x<E.length;x+=1)T[x]=TA(wA(t,E,x));return{c(){e=ce("div"),r=ce("div");for(let x=0;x<m.length;x+=1)m[x].c();n=Le(),i=ce("div");for(let x=0;x<_.length;x+=1)_[x].c();s=Le(),w&&w.c(),u=Le();for(let x=0;x<T.length;x+=1)T[x].c();ae(r,"class","hourLineContainer"),ae(i,"class","hourTextContainer svelte-ozfeab"),Xe(i,"margin-top",a,!1),ae(e,"class","timeline svelte-ozfeab"),Xe(e,"height",f,!1),Xe(e,"width",d,!1),Xe(e,"margin",h,!1)},m(x,O){Te(x,e,O),oe(e,r);for(let I=0;I<m.length;I+=1)m[I].m(r,null);oe(e,n),oe(e,i);for(let I=0;I<_.length;I+=1)_[I].m(i,null);oe(e,s),w&&w.m(e,null),oe(e,u);for(let I=0;I<T.length;I+=1)T[I].m(e,null)},p(x,O){if(O&130){g={length:24};let I;for(I=0;I<g.length;I+=1){let B=CA(x,g,I);m[I]?m[I].p(B,O):(m[I]=bA(B),m[I].c(),m[I].m(r,null))}for(;I<m.length;I+=1)m[I].d(1);m.length=g.length}if(O&1666){y={length:24};let I;for(I=0;I<y.length;I+=1){let B=EA(x,y,I);_[I]?_[I].p(B,O):(_[I]=xA(B),_[I].c(),_[I].m(i,null))}for(;I<_.length;I+=1)_[I].d(1);_.length=y.length}if(O&2&&a!==(a=`-${x[1]/52}px`)&&Xe(i,"margin-top",a,!1),O&1&&(l=window.moment().isSame(x[0],"day")),l?w?w.p(x,O):(w=SA(x),w.c(),w.m(e,u)):w&&(w.d(1),w=null),O&320){E=x[6];let I;for(I=0;I<E.length;I+=1){let B=wA(x,E,I);T[I]?T[I].p(B,O):(T[I]=TA(B),T[I].c(),T[I].m(e,null))}for(;I<T.length;I+=1)T[I].d(1);T.length=E.length}O&2&&f!==(f=`${x[1]}px`)&&Xe(e,"height",f,!1),O&4&&d!==(d=`${x[2]}px`)&&Xe(e,"width",d,!1),O&10&&h!==(h=` -${ny(x[1],x[3][0])}px 0px -${iy(x[1],x[3][1])}px 0px`)&&Xe(e,"margin",h,!1)},d(x){x&&Se(e),_n(m,x),_n(_,x),w&&w.d(),_n(T,x)}}}function $q(t){let e;return{c(){e=ce("p"),e.textContent="Loading"},m(r,n){Te(r,e,n)},p:At,d(r){r&&Se(e)}}}function bA(t){let e,r,n=`${t[1]/24}px`;return{c(){e=ce("div"),ae(e,"class",r=""+(Dl(t[7]==2?"hourLine hourLineLarge":"hourLine")+" svelte-ozfeab")),Xe(e,"height",n,!1)},m(i,a){Te(i,e,a)},p(i,a){a&128&&r!==(r=""+(Dl(i[7]==2?"hourLine hourLineLarge":"hourLine")+" svelte-ozfeab"))&&ae(e,"class",r),a&2&&n!==(n=`${i[1]/24}px`)&&Xe(e,"height",n,!1)},d(i){i&&Se(e)}}}function xA(t){let e,r=t[10](t[22],t[7])+"",n,i=`${t[1]/24}px`,a=`${t[1]/50}px`,s,l;return{c(){e=ce("span"),n=Sr(r),ae(e,"class","hourText svelte-ozfeab"),Xe(e,"height",i,!1),Xe(e,"font-size",a,!1)},m(u,f){Te(u,e,f),oe(e,n),s||(l=at(e,"click",t[9]),s=!0)},p(u,f){f&128&&r!==(r=u[10](u[22],u[7])+"")&&fi(n,r),f&2&&i!==(i=`${u[1]/24}px`)&&Xe(e,"height",i,!1),f&2&&a!==(a=`${u[1]/50}px`)&&Xe(e,"font-size",a,!1)},d(u){u&&Se(e),s=!1,l()}}}function SA(t){let e,r=`${t[5]}px`,n=`${t[2]}px`;return{c(){e=ce("div"),ae(e,"class","timeDisplay svelte-ozfeab"),Xe(e,"top",r,!1),Xe(e,"width",n,!1)},m(i,a){Te(i,e,a)},p(i,a){a&32&&r!==(r=`${i[5]}px`)&&Xe(e,"top",r,!1),a&4&&n!==(n=`${i[2]}px`)&&Xe(e,"width",n,!1)},d(i){i&&Se(e)}}}function TA(t){let e,r,n=t[20].event.summary+"",i,a,s,l,u,f=`${t[20].y}px`,d=`${t[20].x}px`,h=`${t[20].width}px`,g=`${t[20].height}px`,m,y;function _(...w){return t[14](t[20],...w)}return{c(){e=ce("div"),r=ce("span"),i=Sr(n),s=Le(),ae(r,"class",a="googleCalendarName googleCalendarName_Calendar_Color_"+t[20].event.parent.colorId+" googleCalendarName_Event_Color_"+t[20].event.parent.colorId+" googleCalendarName_Id_"+t[20].event.parent.id+" svelte-ozfeab"),ae(e,"class",l="googleCalendarEvent googleCalendarEvent_Calendar_Color_"+t[20].event.parent.colorId+" googleCalendarEvent_Event_Color_"+t[20].event.parent.colorId+" googleCalendarEvent_Id_"+t[20].event.parent.id+" svelte-ozfeab"),ae(e,"id",u=t[20].event.id),Xe(e,"top",f,!1),Xe(e,"left",d,!1),Xe(e,"width",h,!1),Xe(e,"height",g,!1),Xe(e,"background",Ku(t[20].event),!1)},m(w,E){Te(w,e,E),oe(e,r),oe(r,i),oe(e,s),m||(y=at(e,"click",_),m=!0)},p(w,E){t=w,E&64&&n!==(n=t[20].event.summary+"")&&fi(i,n),E&64&&a!==(a="googleCalendarName googleCalendarName_Calendar_Color_"+t[20].event.parent.colorId+" googleCalendarName_Event_Color_"+t[20].event.parent.colorId+" googleCalendarName_Id_"+t[20].event.parent.id+" svelte-ozfeab")&&ae(r,"class",a),E&64&&l!==(l="googleCalendarEvent googleCalendarEvent_Calendar_Color_"+t[20].event.parent.colorId+" googleCalendarEvent_Event_Color_"+t[20].event.parent.colorId+" googleCalendarEvent_Id_"+t[20].event.parent.id+" svelte-ozfeab")&&ae(e,"class",l),E&64&&u!==(u=t[20].event.id)&&ae(e,"id",u),E&64&&f!==(f=`${t[20].y}px`)&&Xe(e,"top",f,!1),E&64&&d!==(d=`${t[20].x}px`)&&Xe(e,"left",d,!1),E&64&&h!==(h=`${t[20].width}px`)&&Xe(e,"width",h,!1),E&64&&g!==(g=`${t[20].height}px`)&&Xe(e,"height",g,!1),E&64&&Xe(e,"background",Ku(t[20].event),!1)},d(w){w&&Se(e),m=!1,y()}}}function eG(t){let e;function r(a,s){return a[4]?$q:Zq}let n=r(t,-1),i=n(t);return{c(){i.c(),e=ia()},m(a,s){i.m(a,s),Te(a,e,s)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:At,o:At,d(a){i.d(a),a&&Se(e)}}}function tG(t,e,r){let{height:n=700}=e,{width:i=300}=e,{date:a=window.moment()}=e,{include:s}=e,{exclude:l}=e,{hourRange:u=[0,24]}=e,f=!0,d=0,h=[],g=[],m,y=st.getInstance(),_=y.settings.timelineHourFormat,w=()=>vr(void 0,void 0,void 0,function*(){r(7,_=y.settings.timelineHourFormat),yield T();let z=bc(new Date);r(5,d=Math.floor(n*z))}),E=()=>{let z=new _A.default;h.forEach(te=>{let ie=te.start.date||te.start.dateTime;z.has(ie)?z.get(ie).push(te):z.set(ie,[te])});let F=0,q=null;for(let te of z.values()){if(te[0].start.dateTime){let ie=window.moment(te[0].start.dateTime);q&&ie.isBefore(q,"minutes")?F++:F=0,q=window.moment(te[0].end.dateTime)}te.forEach((ie,ye)=>{let be=30;_==2&&(be=50);let Ve=be+F*10,Ne=(i-Ve)/te.length;r(6,g=[...g,{event:ie,x:Ve+Ne*ye,y:yA(ie,n),width:Ne,height:vA(ie,n),fullDay:ie.start.date!=null}])})}},T=()=>vr(void 0,void 0,void 0,function*(){if(!a.isValid())return;let z=yield dr({startDate:a,include:s,exclude:l});JSON.stringify(z)!=JSON.stringify(h)&&(h=z,r(6,g=[]),E()),r(4,f=!1)}),x=(z,F)=>{F.shiftKey?window.open(z.htmlLink):new gi(z,()=>{Di(),r(0,a),r(13,m)}).open()};fo(()=>{clearInterval(m)});let O=()=>{r(7,_+=1),_>2&&r(7,_=0),y.settings.timelineHourFormat=_,y.saveSettings()},I=(z,F)=>{let q=window.moment(`${z}:00:00`,"H:mm:ss");switch(F){case 0:return q.format("HH");case 1:return q.format("hh");case 2:return q.format("hh A")}},B=(z,F)=>x(z.event,F);return t.$$set=z=>{"height"in z&&r(1,n=z.height),"width"in z&&r(2,i=z.width),"date"in z&&r(0,a=z.date),"include"in z&&r(11,s=z.include),"exclude"in z&&r(12,l=z.exclude),"hourRange"in z&&r(3,u=z.hourRange)},t.$$.update=()=>{if(t.$$.dirty&8193){e:r(0,a),r(13,m),m&&clearInterval(m),r(4,f=!0),r(13,m=setInterval(w,5e3)),w()}},[a,n,i,u,f,d,g,_,x,O,I,s,l,m,B]}var AA=class extends wn{constructor(e){super();Dn(this,e,tG,eG,Rn,{height:1,width:2,date:0,include:11,exclude:12,hourRange:3},Jq)}},kA=AA;function rG(t){ci(t,"svelte-169s007",".fixedSizeButton.svelte-169s007{text-align:center;padding:10px 5%;margin:0}.titleContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.navigationContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:space-around;flex-wrap:wrap;padding-bottom:30px}")}function IA(t){let e,r,n,i,a,s=t[0].format("YYYY-MM-DD")+"",l,u,f,d,h,g,m,y,_,w,E,T,x,O;return{c(){e=ce("div"),r=ce("button"),r.textContent="+",n=Le(),i=ce("h3"),a=Sr("Google Calendar "),l=Sr(s),u=Le(),f=ce("div"),d=ce("button"),d.textContent="<<",h=Le(),g=ce("button"),g.textContent="<",m=Le(),y=ce("button"),y.textContent="Today",_=Le(),w=ce("button"),w.textContent=">",E=Le(),T=ce("button"),T.textContent=">>",ae(r,"aria-label","Create Event"),ae(e,"class","titleContainer svelte-169s007"),ae(d,"class","fixedSizeButton svelte-169s007"),ae(d,"aria-label","Back 1 week"),ae(g,"class","fixedSizeButton svelte-169s007"),ae(g,"aria-label","Back 1 day"),ae(y,"class","fixedSizeButton svelte-169s007"),ae(y,"aria-label","Jump to today"),ae(w,"class","fixedSizeButton svelte-169s007"),ae(w,"aria-label","Forward 1 day"),ae(T,"class","fixedSizeButton svelte-169s007"),ae(T,"aria-label","Forward 1 week"),ae(f,"class","navigationContainer svelte-169s007")},m(I,B){Te(I,e,B),oe(e,r),oe(e,n),oe(e,i),oe(i,a),oe(i,l),Te(I,u,B),Te(I,f,B),oe(f,d),oe(f,h),oe(f,g),oe(f,m),oe(f,y),oe(f,_),oe(f,w),oe(f,E),oe(f,T),x||(O=[at(r,"click",t[12]),at(d,"click",t[7]),at(g,"click",t[8]),at(y,"click",t[9]),at(w,"click",t[11]),at(T,"click",t[10])],x=!0)},p(I,B){B&1&&s!==(s=I[0].format("YYYY-MM-DD")+"")&&fi(l,s)},d(I){I&&Se(e),I&&Se(u),I&&Se(f),x=!1,on(O)}}}function nG(t){let e,r,n,i,a,s,l=t[3]&&t[0]&&IA(t);function u(d){t[14](d)}let f={height:t[1],width:t[2],include:t[4],exclude:t[5],hourRange:t[6]};return t[0]!==void 0&&(f.date=t[0]),i=new kA({props:f}),Nn.push(()=>Oa(i,"date",u)),{c(){e=ce("div"),l&&l.c(),r=Le(),n=ce("div"),mc(i.$$.fragment),Xe(n,"overflow","hidden"),Xe(e,"padding-left","10px")},m(d,h){Te(d,e,h),l&&l.m(e,null),oe(e,r),oe(e,n),Ol(i,n,null),s=!0},p(d,[h]){d[3]&&d[0]?l?l.p(d,h):(l=IA(d),l.c(),l.m(e,r)):l&&(l.d(1),l=null);let g={};h&2&&(g.height=d[1]),h&4&&(g.width=d[2]),h&16&&(g.include=d[4]),h&32&&(g.exclude=d[5]),h&64&&(g.hourRange=d[6]),!a&&h&1&&(a=!0,g.date=d[0],Ba(()=>a=!1)),i.$set(g)},i(d){s||(di(i.$$.fragment,d),s=!0)},o(d){Oi(i.$$.fragment,d),s=!1},d(d){d&&Se(e),l&&l.d(),po(i)}}}function iG(t,e,r){let{height:n=void 0}=e,{width:i=void 0}=e,{date:a=void 0}=e,{navigation:s=!1}=e,{include:l}=e,{exclude:u}=e,{hourRange:f=void 0}=e,d=0,h=()=>r(13,d-=7),g=()=>r(13,d-=1),m=()=>r(13,d=0),y=()=>r(13,d+=7),_=()=>r(13,d+=1),w=T=>{new gi({start:{},end:{}},()=>{Di(),r(0,a),r(3,s),r(13,d)}).open()};function E(T){a=T,r(0,a),r(3,s),r(13,d)}return t.$$set=T=>{"height"in T&&r(1,n=T.height),"width"in T&&r(2,i=T.width),"date"in T&&r(0,a=T.date),"navigation"in T&&r(3,s=T.navigation),"include"in T&&r(4,l=T.include),"exclude"in T&&r(5,u=T.exclude),"hourRange"in T&&r(6,f=T.hourRange)},t.$$.update=()=>{if(t.$$.dirty&8201){e:r(0,a=s?window.moment().local().add(d,"days"):a)}},[a,n,i,s,l,u,f,h,g,m,y,_,w,d,E]}var RA=class extends wn{constructor(e){super();Dn(this,e,iG,nG,Rn,{height:1,width:2,date:0,navigation:3,include:4,exclude:5,hourRange:6},rG)}},Oh=RA;function aG(t){ci(t,"svelte-1ficnkj",".fullSize.svelte-1ficnkj,.content.svelte-1ficnkj,.box.svelte-1ficnkj{width:100%;height:100%;overflow:scoll !important}")}function sG(t){let e,r,n=`${t[0]}px`,i=`${t[1]}px`;return{c(){e=ce("webview"),fc(e.src,r=t[3])||ae(e,"src",r),ae(e,"allowpopups",""),Xe(e,"width",n,!1),Xe(e,"height",i,!1)},m(a,s){Te(a,e,s),t[7](e)},p(a,s){s&8&&!fc(e.src,r=a[3])&&ae(e,"src",r),s&1&&n!==(n=`${a[0]}px`)&&Xe(e,"width",n,!1),s&2&&i!==(i=`${a[1]}px`)&&Xe(e,"height",i,!1)},d(a){a&&Se(e),t[7](null)}}}function oG(t){let e,r;return{c(){e=ce("webview"),fc(e.src,r=t[3])||ae(e,"src",r),ae(e,"allowpopups",""),ae(e,"class","fullSize svelte-1ficnkj")},m(n,i){Te(n,e,i),t[6](e)},p(n,i){i&8&&!fc(e.src,r=n[3])&&ae(e,"src",r)},d(n){n&&Se(e),t[6](null)}}}function lG(t){let e,r;function n(s,l){return s[0]==0?oG:sG}let i=n(t,-1),a=i(t);return{c(){e=ce("div"),r=ce("div"),a.c(),ae(r,"class","content svelte-1ficnkj"),ae(e,"class","box svelte-1ficnkj")},m(s,l){Te(s,e,l),oe(e,r),a.m(r,null)},p(s,[l]){i===(i=n(s,l))&&a?a.p(s,l):(a.d(1),a=i(s),a&&(a.c(),a.m(r,null)))},i:At,o:At,d(s){s&&Se(e),a.d()}}}function uG(t,e,r){let n=st.getInstance(),{date:i=window.moment()}=e,{width:a=0}=e,{height:s=0}=e,{theme:l=n.settings.webViewDefaultColorMode}=e,u,f="";i.isValid()?f=`https://calendar.google.com/calendar/u/0/r/day/${i.format("yyyy/M/D")}`:f="https://calendar.google.com/calendar/u/0/r/day/",co(()=>{l=="auto"&&r(4,l=Bh()),l=="dark"&&u.addEventListener("dom-ready",()=>{u.insertCSS(`
                html {
                    filter: hue-rotate(180deg)invert(100)contrast(93%) !important;
                }
            
            `)})});function d(g){Nn[g?"unshift":"push"](()=>{u=g,r(2,u)})}function h(g){Nn[g?"unshift":"push"](()=>{u=g,r(2,u)})}return t.$$set=g=>{"date"in g&&r(5,i=g.date),"width"in g&&r(0,a=g.width),"height"in g&&r(1,s=g.height),"theme"in g&&r(4,l=g.theme)},[a,s,u,f,l,i,d,h]}var NA=class extends wn{constructor(e){super();Dn(this,e,uG,lG,Rn,{date:5,width:0,height:1,theme:4},aG)}},Lh=NA;var kZ=_t(require("obsidian"));function Wr(){}function xc(t,e){for(let r in e)t[r]=e[r];return t}function cG(t){return t&&typeof t=="object"&&typeof t.then=="function"}function DA(t){return t()}function BA(){return Object.create(null)}function Cs(t){t.forEach(DA)}function sa(t){return typeof t=="function"}function ay(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ph(t,e){return t!=t?e==e:t!==e}function fG(t){return Object.keys(t).length===0}function OA(t,e,r,n){if(t){let i=LA(t,e,r,n);return t[0](i)}}function LA(t,e,r,n){return t[1]&&n?xc(r.ctx.slice(),t[1](n(e))):r.ctx}function dG(t,e,r,n){if(t[2]&&n){let i=t[2](n(r));if(e.dirty===void 0)return i;if(typeof i=="object"){let a=[],s=Math.max(e.dirty.length,i.length);for(let l=0;l<s;l+=1)a[l]=e.dirty[l]|i[l];return a}return e.dirty|i}return e.dirty}function PA(t,e,r,n,i,a,s){let l=dG(e,n,i,a);if(l){let u=LA(e,r,n,s);t.p(u,l)}}function Hl(t){return t==null?"":t}function yt(t,e){t.appendChild(e)}function zr(t,e,r){t.insertBefore(e,r||null)}function Mr(t){t.parentNode.removeChild(t)}function Mh(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function Yt(t){return document.createElement(t)}function Kl(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function bo(t){return document.createTextNode(t)}function Hn(){return bo(" ")}function Uh(){return bo("")}function Ua(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function lt(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function MA(t,e){let r=Object.getOwnPropertyDescriptors(t.__proto__);for(let n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:r[n]&&r[n].set?t[n]=e[n]:lt(t,n,e[n])}function hG(t){return Array.from(t.childNodes)}function Sc(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ar(t,e,r){t.classList[r?"add":"remove"](e)}var Fh;function bs(t){Fh=t}function pG(){if(!Fh)throw new Error("Function called outside component initialization");return Fh}var Tc=[],UA=[],qh=[],FA=[],gG=Promise.resolve(),sy=!1;function mG(){sy||(sy=!0,gG.then(cy))}function oy(t){qh.push(t)}var ly=!1,uy=new Set;function cy(){if(!ly){ly=!0;do{for(let t=0;t<Tc.length;t+=1){let e=Tc[t];bs(e),yG(e.$$)}for(bs(null),Tc.length=0;UA.length;)UA.pop()();for(let t=0;t<qh.length;t+=1){let e=qh[t];uy.has(e)||(uy.add(e),e())}qh.length=0}while(Tc.length);for(;FA.length;)FA.pop()();sy=!1,ly=!1,uy.clear()}}function yG(t){if(t.fragment!==null){t.update(),Cs(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(oy)}}var Gh=new Set,xo;function So(){xo={r:0,c:[],p:xo}}function To(){xo.r||Cs(xo.c),xo=xo.p}function Jt(t,e){t&&t.i&&(Gh.delete(t),t.i(e))}function hr(t,e,r,n){if(t&&t.o){if(Gh.has(t))return;Gh.add(t),xo.c.push(()=>{Gh.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}}function qA(t,e){let r=e.token={};function n(i,a,s,l){if(e.token!==r)return;e.resolved=l;let u=e.ctx;s!==void 0&&(u=u.slice(),u[s]=l);let f=i&&(e.current=i)(u),d=!1;e.block&&(e.blocks?e.blocks.forEach((h,g)=>{g!==a&&h&&(So(),hr(h,1,1,()=>{e.blocks[g]===h&&(e.blocks[g]=null)}),To())}):e.block.d(1),f.c(),Jt(f,1),f.m(e.mount(),e.anchor),d=!0),e.block=f,e.blocks&&(e.blocks[a]=f),d&&cy()}if(cG(t)){let i=pG();if(t.then(a=>{bs(i),n(e.then,1,e.value,a),bs(null)},a=>{if(bs(i),n(e.catch,2,e.error,a),bs(null),!e.hasCatch)throw a}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function GA(t,e){hr(t,1,1,()=>{e.delete(t.key)})}function VA(t,e,r,n,i,a,s,l,u,f,d,h){let g=t.length,m=a.length,y=g,_={};for(;y--;)_[t[y].key]=y;let w=[],E=new Map,T=new Map;for(y=m;y--;){let B=h(i,a,y),z=r(B),F=s.get(z);F?n&&F.p(B,e):(F=f(z,B),F.c()),E.set(z,w[y]=F),z in _&&T.set(z,Math.abs(y-_[z]))}let x=new Set,O=new Set;function I(B){Jt(B,1),B.m(l,d),s.set(B.key,B),d=B.first,m--}for(;g&&m;){let B=w[m-1],z=t[g-1],F=B.key,q=z.key;B===z?(d=B.first,g--,m--):E.has(q)?!s.has(F)||x.has(F)?I(B):O.has(q)?g--:T.get(F)>T.get(q)?(O.add(F),I(B)):(x.add(q),g--):(u(z,s),g--)}for(;g--;){let B=t[g];E.has(B.key)||u(B,s)}for(;m;)I(w[m-1]);return w}function Vh(t,e){let r={},n={},i={$$scope:1},a=t.length;for(;a--;){let s=t[a],l=e[a];if(l){for(let u in s)u in l||(n[u]=1);for(let u in l)i[u]||(r[u]=l[u],i[u]=1);t[a]=l}else for(let u in s)i[u]=1}for(let s in n)s in r||(r[s]=void 0);return r}function fy(t){return typeof t=="object"&&t!==null?t:{}}function Fa(t){t&&t.c()}function oa(t,e,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=t.$$;i&&i.m(e,r),n||oy(()=>{let u=a.map(DA).filter(sa);s?s.push(...u):Cs(u),t.$$.on_mount=[]}),l.forEach(oy)}function la(t,e){let r=t.$$;r.fragment!==null&&(Cs(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function vG(t,e){t.$$.dirty[0]===-1&&(Tc.push(t),mG(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ao(t,e,r,n,i,a,s=[-1]){let l=Fh;bs(t);let u=t.$$={fragment:null,ctx:null,props:a,update:Wr,not_equal:i,bound:BA(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:BA(),dirty:s,skip_bound:!1},f=!1;if(u.ctx=r?r(t,e.props||{},(d,h,...g)=>{let m=g.length?g[0]:h;return u.ctx&&i(u.ctx[d],u.ctx[d]=m)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](m),f&&vG(t,d)),h}):[],u.update(),f=!0,Cs(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){let d=hG(e.target);u.fragment&&u.fragment.l(d),d.forEach(Mr)}else u.fragment&&u.fragment.c();e.intro&&Jt(t.$$.fragment),oa(t,e.target,e.anchor,e.customElement),cy()}bs(l)}var xs=class{$destroy(){la(this,1),this.$destroy=Wr}$on(e,r){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!fG(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};function _G(t,e="day"){let r=t.clone().startOf(e).format();return`${e}-${r}`}var jh=_G;function wG(){var t=Yt("style");t.id="svelte-1widvzq-style",t.textContent=".dot.svelte-1widvzq,.hollow.svelte-1widvzq{display:inline-block;height:6px;width:6px;margin:0 1px}.filled.svelte-1widvzq{fill:var(--color-dot)}.active.filled.svelte-1widvzq{fill:var(--text-on-accent)}.hollow.svelte-1widvzq{fill:none;stroke:var(--color-dot)}.active.hollow.svelte-1widvzq{fill:none;stroke:var(--text-on-accent)}",yt(document.head,t)}function EG(t){let e,r,n;return{c(){e=Kl("svg"),r=Kl("circle"),lt(r,"cx","3"),lt(r,"cy","3"),lt(r,"r","2"),lt(e,"class",n=""+(Hl(`hollow ${t[0]}`)+" svelte-1widvzq")),lt(e,"viewBox","0 0 6 6"),lt(e,"xmlns","http://www.w3.org/2000/svg"),Ar(e,"active",t[2])},m(i,a){zr(i,e,a),yt(e,r)},p(i,a){a&1&&n!==(n=""+(Hl(`hollow ${i[0]}`)+" svelte-1widvzq"))&&lt(e,"class",n),a&5&&Ar(e,"active",i[2])},d(i){i&&Mr(e)}}}function CG(t){let e,r,n;return{c(){e=Kl("svg"),r=Kl("circle"),lt(r,"cx","3"),lt(r,"cy","3"),lt(r,"r","2"),lt(e,"class",n=""+(Hl(`dot filled ${t[0]}`)+" svelte-1widvzq")),lt(e,"viewBox","0 0 6 6"),lt(e,"xmlns","http://www.w3.org/2000/svg"),Ar(e,"active",t[2])},m(i,a){zr(i,e,a),yt(e,r)},p(i,a){a&1&&n!==(n=""+(Hl(`dot filled ${i[0]}`)+" svelte-1widvzq"))&&lt(e,"class",n),a&5&&Ar(e,"active",i[2])},d(i){i&&Mr(e)}}}function bG(t){let e;function r(a,s){return a[1]?CG:EG}let n=r(t),i=n(t);return{c(){i.c(),e=Uh()},m(a,s){i.m(a,s),zr(a,e,s)},p(a,[s]){n===(n=r(a))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Wr,o:Wr,d(a){i.d(a),a&&Mr(e)}}}function xG(t,e,r){let{className:n=""}=e,{isFilled:i}=e,{isActive:a}=e;return t.$$set=s=>{"className"in s&&r(0,n=s.className),"isFilled"in s&&r(1,i=s.isFilled),"isActive"in s&&r(2,a=s.isActive)},[n,i,a]}var dy=class extends xs{constructor(e){super();document.getElementById("svelte-1widvzq-style")||wG(),Ao(this,e,xG,bG,ay,{className:0,isFilled:1,isActive:2})}},SG=t=>({}),jA=t=>({metadata:null}),TG=t=>({metadata:t&1}),HA=t=>({metadata:t[3]});function AG(t){let e,r=t[2].default,n=OA(r,t,t[1],jA);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),e=!0},p(i,a){n&&n.p&&a&2&&PA(n,r,i,i[1],a,SG,jA)},i(i){e||(Jt(n,i),e=!0)},o(i){hr(n,i),e=!1},d(i){n&&n.d(i)}}}function kG(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!1,pending:NG,then:RG,catch:IG,value:3,blocks:[,,,]};return qA(r=t[0],i),{c(){e=Uh(),i.block.c()},m(a,s){zr(a,e,s),i.block.m(a,i.anchor=s),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,s){if(t=a,i.ctx=t,!(s&1&&r!==(r=t[0])&&qA(r,i))){let l=t.slice();l[3]=i.resolved,i.block.p(l,s)}},i(a){n||(Jt(i.block),n=!0)},o(a){for(let s=0;s<3;s+=1){let l=i.blocks[s];hr(l)}n=!1},d(a){a&&Mr(e),i.block.d(a),i.token=null,i=null}}}function IG(t){return{c:Wr,m:Wr,p:Wr,i:Wr,o:Wr,d:Wr}}function RG(t){let e,r=t[2].default,n=OA(r,t,t[1],HA);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),e=!0},p(i,a){n&&n.p&&a&3&&PA(n,r,i,i[1],a,TG,HA)},i(i){e||(Jt(n,i),e=!0)},o(i){hr(n,i),e=!1},d(i){n&&n.d(i)}}}function NG(t){return{c:Wr,m:Wr,p:Wr,i:Wr,o:Wr,d:Wr}}function DG(t){let e,r,n,i,a=[kG,AG],s=[];function l(u,f){return u[0]?0:1}return e=l(t),r=s[e]=a[e](t),{c(){r.c(),n=Uh()},m(u,f){s[e].m(u,f),zr(u,n,f),i=!0},p(u,[f]){let d=e;e=l(u),e===d?s[e].p(u,f):(So(),hr(s[d],1,1,()=>{s[d]=null}),To(),r=s[e],r?r.p(u,f):(r=s[e]=a[e](u),r.c()),Jt(r,1),r.m(n.parentNode,n))},i(u){i||(Jt(r),i=!0)},o(u){hr(r),i=!1},d(u){s[e].d(u),u&&Mr(n)}}}function BG(t,e,r){let{$$slots:n={},$$scope:i}=e,{metadata:a}=e;return t.$$set=s=>{"metadata"in s&&r(0,a=s.metadata),"$$scope"in s&&r(1,i=s.$$scope)},[a,i,n]}var hy=class extends xs{constructor(e){super();Ao(this,e,BG,DG,Ph,{metadata:0})}};function OG(){return navigator.appVersion.indexOf("Mac")!==-1}function Hh(t){return OG()?t.metaKey:t.ctrlKey}function LG(...t){return window.moment.weekdaysShort(!0)}function KA(t){return t.isoWeekday()===6||t.isoWeekday()===7}function PG(t){return t[0].weekday(0)}function MG(t,...e){let r=window.moment().locale(),n=[],i,a=t.clone().locale(r).date(1),s=a.weekday(),l=a.clone().subtract(s,"days");for(let u=0;u<42;u++)u%7==0&&(i={days:[],weekNum:l.week()},n.push(i)),i.days.push(l),l=l.clone().add(1,"days");return n}function UG(){var t=Yt("style");t.id="svelte-q3wqg9-style",t.textContent=".day.svelte-q3wqg9{background-color:var(--color-background-day);border-radius:4px;color:var(--color-text-day);cursor:pointer;font-size:0.8em;height:100%;padding:4px;position:relative;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.day.svelte-q3wqg9:hover{background-color:var(--interactive-hover)}.day.active.svelte-q3wqg9:hover{background-color:var(--interactive-accent-hover)}.adjacent-month.svelte-q3wqg9{opacity:0.25}.today.svelte-q3wqg9{color:var(--color-text-today)}.day.svelte-q3wqg9:active,.active.svelte-q3wqg9,.active.today.svelte-q3wqg9{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-q3wqg9{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",yt(document.head,t)}function YA(t,e,r){let n=t.slice();return n[11]=e[r],n}function WA(t){let e,r,n=[t[11]],i={};for(let a=0;a<n.length;a+=1)i=xc(i,n[a]);return e=new dy({props:i}),{c(){Fa(e.$$.fragment)},m(a,s){oa(e,a,s),r=!0},p(a,s){let l=s&128?Vh(n,[fy(a[11])]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){hr(e.$$.fragment,a),r=!1},d(a){la(e,a)}}}function FG(t){let e,r=t[0].format("D")+"",n,i,a,s,l,u,f,d=t[7].dots,h=[];for(let _=0;_<d.length;_+=1)h[_]=WA(YA(t,d,_));let g=_=>hr(h[_],1,1,()=>{h[_]=null}),m=[{class:s=`day ${t[7].classes.join(" ")}`},t[7].dataAttributes||{}],y={};for(let _=0;_<m.length;_+=1)y=xc(y,m[_]);return{c(){e=Yt("div"),n=bo(r),i=Hn(),a=Yt("div");for(let _=0;_<h.length;_+=1)h[_].c();lt(a,"class","dot-container svelte-q3wqg9"),MA(e,y),Ar(e,"active",t[6]===jh(t[0],"day")),Ar(e,"adjacent-month",!t[0].isSame(t[5],"month")),Ar(e,"today",t[0].isSame(t[4],"day")),Ar(e,"svelte-q3wqg9",!0)},m(_,w){zr(_,e,w),yt(e,n),yt(e,i),yt(e,a);for(let E=0;E<h.length;E+=1)h[E].m(a,null);l=!0,u||(f=[Ua(e,"click",function(){sa(t[2]&&t[8])&&(t[2]&&t[8]).apply(this,arguments)}),Ua(e,"contextmenu",function(){sa(t[3]&&t[9])&&(t[3]&&t[9]).apply(this,arguments)}),Ua(e,"pointerover",function(){sa(t[1]&&t[10])&&(t[1]&&t[10]).apply(this,arguments)})],u=!0)},p(_,w){if(t=_,(!l||w&1)&&r!==(r=t[0].format("D")+"")&&Sc(n,r),w&128){d=t[7].dots;let E;for(E=0;E<d.length;E+=1){let T=YA(t,d,E);h[E]?(h[E].p(T,w),Jt(h[E],1)):(h[E]=WA(T),h[E].c(),Jt(h[E],1),h[E].m(a,null))}for(So(),E=d.length;E<h.length;E+=1)g(E);To()}MA(e,y=Vh(m,[(!l||w&128&&s!==(s=`day ${t[7].classes.join(" ")}`))&&{class:s},w&128&&(t[7].dataAttributes||{})])),Ar(e,"active",t[6]===jh(t[0],"day")),Ar(e,"adjacent-month",!t[0].isSame(t[5],"month")),Ar(e,"today",t[0].isSame(t[4],"day")),Ar(e,"svelte-q3wqg9",!0)},i(_){if(!l){for(let w=0;w<d.length;w+=1)Jt(h[w]);l=!0}},o(_){h=h.filter(Boolean);for(let w=0;w<h.length;w+=1)hr(h[w]);l=!1},d(_){_&&Mr(e),Mh(h,_),u=!1,Cs(f)}}}function qG(t){let e,r,n;return r=new hy({props:{metadata:t[7],$$slots:{default:[FG,({metadata:i})=>({7:i}),({metadata:i})=>i?128:0]},$$scope:{ctx:t}}}),{c(){e=Yt("td"),Fa(r.$$.fragment)},m(i,a){zr(i,e,a),oa(r,e,null),n=!0},p(i,[a]){let s={};a&128&&(s.metadata=i[7]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Jt(r.$$.fragment,i),n=!0)},o(i){hr(r.$$.fragment,i),n=!1},d(i){i&&Mr(e),la(r)}}}function GG(t,e,r){let{date:n}=e,{metadata:i}=e,{onHover:a}=e,{onClick:s}=e,{onContextMenu:l}=e,{today:u}=e,{displayedMonth:f=null}=e,{selectedId:d=null}=e,h=y=>s(n,Hh(y)),g=y=>l(n,y),m=y=>a(n,y.target,Hh(y));return t.$$set=y=>{"date"in y&&r(0,n=y.date),"metadata"in y&&r(7,i=y.metadata),"onHover"in y&&r(1,a=y.onHover),"onClick"in y&&r(2,s=y.onClick),"onContextMenu"in y&&r(3,l=y.onContextMenu),"today"in y&&r(4,u=y.today),"displayedMonth"in y&&r(5,f=y.displayedMonth),"selectedId"in y&&r(6,d=y.selectedId)},[n,a,s,l,u,f,d,i,h,g,m]}var zA=class extends xs{constructor(e){super();document.getElementById("svelte-q3wqg9-style")||UG(),Ao(this,e,GG,qG,Ph,{date:0,metadata:7,onHover:1,onClick:2,onContextMenu:3,today:4,displayedMonth:5,selectedId:6})}};function VG(){var t=Yt("style");t.id="svelte-156w7na-style",t.textContent=".arrow.svelte-156w7na.svelte-156w7na{align-items:center;cursor:pointer;display:flex;justify-content:center;width:24px}.arrow.is-mobile.svelte-156w7na.svelte-156w7na{width:32px}.right.svelte-156w7na.svelte-156w7na{transform:rotate(180deg)}.arrow.svelte-156w7na svg.svelte-156w7na{color:var(--color-arrow);height:16px;width:16px}",yt(document.head,t)}function jG(t){let e,r,n,i,a;return{c(){e=Yt("div"),r=Kl("svg"),n=Kl("path"),lt(n,"fill","currentColor"),lt(n,"d","M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"),lt(r,"focusable","false"),lt(r,"role","img"),lt(r,"xmlns","http://www.w3.org/2000/svg"),lt(r,"viewBox","0 0 320 512"),lt(r,"class","svelte-156w7na"),lt(e,"class","arrow svelte-156w7na"),lt(e,"aria-label",t[1]),Ar(e,"is-mobile",t[3]),Ar(e,"right",t[2]==="right")},m(s,l){zr(s,e,l),yt(e,r),yt(r,n),i||(a=Ua(e,"click",function(){sa(t[0])&&t[0].apply(this,arguments)}),i=!0)},p(s,[l]){t=s,l&2&&lt(e,"aria-label",t[1]),l&4&&Ar(e,"right",t[2]==="right")},i:Wr,o:Wr,d(s){s&&Mr(e),i=!1,a()}}}function HG(t,e,r){let{onClick:n}=e,{tooltip:i}=e,{direction:a}=e,s=window.app.isMobile;return t.$$set=l=>{"onClick"in l&&r(0,n=l.onClick),"tooltip"in l&&r(1,i=l.tooltip),"direction"in l&&r(2,a=l.direction)},[n,i,a,s]}var py=class extends xs{constructor(e){super();document.getElementById("svelte-156w7na-style")||VG(),Ao(this,e,HG,jG,ay,{onClick:0,tooltip:1,direction:2})}};function KG(){var t=Yt("style");t.id="svelte-1vwr9dd-style",t.textContent=".nav.svelte-1vwr9dd.svelte-1vwr9dd{align-items:center;display:flex;margin:0.6em 0 1em;padding:0 8px;width:100%}.nav.is-mobile.svelte-1vwr9dd.svelte-1vwr9dd{padding:0}.title.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--color-text-title);font-size:1.5em;margin:0}.is-mobile.svelte-1vwr9dd .title.svelte-1vwr9dd{font-size:1.3em}.month.svelte-1vwr9dd.svelte-1vwr9dd{font-weight:500;text-transform:capitalize}.year.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--interactive-accent)}.right-nav.svelte-1vwr9dd.svelte-1vwr9dd{display:flex;justify-content:center;margin-left:auto}.reset-button.svelte-1vwr9dd.svelte-1vwr9dd{cursor:pointer;border-radius:4px;color:var(--text-muted);font-size:0.7em;font-weight:600;letter-spacing:1px;margin:0 4px;padding:0px 4px;text-transform:uppercase}.is-mobile.svelte-1vwr9dd .reset-button.svelte-1vwr9dd{display:none}",yt(document.head,t)}function YG(t){let e,r,n,i=t[0].format("MMM")+"",a,s,l,u=t[0].format("YYYY")+"",f,d,h,g,m,y,_,w,E,T,x;return g=new py({props:{direction:"left",onClick:t[3],tooltip:"Previous Month"}}),w=new py({props:{direction:"right",onClick:t[2],tooltip:"Next Month"}}),{c(){e=Yt("div"),r=Yt("h3"),n=Yt("span"),a=bo(i),s=Hn(),l=Yt("span"),f=bo(u),d=Hn(),h=Yt("div"),Fa(g.$$.fragment),m=Hn(),y=Yt("div"),y.textContent=`${t[4]}`,_=Hn(),Fa(w.$$.fragment),lt(n,"class","month svelte-1vwr9dd"),lt(l,"class","year svelte-1vwr9dd"),lt(r,"class","title svelte-1vwr9dd"),lt(y,"class","reset-button svelte-1vwr9dd"),lt(h,"class","right-nav svelte-1vwr9dd"),lt(e,"class","nav svelte-1vwr9dd"),Ar(e,"is-mobile",t[5])},m(O,I){zr(O,e,I),yt(e,r),yt(r,n),yt(n,a),yt(r,s),yt(r,l),yt(l,f),yt(e,d),yt(e,h),oa(g,h,null),yt(h,m),yt(h,y),yt(h,_),oa(w,h,null),E=!0,T||(x=[Ua(r,"click",function(){sa(t[1])&&t[1].apply(this,arguments)}),Ua(y,"click",function(){sa(t[1])&&t[1].apply(this,arguments)})],T=!0)},p(O,[I]){t=O,(!E||I&1)&&i!==(i=t[0].format("MMM")+"")&&Sc(a,i),(!E||I&1)&&u!==(u=t[0].format("YYYY")+"")&&Sc(f,u);let B={};I&8&&(B.onClick=t[3]),g.$set(B);let z={};I&4&&(z.onClick=t[2]),w.$set(z)},i(O){E||(Jt(g.$$.fragment,O),Jt(w.$$.fragment,O),E=!0)},o(O){hr(g.$$.fragment,O),hr(w.$$.fragment,O),E=!1},d(O){O&&Mr(e),la(g),la(w),T=!1,Cs(x)}}}function WG(t,e,r){let{displayedMonth:n}=e,{today:i}=e,{resetDisplayedMonth:a}=e,{incrementDisplayedMonth:s}=e,{decrementDisplayedMonth:l}=e,u=i.calendar().split(/\d|\s/)[0],f=window.app.isMobile;return t.$$set=d=>{"displayedMonth"in d&&r(0,n=d.displayedMonth),"today"in d&&r(6,i=d.today),"resetDisplayedMonth"in d&&r(1,a=d.resetDisplayedMonth),"incrementDisplayedMonth"in d&&r(2,s=d.incrementDisplayedMonth),"decrementDisplayedMonth"in d&&r(3,l=d.decrementDisplayedMonth)},[n,a,s,l,u,f,i]}var QA=class extends xs{constructor(e){super();document.getElementById("svelte-1vwr9dd-style")||KG(),Ao(this,e,WG,YG,ay,{displayedMonth:0,today:6,resetDisplayedMonth:1,incrementDisplayedMonth:2,decrementDisplayedMonth:3})}};function zG(){var t=Yt("style");t.id="svelte-egt0yd-style",t.textContent="td.svelte-egt0yd{border-right:1px solid var(--background-modifier-border)}.week-num.svelte-egt0yd{background-color:var(--color-background-weeknum);border-radius:4px;color:var(--color-text-weeknum);cursor:pointer;font-size:0.65em;height:100%;padding:4px;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.week-num.svelte-egt0yd:hover{background-color:var(--interactive-hover)}.week-num.active.svelte-egt0yd:hover{background-color:var(--interactive-accent-hover)}.active.svelte-egt0yd{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-egt0yd{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",yt(document.head,t)}function XA(t,e,r){let n=t.slice();return n[11]=e[r],n}function JA(t){let e,r,n=[t[11]],i={};for(let a=0;a<n.length;a+=1)i=xc(i,n[a]);return e=new dy({props:i}),{c(){Fa(e.$$.fragment)},m(a,s){oa(e,a,s),r=!0},p(a,s){let l=s&64?Vh(n,[fy(a[11])]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){hr(e.$$.fragment,a),r=!1},d(a){la(e,a)}}}function QG(t){let e,r,n,i,a,s,l,u,f=t[6].dots,d=[];for(let g=0;g<f.length;g+=1)d[g]=JA(XA(t,f,g));let h=g=>hr(d[g],1,1,()=>{d[g]=null});return{c(){e=Yt("div"),r=bo(t[0]),n=Hn(),i=Yt("div");for(let g=0;g<d.length;g+=1)d[g].c();lt(i,"class","dot-container svelte-egt0yd"),lt(e,"class",a=""+(Hl(`week-num ${t[6].classes.join(" ")}`)+" svelte-egt0yd")),Ar(e,"active",t[5]===jh(t[1][0],"week"))},m(g,m){zr(g,e,m),yt(e,r),yt(e,n),yt(e,i);for(let y=0;y<d.length;y+=1)d[y].m(i,null);s=!0,l||(u=[Ua(e,"click",function(){sa(t[3]&&t[8])&&(t[3]&&t[8]).apply(this,arguments)}),Ua(e,"contextmenu",function(){sa(t[4]&&t[9])&&(t[4]&&t[9]).apply(this,arguments)}),Ua(e,"pointerover",function(){sa(t[2]&&t[10])&&(t[2]&&t[10]).apply(this,arguments)})],l=!0)},p(g,m){if(t=g,(!s||m&1)&&Sc(r,t[0]),m&64){f=t[6].dots;let y;for(y=0;y<f.length;y+=1){let _=XA(t,f,y);d[y]?(d[y].p(_,m),Jt(d[y],1)):(d[y]=JA(_),d[y].c(),Jt(d[y],1),d[y].m(i,null))}for(So(),y=f.length;y<d.length;y+=1)h(y);To()}(!s||m&64&&a!==(a=""+(Hl(`week-num ${t[6].classes.join(" ")}`)+" svelte-egt0yd")))&&lt(e,"class",a),m&98&&Ar(e,"active",t[5]===jh(t[1][0],"week"))},i(g){if(!s){for(let m=0;m<f.length;m+=1)Jt(d[m]);s=!0}},o(g){d=d.filter(Boolean);for(let m=0;m<d.length;m+=1)hr(d[m]);s=!1},d(g){g&&Mr(e),Mh(d,g),l=!1,Cs(u)}}}function XG(t){let e,r,n;return r=new hy({props:{metadata:t[6],$$slots:{default:[QG,({metadata:i})=>({6:i}),({metadata:i})=>i?64:0]},$$scope:{ctx:t}}}),{c(){e=Yt("td"),Fa(r.$$.fragment),lt(e,"class","svelte-egt0yd")},m(i,a){zr(i,e,a),oa(r,e,null),n=!0},p(i,[a]){let s={};a&64&&(s.metadata=i[6]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Jt(r.$$.fragment,i),n=!0)},o(i){hr(r.$$.fragment,i),n=!1},d(i){i&&Mr(e),la(r)}}}function JG(t,e,r){let{weekNum:n}=e,{days:i}=e,{metadata:a}=e,{onHover:s}=e,{onClick:l}=e,{onContextMenu:u}=e,{selectedId:f=null}=e,d,h=y=>l(d,Hh(y)),g=y=>u(i[0],y),m=y=>s(d,y.target,Hh(y));return t.$$set=y=>{"weekNum"in y&&r(0,n=y.weekNum),"days"in y&&r(1,i=y.days),"metadata"in y&&r(6,a=y.metadata),"onHover"in y&&r(2,s=y.onHover),"onClick"in y&&r(3,l=y.onClick),"onContextMenu"in y&&r(4,u=y.onContextMenu),"selectedId"in y&&r(5,f=y.selectedId)},t.$$.update=()=>{t.$$.dirty&2&&r(7,d=PG(i))},[n,i,s,l,u,f,a,d,h,g,m]}var ZA=class extends xs{constructor(e){super();document.getElementById("svelte-egt0yd-style")||zG(),Ao(this,e,JG,XG,Ph,{weekNum:0,days:1,metadata:6,onHover:2,onClick:3,onContextMenu:4,selectedId:5})}};function $A(t){return M(this,null,function*(){let e={dots:[],classes:[],dataAttributes:{}};return(yield Promise.all(t)).reduce((n,i)=>({classes:[...n.classes,...i.classes||[]],dataAttributes:Object.assign(n.dataAttributes,i.dataAttributes),dots:[...n.dots,...i.dots||[]]}),e)})}function e2(t,e,...r){return $A(t.map(n=>n.getDailyMetadata(e)))}function t2(t,e,...r){return $A(t.map(n=>n.getWeeklyMetadata(e)))}function ZG(){var t=Yt("style");t.id="svelte-pcimu8-style",t.textContent=".container.svelte-pcimu8{--color-background-heading:transparent;--color-background-day:transparent;--color-background-weeknum:transparent;--color-background-weekend:transparent;--color-dot:var(--text-muted);--color-arrow:var(--text-muted);--color-button:var(--text-muted);--color-text-title:var(--text-normal);--color-text-heading:var(--text-muted);--color-text-day:var(--text-normal);--color-text-today:var(--interactive-accent);--color-text-weeknum:var(--text-muted)}.container.svelte-pcimu8{padding:0 8px}.container.is-mobile.svelte-pcimu8{padding:0}th.svelte-pcimu8{text-align:center}.weekend.svelte-pcimu8{background-color:var(--color-background-weekend)}.calendar.svelte-pcimu8{border-collapse:collapse;width:100%}th.svelte-pcimu8{background-color:var(--color-background-heading);color:var(--color-text-heading);font-size:0.6em;letter-spacing:1px;padding:4px;text-transform:uppercase}",yt(document.head,t)}function r2(t,e,r){let n=t.slice();return n[18]=e[r],n}function n2(t,e,r){let n=t.slice();return n[21]=e[r],n}function i2(t,e,r){let n=t.slice();return n[24]=e[r],n}function a2(t,e,r){let n=t.slice();return n[27]=e[r],n}function s2(t){let e;return{c(){e=Yt("col")},m(r,n){zr(r,e,n)},d(r){r&&Mr(e)}}}function o2(t){let e;return{c(){e=Yt("col"),lt(e,"class","svelte-pcimu8"),Ar(e,"weekend",KA(t[27]))},m(r,n){zr(r,e,n)},p(r,n){n&16384&&Ar(e,"weekend",KA(r[27]))},d(r){r&&Mr(e)}}}function l2(t){let e;return{c(){e=Yt("th"),e.textContent="W",lt(e,"class","svelte-pcimu8")},m(r,n){zr(r,e,n)},d(r){r&&Mr(e)}}}function u2(t){let e,r=t[24]+"",n;return{c(){e=Yt("th"),n=bo(r),lt(e,"class","svelte-pcimu8")},m(i,a){zr(i,e,a),yt(e,n)},p(i,a){a&32768&&r!==(r=i[24]+"")&&Sc(n,r)},d(i){i&&Mr(e)}}}function c2(t){let e,r,n=[t[18],{metadata:t2(t[8],t[18].days[0],t[10])},{onClick:t[7]},{onContextMenu:t[5]},{onHover:t[3]},{selectedId:t[9]}],i={};for(let a=0;a<n.length;a+=1)i=xc(i,n[a]);return e=new ZA({props:i}),{c(){Fa(e.$$.fragment)},m(a,s){oa(e,a,s),r=!0},p(a,s){let l=s&18344?Vh(n,[s&16384&&fy(a[18]),s&17664&&{metadata:t2(a[8],a[18].days[0],a[10])},s&128&&{onClick:a[7]},s&32&&{onContextMenu:a[5]},s&8&&{onHover:a[3]},s&512&&{selectedId:a[9]}]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){hr(e.$$.fragment,a),r=!1},d(a){la(e,a)}}}function f2(t,e){let r,n,i;return n=new zA({props:{date:e[21],today:e[10],displayedMonth:e[0],onClick:e[6],onContextMenu:e[4],onHover:e[2],metadata:e2(e[8],e[21],e[10]),selectedId:e[9]}}),{key:t,first:null,c(){r=Uh(),Fa(n.$$.fragment),this.first=r},m(a,s){zr(a,r,s),oa(n,a,s),i=!0},p(a,s){e=a;let l={};s&16384&&(l.date=e[21]),s&1024&&(l.today=e[10]),s&1&&(l.displayedMonth=e[0]),s&64&&(l.onClick=e[6]),s&16&&(l.onContextMenu=e[4]),s&4&&(l.onHover=e[2]),s&17664&&(l.metadata=e2(e[8],e[21],e[10])),s&512&&(l.selectedId=e[9]),n.$set(l)},i(a){i||(Jt(n.$$.fragment,a),i=!0)},o(a){hr(n.$$.fragment,a),i=!1},d(a){a&&Mr(r),la(n,a)}}}function d2(t,e){let r,n,i=[],a=new Map,s,l,u=e[1]&&c2(e),f=e[18].days,d=h=>h[21].format();for(let h=0;h<f.length;h+=1){let g=n2(e,f,h),m=d(g);a.set(m,i[h]=f2(m,g))}return{key:t,first:null,c(){r=Yt("tr"),u&&u.c(),n=Hn();for(let h=0;h<i.length;h+=1)i[h].c();s=Hn(),this.first=r},m(h,g){zr(h,r,g),u&&u.m(r,null),yt(r,n);for(let m=0;m<i.length;m+=1)i[m].m(r,null);yt(r,s),l=!0},p(h,g){e=h,e[1]?u?(u.p(e,g),g&2&&Jt(u,1)):(u=c2(e),u.c(),Jt(u,1),u.m(r,n)):u&&(So(),hr(u,1,1,()=>{u=null}),To()),g&18261&&(f=e[18].days,So(),i=VA(i,g,d,1,e,f,a,r,GA,f2,s,n2),To())},i(h){if(!l){Jt(u);for(let g=0;g<f.length;g+=1)Jt(i[g]);l=!0}},o(h){hr(u);for(let g=0;g<i.length;g+=1)hr(i[g]);l=!1},d(h){h&&Mr(r),u&&u.d();for(let g=0;g<i.length;g+=1)i[g].d()}}}function $G(t){let e,r,n,i,a,s,l,u,f,d,h,g,m=[],y=new Map,_;r=new QA({props:{today:t[10],displayedMonth:t[0],incrementDisplayedMonth:t[11],decrementDisplayedMonth:t[12],resetDisplayedMonth:t[13]}});let w=t[1]&&s2(),E=t[14][1].days,T=[];for(let F=0;F<E.length;F+=1)T[F]=o2(a2(t,E,F));let x=t[1]&&l2(),O=t[15],I=[];for(let F=0;F<O.length;F+=1)I[F]=u2(i2(t,O,F));let B=t[14],z=F=>F[18].weekNum;for(let F=0;F<B.length;F+=1){let q=r2(t,B,F),te=z(q);y.set(te,m[F]=d2(te,q))}return{c(){e=Yt("div"),Fa(r.$$.fragment),n=Hn(),i=Yt("table"),a=Yt("colgroup"),w&&w.c(),s=Hn();for(let F=0;F<T.length;F+=1)T[F].c();l=Hn(),u=Yt("thead"),f=Yt("tr"),x&&x.c(),d=Hn();for(let F=0;F<I.length;F+=1)I[F].c();h=Hn(),g=Yt("tbody");for(let F=0;F<m.length;F+=1)m[F].c();lt(i,"class","calendar svelte-pcimu8"),lt(e,"id","calendar-container"),lt(e,"class","container svelte-pcimu8"),Ar(e,"is-mobile",t[16])},m(F,q){zr(F,e,q),oa(r,e,null),yt(e,n),yt(e,i),yt(i,a),w&&w.m(a,null),yt(a,s);for(let te=0;te<T.length;te+=1)T[te].m(a,null);yt(i,l),yt(i,u),yt(u,f),x&&x.m(f,null),yt(f,d);for(let te=0;te<I.length;te+=1)I[te].m(f,null);yt(i,h),yt(i,g);for(let te=0;te<m.length;te+=1)m[te].m(g,null);_=!0},p(F,[q]){let te={};if(q&1024&&(te.today=F[10]),q&1&&(te.displayedMonth=F[0]),r.$set(te),F[1]?w||(w=s2(),w.c(),w.m(a,s)):w&&(w.d(1),w=null),q&16384){E=F[14][1].days;let ie;for(ie=0;ie<E.length;ie+=1){let ye=a2(F,E,ie);T[ie]?T[ie].p(ye,q):(T[ie]=o2(ye),T[ie].c(),T[ie].m(a,null))}for(;ie<T.length;ie+=1)T[ie].d(1);T.length=E.length}if(F[1]?x||(x=l2(),x.c(),x.m(f,d)):x&&(x.d(1),x=null),q&32768){O=F[15];let ie;for(ie=0;ie<O.length;ie+=1){let ye=i2(F,O,ie);I[ie]?I[ie].p(ye,q):(I[ie]=u2(ye),I[ie].c(),I[ie].m(f,null))}for(;ie<I.length;ie+=1)I[ie].d(1);I.length=O.length}q&18431&&(B=F[14],So(),m=VA(m,q,z,1,F,B,y,g,GA,d2,null,r2),To())},i(F){if(!_){Jt(r.$$.fragment,F);for(let q=0;q<B.length;q+=1)Jt(m[q]);_=!0}},o(F){hr(r.$$.fragment,F);for(let q=0;q<m.length;q+=1)hr(m[q]);_=!1},d(F){F&&Mr(e),la(r),w&&w.d(),Mh(T,F),x&&x.d(),Mh(I,F);for(let q=0;q<m.length;q+=1)m[q].d()}}}function e9(t,e,r){let{localeData:n}=e,{showWeekNums:i=!1}=e,{onHoverDay:a}=e,{onHoverWeek:s}=e,{onContextMenuDay:l}=e,{onContextMenuWeek:u}=e,{onClickDay:f}=e,{onClickWeek:d}=e,{sources:h=[]}=e,{selectedId:g}=e,{today:m=window.moment()}=e,{displayedMonth:y=m}=e,_,w,E=window.app.isMobile;function T(){r(0,y=y.clone().add(1,"month"))}function x(){r(0,y=y.clone().subtract(1,"month"))}function O(){r(0,y=m.clone())}return t.$$set=I=>{"localeData"in I&&r(17,n=I.localeData),"showWeekNums"in I&&r(1,i=I.showWeekNums),"onHoverDay"in I&&r(2,a=I.onHoverDay),"onHoverWeek"in I&&r(3,s=I.onHoverWeek),"onContextMenuDay"in I&&r(4,l=I.onContextMenuDay),"onContextMenuWeek"in I&&r(5,u=I.onContextMenuWeek),"onClickDay"in I&&r(6,f=I.onClickDay),"onClickWeek"in I&&r(7,d=I.onClickWeek),"sources"in I&&r(8,h=I.sources),"selectedId"in I&&r(9,g=I.selectedId),"today"in I&&r(10,m=I.today),"displayedMonth"in I&&r(0,y=I.displayedMonth)},t.$$.update=()=>{t.$$.dirty&131073&&r(14,_=MG(y,n)),t.$$.dirty&132096&&r(15,w=LG(m,n))},[y,i,a,s,l,u,f,d,h,g,m,T,x,O,_,w,E,n]}var Kh=class extends xs{constructor(e){super();document.getElementById("svelte-pcimu8-style")||ZG(),Ao(this,e,e9,$G,Ph,{localeData:17,showWeekNums:1,onHoverDay:2,onHoverWeek:3,onContextMenuDay:4,onContextMenuWeek:5,onClickDay:6,onClickWeek:7,sources:8,selectedId:9,today:10,displayedMonth:0,incrementDisplayedMonth:11,decrementDisplayedMonth:12,resetDisplayedMonth:13})}get incrementDisplayedMonth(){return this.$$.ctx[11]}get decrementDisplayedMonth(){return this.$$.ctx[12]}get resetDisplayedMonth(){return this.$$.ctx[13]}};var Yh=_t(Da());var h2=_t(uh());function t9(t){let e,r,n,i=`${t[1]}px`,a=`${t[2]}px`,s,l=[i9,n9],u=[];function f(d,h){return d[3]?0:1}return r=f(t,-1),n=u[r]=l[r](t),{c(){e=ce("div"),n.c(),ae(e,"class","calendarContainer"),Xe(e,"width",i,!1),Xe(e,"height",a,!1)},m(d,h){Te(d,e,h),u[r].m(e,null),s=!0},p(d,h){let g=r;r=f(d,h),r===g?u[r].p(d,h):(yh(),Oi(u[g],1,1,()=>{u[g]=null}),vh(),n=u[r],n?n.p(d,h):(n=u[r]=l[r](d),n.c()),di(n,1),n.m(e,null)),h&2&&i!==(i=`${d[1]}px`)&&Xe(e,"width",i,!1),h&4&&a!==(a=`${d[2]}px`)&&Xe(e,"height",a,!1)},i(d){s||(di(n),s=!0)},o(d){Oi(n),s=!1},d(d){d&&Se(e),u[r].d()}}}function r9(t){let e,r,n,i,a=[s9,a9],s=[];function l(u,f){return u[3]?0:1}return r=l(t,-1),n=s[r]=a[r](t),{c(){e=ce("div"),n.c(),ae(e,"class","calendarContainer")},m(u,f){Te(u,e,f),s[r].m(e,null),i=!0},p(u,f){let d=r;r=l(u,f),r===d?s[r].p(u,f):(yh(),Oi(s[d],1,1,()=>{s[d]=null}),vh(),n=s[r],n?n.p(u,f):(n=s[r]=a[r](u),n.c()),di(n,1),n.m(e,null))},i(u){i||(di(n),i=!0)},o(u){Oi(n),i=!1},d(u){u&&Se(e),s[r].d()}}}function n9(t){let e,r,n,i,a,s;function l(h){t[16](h)}function u(h){t[17](h)}function f(h){t[18](h)}let d={showWeekNums:!1,onClickDay:t[7]};return t[4]!==void 0&&(d.sources=t[4]),t[0]!==void 0&&(d.displayedMonth=t[0]),t[5]!==void 0&&(d.today=t[5]),r=new Kh({props:d}),Nn.push(()=>Oa(r,"sources",l)),Nn.push(()=>Oa(r,"displayedMonth",u)),Nn.push(()=>Oa(r,"today",f)),{c(){e=ce("div"),mc(r.$$.fragment),Xe(e,"--theme-color",t[6].settings.dailyNoteDotColor)},m(h,g){Te(h,e,g),Ol(r,e,null),s=!0},p(h,g){let m={};!n&&g&16&&(n=!0,m.sources=h[4],Ba(()=>n=!1)),!i&&g&1&&(i=!0,m.displayedMonth=h[0],Ba(()=>i=!1)),!a&&g&32&&(a=!0,m.today=h[5],Ba(()=>a=!1)),r.$set(m),(!s||g&64)&&Xe(e,"--theme-color",h[6].settings.dailyNoteDotColor)},i(h){s||(di(r.$$.fragment,h),s=!0)},o(h){Oi(r.$$.fragment,h),s=!1},d(h){h&&Se(e),po(r)}}}function i9(t){let e;return{c(){e=ce("p"),e.textContent="Loading..."},m(r,n){Te(r,e,n)},p:At,i:At,o:At,d(r){r&&Se(e)}}}function a9(t){let e,r,n,i,a,s;function l(h){t[13](h)}function u(h){t[14](h)}function f(h){t[15](h)}let d={showWeekNums:t[6].settings.useWeeklyNotes,onClickDay:t[7],onClickWeek:t[8]};return t[4]!==void 0&&(d.sources=t[4]),t[0]!==void 0&&(d.displayedMonth=t[0]),t[5]!==void 0&&(d.today=t[5]),r=new Kh({props:d}),Nn.push(()=>Oa(r,"sources",l)),Nn.push(()=>Oa(r,"displayedMonth",u)),Nn.push(()=>Oa(r,"today",f)),{c(){e=ce("div"),mc(r.$$.fragment),Xe(e,"--daily-dot-color",t[6].settings.dailyNoteDotColor)},m(h,g){Te(h,e,g),Ol(r,e,null),s=!0},p(h,g){let m={};g&64&&(m.showWeekNums=h[6].settings.useWeeklyNotes),!n&&g&16&&(n=!0,m.sources=h[4],Ba(()=>n=!1)),!i&&g&1&&(i=!0,m.displayedMonth=h[0],Ba(()=>i=!1)),!a&&g&32&&(a=!0,m.today=h[5],Ba(()=>a=!1)),r.$set(m),(!s||g&64)&&Xe(e,"--daily-dot-color",h[6].settings.dailyNoteDotColor)},i(h){s||(di(r.$$.fragment,h),s=!0)},o(h){Oi(r.$$.fragment,h),s=!1},d(h){h&&Se(e),po(r)}}}function s9(t){let e;return{c(){e=ce("p"),e.textContent="Loading..."},m(r,n){Te(r,e,n)},p:At,i:At,o:At,d(r){r&&Se(e)}}}function o9(t){let e,r,n,i,a=[r9,t9],s=[];function l(u,f){return u[1]==0||u[2]==0?0:1}return e=l(t,-1),r=s[e]=a[e](t),{c(){r.c(),n=ia()},m(u,f){s[e].m(u,f),Te(u,n,f),i=!0},p(u,[f]){let d=e;e=l(u,f),e===d?s[e].p(u,f):(yh(),Oi(s[d],1,1,()=>{s[d]=null}),vh(),r=s[e],r?r.p(u,f):(r=s[e]=a[e](u),r.c()),di(r,1),r.m(n.parentNode,n))},i(u){i||(di(r),i=!0)},o(u){Oi(r),i=!1},d(u){s[e].d(u),u&&Se(n)}}}function l9(t,e,r){let{displayedMonth:n=window.moment()}=e,{width:i=0}=e,{height:a=0}=e,{include:s}=e,{exclude:l}=e,u=fh(),f,d,h,g=!0,m,y=window.moment(),_=st.getInstance();function w(te){return vr(this,void 0,void 0,function*(){r(6,_);let ie=te.clone().startOf("month").subtract(6,"days"),ye=te.clone().endOf("month").add(12,"days"),be=yield dr({startDate:ie,endDate:ye,include:s,exclude:l});if(Yh.default.isEqual(be,h)&&Yh.default.isEqual(u,fh()))return;u=fh();let Ve=Yh.default.groupBy(be,me=>{var re;return window.moment((re=me.start.date)!==null&&re!==void 0?re:me.start.dateTime).startOf("day").format()});h=be;let Ne={getWeeklyMetadata:me=>vr(this,void 0,void 0,function*(){let re=[];return _.settings.activateDailyNoteAddon&&_.settings.useWeeklyNotes&&qm(me)&&(re=[{isFilled:!0,className:"googleCalendarDailyDot",color:"default"}]),{dataAttributes:{amount:re.length+""},dots:re}}),getDailyMetadata:me=>vr(this,void 0,void 0,function*(){let re=[];_.settings.activateDailyNoteAddon&&cc(me)&&(re=[{isFilled:!0,className:"googleCalendarDailyDot",color:"default"}]);let Fe=Ve[me.startOf("day").format()];return Fe?(re=[...re,...Array(Fe.length).fill({isFilled:!0,className:"googleCalendarDot",color:"default"})],{dataAttributes:{amount:Fe.length+""},dots:re}):{dataAttributes:{amount:re.length+""},dots:re}})};r(3,g=!1),r(4,m=null),r(4,m=[Ne])})}let E=(te,ie)=>te.filter(ye=>ye.start.date?window.moment(ye.start.date).isSame(ie,"day"):window.moment(ye.start.dateTime).isSame(ie,"day")),T=(te,ie)=>{new Li(E(h,te),"details",te,!1,()=>{Di(),r(0,n)}).open()},x=(te,ie)=>vr(void 0,void 0,void 0,function*(){let ye=qm(te);ye||(ye=yield(0,h2.createWeeklyNote)(te)),yield app.workspace.getLeaf(!1).openFile(ye,{active:!0})});fo(()=>{clearInterval(f),clearInterval(d)});function O(te){m=te,r(4,m)}function I(te){n=te,r(0,n)}function B(te){y=te,r(5,y),r(11,f),r(0,n),r(12,d)}function z(te){m=te,r(4,m)}function F(te){n=te,r(0,n)}function q(te){y=te,r(5,y),r(11,f),r(0,n),r(12,d)}return t.$$set=te=>{"displayedMonth"in te&&r(0,n=te.displayedMonth),"width"in te&&r(1,i=te.width),"height"in te&&r(2,a=te.height),"include"in te&&r(9,s=te.include),"exclude"in te&&r(10,l=te.exclude)},t.$$.update=()=>{if(t.$$.dirty&6145){e:f&&clearInterval(f),r(11,f=setInterval(()=>w(n),1e3)),d&&clearInterval(d),r(12,d=setInterval(()=>r(5,y=window.moment()),6e4)),w(n)}},[n,i,a,g,m,y,_,T,x,s,l,f,d,O,I,B,z,F,q]}var p2=class extends wn{constructor(e){super();Dn(this,e,l9,o9,Rn,{displayedMonth:0,width:1,height:2,include:9,exclude:10})}},Wh=p2;function u9(t){ci(t,"svelte-1f1t9un",'.scheduleContainer.svelte-1f1t9un{padding:10px}.scheduleContent.svelte-1f1t9un{display:flex;flex-direction:column;align-items:flex-start;white-space:nowrap}.dayContainer.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;border-bottom:1px solid white;margin:2px 0px;padding:2px 0px;flex-wrap:wrap}.dateDisplay.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-end;width:105px;min-width:105px}.dayNumber.svelte-1f1t9un{border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;display:inline-block;font-weight:bold;line-height:40px;text-align:center;width:40px;min-width:40px;cursor:pointer}.today.svelte-1f1t9un{color:white;background:#4285f4;text-decoration:none}.dayText.svelte-1f1t9un{font-size:15px}.dayEvents.svelte-1f1t9un{display:flex;flex-direction:column;flex:1}.dayEvent.svelte-1f1t9un{display:flex;flex:1;flex-direction:row;align-items:center;padding:5px;border-radius:10px;cursor:pointer;flex-wrap:wrap}.dayEvent.svelte-1f1t9un:hover{background-color:rgba(128, 128, 128, 0.129)}.circleTime.svelte-1f1t9un{display:flex;flex-direction:row;width:220px;min-width:220px}.recurringCircleContainer.svelte-1f1t9un,.circleContainer.svelte-1f1t9un{position:relative;display:flex;width:30px;min-width:30px;height:30px;align-items:center;justify-content:center}.recurringCircleContainer.svelte-1f1t9un::after{content:"\u21BA";position:absolute;width:30px;height:30px;text-align:center;line-height:30px;font-size:30px;color:rgb(164, 164, 164);white-space:nowrap}.circle.svelte-1f1t9un{width:10px;min-width:10px;height:10px;border-radius:50%}.timeContainer.svelte-1f1t9un{width:150px;min-width:150px}.eventTitleContainer.svelte-1f1t9un{white-space:nowrap}')}function g2(t,e,r){let n=t.slice();return n[15]=e[r][0],n[1]=e[r][1],n}function m2(t,e,r){let n=t.slice();return n[18]=e[r],n}function c9(t){let e,r=[...t[2]],n=[];for(let i=0;i<r.length;i+=1)n[i]=v2(g2(t,r,i));return{c(){e=ce("div");for(let i=0;i<n.length;i+=1)n[i].c();ae(e,"class","scheduleContent svelte-1f1t9un")},m(i,a){Te(i,e,a);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(i,a){if(a&124){r=[...i[2]];let s;for(s=0;s<r.length;s+=1){let l=g2(i,r,s);n[s]?n[s].p(l,a):(n[s]=v2(l),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){i&&Se(e),_n(n,i)}}}function f9(t){let e;return{c(){e=ce("span"),e.textContent="LOADING"},m(r,n){Te(r,e,n)},p:At,d(r){r&&Se(e)}}}function y2(t){let e,r,n,i,a,s,l,u,f=t[3](t[18])+"",d,h,g,m,y=t[18].summary+"",_,w,E,T;function x(...O){return t[13](t[18],...O)}return{c(){e=ce("div"),r=ce("div"),n=ce("div"),i=ce("div"),s=Le(),l=ce("div"),u=ce("span"),d=Sr(f),h=Le(),g=ce("div"),m=ce("span"),_=Sr(y),w=Le(),ae(i,"class","circle svelte-1f1t9un"),Xe(i,"background",Ku(t[18]),!1),ae(n,"class",a=""+(Dl(t[18].recurringEventId?"recurringCircleContainer":"circleContainer")+" svelte-1f1t9un")),ae(l,"class","timeContainer svelte-1f1t9un"),ae(r,"class","circleTime svelte-1f1t9un"),ae(g,"class","eventTitleContainer svelte-1f1t9un"),ae(e,"class","dayEvent svelte-1f1t9un")},m(O,I){Te(O,e,I),oe(e,r),oe(r,n),oe(n,i),oe(r,s),oe(r,l),oe(l,u),oe(u,d),oe(e,h),oe(e,g),oe(g,m),oe(m,_),oe(e,w),E||(T=at(e,"click",x),E=!0)},p(O,I){t=O},d(O){O&&Se(e),E=!1,T()}}}function v2(t){let e,r,n,i,a=t[15].slice(0,2)+"",s,l,u,f,d=t[15].slice(2)+"",h,g,m,y,_,w;function E(){return t[12](t[1])}let T=t[1],x=[];for(let O=0;O<T.length;O+=1)x[O]=y2(m2(t,T,O));return{c(){e=ce("div"),r=ce("div"),n=ce("div"),i=ce("span"),s=Sr(a),u=Le(),f=ce("span"),h=Sr(d),g=Le(),m=ce("div");for(let O=0;O<x.length;O+=1)x[O].c();y=Le(),ae(n,"class",l=""+(Dl(t[6](t[1][0])?"dayNumber today":"dayNumber")+" svelte-1f1t9un")),ae(f,"class","dayText svelte-1f1t9un"),ae(r,"class","dateDisplay svelte-1f1t9un"),ae(m,"class","dayEvents svelte-1f1t9un"),ae(e,"class","dayContainer svelte-1f1t9un")},m(O,I){Te(O,e,I),oe(e,r),oe(r,n),oe(n,i),oe(i,s),oe(r,u),oe(r,f),oe(f,h),oe(e,g),oe(e,m);for(let B=0;B<x.length;B+=1)x[B].m(m,null);oe(e,y),_||(w=at(n,"click",E),_=!0)},p(O,I){if(t=O,I&28){T=t[1];let B;for(B=0;B<T.length;B+=1){let z=m2(t,T,B);x[B]?x[B].p(z,I):(x[B]=y2(z),x[B].c(),x[B].m(m,null))}for(;B<x.length;B+=1)x[B].d(1);x.length=T.length}},d(O){O&&Se(e),_n(x,O),_=!1,w()}}}function d9(t){let e;function r(a,s){return a[0]?f9:c9}let n=r(t,-1),i=n(t);return{c(){e=ce("div"),i.c(),ae(e,"class","scheduleContainer svelte-1f1t9un")},m(a,s){Te(a,e,s),i.m(e,null)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e,null)))},i:At,o:At,d(a){a&&Se(e),i.d()}}}function h9(t,e,r){let{timeSpan:n=7}=e,{date:i=window.moment()}=e,{include:a}=e,{exclude:s}=e,l,u=new Map,f=!1,d=[],h=()=>vr(void 0,void 0,void 0,function*(){let T=yield dr({startDate:i,endDate:i.clone().add(n,"day"),include:a,exclude:s});if(JSON.stringify(T)==JSON.stringify(d)){r(0,f=!1);return}u.clear(),r(1,d=T),d.forEach(x=>{let O=x.start.date?window.moment(x.start.date).format("DD MMM, ddd"):window.moment(x.start.dateTime).format("DD MMM, ddd");u.has(O)?u.get(O).push(x):u.set(O,[x])}),r(0,f=!1)}),g=T=>{if(T.start.date)return"All day";{let x=window.moment(T.start.dateTime).format("hh:mma"),O=window.moment(T.end.dateTime).format("hh:mma");return`${x}-${O}`}},m=(T,x)=>{x.shiftKey?window.open(T.htmlLink):new gi(T,()=>{Di(),r(7,i),r(11,l)}).open()},y=T=>vr(void 0,void 0,void 0,function*(){let x=window.moment(T.start.date||T.start.dateTime),O=yield dr({startDate:x});new Li(O,"details",x,!1,()=>{Di(),r(7,i),r(11,l)}).open()}),_=T=>{let x=window.moment(T.start.date||T.start.dateTime);return window.moment().local().isSame(x,"day")};fo(()=>{clearInterval(l)});let w=T=>y(T[0]),E=(T,x)=>m(T,x);return t.$$set=T=>{"timeSpan"in T&&r(8,n=T.timeSpan),"date"in T&&r(7,i=T.date),"include"in T&&r(9,a=T.include),"exclude"in T&&r(10,s=T.exclude)},t.$$.update=()=>{if(t.$$.dirty&2176){e:r(7,i),r(11,l),l&&clearInterval(l),r(0,f=!0),r(11,l=setInterval(h,5e3)),h()}},[f,d,u,g,m,y,_,i,n,a,s,l,w,E]}var _2=class extends wn{constructor(e){super();Dn(this,e,h9,d9,Rn,{timeSpan:8,date:7,include:9,exclude:10},u9)}},zh=_2;var w2=_t(require("obsidian")),Yl=class extends w2.MarkdownRenderChild{constructor(e,r,n){super(r);this.a=e,this.b=n}load(){this.comp=new this.a({target:this.containerEl,props:this.b})}unload(){this.comp.$destroy()}};function E2(t,e,r){return M(this,null,function*(){let n=(0,Qh.parseYaml)(t),{height:i,width:a,date:s,navigation:l,timespan:u,exclude:f,include:d,theme:h,hourRange:g}=n,{type:m}=n;m||(m=ws.day);let y=["YYYY-MM-DD","YYYY.MM.DD","YYYY/MM/DD","MM-DD-YYYY","MM.DD.YYYY","MM/DD/YYYY","DD-MM-YYYY","DD.MM.YYYY","DD/MM/YYYY"];if(s==null||s=="today"||s=="tomorrow"||s=="yesterday"||window.moment(s,y,!0).isValid()){let _;s==null?_=void 0:s=="today"?_=window.moment():s=="tomorrow"?_=window.moment().add(1,"day"):s=="yesterday"?_=window.moment().subtract(1,"day"):_=window.moment(s),e.style.padding="10px",m==ws.web?Qh.Platform.isDesktopApp&&r.addChild(new Yl(Lh,e,{height:i!=null?i:500,width:a!=null?a:500,date:_,theme:h!=null?h:"auto"})):m==ws.day?r.addChild(new Yl(Oh,e,{height:i,width:a,date:_,navigation:l,include:d,exclude:f,hourRange:g})):m==ws.month?r.addChild(new Yl(Wh,e,{height:i,width:a,displayedMonth:_,include:d,exclude:f})):m==ws.schedule&&r.addChild(new Yl(zh,e,{timeSpan:u,date:_,include:d,exclude:f}))}})}var C2=_t(require("obsidian"));var Ac="google-calendar-view-day",gy=class extends C2.ItemView{constructor(e){super(e)}getViewType(){return Ac}getDisplayText(){return"Timeline View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.timeline=new Oh({target:this.contentEl,props:{navigation:!0}})})}onClose(){return M(this,null,function*(){this.timeline.$destroy()})}};var b2=_t(require("obsidian"));var kc="google-calendar-view-month",my=class extends b2.ItemView{constructor(e){super(e)}getViewType(){return kc}getDisplayText(){return"Calendar Month View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.calendar=new Wh({target:this.contentEl,props:{}})})}onClose(){return M(this,null,function*(){this.calendar.$destroy()})}};var x2=_t(require("obsidian"));var Ic="google-calendar-view-web",yy=class extends x2.ItemView{constructor(e){super(e)}getViewType(){return Ic}getDisplayText(){return"Calendar Web View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.calendar=new Lh({target:this.contentEl})})}onClose(){return M(this,null,function*(){this.calendar.$destroy()})}};var S2=_t(require("obsidian"));var Rc="google-calendar-view-schedule",vy=class extends S2.ItemView{constructor(e){super(e)}getViewType(){return Rc}getDisplayText(){return"Schedule View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.calendar=new zh({target:this.contentEl,props:{}})})}onClose(){return M(this,null,function*(){this.calendar.$destroy()})}};var T2=_t(require("obsidian")),_y=class extends T2.FuzzySuggestModal{constructor(e,r,n,i,a){super(st.getInstance().app);this.eventList=e,this.setPlaceholder("Select an event to insert"),this.editor=r,this.start=n,this.end=i,this.word=a}getItems(){return this.eventList}getItemText(e){return`${e.summary}	`}onChooseItem(e){return M(this,null,function*(){let r=`[${e.summary}](${e.htmlLink}&cal=${e.parent.id})`;this.editor.replaceRange(r,this.start,this.end,this.word)})}};function A2(t,e){e.settings.atAnnotationEnabled!=!1&&(Nc("@today",t,e)||Nc("@tomorrow",t,e)||Nc("@yesterday",t,e)||Nc("@REGEX",t,e)||Nc("@YYYY-MM-DD",t,e))}function Nc(t,e,r){var l;let n=e.getCursor(),i=e.getCursor(),a="",s=window.moment();if(t==="@REGEX"){let u=e.getLine(n.line);if(u.length>50)return!1;let f=(l=u.match(/.*@([+,-])(\d+) /))!=null?l:[];if(f.length!=3||e.getCursor().ch!=f.index+f[0].length)return!1;if(i=Gi($n({},n),{ch:n.ch-f[1].length-f[2].length-1}),i.ch<0)return;a=e.getRange(i,n),f[1]=="+"?s=window.moment().add(f[2],"day"):s=window.moment().subtract(f[2],"day")}else if(t==="@YYYY-MM-DD"){if(i=Gi($n({},n),{ch:n.ch-t.length}),a=e.getRange(i,n),!a.startsWith("@")||a.length!="@YYYY-MM-DD".length)return!1;let u=["YYYY-MM-DD","YYYY/MM/DD","YYYY.MM.DD","YYYY MM DD","MM-DD-YYYY","MM/DD/YYYY","MM.DD.YYYY","MM DD YYYY","DD-MM-YYYY","DD/MM/YYYY","DD.MM.YYYY","DD MM YYYY"],f=["DD-MM-YYYY","DD/MM/YYYY","DD.MM.YYYY","DD MM YYYY","YYYY-MM-DD","YYYY/MM/DD","YYYY.MM.DD","YYYY MM DD","MM-DD-YYYY","MM/DD/YYYY","MM.DD.YYYY","MM DD YYYY"],d=window.moment(a.substring(1),r.settings.usDateFormat?u:f,!0);if(d.isValid())s=d;else return!1}else{if(i=Gi($n({},n),{ch:n.ch-t.length}),i.ch<0||e.getRange(i,n)!=t)return!1;switch(t){case"@today":s=window.moment();break;case"@tomorrow":s=window.moment().add(1,"day");break;case"@yesterday":s=window.moment().add(-1,"day");break;default:return!1}}return dr({startDate:s}).then(u=>{new _y(u,e,i,n,a).open()}),!0}var k2=_t(Da());function p9(t){return M(this,null,function*(){let e=/\[.*]\(https:\/\/www\.google\.com\/calendar\/event\?eid=(.*)&cal=(.*)\)/g,r,n=[];do r=e.exec(t),r&&n.push(r);while(r);return n.length?yield Promise.all(n.map(a=>M(this,null,function*(){if(a){let s=atob(a[1]).split(" ")[0];return yield Vl(s,a[2])}}))):[]})}function I2(t){return M(this,null,function*(){let e=t.getCursor(),r=t.getValue(),n=/{{gEvent(\d?).(.*)}} /g,i,a=[];do i=n.exec(r),i&&a.push(i);while(i);if(!a.length)return;let s=yield p9(r);!s.length||a.forEach(l=>M(this,null,function*(){let u=l[1]?parseInt(l[1]):0,f=t.getCursor();if(f.ch-=3,t.getRange(f,t.getCursor())!="}} ")return!1;let d=k2.default.get(s[u],l[2],"");d===Object(d)&&(d=JSON.stringify(d)),r=r.replace(l[0],d!=null?d:""),t.setValue(r),e.ch+=d.length-l[0].length,t.setCursor(e)}))})}var R2=_t(require("obsidian"));var Wl=[".anyoneCanAddSelf",".attachments",".attachments[0]",".attachments[0]fileId",".attachments[0]fileUrl",".attachments[0]iconLink",".attachments[0]mimeType",".attachments[0]title",".attendees",".attendeesOmitted",".attendees[0]",".attendees[0].additionalGuests",".attendees[0].comment",".attendees[0].displayName",".attendees[0].email",".attendees[0].id",".attendees[0].optional",".attendees[0].organizer",".attendees[0].resource",".attendees[0].responseStatus",".attendees[0].self",".colorId",".conferenceData",".conferenceData.conferenceId",".conferenceData.conferenceSolution",".conferenceData.conferenceSolution.iconUri",".conferenceData.conferenceSolution.key",".conferenceData.conferenceSolution.key.type",".conferenceData.conferenceSolution.name",".conferenceData.createRequest",".conferenceData.createRequest.conferenceSolutionKey",".conferenceData.createRequest.conferenceSolutionKey.type",".conferenceData.createRequest.requestId",".conferenceData.createRequest.status",".conferenceData.createRequest.status.statusCode",".conferenceData.entryPoints",".conferenceData.entryPoints[0]",".conferenceData.entryPoints[0].accessCode",".conferenceData.entryPoints[0].entryPointType",".conferenceData.entryPoints[0].label",".conferenceData.entryPoints[0].meetingCode",".conferenceData.entryPoints[0].passcode",".conferenceData.entryPoints[0].password",".conferenceData.entryPoints[0].pin",".conferenceData.entryPoints[0].uri",".conferenceData.notes",".conferenceData.signature",".created",".creator",".creator.displayName",".creator.email",".creator.id",".creator.self",".description",".end",".end.date",".end.dateTime",".end.timeZone",".endTimeUnspecified",".etag",".eventType",".extendedProperties",".extendedProperties.private",".extendedProperties.shared",".gadget",".gadget.display",".gadget.height",".gadget.iconLink",".gadget.link",".gadget.preferences",".gadget.title",".gadget.type",".gadget.width",".guestsCanInviteOthers",".guestsCanModify",".guestsCanSeeOtherGuests",".hangoutLink",".htmlLink",".iCalUID",".id",".kind",".location",".locked",".organizer",".organizer.displayName",".organizer.email",".organizer.id",".organizer.self",".originalStartTime",".originalStartTime.date",".originalStartTime.dateTime",".originalStartTime.timeZone",".privateCopy",".parent",".parent.kind",".parent.id",".parent.summary",".parent.description",".parent.location",".parent.timeZone",".parent.conferenceProperties",".parent.conferenceProperties.allowedConferenceSolutionTypes",".recurrence",".recurrence[0]",".recurringEventId",".reminders",".reminders.overrides",".reminders.overrides[0]",".reminders.overrides[0].method",".reminders.overrides[0].minutes",".reminders.useDefault",".sequence",".source",".source.title",".source.url",".start",".start.date",".start.dateTime",".start.timeZone",".status",".summary",".transparency",".updated",".visibility"];var wy=class extends R2.EditorSuggest{constructor(e){super(e)}onTrigger(e,r){let i=r.getLine(e.line).substring(0,e.ch).match(/{{gEvent(\d)?(\S+$)/);if(i){let a="{{gEvent".length;return i[1]&&a++,{end:e,start:{ch:i.index+a,line:e.line},query:i[2]}}}getSuggestions(e){return Wl.filter(r=>e.query===r.substring(0,e.query.length))}renderSuggestion(e,r){r.createEl("span",{text:e,cls:"suggestionText"})}selectSuggestion(e){if(!this.context)return;let{editor:r}=this.context;if(r.replaceRange(e,this.context.start,this.context.end),Wl.filter(i=>i.startsWith(`${e}.`)).length==0){let i=r.getCursor(),a=structuredClone(i);a.ch+=2,(r.getLine(a.line).length<a.ch||r.getRange(i,a)!="}}")&&r.replaceRange("}}",i),r.setCursor(a)}}};var K2=_t(require("obsidian"));var Dc=_t(require("obsidian")),Ey=class extends Dc.Modal{constructor(e,r){super(e);this.onSubmit=r}onOpen(){let{contentEl:e}=this;e.createEl("h1",{text:"Enter a name for the template"}),new Dc.Setting(e).setName("Name").addText(r=>r.onChange(n=>{this.result=n})),new Dc.Setting(e).addButton(r=>r.setButtonText("Save").setCta().onClick(()=>{this.close(),this.onSubmit(this.result)}))}onClose(){let{contentEl:e}=this;e.empty()}};function g9(t){ci(t,"svelte-6isfqn",".optionContainer.svelte-6isfqn{display:flex;flex-direction:column}.header.svelte-6isfqn{display:grid;grid-template-columns:[first] 30% auto [last] 30%}.center.svelte-6isfqn{text-align:center}.settingsContainer.svelte-6isfqn{display:flex;flex-direction:row;flex:1 1;gap:20px}.optionItem.svelte-6isfqn{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.input.svelte-6isfqn,.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{width:100%;display:flex;flex-direction:column}.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{padding-left:16px}button.svelte-6isfqn{align-self:center}")}function N2(t,e,r){let n=t.slice();return n[21]=e[r],n}function D2(t,e,r){let n=t.slice();return n[21]=e[r],n}function B2(t,e,r){let n=t.slice();return n[26]=e[r],n[27]=e,n[28]=r,n}function O2(t,e,r){let n=t.slice();return n[29]=e[r],n[30]=e,n[31]=r,n}function L2(t,e,r){let n=t.slice();return n[32]=e[r],n}function P2(t){let e,r=t[0].settings.insertTemplates,n=[];for(let i=0;i<r.length;i+=1)n[i]=M2(L2(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ia()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);Te(i,e,a)},p(i,a){if(a[0]&1){r=i[0].settings.insertTemplates;let s;for(s=0;s<r.length;s+=1){let l=L2(i,r,s);n[s]?n[s].p(l,a):(n[s]=M2(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){_n(n,i),i&&Se(e)}}}function M2(t){let e,r=t[32].name+"",n,i;return{c(){e=ce("option"),n=Sr(r),e.__value=i=t[32].name,e.value=e.__value},m(a,s){Te(a,e,s),oe(e,n)},p(a,s){s[0]&1&&r!==(r=a[32].name+"")&&fi(n,r),s[0]&1&&i!==(i=a[32].name)&&(e.__value=i,e.value=e.__value)},d(a){a&&Se(e)}}}function m9(t){let e;return{c(){e=ce("span"),e.textContent="Loading..."},m(r,n){Te(r,e,n)},p:At,d(r){r&&Se(e)}}}function y9(t){let e,r=t[4],n=[];for(let i=0;i<r.length;i+=1)n[i]=U2(O2(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ia()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);Te(i,e,a)},p(i,a){if(a[0]&144){r=i[4];let s;for(s=0;s<r.length;s+=1){let l=O2(i,r,s);n[s]?n[s].p(l,a):(n[s]=U2(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){_n(n,i),i&&Se(e)}}}function U2(t){let e,r,n=t[29][0].summary+"",i,a,s,l,u,f,d,h;function g(){t[17].call(l,t[30],t[31])}return{c(){e=ce("div"),r=ce("label"),i=Sr(n),s=Le(),l=ce("input"),f=Le(),ae(r,"for",a=t[29][0].id),ae(l,"type","checkbox"),ae(l,"id",u=t[29][0].id),ae(e,"class","optionItem svelte-6isfqn")},m(m,y){Te(m,e,y),oe(e,r),oe(r,i),oe(e,s),oe(e,l),l.checked=t[29][1],oe(e,f),d||(h=[at(l,"change",g),at(l,"change",t[7])],d=!0)},p(m,y){t=m,y[0]&16&&n!==(n=t[29][0].summary+"")&&fi(i,n),y[0]&16&&a!==(a=t[29][0].id)&&ae(r,"for",a),y[0]&16&&u!==(u=t[29][0].id)&&ae(l,"id",u),y[0]&16&&(l.checked=t[29][1])},d(m){m&&Se(e),d=!1,on(h)}}}function v9(t){let e;return{c(){e=ce("span"),e.textContent="Loading..."},m(r,n){Te(r,e,n)},p:At,d(r){r&&Se(e)}}}function _9(t){let e,r=t[3],n=[];for(let i=0;i<r.length;i+=1)n[i]=F2(B2(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ia()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);Te(i,e,a)},p(i,a){if(a[0]&8){r=i[3];let s;for(s=0;s<r.length;s+=1){let l=B2(i,r,s);n[s]?n[s].p(l,a):(n[s]=F2(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){_n(n,i),i&&Se(e)}}}function F2(t){let e,r,n=t[26][0].summary+"",i,a,s,l,u,f,d,h;function g(){t[18].call(l,t[27],t[28])}return{c(){e=ce("div"),r=ce("label"),i=Sr(n),s=Le(),l=ce("input"),f=Le(),ae(r,"for",a=t[26][0].id),ae(l,"type","checkbox"),ae(l,"id",u=t[26][0].id),ae(e,"class","optionItem svelte-6isfqn")},m(m,y){Te(m,e,y),oe(e,r),oe(r,i),oe(e,s),oe(e,l),l.checked=t[26][1],oe(e,f),d||(h=at(l,"change",g),d=!0)},p(m,y){t=m,y[0]&8&&n!==(n=t[26][0].summary+"")&&fi(i,n),y[0]&8&&a!==(a=t[26][0].id)&&ae(r,"for",a),y[0]&8&&u!==(u=t[26][0].id)&&ae(l,"id",u),y[0]&8&&(l.checked=t[26][1])},d(m){m&&Se(e),d=!1,h()}}}function q2(t){let e,r,n,i,a,s,l,u=Wl,f=[];for(let g=0;g<u.length;g+=1)f[g]=G2(D2(t,u,g));let d=t[5],h=[];for(let g=0;g<d.length;g+=1)h[g]=V2(N2(t,d,g));return{c(){e=ce("h4"),e.textContent="Table structure",r=Le(),n=ce("select");for(let g=0;g<f.length;g+=1)f[g].c();i=Le(),a=ce("div");for(let g=0;g<h.length;g+=1)h[g].c();ae(n,"name","tableOptions"),ae(n,"class","dropdown"),ae(a,"class","optionList svelte-6isfqn")},m(g,m){Te(g,e,m),Te(g,r,m),Te(g,n,m);for(let y=0;y<f.length;y+=1)f[y].m(n,null);Te(g,i,m),Te(g,a,m);for(let y=0;y<h.length;y+=1)h[y].m(a,null);s||(l=at(n,"change",t[8]),s=!0)},p(g,m){if(m&0){u=Wl;let y;for(y=0;y<u.length;y+=1){let _=D2(g,u,y);f[y]?f[y].p(_,m):(f[y]=G2(_),f[y].c(),f[y].m(n,null))}for(;y<f.length;y+=1)f[y].d(1);f.length=u.length}if(m[0]&544){d=g[5];let y;for(y=0;y<d.length;y+=1){let _=N2(g,d,y);h[y]?h[y].p(_,m):(h[y]=V2(_),h[y].c(),h[y].m(a,null))}for(;y<h.length;y+=1)h[y].d(1);h.length=d.length}},d(g){g&&Se(e),g&&Se(r),g&&Se(n),_n(f,g),g&&Se(i),g&&Se(a),_n(h,g),s=!1,l()}}}function G2(t){let e,r=t[21]+"",n,i;return{c(){e=ce("option"),n=Sr(r),e.__value=i=t[21],e.value=e.__value},m(a,s){Te(a,e,s),oe(e,n)},p:At,d(a){a&&Se(e)}}}function V2(t){let e,r,n=t[21]+"",i,a,s,l,u,f,d;function h(){return t[19](t[21])}return{c(){e=ce("div"),r=ce("span"),i=Sr(n),a=Le(),s=ce("input"),u=Le(),ae(s,"type","checkbox"),ae(s,"id",l=t[21]),s.checked=!0,ae(e,"class","optionItem svelte-6isfqn")},m(g,m){Te(g,e,m),oe(e,r),oe(r,i),oe(e,a),oe(e,s),oe(e,u),f||(d=at(s,"click",h),f=!0)},p(g,m){t=g,m[0]&32&&n!==(n=t[21]+"")&&fi(i,n),m[0]&32&&l!==(l=t[21])&&ae(s,"id",l)},d(g){g&&Se(e),f=!1,d()}}}function w9(t){let e,r,n,i,a,s,l,u,f,d,h,g,m,y,_,w,E,T,x,O,I,B,z,F,q,te,ie,ye,be,Ve,Ne,me,re,Fe,Ze,ut,Je,ct,le=t[0].settings.insertTemplates.length&&P2(t);function Nt(L,K){return L[4]?y9:m9}let Dt=Nt(t,[-1,-1]),et=Dt(t);function tt(L,K){return L[3]?_9:v9}let ft=tt(t,[-1,-1]),R=ft(t),D=t[2]=="table"&&q2(t);return{c(){e=ce("div"),r=ce("div"),n=ce("select"),i=ce("option"),i.textContent="None",le&&le.c(),a=Le(),s=ce("h1"),s.textContent="Insert Options",l=Le(),u=ce("button"),u.textContent="Save as template",f=Le(),d=ce("hr"),h=Le(),g=ce("div"),m=ce("div"),y=ce("label"),y.textContent="Insert type",_=Le(),w=ce("select"),E=ce("option"),E.textContent="Bullet",x=ce("option"),x.textContent="Table",O=Le(),I=ce("div"),B=ce("label"),B.textContent="Insert date",z=Le(),F=ce("input"),te=Le(),ie=ce("h4"),ie.textContent="Calendars",ye=Le(),be=ce("div"),et.c(),Ve=Le(),Ne=ce("h4"),Ne.textContent="Events",me=Le(),re=ce("div"),R.c(),Fe=Le(),D&&D.c(),Ze=Le(),ut=ce("button"),ut.textContent="Insert",i.__value="None",i.value=i.__value,ae(n,"class","dropdown left"),t[1]===void 0&&Bl(()=>t[15].call(n)),ae(s,"class","center svelte-6isfqn"),ae(u,"class","right svelte-6isfqn"),ae(r,"class","header svelte-6isfqn"),ae(y,"for","insertType"),E.selected=T=!0,E.__value="bullet",E.value=E.__value,x.__value="table",x.value=x.__value,ae(w,"class","dropdown"),t[2]===void 0&&Bl(()=>t[16].call(w)),ae(m,"class","input svelte-6isfqn"),ae(B,"for","date"),ae(F,"type","date"),ae(F,"name","date"),ae(F,"id","date"),F.value=q=window.moment().format("YYYY-MM-DD"),ae(I,"class","input svelte-6isfqn"),ae(g,"class","settingsContainer svelte-6isfqn"),ae(be,"class","calendarList svelte-6isfqn"),ae(re,"class","eventList svelte-6isfqn"),ae(ut,"class","svelte-6isfqn"),ae(e,"class","optionContainer svelte-6isfqn")},m(L,K){Te(L,e,K),oe(e,r),oe(r,n),oe(n,i),le&&le.m(n,null),dc(n,t[1]),oe(r,a),oe(r,s),oe(r,l),oe(r,u),oe(e,f),oe(e,d),oe(e,h),oe(e,g),oe(g,m),oe(m,y),oe(m,_),oe(m,w),oe(w,E),oe(w,x),dc(w,t[2]),oe(g,O),oe(g,I),oe(I,B),oe(I,z),oe(I,F),oe(e,te),oe(e,ie),oe(e,ye),oe(e,be),et.m(be,null),oe(e,Ve),oe(e,Ne),oe(e,me),oe(e,re),R.m(re,null),oe(e,Fe),D&&D.m(e,null),oe(e,Ze),oe(e,ut),Je||(ct=[at(n,"change",t[15]),at(n,"change",t[12]),at(u,"click",t[11]),at(w,"change",t[16]),at(F,"change",t[10]),at(ut,"click",t[6])],Je=!0)},p(L,K){L[0].settings.insertTemplates.length?le?le.p(L,K):(le=P2(L),le.c(),le.m(n,null)):le&&(le.d(1),le=null),K[0]&3&&dc(n,L[1]),K[0]&4&&dc(w,L[2]),Dt===(Dt=Nt(L,K))&&et?et.p(L,K):(et.d(1),et=Dt(L),et&&(et.c(),et.m(be,null))),ft===(ft=tt(L,K))&&R?R.p(L,K):(R.d(1),R=ft(L),R&&(R.c(),R.m(re,null))),L[2]=="table"?D?D.p(L,K):(D=q2(L),D.c(),D.m(e,Ze)):D&&(D.d(1),D=null)},i:At,o:At,d(L){L&&Se(e),le&&le.d(),et.d(),R.d(),D&&D.d(),Je=!1,on(ct)}}}function E9(t,e,r){let{onSubmit:n}=e,{insertEventsModal:i}=e,a=st.getInstance(),s,l,u,f,d=[".summary",".description"];co(()=>vr(void 0,void 0,void 0,function*(){let F=yield Or();r(4,f=F.map(te=>[te,!0]));let q=yield dr();r(3,u=q.map(te=>[te,!0]))}));let h=()=>{let F=u.filter(q=>q[1]).map(q=>q[0]);n(l,F,d,i)},g=F=>{u.forEach(q=>{q[0].parent.id==F.target.id&&(q[1]=F.target.checked)}),r(3,u)},m=F=>{let q=F.target.value;q=="on"&&(q=F.target.id),d.contains(q)?d.remove(q):d.push(q),r(5,d)},y=F=>{d.contains(F)&&d.remove(F),r(5,d)},_=F=>vr(void 0,void 0,void 0,function*(){let q=yield Or();r(4,f=q.map(ie=>[ie,!0]));let te=yield dr({startDate:window.moment(F.target.value).local()});r(3,u=te.map(ie=>[ie,!0])),r(3,u)}),w=()=>f.filter(F=>F[1]).map(F=>F[0].id),E=()=>{new Ey(app,F=>{let q={name:F,insertType:l,tableOptions:d,calendarList:w()};r(0,a.settings.insertTemplates=[...a.settings.insertTemplates,q],a),a.saveSettings(),wt("Added template")}).open()},T=F=>{let q=F.target.value;if(q=="None")return;let ie=a.settings.insertTemplates.find(ye=>ye.name==q);!ie||(r(2,l=ie.insertType),r(5,d=ie.tableOptions),f.forEach(ye=>ye[1]=ie.calendarList.contains(ye[0].id)),u.forEach(ye=>ye[1]=ie.calendarList.contains(ye[0].parent.id)),r(4,f),r(3,u))};function x(){s=jm(this),r(1,s),r(0,a)}function O(){l=jm(this),r(2,l)}function I(F,q){F[q][1]=this.checked,r(4,f)}function B(F,q){F[q][1]=this.checked,r(3,u)}let z=F=>y(F);return t.$$set=F=>{"onSubmit"in F&&r(13,n=F.onSubmit),"insertEventsModal"in F&&r(14,i=F.insertEventsModal)},[a,s,l,u,f,d,h,g,m,y,_,E,T,n,i,x,O,I,B,z]}var j2=class extends wn{constructor(e){super();Dn(this,e,E9,w9,Rn,{onSubmit:13,insertEventsModal:14},g9,[-1,-1])}},H2=j2;var Y2=_t(Da()),Cy=class extends K2.Modal{constructor(e){super(st.getInstance().app);this.editor=e}onOpen(){return M(this,null,function*(){let{contentEl:e}=this;new H2({target:e,props:{onSubmit:this.onSubmit,insertEventsModal:this}})})}onClose(){let{contentEl:e}=this;e.empty()}onSubmit(e,r,n,i){let a="",s="",l="";e=="bullet"?(r.forEach(u=>{l+=`
- ${`[${u.summary}](${u.htmlLink}&cal=${u.parent.id})`}`}),i.editor.replaceRange(l,i.editor.getCursor())):e=="table"&&(n.forEach(u=>{u=u.split(".").join(" ").toLocaleUpperCase(),a+=`| ${u} `,s+="| --- "}),a+=`|
`,s+=`|
`,r.forEach(u=>{n.forEach(f=>{let d=Y2.default.get(u,f.substring(1),"");f==".summary"&&(d=`[${d}](${u.htmlLink}&cal=${u.parent.id})`),f.startsWith(".start")&&!f.contains("timeZone")&&(d=(u.start.date?window.moment(u.start.date):window.moment(u.start.dateTime)).format("YYYY-MM-DD HH:mm")),f.startsWith(".end")&&!f.contains("timeZone")&&(d=(u.start.date?window.moment(u.end.date):window.moment(u.end.dateTime)).format("YYYY-MM-DD HH:mm")),l+=`| ${d} `}),l+=`|
`}),i.editor.replaceRange(a+s+l,i.editor.getCursor())),i.close()}};var by=class{constructor(){}make(){return{getCalendars:()=>Or(),getEvent:(e,r)=>Vl(e,r),getEvents:e=>dr(e)}}};var Ty=_t(require("obsidian"));var Bc=_t(Da());function W2(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var zl=W2();function C9(t){zl=t}var z2=/[&<>"']/,b9=new RegExp(z2.source,"g"),Q2=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,x9=new RegExp(Q2.source,"g"),S9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},X2=t=>S9[t];function rn(t,e){if(e){if(z2.test(t))return t.replace(b9,X2)}else if(Q2.test(t))return t.replace(x9,X2);return t}var T9=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function J2(t){return t.replace(T9,(e,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}var A9=/(^|[^\[])\^/g;function er(t,e){t=typeof t=="string"?t:t.source,e=e||"";let r={replace:(n,i)=>(i=i.source||i,i=i.replace(A9,"$1"),t=t.replace(n,i),r),getRegex:()=>new RegExp(t,e)};return r}var k9=/[^\w:]/g,I9=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Z2(t,e,r){if(t){let n;try{n=decodeURIComponent(J2(r)).replace(k9,"").toLowerCase()}catch(i){return null}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0||n.indexOf("data:")===0)return null}e&&!I9.test(r)&&(r=B9(e,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch(n){return null}return r}var Xh={},R9=/^[^:]+:\/*[^/]*$/,N9=/^([^:]+:)[\s\S]*$/,D9=/^([^:]+:\/*[^/]*)[\s\S]*$/;function B9(t,e){Xh[" "+t]||(R9.test(t)?Xh[" "+t]=t+"/":Xh[" "+t]=Zh(t,"/",!0)),t=Xh[" "+t];let r=t.indexOf(":")===-1;return e.substring(0,2)==="//"?r?e:t.replace(N9,"$1")+e:e.charAt(0)==="/"?r?e:t.replace(D9,"$1")+e:t+e}var Jh={exec:function(){}};function Pi(t){let e=1,r,n;for(;e<arguments.length;e++){r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}function $2(t,e){let r=t.replace(/\|/g,(a,s,l)=>{let u=!1,f=s;for(;--f>=0&&l[f]==="\\";)u=!u;return u?"|":" |"}),n=r.split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function Zh(t,e,r){let n=t.length;if(n===0)return"";let i=0;for(;i<n;){let a=t.charAt(n-i-1);if(a===e&&!r)i++;else if(a!==e&&r)i++;else break}return t.slice(0,n-i)}function O9(t,e){if(t.indexOf(e[1])===-1)return-1;let r=t.length,n=0,i=0;for(;i<r;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}function ek(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function tk(t,e){if(e<1)return"";let r="";for(;e>1;)e&1&&(r+=t),e>>=1,t+=t;return r+t}function rk(t,e,r,n){let i=e.href,a=e.title?rn(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){n.state.inLink=!0;let l={type:"link",raw:r,href:i,title:a,text:s,tokens:n.inlineTokens(s)};return n.state.inLink=!1,l}return{type:"image",raw:r,href:i,title:a,text:rn(s)}}function L9(t,e){let r=t.match(/^(\s+)(?:```)/);if(r===null)return e;let n=r[1];return e.split(`
`).map(i=>{let a=i.match(/^\s+/);if(a===null)return i;let[s]=a;return s.length>=n.length?i.slice(n.length):i}).join(`
`)}var $h=class{constructor(e){this.options=e||zl}space(e){let r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){let r=this.rules.block.code.exec(e);if(r){let n=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Zh(n,`
`)}}}fences(e){let r=this.rules.block.fences.exec(e);if(r){let n=r[0],i=L9(n,r[3]||"");return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline._escapes,"$1"):r[2],text:i}}}heading(e){let r=this.rules.block.heading.exec(e);if(r){let n=r[2].trim();if(/#$/.test(n)){let i=Zh(n,"#");(this.options.pedantic||!i||/ $/.test(i))&&(n=i.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:r[0]}}blockquote(e){let r=this.rules.block.blockquote.exec(e);if(r){let n=r[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;let a=this.lexer.blockTokens(n);return this.lexer.state.top=i,{type:"blockquote",raw:r[0],tokens:a,text:n}}}list(e){let r=this.rules.block.list.exec(e);if(r){let n,i,a,s,l,u,f,d,h,g,m,y,_=r[1].trim(),w=_.length>1,E={type:"list",raw:"",ordered:w,start:w?+_.slice(0,-1):"",loose:!1,items:[]};_=w?`\\d{1,9}\\${_.slice(-1)}`:`\\${_}`,this.options.pedantic&&(_=w?_:"[*+-]");let T=new RegExp(`^( {0,3}${_})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(y=!1,!(!(r=T.exec(e))||this.rules.block.hr.test(e)));){if(n=r[0],e=e.substring(n.length),d=r[2].split(`
`,1)[0],h=e.split(`
`,1)[0],this.options.pedantic?(s=2,m=d.trimLeft()):(s=r[2].search(/[^ ]/),s=s>4?1:s,m=d.slice(s),s+=r[1].length),u=!1,!d&&/^ *$/.test(h)&&(n+=h+`
`,e=e.substring(h.length+1),y=!0),!y){let O=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),I=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),B=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),z=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;e&&(g=e.split(`
`,1)[0],d=g,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(B.test(d)||z.test(d)||O.test(d)||I.test(e)));){if(d.search(/[^ ]/)>=s||!d.trim())m+=`
`+d.slice(s);else if(!u)m+=`
`+d;else break;!u&&!d.trim()&&(u=!0),n+=g+`
`,e=e.substring(g.length+1)}}E.loose||(f?E.loose=!0:/\n *\n *$/.test(n)&&(f=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(m),i&&(a=i[0]!=="[ ] ",m=m.replace(/^\[[ xX]\] +/,""))),E.items.push({type:"list_item",raw:n,task:!!i,checked:a,loose:!1,text:m}),E.raw+=n}E.items[E.items.length-1].raw=n.trimRight(),E.items[E.items.length-1].text=m.trimRight(),E.raw=E.raw.trimRight();let x=E.items.length;for(l=0;l<x;l++)if(this.lexer.state.top=!1,E.items[l].tokens=this.lexer.blockTokens(E.items[l].text,[]),!E.loose){let O=E.items[l].tokens.filter(B=>B.type==="space"),I=O.length>0&&O.some(B=>/\n.*\n/.test(B.raw));E.loose=I}if(E.loose)for(l=0;l<x;l++)E.items[l].loose=!0;return E}}html(e){let r=this.rules.block.html.exec(e);if(r){let n={type:"html",raw:r[0],pre:!this.options.sanitizer&&(r[1]==="pre"||r[1]==="script"||r[1]==="style"),text:r[0]};if(this.options.sanitize){let i=this.options.sanitizer?this.options.sanitizer(r[0]):rn(r[0]);n.type="paragraph",n.text=i,n.tokens=this.lexer.inline(i)}return n}}def(e){let r=this.rules.block.def.exec(e);if(r){let n=r[1].toLowerCase().replace(/\s+/g," "),i=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",a=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline._escapes,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:i,title:a}}}table(e){let r=this.rules.block.table.exec(e);if(r){let n={type:"table",header:$2(r[1]).map(i=>({text:i})),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(n.header.length===n.align.length){n.raw=r[0];let i=n.align.length,a,s,l,u;for(a=0;a<i;a++)/^ *-+: *$/.test(n.align[a])?n.align[a]="right":/^ *:-+: *$/.test(n.align[a])?n.align[a]="center":/^ *:-+ *$/.test(n.align[a])?n.align[a]="left":n.align[a]=null;for(i=n.rows.length,a=0;a<i;a++)n.rows[a]=$2(n.rows[a],n.header.length).map(f=>({text:f}));for(i=n.header.length,s=0;s<i;s++)n.header[s].tokens=this.lexer.inline(n.header[s].text);for(i=n.rows.length,s=0;s<i;s++)for(u=n.rows[s],l=0;l<u.length;l++)u[l].tokens=this.lexer.inline(u[l].text);return n}}}lheading(e){let r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){let r=this.rules.block.paragraph.exec(e);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){let r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:rn(r[1])}}tag(e){let r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):rn(r[0]):r[0]}}link(e){let r=this.rules.inline.link.exec(e);if(r){let n=r[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;let s=Zh(n.slice(0,-1),"\\");if((n.length-s.length)%2==0)return}else{let s=O9(r[2],"()");if(s>-1){let u=(r[0].indexOf("!")===0?5:4)+r[1].length+s;r[2]=r[2].substring(0,s),r[0]=r[0].substring(0,u).trim(),r[3]=""}}let i=r[2],a="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],a=s[3])}else a=r[3]?r[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(n)?i=i.slice(1):i=i.slice(1,-1)),rk(r,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},r[0],this.lexer)}}reflink(e,r){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(/\s+/g," ");if(i=r[i.toLowerCase()],!i){let a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return rk(n,i,n[0],this.lexer)}}emStrong(e,r,n=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&n.match(/[\p{L}\p{N}]/u))return;let a=i[1]||i[2]||"";if(!a||a&&(n===""||this.rules.inline.punctuation.exec(n))){let s=i[0].length-1,l,u,f=s,d=0,h=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,r=r.slice(-1*e.length+s);(i=h.exec(r))!=null;){if(l=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!l)continue;if(u=l.length,i[3]||i[4]){f+=u;continue}else if((i[5]||i[6])&&s%3&&!((s+u)%3)){d+=u;continue}if(f-=u,f>0)continue;u=Math.min(u,u+f+d);let g=e.slice(0,s+i.index+(i[0].length-l.length)+u);if(Math.min(s,u)%2){let y=g.slice(1,-1);return{type:"em",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}let m=g.slice(2,-2);return{type:"strong",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){let r=this.rules.inline.code.exec(e);if(r){let n=r[2].replace(/\n/g," "),i=/[^ ]/.test(n),a=/^ /.test(n)&&/ $/.test(n);return i&&a&&(n=n.substring(1,n.length-1)),n=rn(n,!0),{type:"codespan",raw:r[0],text:n}}}br(e){let r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){let r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e,r){let n=this.rules.inline.autolink.exec(e);if(n){let i,a;return n[2]==="@"?(i=rn(this.options.mangle?r(n[1]):n[1]),a="mailto:"+i):(i=rn(n[1]),a=i),{type:"link",raw:n[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}url(e,r){let n;if(n=this.rules.inline.url.exec(e)){let i,a;if(n[2]==="@")i=rn(this.options.mangle?r(n[0]):n[0]),a="mailto:"+i;else{let s;do s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(s!==n[0]);i=rn(n[0]),n[1]==="www."?a="http://"+n[0]:a=n[0]}return{type:"link",raw:n[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,r){let n=this.rules.inline.text.exec(e);if(n){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):rn(n[0]):n[0]:i=rn(this.options.smartypants?r(n[0]):n[0]),{type:"text",raw:n[0],text:i}}}},je={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Jh,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};je._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;je._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;je.def=er(je.def).replace("label",je._label).replace("title",je._title).getRegex();je.bullet=/(?:[*+-]|\d{1,9}[.)])/;je.listItemStart=er(/^( *)(bull) */).replace("bull",je.bullet).getRegex();je.list=er(je.list).replace(/bull/g,je.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+je.def.source+")").getRegex();je._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";je._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;je.html=er(je.html,"i").replace("comment",je._comment).replace("tag",je._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();je.paragraph=er(je._paragraph).replace("hr",je.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",je._tag).getRegex();je.blockquote=er(je.blockquote).replace("paragraph",je.paragraph).getRegex();je.normal=Pi({},je);je.gfm=Pi({},je.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});je.gfm.table=er(je.gfm.table).replace("hr",je.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",je._tag).getRegex();je.gfm.paragraph=er(je._paragraph).replace("hr",je.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",je.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",je._tag).getRegex();je.pedantic=Pi({},je.normal,{html:er(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",je._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Jh,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:er(je.normal._paragraph).replace("hr",je.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",je.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Be={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Jh,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Jh,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Be._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Be.punctuation=er(Be.punctuation).replace(/punctuation/g,Be._punctuation).getRegex();Be.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Be.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;Be._comment=er(je._comment).replace("(?:-->|$)","-->").getRegex();Be.emStrong.lDelim=er(Be.emStrong.lDelim).replace(/punct/g,Be._punctuation).getRegex();Be.emStrong.rDelimAst=er(Be.emStrong.rDelimAst,"g").replace(/punct/g,Be._punctuation).getRegex();Be.emStrong.rDelimUnd=er(Be.emStrong.rDelimUnd,"g").replace(/punct/g,Be._punctuation).getRegex();Be._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Be._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Be._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Be.autolink=er(Be.autolink).replace("scheme",Be._scheme).replace("email",Be._email).getRegex();Be._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Be.tag=er(Be.tag).replace("comment",Be._comment).replace("attribute",Be._attribute).getRegex();Be._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Be._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Be._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Be.link=er(Be.link).replace("label",Be._label).replace("href",Be._href).replace("title",Be._title).getRegex();Be.reflink=er(Be.reflink).replace("label",Be._label).replace("ref",je._label).getRegex();Be.nolink=er(Be.nolink).replace("ref",je._label).getRegex();Be.reflinkSearch=er(Be.reflinkSearch,"g").replace("reflink",Be.reflink).replace("nolink",Be.nolink).getRegex();Be.normal=Pi({},Be);Be.pedantic=Pi({},Be.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:er(/^!?\[(label)\]\((.*?)\)/).replace("label",Be._label).getRegex(),reflink:er(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Be._label).getRegex()});Be.gfm=Pi({},Be.normal,{escape:er(Be.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});Be.gfm.url=er(Be.gfm.url,"i").replace("email",Be.gfm._extended_email).getRegex();Be.breaks=Pi({},Be.gfm,{br:er(Be.br).replace("{2,}","*").getRegex(),text:er(Be.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function P9(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function nk(t){let e="",r,n,i=t.length;for(r=0;r<i;r++)n=t.charCodeAt(r),Math.random()>.5&&(n="x"+n.toString(16)),e+="&#"+n+";";return e}var ua=class{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||zl,this.options.tokenizer=this.options.tokenizer||new $h,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={block:je.normal,inline:Be.normal};this.options.pedantic?(r.block=je.pedantic,r.inline=Be.pedantic):this.options.gfm&&(r.block=je.gfm,this.options.breaks?r.inline=Be.breaks:r.inline=Be.gfm),this.tokenizer.rules=r}static get rules(){return{block:je,inline:Be}}static lex(e,r){return new ua(r).lex(e)}static lexInline(e,r){return new ua(r).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let r;for(;r=this.inlineQueue.shift();)this.inlineTokens(r.src,r.tokens);return this.tokens}blockTokens(e,r=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,u,f)=>u+"    ".repeat(f.length));let n,i,a,s;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(n=l.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0,u=e.slice(1),f;this.options.extensions.startBlock.forEach(function(d){f=d.call({lexer:this},u),typeof f=="number"&&f>=0&&(l=Math.min(l,f))}),l<1/0&&l>=0&&(a=e.substring(0,l+1))}if(this.state.top&&(n=this.tokenizer.paragraph(a))){i=r[r.length-1],s&&i.type==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n),s=a.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&i.type==="text"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let n,i,a,s=e,l,u,f;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)d.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,l.index)+"["+tk("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,l.index)+"["+tk("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(s))!=null;)s=s.slice(0,l.index+l[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(u||(f=""),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(n=d.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),i=r[r.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(n=this.tokenizer.emStrong(e,s,f)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.autolink(e,nk)){e=e.substring(n.raw.length),r.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e,nk))){e=e.substring(n.raw.length),r.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,h=e.slice(1),g;this.options.extensions.startInline.forEach(function(m){g=m.call({lexer:this},h),typeof g=="number"&&g>=0&&(d=Math.min(d,g))}),d<1/0&&d>=0&&(a=e.substring(0,d+1))}if(n=this.tokenizer.inlineText(a,P9)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(f=n.raw.slice(-1)),u=!0,i=r[r.length-1],i&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return r}},ep=class{constructor(e){this.options=e||zl}code(e,r,n){let i=(r||"").match(/\S*/)[0];if(this.options.highlight){let a=this.options.highlight(e,i);a!=null&&a!==e&&(n=!0,e=a)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+rn(i)+'">'+(n?e:rn(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:rn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,r,n,i){if(this.options.headerIds){let a=this.options.headerPrefix+i.slug(n);return`<h${r} id="${a}">${e}</h${r}>
`}return`<h${r}>${e}</h${r}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,r,n){let i=r?"ol":"ul",a=r&&n!==1?' start="'+n+'"':"";return"<"+i+a+`>
`+e+"</"+i+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,r){let n=r.header?"th":"td";return(r.align?`<${n} align="${r.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,r,n){if(e=Z2(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let i='<a href="'+e+'"';return r&&(i+=' title="'+r+'"'),i+=">"+n+"</a>",i}image(e,r,n){if(e=Z2(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let i=`<img src="${e}" alt="${n}"`;return r&&(i+=` title="${r}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}},xy=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,r,n){return""+n}image(e,r,n){return""+n}br(){return""}},Sy=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,r){let n=e,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[e];do i++,n=e+"-"+i;while(this.seen.hasOwnProperty(n))}return r||(this.seen[e]=i,this.seen[n]=0),n}slug(e,r={}){let n=this.serialize(e);return this.getNextSafeSlug(n,r.dryrun)}},Mi=class{constructor(e){this.options=e||zl,this.options.renderer=this.options.renderer||new ep,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new xy,this.slugger=new Sy}static parse(e,r){return new Mi(r).parse(e)}static parseInline(e,r){return new Mi(r).parseInline(e)}parse(e,r=!0){let n="",i,a,s,l,u,f,d,h,g,m,y,_,w,E,T,x,O,I,B,z=e.length;for(i=0;i<z;i++){if(m=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]&&(B=this.options.extensions.renderers[m.type].call({parser:this},m),B!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type))){n+=B||"";continue}switch(m.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(m.tokens),m.depth,J2(this.parseInline(m.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(m.text,m.lang,m.escaped);continue}case"table":{for(h="",d="",l=m.header.length,a=0;a<l;a++)d+=this.renderer.tablecell(this.parseInline(m.header[a].tokens),{header:!0,align:m.align[a]});for(h+=this.renderer.tablerow(d),g="",l=m.rows.length,a=0;a<l;a++){for(f=m.rows[a],d="",u=f.length,s=0;s<u;s++)d+=this.renderer.tablecell(this.parseInline(f[s].tokens),{header:!1,align:m.align[s]});g+=this.renderer.tablerow(d)}n+=this.renderer.table(h,g);continue}case"blockquote":{g=this.parse(m.tokens),n+=this.renderer.blockquote(g);continue}case"list":{for(y=m.ordered,_=m.start,w=m.loose,l=m.items.length,g="",a=0;a<l;a++)T=m.items[a],x=T.checked,O=T.task,E="",T.task&&(I=this.renderer.checkbox(x),w?T.tokens.length>0&&T.tokens[0].type==="paragraph"?(T.tokens[0].text=I+" "+T.tokens[0].text,T.tokens[0].tokens&&T.tokens[0].tokens.length>0&&T.tokens[0].tokens[0].type==="text"&&(T.tokens[0].tokens[0].text=I+" "+T.tokens[0].tokens[0].text)):T.tokens.unshift({type:"text",text:I}):E+=I),E+=this.parse(T.tokens,w),g+=this.renderer.listitem(E,O,x);n+=this.renderer.list(g,y,_);continue}case"html":{n+=this.renderer.html(m.text);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(m.tokens));continue}case"text":{for(g=m.tokens?this.parseInline(m.tokens):m.text;i+1<z&&e[i+1].type==="text";)m=e[++i],g+=`
`+(m.tokens?this.parseInline(m.tokens):m.text);n+=r?this.renderer.paragraph(g):g;continue}default:{let F='Token with "'+m.type+'" type was not found.';if(this.options.silent){console.error(F);return}else throw new Error(F)}}}return n}parseInline(e,r){r=r||this.renderer;let n="",i,a,s,l=e.length;for(i=0;i<l;i++){if(a=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(s=this.options.extensions.renderers[a.type].call({parser:this},a),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type))){n+=s||"";continue}switch(a.type){case"escape":{n+=r.text(a.text);break}case"html":{n+=r.html(a.text);break}case"link":{n+=r.link(a.href,a.title,this.parseInline(a.tokens,r));break}case"image":{n+=r.image(a.href,a.title,a.text);break}case"strong":{n+=r.strong(this.parseInline(a.tokens,r));break}case"em":{n+=r.em(this.parseInline(a.tokens,r));break}case"codespan":{n+=r.codespan(a.text);break}case"br":{n+=r.br();break}case"del":{n+=r.del(this.parseInline(a.tokens,r));break}case"text":{n+=r.text(a.text);break}default:{let u='Token with "'+a.type+'" type was not found.';if(this.options.silent){console.error(u);return}else throw new Error(u)}}}return n}};function Ke(t,e,r){if(typeof t=="undefined"||t===null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof e=="function"&&(r=e,e=null),e=Pi({},Ke.defaults,e||{}),ek(e),r){let i=e.highlight,a;try{a=ua.lex(t,e)}catch(u){return r(u)}let s=function(u){let f;if(!u)try{e.walkTokens&&Ke.walkTokens(a,e.walkTokens),f=Mi.parse(a,e)}catch(d){u=d}return e.highlight=i,u?r(u):r(null,f)};if(!i||i.length<3||(delete e.highlight,!a.length))return s();let l=0;Ke.walkTokens(a,function(u){u.type==="code"&&(l++,setTimeout(()=>{i(u.text,u.lang,function(f,d){if(f)return s(f);d!=null&&d!==u.text&&(u.text=d,u.escaped=!0),l--,l===0&&s()})},0))}),l===0&&s();return}function n(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+rn(i.message+"",!0)+"</pre>";throw i}try{let i=ua.lex(t,e);if(e.walkTokens){if(e.async)return Promise.all(Ke.walkTokens(i,e.walkTokens)).then(()=>Mi.parse(i,e)).catch(n);Ke.walkTokens(i,e.walkTokens)}return Mi.parse(i,e)}catch(i){n(i)}}Ke.options=Ke.setOptions=function(t){return Pi(Ke.defaults,t),C9(Ke.defaults),Ke};Ke.getDefaults=W2;Ke.defaults=zl;Ke.use=function(...t){let e=Ke.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(r=>{let n=Pi({},r);if(n.async=Ke.defaults.async||n.async,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){let a=e.renderers[i.name];a?e.renderers[i.name]=function(...s){let l=i.renderer.apply(this,s);return l===!1&&(l=a.apply(this,s)),l}:e.renderers[i.name]=i.renderer}if(i.tokenizer){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[i.level]?e[i.level].unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),n.extensions=e),r.renderer){let i=Ke.defaults.renderer||new ep;for(let a in r.renderer){let s=i[a];i[a]=(...l)=>{let u=r.renderer[a].apply(i,l);return u===!1&&(u=s.apply(i,l)),u}}n.renderer=i}if(r.tokenizer){let i=Ke.defaults.tokenizer||new $h;for(let a in r.tokenizer){let s=i[a];i[a]=(...l)=>{let u=r.tokenizer[a].apply(i,l);return u===!1&&(u=s.apply(i,l)),u}}n.tokenizer=i}if(r.walkTokens){let i=Ke.defaults.walkTokens;n.walkTokens=function(a){let s=[];return s.push(r.walkTokens.call(this,a)),i&&(s=s.concat(i.call(this,a))),s}}Ke.setOptions(n)})};Ke.walkTokens=function(t,e){let r=[];for(let n of t)switch(r=r.concat(e.call(Ke,n)),n.type){case"table":{for(let i of n.header)r=r.concat(Ke.walkTokens(i.tokens,e));for(let i of n.rows)for(let a of i)r=r.concat(Ke.walkTokens(a.tokens,e));break}case"list":{r=r.concat(Ke.walkTokens(n.items,e));break}default:Ke.defaults.extensions&&Ke.defaults.extensions.childTokens&&Ke.defaults.extensions.childTokens[n.type]?Ke.defaults.extensions.childTokens[n.type].forEach(function(i){r=r.concat(Ke.walkTokens(n[i],e))}):n.tokens&&(r=r.concat(Ke.walkTokens(n.tokens,e)))}return r};Ke.parseInline=function(t,e){if(typeof t=="undefined"||t===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");e=Pi({},Ke.defaults,e||{}),ek(e);try{let r=ua.lexInline(t,e);return e.walkTokens&&Ke.walkTokens(r,e.walkTokens),Mi.parseInline(r,e)}catch(r){if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+rn(r.message+"",!0)+"</pre>";throw r}};Ke.Parser=Mi;Ke.parser=Mi.parse;Ke.Renderer=ep;Ke.TextRenderer=xy;Ke.Lexer=ua;Ke.lexer=ua.lex;Ke.Tokenizer=$h;Ke.Slugger=Sy;Ke.parse=Ke;var Z$=Ke.options,$$=Ke.setOptions,eee=Ke.use,tee=Ke.walkTokens,ree=Ke.parseInline;var nee=Mi.parse,iee=ua.lex;var ik=(t,e,r)=>{if(t<0&&(t=e.length+t),!(t>=e.length&&t>=0))return t+1<e.length?r.substring(e[t].position.start.offset,e[t+1].position.start.offset-1):r.substring(e[t].position.start.offset,r.length)},ak=t=>M(void 0,null,function*(){var h,g,m,y,_,w;let e=st.getInstance(),r=yield app.vault.adapter.read((0,Ty.normalizePath)(t.file.path)),n=(g=Bc.default.cloneDeep((h=app==null?void 0:app.metadataCache)==null?void 0:h.getFileCache(t.file).frontmatter))!=null?g:{};console.log(app.metadataCache.getFileCache(t.file));let i=/\[([^[]*)::([^[]*)\]/gm,a,s=[];do a=i.exec(r),s.push(a);while(a);if(s.forEach(E=>{E&&Bc.default.set(n,E[1].trim(),E[2].trim())}),!n){wt("No frontmatter found in note",!0);return}let l=M9(n);for(let[E,T]of Object.entries(l)){let x=Bc.default.get(n,E,null);x&&Bc.default.set(n,T,x)}let u=yield Or(),f=n.position;delete n.position;let d=u.find(E=>{var T,x;return E.id==((T=n.calendar)!=null?T:e.settings.defaultCalendar)||E.summary==((x=n.calendar)!=null?x:e.settings.defaultCalendar)});if(!d){wt("Event not created. Calendar not defined. Set a default calendar in the settings or set the field calendar");return}if(n.parent=d,n.summary||(n.summary=t.file.basename),n.description){if(typeof n.description=="string"){if(((m=n.description)==null?void 0:m.toLowerCase())=="header"&&(n.description="",((y=app==null?void 0:app.metadataCache)==null?void 0:y.getFileCache(t.file).headings).forEach(T=>{n.description+=`<h${T.level}>${T.heading}</h${T.level}>`})),((_=n.description)==null?void 0:_.toLowerCase())=="file"){let E=Ke.parse(r.substring(f.end.offset));n.description=E}}else if(typeof n.description=="object"){let E=(w=app==null?void 0:app.metadataCache)==null?void 0:w.getFileCache(t.file).headings,T=n.description.map(O=>{if(typeof O=="number"){let I=ik(O,E,r);return I||-1}else if(typeof O=="object"){if(O.length!=2)return-1;let[I,B]=O;if(I<0&&(I=E.length+I),B<0&&(B=E.length+B),I>=E.length||B>=E.length||I<0||B<0||I>B)return-1;let z="";for(let F=I;F<=B;F++){let q=ik(F,E,r);if(!q)return-1;z+=q+`
`}return z}});if(T.contains(-1)){wt("Event not created.A Header in the header list is out of range",!0);return}let x=Ke.parse(T.join(`
`));n.description=x}}if(!n.start&&!n.startTime&&(n.start={date:window.moment()}),!n.end&&!n.endTime&&(n.end=n.start),n.start.date?(n.start.date=window.moment(n.start.date).format("YYYY-MM-DD"),n.end.date=window.moment(n.end.date).clone().add(1,"day").format("YYYY-MM-DD")):(n.start.dateTime=window.moment(n.start.dateTime).format(),n.end.dateTime=window.moment(n.end.dateTime).format()),n.recurrence)try{let E=tA.fromText(n.recurrence),T=new _o;T.rrule(E),n.recurrence=T.valueOf()}catch(E){wt("Event not created. Error in recurrence text.",!0);return}return n}),M9=t=>{var r;let e=new Map;if(typeof t.mapping=="string"){t.mapping.endsWith(".md")||(t.mapping+=".md");let n=(0,Ty.normalizePath)(t.mapping),i=app.vault.getAbstractFileByPath(n);if(!i)return wt(`Mapping Error, file "${n}" not found.`),e;if(t=(r=app==null?void 0:app.metadataCache)==null?void 0:r.getFileCache(i).frontmatter,!t)return wt(`Mapping Error, file "${n}" does not contain frontmatter.`),e}return t.mapping?t.mapping:e};var U9={googleClientId:"",googleClientSecret:"",googleRefreshToken:"",useCustomClient:!0,googleOAuthServer:"https://obsidian-google-calendar.vercel.app",refreshInterval:10,showNotice:!0,autoCreateEventNotes:!0,autoCreateEventKeepOpen:!1,importStartOffset:1,importEndOffset:1,defaultCalendar:"",calendarBlackList:[],insertTemplates:[],webViewDefaultColorMode:Bh(),useDefaultTemplate:!1,defaultTemplate:"",defaultFolder:app.vault.config.newFileFolderPath,activateDailyNoteAddon:!1,dailyNoteDotColor:"#6aa1d8",useWeeklyNotes:!1,debugMode:!1,timelineHourFormat:0,atAnnotationEnabled:!0,usDateFormat:!0},st=class extends Ql.Plugin{constructor(){super(...arguments);this.events=[];this.initView=e=>M(this,null,function*(){this.app.workspace.getLeavesOfType(e).length===0&&(yield this.app.workspace.getRightLeaf(!1).setViewState({type:e})),this.app.workspace.revealLeaf(this.app.workspace.getLeavesOfType(e).first())});this.onLayoutReady=()=>{var n;uc(this),uo(this);let e=(n=this.app.internalPlugins)==null?void 0:n.plugins.templates;e&&e.enabled&&(this.coreTemplatePlugin=e);let r=this.app.plugins.plugins["templater-obsidian"];r&&r._loaded&&(this.templaterPlugin=r),ty(this)}}static getInstance(){return st.instance}onload(){return M(this,null,function*(){st.instance=this,this.api=new by().make(),yield this.loadSettings(),this.app.workspace.onLayoutReady(this.onLayoutReady),this.events.push(this.app.vault.on("create",()=>{uc(this),uo(this)})),this.events.push(this.app.vault.on("delete",()=>{uc(this),uo(this)})),this.events.push(this.app.vault.on("rename",()=>{uc(this),uo(this)})),this.events.forEach(e=>{this.registerEvent(e)}),this.registerMarkdownCodeBlockProcessor("gEvent",(e,r,n)=>E2(e,r,n)),this.registerEditorSuggest(new wy(this.app)),this.registerView(Ac,e=>new gy(e)),this.registerView(kc,e=>new my(e)),this.registerView(Ic,e=>new yy(e)),this.registerView(Rc,e=>new vy(e)),this.registerEvent(this.app.workspace.on("editor-change",e=>{A2(e,this),I2(e)})),this.addCommand({id:"open-google-calendar-timline-view",name:"Open Google Calendar timeline view",callback:()=>this.initView(Ac)}),this.addCommand({id:"open-google-calendar-month-view",name:"Open Google Calendar month view",callback:()=>this.initView(kc)}),this.addCommand({id:"open-google-calendar-web-view",name:"Open Google Calendar web view",callback:()=>this.initView(Ic)}),this.addCommand({id:"open-google-calendar-schedule-view",name:"Open Google Calendar schedule view",callback:()=>this.initView(Rc)}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:e=>{let r=zt();if(e)return r;!r||Or().then(n=>{new Nh(n).open()})}}),this.addCommand({id:"create-google-calendar-event",name:"Create Google Calendar Event",checkCallback:e=>{let r=zt();if(e)return r;!r||new gi({start:{},end:{}},()=>{Di()}).open()}}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:e=>{let r=zt();if(e)return r;!r||Or().then(n=>{new Nh(n).open()})}}),this.addCommand({id:"list-google-events",name:"List Google Events",checkCallback:e=>{let r=zt();if(e)return r;!r||dr().then(n=>{new Li(n,"details").open()})}}),this.addCommand({id:"google-calendar-trigger-auto-import",name:"Google Calendar Trigger Auto Import",checkCallback:e=>{let r=zt();if(e)return r;!r||ty(this)}}),this.addCommand({id:"google-calendar-create-event-note",name:"Create Event Note",checkCallback:e=>{let r=zt();if(e)return r;!r||dr().then(n=>{new Li(n,"createNote").open()})}}),this.addCommand({id:"google-calendar-create-event-note-current-event",name:"Create Event Note for current event",checkCallback:e=>{let r=zt();if(e)return r;!r||dr().then(n=>{let i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime),l=window.moment(a.end.dateTime),u=window.moment();return!(u.isBefore(s)||u.isAfter(l))});i.length==0&&(i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime).subtract(1,"hour"),l=window.moment(a.end.dateTime),u=window.moment();return!(u.isBefore(s)||u.isAfter(l))})),i.length==0&&(i=n.filter(a=>!!a.start.date)),i.length==1?this.settings.useDefaultTemplate&&this.settings.defaultFolder&&this.settings.defaultFolder?Ma(i[0],this.settings.defaultFolder,this.settings.defaultTemplate):new Eo(i[0],()=>{}).open():new Li(i,"createNote").open()})}}),this.addCommand({id:"insert-google-event-codeblock",name:"Insert Google Event CodeBlock",editorCallback:e=>{e.replaceRange("```gEvent\ndate: "+window.moment().format("YYYY-MM-DD")+"\ntype: day\n```",e.getCursor())}}),this.addCommand({id:"insert-google-event-template",name:"Insert Google Event Template",editorCallback:e=>{e.replaceRange("{{gEvent.}}",e.getCursor());let r=e.getCursor();r.ch+="{{gEvent.".length,e.setCursor(r)}}),this.addCommand({id:"insert-google-events",name:"Insert Google events",editorCheckCallback:(e,r)=>{let n=zt();if(e)return n;!n||new Cy(r).open()}}),this.addCommand({id:"create-google-calendar-event-from-frontmatter ",name:"Create Google Calendar Event from frontmatter",editorCheckCallback:(e,r,n)=>{let i=zt();if(e)return i;!i||!n.file||ak(n).then(a=>{!a||xh(a)})}}),this.addCommand({id:"copy-google-calendar-refresh-token",name:"Copy Google Calendar Refresh Token to Clipboard",callback:()=>{let e=wa();if(e==null||e==""){new Ql.Notice("No Refresh Token. Please Login.");return}navigator.clipboard.writeText(e),new Ql.Notice("Token copied")}}),this.settingsTab=new Gm(this.app,this),this.addSettingTab(this.settingsTab),this.registerObsidianProtocolHandler("googleLogin",e=>M(this,null,function*(){this.settings.useCustomClient||(Tf(e.uid),Ja(e.at),Za(+new Date+36e5),new Ql.Notice("Login successful!"),this.settingsTab.display())}))})}onunload(){this.app.workspace.detachLeavesOfType(Ac),this.app.workspace.detachLeavesOfType(kc),this.app.workspace.detachLeavesOfType(Ic),this.app.workspace.detachLeavesOfType(Rc);for(let e in this.events)this.app.vault.offref(e);this.events=[]}loadSettings(){return M(this,null,function*(){this.settings=Object.assign({},U9,yield this.loadData())})}saveSettings(){return M(this,null,function*(){yield this.saveData(this.settings)})}};
/*!
 * rrule.js - Library for working with recurrence rules for calendar dates.
 * https://github.com/jakubroztocil/rrule
 *
 * Copyright 2010, Jakub Roztocil and Lars Schoning
 * Licenced under the BSD licence.
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 * Based on:
 * python-dateutil - Extensions to the standard Python datetime module.
 * Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
 * Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 */
/*!
* rrule.js - Library for working with recurrence rules for calendar dates.
* https://github.com/jakubroztocil/rrule
*
* Copyright 2010, Jakub Roztocil and Lars Schoning
* Licenced under the BSD licence.
* https://github.com/jakubroztocil/rrule/blob/master/LICENCE
*
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
